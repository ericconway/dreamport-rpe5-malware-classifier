var slideexperiencelite;(function(n){function u(n,t,r,u,f,e,o,s,h,c){var l=new i(n,t,r,u,e,o,s,h,c);l.init()}function t(){sj_evt.fire("lazyldimg")}var i=function(){function n(n,t,i,r,u,f,e,o,s){if(this.swipethreshold=50,this.activeslideindex=0,this.scrolling=!1,this.id=n,this.controlid=t,this.bar=_ge(t),this.control=_ge(this.bar.id+"c"),this.viewport=this.getviewportparent(this.bar)||this.bar.parentelement,this.showchevronalltime=u,this.hidechevronsonstart=o,this.paddingbuffer=s&&i?this.computepaddingbuffer():0,this.appns=this.control.getattribute("data-appns"),this.kvalue=this.control.getattribute("data-k"),this.slideexptype=i?"carousel":"slideshow",this.sliderightmargin=r,this.totalslides=this.bar.childelementcount,this.totalslides<=0)throw"no slides was found";this.initialviewportwidth=this.viewportwidth();this.getextrableedingmargin();this.enablecarouselseemore=f;this.shownslideindex=e;this.statekey=this.control.getattribute("data-stk")}return n.prototype.computepaddingbuffer=function(){if(_w.getcomputedstyle){var n=_w.getcomputedstyle(this.viewport);return parseint(n.paddingtop)+parseint(n.paddingbottom)}return 0},n.prototype.enablenativescrolling=function(){var t,n,i,u,r;this.viewport.getattribute("nativescrollingenabled")!=="1"&&(this.viewport.parentelement.style.overflow="hidden",t=this.viewport.offsetheight,t===0?(lib.cssclass.add(this.viewport,"scrollbar"),this.viewport.parentelement.style.position="relative",n=this.getviewportparent(this.bar)||this.bar.parentelement,i=n.clonenode(!0),i.style.opacity="0",i.style.overflow="hidden",n.style.position="absolute",n.style.width="100%",n.style.top="0",n.parentelement.insertbefore(i,n.parentelement.children[0]),this.bar.style.paddingbottom="10px"):(this.viewport.parentelement.style.height=""+t+"px",this.bar.style.height=""+this.viewportheighttobarheight(t)+"px",lib.cssclass.add(this.viewport,"scrollbar"),u=this.viewport.offsetheight,this.viewport.style.height=""+u+"px",this.viewport.style.marginbottom="-30px",this.viewport.style.paddingbottom="30px",this.enablecarouselseemore&&(r=_ge(this.controlid+"_carousel_seemore"),r.style.height=""+t+"px",r.style.lineheight=""+t+"px")),this.viewport.setattribute("nativescrollingenabled","1"))},n.prototype.init=function(){var n=this,i,u,f,t,e;this.enablenativescrolling();sj_be(this.viewport,"scroll",function(){n.onscroll()});swipe.onswipe(function(){log.log("left","slideexp","swipe",!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue)},function(){log.log("right","slideexp","swipe",!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue)},this.control,this.swipethreshold,function(){},function(t){n.isleft=t>0;n.isright=t<0;log.log("noop","slideexp","swipe",!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue)},function(){sj_evt.fire("slideexp_movestart",n.controlid)},!0,!1);sj_be(this.control,"mousedown",function(t){i=t.pagex;u=t.pagey;t.preventdefault&&t.preventdefault();var r=t.pagex,f=function(t){var i=t.pagex-r;n.viewport.scrollleft-=i;r=t.pagex},e=function(){sj_ue(_w,"mousemove",f,!0);sj_ue(_w,"mouseup",e,!0)};sj_be(_w,"mousemove",f,!0);sj_be(_w,"mouseup",e,!0)},!0);f=function(n){(math.abs(n.pagex-i)>5||math.abs(n.pagey-u)>5)&&n.preventdefault&&n.preventdefault()};sj_be(this.control,"click",f,!0);this.updatemaxscrollleft();orientation.onorientation(function(t){n.updatemaxscrollleft();var i=_ge(n.controlid);i?log.log(t?"landsc":"portrt","slideexp","rotate",!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue):log.log(t?"landsc":"portrt","slideexp","rotate",!1,"type",n.slideexptype,"gee","1","appns",n.appns,"k",n.kvalue);sj_evt.fire("slideexp_rotate",n.controlid,i?null:n.bar)});for(sj_be(this.control,"mouseover",function(){n.enablechevronsonslideexperienceinvisibility();sj_evt.fire("slideexp_mouseover_show",n.controlid)}),sj_be(this.control,"mouseout",function(){n.showchevronalltime||sj_evt.fire("slideexp_mouseout_hide",n.controlid)}),sj_evt.bind("slideexp_slideprev",function(t){n.iseventforme(t)&&n.slideprev()}),sj_evt.bind("slideexp_slidenext",function(t){n.iseventforme(t)&&n.slidenext()}),sj_evt.bind("slideexp_slidetoindex",function(t){if(n.iseventforme(t)){var i=t[2];log.log("slideto","slideexp","id"+i,!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue)}},!0),t=0;t<this.bar.childelementcount;++t)sj_be(this.bar.children[t],"keydown",function(t){return function(i){i.keycode===37&&t!==0?n.slidetoindex(t-1,!0):i.keycode===39&&t!==n.bar.childelementcount-1&&n.slidetoindex(t+1,!0)}}(t));this.showchevronalltime&&!this.hidechevronsonstart&&(this.updatechevrons(),sj_evt.fire("slideexp_mouseover_show",this.controlid));this.updatepager();this.updatechevrons();e=this;r[this.id]=e;sj_evt.fire("slideexp_init_done",this.controlid)},n.prototype.onscroll=function(){var n=this;this.scrolling||(this.scrolling=!0,sb_st(function(){n.updatepager();n.updatechevrons();sj_evt.fire("slideexp_scroll",n.controlid);log.log("scroll","slideexp","scroll",!1,"type",n.slideexptype,"appns",n.appns,"k",n.kvalue);n.scrolling=!1},1e3))},n.prototype.viewportheighttobarheight=function(n){return n-this.paddingbuffer},n.prototype.enablechevronsonslideexperienceinvisibility=function(){this.updatemaxscrollleft();this.updatechevrons()},n.prototype.getelementwidth=function(n){if(_w.getcomputedstyle){var t=_w.getcomputedstyle(n).width;return number(t.substring(0,t.length-2))}return n.scrollwidth},n.prototype.updatemaxscrollleft=function(){this.maxscrollleft=this.viewport.scrollwidth-this.viewport.offsetwidth},n.prototype.firstelementchild=function(n){if(n.firstelementchild)return n.firstelementchild;for(var t=n.firstchild;t;){if(t.nodetype==1)return t;t=t.nextsibling}return null},n.prototype.slidewidth=function(){return this.getelementwidth(this.firstelementchild(this.bar))},n.prototype.viewportwidth=function(){return this.getelementwidth(this.viewport)},n.prototype.iscsstransitionsupported=function(){var n=this.viewport.style,t=n.webkittransition!=null,i=n.moztransition!=null,r=n.otransition!=null;return t||i||r||n.transition!=null},n.prototype.getactiveslide=function(){return math.round(this.viewport.scrollleft/this.slidewidth())},n.prototype.getslide=function(n){return this.bar.children[n]},n.prototype.updatepager=function(n){t();n||(n=this.activeslideindex);sj_evt.fire("pager_updateindex",this.controlid,n)},n.prototype.setslidetabfocus=function(){for(var t,i,n=0;n<this.bar.childelementcount;n++)t=this.bar.children[n],t.removeattribute("tabindex");i=this.bar.children[this.activeslideindex];i.tabindex=0},n.prototype.slideprev=function(){var n;if(!this.isleftmost()){var r=this.slidewidth(),u=this.viewportwidth(),i=r+this.sliderightmargin,f=u%i>=r?1:0,e=math.floor(u/i)+f,o=math.ceil(this.viewport.scrollleft/i),s=math.max(0,o-e);n=s*i;n=math.max(n,0);this.slidetooffset(n);sj_evt.fire("slideexp_slideprev_move",this.controlid);log.log("prev","slideexp","slide",!1,"type",this.slideexptype,"appns",this.appns,"k",this.kvalue);t()}},n.prototype.slidenext=function(){var n;if(!this.isrightmost()){var r=this.slidewidth(),u=this.viewportwidth(),i=r+this.sliderightmargin,f=(this.viewport.scrollleft+u)%i>=r?1:0,e=math.floor((this.viewport.scrollleft+u)/i)+f;n=e*i;n=math.min(n,this.maxscrollleft);this.slidetooffset(n);sj_evt.fire("slideexp_slidenext_move",this.controlid);log.log("next","slideexp","slide",!1,"type",this.slideexptype,"appns",this.appns,"k",this.kvalue);t()}},n.prototype.slidetoindex=function(n,i,r){var u=this,f;(i===void 0&&(i=!1),r===void 0&&(r=!1),t(),n<0||n>=this.totalslides)||(f=this.slidewidth()*n,this.activeslideindex=n,i&&this.setslidetabfocus(),sb_st(function(){u.slidetooffset(f,i?function(){u.setfocusoncurrentslide()}:null,r)},0),sj_evt.fire("slideexp_toactiveindex",this.controlid,n),t())},n.prototype.getextrableedingmargin=function(){return(!this.extrableedingmargin||this.extrableedingmargin<=0)&&(this.extrableedingmargin=this.viewport.scrollwidth-(this.totalslides*(this.slidewidth()+this.sliderightmargin)-this.sliderightmargin)+math.abs(parseint(getcomputedstyle(this.bar).marginleft))),this.extrableedingmargin},n.prototype.setfocusoncurrentslide=function(){var n=this.bar.children[this.activeslideindex];n.focus()},n.prototype.slidetooffset=function(n,t,i){t===void 0&&(t=null);i===void 0&&(i=!1);this.updatemaxscrollleft();var r=this.maxscrollleft;n<0?n=0:n>r&&(n=r);this.updatepager();i?(this.viewport.scrollleft=n,t&&t()):this.iscsstransitionsupported()&&this.slidetooffsetusingtransition(n,t)},n.prototype.slidetooffsetusingtransition=function(n,t){var i=this,u,r;if(t===void 0&&(t=null),u=n-this.viewport.scrollleft,u===0){t&&t();return}r=function(){lib.cssclass.remove(i.bar,"anim");i.bar.style.transition="x";i.bar.style.marginleft="";i.viewport.scrollleft=n;i.updatechevrons();sj_ue(i.bar,"transitionend",r);sj_ue(i.bar,"webkittransitionend",r);sj_ue(i.bar,"otransitionend",r);t&&t()};sj_be(this.bar,"transitionend",r);sj_be(this.bar,"webkittransitionend",r);sj_be(this.bar,"otransitionend",r);this.bar.style.transition="";lib.cssclass.add(this.bar,"anim");this.bar.style.marginleft=""+-u+"px"},n.prototype.isleftmost=function(){return this.updatemaxscrollleft(),this.viewport.scrollleft<=0},n.prototype.isrightmost=function(){return this.updatemaxscrollleft(),math.ceil(this.viewport.scrollleft)>=this.maxscrollleft},n.prototype.updatechevrons=function(){if(t(),this.isleftmost()&&this.isrightmost()){sj_evt.fire("slideexp_leftrightmost",this.controlid);return}if(this.isleftmost()){sj_evt.fire("slideexp_leftmost",this.controlid);return}if(this.isrightmost()){sj_evt.fire("slideexp_rightmost",this.controlid);return}sj_evt.fire("slideexp_middle",this.controlid)},n.prototype.iseventforme=function(n){var t=n[1];return t==this.controlid||t==this.controlid+"c"},n.prototype.getviewportparent=function(n){return n==null||this.control==n?null:lib.cssclass.contains(n,"b_viewport")?n:this.getviewportparent(n.parentelement)},n}(),r={};n.init=u;sj_evt.fire("slideexperiencelite_init",n)})(slideexperiencelite||(slideexperiencelite={}))