webpackjsonp([0],{"+71d":function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dm/dm_avatar":i("2g5l")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n'),s.b(s.rp(" "),s.fl()},partials:{" 0?this.addfileerror(r.a.mixed_media):this.validatevideo(i) .gotvideo(e):e.isgif?this.validategif(i) .gotimagedata(e):this.validateimage(i) .gotimagedata(e):(this.trigger("uiimagepickernofilereadererror"),this.trigger("uishowerror",{message:object(n.default)("error uploading media")}),this.popimagetoaddqueue())}},this.popimagetoaddqueue=function(){this.imagetoaddqueue=this.imagetoaddqueue.slice(1),this.imagetoaddqueue.length>0 .processnextimagetoadd()},this.interceptavatarimagedata=function(t,e){"avatar"===e.uploadtype .gotimagedata(e)},this.addfileerror=function(t){var e=object(l.a)(t);e .trigger("uishowerror",{message:e}),this.trigger("uiimagepickererror",{message:t}),this.popimagetoaddqueue()},this.imageselectorclicked=function(t,e){this.supportsimageupload()?this.trigger("uiimagepickerclick",this.eventdataoverrides):(this.trigger("uiimagepickernofilereadererror"),this.trigger("uishowerror",{message:object(n.default)('you need adobe flash to upload photos. http://get.adobe.com/flashplayer install adobe flash ')}),t.preventdefault(),t.stoppropagation())},this.supportsimageupload=function(){return c.a.hasfilereader()},this.canupload=function(t,e){if(t=t||{},this.attr.photolimit =this.attr.photolimit,l=this.$node.closest(this.attr.tweetboxselector);r?l.removeclass("is-droppable"):(s?e=object(n.default)("drag photo here"):i?e=object(n.default)("drag gif here"):o (e=object(n.default)("drag video here")),l.addclass("is-droppable")),l.find(this.attr.dragmediatextselector).html(e)},this.dragleave=function(t,e){this.$node.closest(this.attr.tweetboxselector).removeclass("is-droppable")},this.after("initialize",function(){this.on("click",{photobuttonselector:this.imageselectorclicked});var t=this.$node.closest(this.attr.tweetboxselector);this.on(t,"uipreviewthumbnailremove",this.thumbremoved),this.on(t,"uipreviewthumbnailadded",this.thumbadded),this.on(t,"uipreviewthumbnailremoveall",this.removeallthumbs),this.on(t,"uigotimagedata",this.interceptgotimagedata),this.on(t,"uienableimageselection",this.enablebutton),this.on(t,"uidisableimageselection",this.disablebutton),this.on(t,"uioverrideimageselectorscribecontext",this.overridescribecontext),this.on(t,"uicomposerenableexclusiveattachments",this.enablebutton),this.on(t,"uicomposerdisableexclusiveattachments",this.disablebutton),this.attr.interceptavatarimagedata .on(document,"uiimagesave",this.interceptavatarimagedata),this.on(document.body,"uidragenter",this.dragenter),this.on(document.body,"uidragleave uidrop",this.dragleave),this.mediaitems=[],this.imagetoaddqueue=[],this.updateinterface()})}var n=i("0d4m"),o=i("dbjh"),a=i("waph"),r=i("jsdv"),c=i("+dwm"),l=i("ylce"),h=i("h6fk"),d=i("40xb"),u=object(o.default)(s,d.a);e.a=u},"+lko":function(t,e,i){"use strict";var s=i("dbjh"),n=i("yzit"),o=i("uhc7"),a=i("ajan"),r="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t};e.a=object(s.default)(o.a,a.a,function(){this.defaultattrs({resumedraftselector:".js-resumedraft",deletedraftselector:".js-deletedraft"}),this.initdraftdata=function(t){var e=arguments.length>1 0!==arguments[1]?arguments[1]:{};this.dbtweets=e},this.opendraftdialog=function(t,e){var i="object"===(void 0===e?"undefined":r(e)) .previousstatusidinthread;"object"!==r(this.dbtweets)||i||this.openonce()},this.resumedraft=function(t){this.trigger("uirestoretweetstormdialog",this.dbtweets),this.close(t),delete this.dbtweets},this.deletedraft=function(t){this.trigger("uitweetstormcleardb"),this.close(t),delete this.dbtweets},this.after("initialize",function(){this.openonce=n.default.once(this.open),this.on(document,"uitweetstormdbdata",this.initdraftdata),this.on(document,"uicomposeractive uiopentweetstormdialog",this.opendraftdialog),this.on("click",{resumedraftselector:this.resumedraft,deletedraftselector:this.deletedraft})})})},"+q5d":function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.reportconversation=function(t,e){e=e||{};var i=l(c(t.target,"datadmuserupdates"),c(t.target,"dataconversationreported",{conversation_id:e.conversation_id})),s=l(c(t.target,"datadmerror"),c(t.target,"dataconversationreportfailed",{conversation_id:e.conversation_id}));this.post({url:"/i/direct_messages/report_conversation",data:{conversation_id:e.conversation_id,report_as:e.report_as,cursor:this.dmcursor},success:i,error:s})},this.after("initialize",function(){this.on("uireportconversation",this.reportconversation)})}var n=i("dbjh"),o=i("vtwx"),a=i("9uwv"),r=i("ldny"),c=r.a.triggerfn,l=r.a.chain,h=object(n.default)(s,o.a,a.a);e.a=h},"+q9n":function(t,e,i){"use strict";function s(){this.attributes({open:!1,text:"",welcomemessageid:void 0,conversation:{id:null},compose:{id:null,screenname:null,name:null,avatar:null}}),this.opendmdialog=function(t,e){this.attr.open ((this.attr.conversation||{}).id?this.openconversation():this.opencompose())},this.openconversation=function(){var t=this.attr.conversation||{};this.trigger("uineedsdmdialog",{conversation_id:t.id,default_composer_text:this.attr.text,frominitdata:!0})},this.opencompose=function(){var t=this.attr.compose||{};this.trigger("uineedsdmdialog",{id:t.id,screen_name:t.screenname,name:t.name,profile_image_url_https:t.avatar,default_composer_text:this.attr.text,welcome_message_id:this.attr.welcomemessageid,frominitdata:!0})},this.after("initialize",function(){this.on("uiswiftloaded uipopstatenavigate",this.opendmdialog)})}var n=i("dbjh");e.a=object(n.default)(s)},"+uin":function(t,e,i){"use strict";function s(){this.composenewdmwithtweet=function(t,e){this.trigger("uiopennewdm",{has_tweet_attachment:!0}),this.trigger("uicomposewithtweet",e)},this.composenewdmwithoptions=function(t,e){e.tweetid .trigger("uicomposewithtweet",{id:e.tweetid}),this.trigger("uineedsdmdialog",{id:e.recipientid,default_composer_text:e.defaultcomposertext,welcome_message_id:e.welcomemessageid,has_tweet_attachment:void 0!==e.tweetid,retain_tweet_attachment:void 0!==e.tweetid}),e.messagemecarddata .trigger("uiaddmessagemecarddata",e.messagemecarddata)},this.after("initialize",function(){this.on("uicomposenewdmwithtweet",this.composenewdmwithtweet),this.on(window,"uicomposenewdmwithoptions",this.composenewdmwithoptions)})}var n=i("dbjh"),o=object(n.default)(s);e.a=o},"+y9g":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n yikes! gifs aren\'t loading right now. \n reload \n \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"+dwm":function(t,e,i){"use strict";function s(t){return object(a.a)().webkit?t+(-1===t.indexof("?")?"?":" ")+"_blob=1":t}function n(){return++m}var o=i("lsuw"),a=i("rw6j"),r=i("kgvp"),c=i("ymkx"),l=i("jsdv"),h=i("pnul"),d=i("sxxh"),u=i("h6fk"),p=object.assign||function(t){for(var e=1;e ')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"/eqt":function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"promptbird/templates/dismiss_button":i("02ms"),"promptbird/templates/icon":i("8qxq"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7sib")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n'),s.b(s.rp(" \n"),s.fl()},partials:{" =o.bottom},ispartiallycontainedinviewport:function(t){if(!(t.$container .$element||t.containerrect .elementrect))return!1;var e=t.containerrect||this.getcontainerrect(t.$container),i=t.elementrect||t.$element[0].getboundingclientrect(),s=t.topthreshold||0,n=t.bottomthreshold||0,o=e.top+s,a=e.top+e.height+n,r=i.top,c=i.bottom;return!(a c) (r-o>0?a-r:c-o)>=t.fractioninviewport*i.height},isaboveviewport:function(t,e,i,s,n){return s=s||this.getcontainerrect(t),n=n||e[0].getboundingclientrect(),s.top>=n.top+n.height/2+(i||0)},isbelowviewport:function(t,e,i,s,n){return s=s||this.getcontainerrect(t),n=n||e[0].getboundingclientrect(),s.bottom "),a=!1;o.on("load",function(t){a||"error"===t.type||i(o)}),o.on("error",n),o.on("abort",n),o.attr("src",e)},loadmultiple:function(e){var i=s.a.unique(e),n=i.map(function(e){var i=t(" ");return new promise(function(t,s){return i.on("load",function(e){return t({width:i[0].width,height:i[0].height})}).on("error",function(){return s()}).attr("src",e)})});return promise.all(n).then(function(t){var e={};return t.foreach(function(t,s){return e[i[s]]=t}),e})}};e.a=n}).call(e,i("4ksj"))},"02ih":function(t,e,i){"use strict";function s(){this.defaultattrs({photointentselector:".tweetbox-photointent",mediapickerselector:".tweetbox-mediapicker"}),this.movechildren=function(t,e){this.select(t).children().detach().appendto(this.select(e))},this.movemediapickerintophotointent=function(){this.movechildren("mediapickerselector","photointentselector"),this.trigger("uioverrideimageselectorscribecontext",{component:"stream_header"})},this.movemediapickeroutofphotointent=function(){this.movechildren("photointentselector","mediapickerselector"),this.trigger("uioverrideimageselectorscribecontext",this.attr.eventdata.scribecontext)},this.after("initialize",function(){this.select("photointentselector").length (this.on("uitweetboxexpanded",this.movemediapickeroutofphotointent),this.on("uitweetboxcondensed",this.movemediapickerintophotointent),this.iscondensed() .movemediapickerintophotointent())})}e.a=s},"02ms":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n dismiss\n \n \n \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"0t2c":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n +'),s.b(s.v(s.f("count",t,e,0))),s.b(" \n "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"0t9i":function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.getusers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentid},eventdata:e,success:"dataactivitypopupsuccess",error:"dataactivitypopuperror"})},this.after("initialize",function(){this.on("uifetchactivitypopup",this.getusers)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},"0uxa":function(t,e,i){"use strict";function s(){this.defaultattrs({countdowncounterselector:".js-countdown-counter",counterprogressselector:".js-progress-circle",maxlength:280,warnlength:260,warnpercent:92.8,dangerclass:"radialcounter--danger",pulseclass:"radialcounter--pulse",safeclass:"radialcounter--safe",warnclass:"radialcounter--warn",countdownmaxreachedclass:"is-maxreached"}),this.updatecounter=function(t,e){var i=e.tweetlength,s=e.percent>100?100:e.percent,n=this._getcurrentcountstate(s);if(this.updatecountdowncounter(i),this._shouldcounterupdate(this.countstate,n)){var o=[n.classname];this._shouldcounterpulse(this.countstate,n) .push(this.attr.pulseclass),this.countstate=n,this.counter.updateprogress(s).updateclasslist(o)}},this.updatecountdowncounter=function(t){var e=this.countdownactive;if(this.countdownactive=t>=this.attr.warnlength,e||this.countdownactive){var i=this.attr.maxlength-t =this.attr.warnpercent (e=t>=100?this.counterstates.danger:this.counterstates.warn),e},this._shouldcounterpulse=function(t,e){var i=[this.attr.safeclass,this.attr.warnclass,this.attr.dangerclass];return i.indexof(e.classname)>i.indexof(t.classname)},this._shouldcounterupdate=function(t,e){return!(t===this.counterstates.danger ===this.counterstates.danger)},this.after("initialize",function(){this.counterstates={safe:{classname:this.attr.safeclass},warn:{classname:this.attr.warnclass},danger:{classname:this.attr.dangerclass}},this.countstate=this.counterstates.safe,this.countdownactive=!1,this.$countdowncounter=this.select("countdowncounterselector"),this.counter=new a.a(this.select("counterprogressselector")[0]),this.on("uiupdatecounter",this.updatecounter)})}var n=i("dbjh"),o=i("uymv"),a=i.n(o),r=i("cxip");e.a=object(n.default)(s)},"11yp":function(t,e,i){"use strict";(function(t){function s(e,i,s){s=o({},{focusedinterval:3e4,blurredinterval:9e4,backofffactor:2},s);var a=n.default.setintervalevent(e,s.focusedinterval,s.eventdata);return t(document).on("uipagehidden",a.backoff.bind(a,s.blurredinterval,s.backofffactor)),t(document).on("uipagevisible",a.cancelbackoff.bind(a)),a}var n=i("r8bt"),o=object.assign||function(t){for(var e=1;e 0},this.setvideomuted=function(t){this.video.muted=t},this.isvideomuted=function(){return this.video.muted},this.isvideoatend=function(){var t=1/this.attr.playvideopollfreq;return this.getvideocurrenttime()>this.endtime-t||this.video.ended},this.getvideocurrenttime=function(){return this.video.currenttime},this.setvideocurrenttime=function(t){this.video.currenttime=t},this.updatevideostate=function(){this.$node.toggleclass(this.attr.isplayingclass,this.isvideoplaying()).toggleclass(this.attr.ismutedclass,this.isvideomuted()),this.trigger("uivideostatechanged")},this.readvideometadata=function(){this.videoduration=this.video.duration,this.starttime=0,this.endtime=this.videoduration,this.trigger("uivideoloaded"),this.updatevideostate()},this.videoerror=function(t){this.trigger("uivideoerror",{message:object(n.default)("video is not playable.")})},this.videounloaded=function(t){this.videoduration=0,this.starttime=0,this.endtime=0,this.trigger("uivideounloaded")},this.togglevideoplayback=function(){this.videoduration (this.isvideoplaying()?this.pausevideo():this.isvideoatend()?this.playvideo(this.starttime):this.playvideo())},this.toggleaudiostate=function(){this.setvideomuted(!this.isvideomuted()),this.updatevideostate()},this.after("initialize",function(){this.video=this.select("videoselector")[0],this.on("uiloadvideo",this.loadvideo),this.on("uiunloadvideo",this.unloadvideo),this.on(this.video,"loadedmetadata",this.readvideometadata),this.on(this.video,"error",this.videoerror),this.on(this.video,"emptied",this.videounloaded),this.on("click",{videoselector:this.togglevideoplayback,playstateselector:this.togglevideoplayback,audiostateselector:this.toggleaudiostate})}),this.before("teardown",function(){this.unloadvideo()})}var n=i("0d4m");e.a=s},"1qaw":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"1c4y":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({itemtype:"user",titleselector:".modal-title",contentselector:".activity-popup-dialog-content",contentshowingselector:".tweet-showing",usercontentselector:".activity-popup-dialog-users",footerselector:".activity-popup-dialog-footer",opendropdownselector:".user-dropdown.open .dropdown-menu",usersselector:".activity-popup-users",replyusersheadingselector:".reply-users-heading",activityusercheckboxselector:".activity-popup-dialog-users .js-user-checkbox",activityotherreplyuserscheckboxselector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountselector:".account",saveselector:".save-action",maxtop:100,modalclasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.settitle=function(t){this.select("titleselector").html(t)},this.setcontent=function(t,e){this.$node.addclass("has-content");var i=this.select("contentselector");i.html(t),i.toggleclass(this.attr.contentshowingselector,!e)},this.setusers=function(t){this.$node.addclass("has-content"),this.select("usercontentselector").html(t)},this.setfooter=function(t){this.select("footerselector").html(t)},this.clearcontent=function(){this.$node.removeclass("has-content"),this.select("contentselector").empty(),this.select("usercontentselector").empty(),this.settitle(""),this.setfooter("")},this.requestpopup=function(t,e){this.openernode=t.target,this.excludereplyuserids=e.excludereplyuserids;var i=e.htmltitle,s=e.contentid,o=e.component;if(this.attr.eventdata=a.default.merge(this.attr.eventdata,{scribecontext:{component:o}},!0),this.defaulteventdata=this.attr.eventdata,this.attr.modalclasses[o]){this.clearcontent();var r=i||object(n.default)("loading...");this.settitle(r),object.keys(this.attr.modalclasses).foreach(function(t){var e=this.attr.modalclasses[t];this.$node.toggleclass(e,t===o)},this),this.open(),this.trigger("uifetchactivitypopup",{component:o,contentid:s})}},this.updatepopup=function(t,e){this.settitle(e.htmltitle),this.setusers(e.htmlusers),this.setcontent(e.htmlcontent),this.setfooter(e.htmlfooter),this.trigger("uiactivitypopuprendered"),this.setreplyuserscheckboxstate(this.excludereplyuserids);var i=this.select("usersselector");i.height()>=parseint(i.css("max-height"),10) .addclass("dropdown-threshold")},this.showerror=function(e,i){this.clearcontent();var s=t(" ").addclass("error").html(i.message);this.setusers(s,!0),this.settitle(object(n.default)("sorry! there was an error."))},this.notifyopenerdialogclosed=function(){this.trigger(this.openernode,"uiactivitypopupclosed")},this.setreplyuserscheckboxstate=function(e){var i=this;e (this.select("activityusercheckboxselector").each(function(s,n){var o=t(n),a=o.closest(i.attr.accountselector),r=a.attr("data-user-id");o.prop("checked",e.indexof(r) =0,a=i .conversation_id.tostring()===e;return!n !a}).foreach(function(t){this.trigger("uidisplaynativenotification",{title:t.title,body:t.body,icon:t.icon,tag:this.getrollingtag(),type:this.attr.notificationtype,click:{eventname:"uidmnotificationclicked",eventdata:{conversation_id:t.conversation_id}},displayduration:this.attr.notificationdisplayduration})},this)},this.dmnotificationclicked=function(t,e){window.focus(),this.trigger("uineedsdmdialog",{conversation_id:e.conversation_id})},this.ispagefocused=function(){return document.hasfocus()},this.getrollingtag=function(){return this.lasttagnumber=this.lasttagnumber||0,this.lasttagnumber=this.lasttagnumber>=this.attr.maxsimultaneousnotifications?1:this.lasttagnumber+1,this.attr.rollingtagprefix+this.lasttagnumber},this.updatepushsupport=function(t,e){this.haspushsubscription=!!e.subscribed},this.after("initialize",function(){this.$conversationcontainer=this.select("conversationcontentselector"),this.haspushsubscription=!1,this.on(document,"datapushsubscriptionstate",this.updatepushsupport),this.trigger("uiwantspushsubscriptionstate"),this.on(document,"datadmuserupdates",this.handleuserupdates),this.on(document,"uidmnotificationclicked",this.dmnotificationclicked),this.on(document,"datadmpushreceived",this.handledmpush),this.on(document,"datadmpushreceived","uidmrequestuserupdates"),this.storage=new a.a("dm_notifications")})}var n=i("dbjh"),o=i("luie"),a=i("wodx"),r=object(n.default)(s);e.a=r},"1hky":function(t,e,i){"use strict";(function(t){function i(){this.onclickoutside=function(e,i){i=i.bind(this),this.clickoutsidehandler=function(s,n){var o=!0;e.each(function(){if(t(s.target).closest(this).length)return o=!1,!1}),o (s,n)},t(document).on("click",this.clickoutsidehandler)},this.offclickoutside=function(){this.clickoutsidehandler (t(document).off("click",this.clickoutsidehandler),this.clickoutsidehandler=null)},this.before("teardown",function(){this.offclickoutside()})}e.a=i}).call(e,i("4ksj"))},"1ihi":function(t,e,i){"use strict";(function(t){function s(e,i){i=i||{},this.attr={url:"/i/direct_messages/typeahead",dbname:i.dbname||"dm_typeahead",dbversion:i.dbversion||20160920,metadata:{name:"metadata",keypath:"key"},conversations:{name:"conversations",keypath:"id",indexes:[{name:"title",keypath:"title",unique:!1}]},users:{name:"users",keypath:"id",indexes:[{name:"name_lowercase",keypath:"name_lowercase",unique:!1},{name:"screen_name",keypath:"screen_name",unique:!0}]}},this.attr=c.default.merge(this.attr,e),this.after=t.noop,this.defaultattrs=t.noop,a.default.mixin(this,[l.a]),this.initialize=function(){this.isusingindexeddb=!0;var t=this;return this.openindexeddb(this.attr.dbname,this.attr.dbversion,[this.attr.metadata,this.attr.users,this.attr.conversations]).then(this.ensurelocaldatabelongstocurrentuser.bind(this,h.a.user.id)).then(this.checkiflocaldatahasexpired.bind(this)).then(this.fetchdataifexpired.bind(this)).then(this.ensuredataandschemaversionmatch.bind(this)).then(this.repopulatedatastore.bind(this)).then(function(){return t.database}).catch(this.oninitializationerror.bind(this))},this.getlocalsuggestions=function(t,e){var i=this;return new promise(function(s,n){var o=function(t){(e||s)(t||[])},a=r.a.tokenizetext(t.query),c=t.dmconversationsoptions||{},l=a.map(function(t){return this.search(t)},i);promise.all(l).then(u).then(function(t){return c.excludegroups?i.removegroups(t):t}).then(function(t){return c.excludeonetoones?i.removeonetoones(t):t}).then(function(t){return c.sortbysortid?i.sortbysortid(t):t}).then(o,o)})},this.repopulateifstale=function(t){var e=this;if(t=t||[],t.length){var i=o.a.keyrange.bound(t[0],t[t.length-1],!1,!1);return this.database.getall(this.attr.conversations.name,i).then(function(e){return e.length \n'),s.s(s.f("images",t,e,1),t,e,0,147,279,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n "),i.b(i.v(i.f( \n \n')}),t.pop()),s.b(" \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"2t4w":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({medianotdisplayedselector:".tombstone",displaymediaselector:".js-display-this-media",mediacontainerselector:".js-media-container, .adaptivemedia, .js-old-media-container",tweetselector:".tweet",hiddenclass:"u-hidden"}),this.showmedia=function(t){t=t||this.$node,t.find(this.attr.medianotdisplayedselector).slideup(100),t.find(this.attr.mediacontainerselector).removeclass(this.attr.hiddenclass).slidedown(100)},this.showlimitedmedia=function(e){e.stopimmediatepropagation();var i=t(e.target).closest(this.attr.tweetselector);this.trigger("uishowlimitedmedia"),this.showmedia(i)},this.showallmedia=function(e,i){this.showmedia(t(e.target))},this.after("initialize",function(){this.on("click",{displaymediaselector:this.showlimitedmedia}),this.on("uishowallmedia",this.showallmedia)})}var n=i("dbjh");e.a=object(n.default)(s)}).call(e,i("4ksj"))},"38hd":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n close \n \n \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"3cjl":function(t,e,i){"use strict";function s(){this.createupload=function(t){return new r.a(t)},this.stats=function(t){this.trigger("datasrustats",{mediacategory:t.mediatype.replace("image/gif","gif").replace(/\/.*/,""),command:t.command.tolowercase(),appendbytesize:t.appendbytesize,status:t.status,duration:t.duration,totalduration:t.totalduration,totalbytesize:t.totalbytesize})},this.datatoextrainitparams=function(t){return c.a.getdecider("srumediacategory") .mediacategory " ="+encodeuricomponent(t.mediacategory)||null},this.init=function(t,e){var i=e.uploadid,s=this.uploads[i],n=o.a.get(e.fileid),a={extrainitparams:this.datatoextrainitparams(e),pausebeforefinalize:!0,stats:this.stats.bind(this),sourceurl:e.sourceurl,mediatype:e.mediatype};!s (s=this.createupload(n.filehandle),this.uploads[i]=s),s.upload(a)},this.finalize=function(t,e){var i=this,s=e.uploadid,n=this.uploads[s];n?n.upload({extrainitparams:this.datatoextrainitparams(e),success:function(t){return i.trigger("datamediasrusuccess",{uploadid:s,mediaid:t,percent:100})},progress:function(t,e){return i.trigger("datamediasruprogress",{uploadid:s,percent:t,mode:e})},error:function(t){return i.trigger("datamediasruerror",{uploadid:s,error:t})},trimranges:e.trimrange,stats:this.stats.bind(this),sourceurl:e.sourceurl,mediatype:e.mediatype}):this.trigger("datamediasruerror",e)},this.cancelorcomplete=function(t,e){var i=this.uploads[e];i (i.cancel(),delete this.uploads[e],this.trigger(t,{uploadid:e}))},this.complete=function(t,e){this.cancelorcomplete("datamediasrucomplete",e.uploadid)},this.cancel=function(t,e){this.cancelorcomplete("datamediasrucancel",e.uploadid)},this.after("initialize",function(){this.uploads={},this.on(document,"uimediasruinit",this.init),this.on(document,"uimediasrufinalize",this.finalize),this.on(document,"uimediasrucancel",this.cancel),this.on(document,"uimediasrucomplete",this.complete)}),this.after("teardown",function(){var t=this;object.keys(this.uploads).foreach(function(e){return t.uploads[e].cancel()})})}var n=i("dbjh"),o=i("h6fk"),a=i("h3u/"),r=i.n(a),c=i("iamj");e.a=object(n.default)(s)},"3yho":function(t,e,i){"use strict";(function(t){function s(){this.attributes({checkselector:".dmreadreceipt-check",statusselector:".dmreadreceipt-statusview",readrecieptselector:".dmreadreceipt",seenclass:"is-seen",seenanimatedclass:"is-seenanimated",receiptexpandedclass:"is-expanded",userlistcontainerselector:".dmreadreceiptuserlist",userlistexpandedselector:".dmreadreceiptuserlist-expanded",userlisttruncatedselector:".dmreadreceiptuserlist-truncated",userlistexpandseenselector:".dmreadreceiptuserlist-expandseen",seenbyallclass:"is-seenbyall",userlistexpandedclass:"is-expanded",conversationcontentselector:".dmconversation-content",sentmessageselector:".directmessage--sent:not(.is-rapidfire)"}),this.resetstate=function(t){this.conversationid=t.conversation_id,this.isotoconversation=t.is_oto,this.participants=t.participants .participants.filter(function(t){return t.id_str!==c.a.user.id})},this.localizeuserlist=function(t,e){var i=e?t.slice(0,10):t,s=t.length-i.length;if(s>0){var n={user_count:s};n["user_count_"+a.a.pluralrules.rule_for(s)]=!0;var o=d.a.render(n);i.push(o)}return(new a.a.listformatter).format(i)},this.getseenbydata=function(t,e){var i=t.filter(function(t){var i=t.join_conversation_event_id;return!i||1!==n.a.compare(i,e)}),s=i.filter(function(t){return t.last_read_event_id !==n.a.compare(e,t.last_read_event_id)});return{seenbyall:s.length===i.length,seenbyusers:s}},this.setmessagetoseenstate=function(t){var e=this.isotoconversation?object(l.default)("seen"):object(l.default)("seen by everyone");t.find(this.attr.statusselector).text(e),t.find(this.attr.checkselector).addclass(this.attr.seenclass),t.find(this.attr.userlistcontainerselector).addclass(this.attr.seenbyallclass)},this.setmessagetocollapsedstate=function(t){t.data("has-expanded-read-receipt",!1),t.find(this.attr.readrecieptselector).removeclass(this.attr.receiptexpandedclass),t.find(this.attr.userlistcontainerselector).addclass("u-hidden")},this.setmessagetoexpandedstate=function(e){var i=this;this.select("sentmessageselector").each(function(s,n){var o=t(n),a=o.data("message-id")===e.data("message-id"),r=i.ismessageexpanded(o);!a .setmessagetocollapsedstate(o)}),e.data("has-expanded-read-receipt",!0),e.find(this.attr.readrecieptselector).addclass(this.attr.receiptexpandedclass),e.find(this.attr.userlistcontainerselector).removeclass("u-hidden")},this.populatedetails=function(t,e){var i=e.seenbyusers;if(e.seenbyall)this.setmessagetoseenstate(t);else if(!this.isotoconversation .length>0){var s={user_count:i.length};s["user_count_"+a.a.pluralrules.rule_for(i.length)]=!0;var n=p.a.render(s);t.find(this.attr.statusselector).text(n);var o=i.map(function(t){return t.name}),r=this.localizeuserlist(o,!0),c=this.localizeuserlist(o,!1);t.find(this.attr.userlisttruncatedselector).html(r,!0),t.find(this.attr.userlistexpandedselector).html(c,!1)}},this.handleconversationupdate=function(e,i){var s=this;if(this.resetstate(i),this.participants){this.$content.find(this.attr.sentmessageselector).each(function(e,i){var n=t(i),o=n.data("message-id"),a=s.getseenbydata(s.participants,o);if(a.seenbyall){var r=n.find(s.attr.checkselector),c=n.data("is-read-receipt-set"),l=c?s.attr.seenanimatedclass:s.attr.seenclass;r.addclass(l)}s.ismessageexpanded(n) .populatedetails(n,a),n.data("is-read-receipt-set",!0)})}},this.ismessageexpanded=function(t){return!0===t.data("has-expanded-read-receipt")},this.expandreadreceipt=function(t){if(this.participants){var e=t.data("message-id"),i=this.getseenbydata(this.participants,e);this.populatedetails(t,i),this.setmessagetoexpandedstate(t)}},this.handlereadreceiptclick=function(e,i){var s=t(e.target).closest(this.attr.sentmessageselector);this.ismessageexpanded(s)?this.setmessagetocollapsedstate(s):this.expandreadreceipt(s)},this.expandseenlist=function(e,i){t(e.target).closest(this.attr.sentmessageselector).find(this.attr.userlistcontainerselector).addclass(this.attr.userlistexpandedclass)},this.after("initialize",function(){this.$content=this.select("conversationcontentselector"),this.on("uidmconversationupdated",this.handleconversationupdate),this.on("click",{readrecieptselector:this.handlereadreceiptclick,userlistexpandseenselector:this.expandseenlist})})}var n=i("luie"),o=i("zvsr"),a=i.n(o),r=i("dbjh"),c=i("iamj"),l=i("0d4m"),h=i("l8cn"),d=i.n(h),u=i("r/ik"),p=i.n(u);e.a=object(r.default)(s)}).call(e,i("4ksj"))},"3egj":function(t,e,i){"use strict";function s(){this.defaultattrs({phonenumberinputmodalselector:"#sms-confirmation-begin-modal",pinverificationmodalselector:"#sms-confirmation-complete-modal",alertboxselector:"#sms-alert-box",alertmessageselector:"#sms-alert-message",alertboxcloseselector:"#sms-alert-close",authenticitytokenselector:"#authenticity_token",resendcodeselector:"#resend_code"}),this.setupdialog=function(t,e){this.reset(),this.open()},this.reset=function(){this.select("pinverificationmodalselector").hide(),this.select("phonenumberselector").val(""),this.savedphonenumber="",this.savedcountrycode=""},this.afteropen=function(){this.position(),this.select("alertboxselector").hide()},this.alertbannerhandler=function(t,e){this.showalert(e.message)},this.showalert=function(t){this.select("alertboxselector").show(),this.select("alertmessageselector").text(t)},this.hidealert=function(){this.select("alertboxselector").hide(),this.select("alertmessageselector").text("")},this.sendpincode=function(t,e){t.preventdefault(),this.callbackifvalidphonenumber(function(){var t=this.select("phonenumberselector").val(),e=this.select("countrycodeselector").val();this.savedphonenumber=t,this.savedcountrycode=e,this.trigger("uisendpinaction",{phone_number:t,country_code:e})})},this.resendpincode=function(){this.trigger("uiresendpinaction",{phone_number:this.savedphonenumber,country_code:this.savedcountrycode})},this.verifypincode=function(t,e){t.preventdefault();var i=this.strippin(this.select("pincodeselectorraw").val());if(!i)return void this.showalert(object(o.default)("incorrect code. please try again or request a new one."));this.trigger("uiverifypinaction",{numeric_pin:i,phone_number:this.savedphonenumber,country_code:this.savedcountrycode})},this.sendpinsuccess=function(t,e){this.select("phonenumberinputmodalselector").remove(),this.hidealert();var i=this.trimsavedphonenumber();this.select("pinverificationmodalselector").find("#phone_number_to_verify").html(i),this.select("pinverificationmodalselector").show(),this.trigger("uiverifypinformimpression")},this.trimsavedphonenumber=function(){var t=/\(*\)*\+*-*#* */g,e=this.savedphonenumber.replace(t,"");return this.savedcountrycode+e},this.verifypinsuccess=function(t,e){this.iscompleted=!0,this.close(),this.trigger("uishowmessage",{message:object(o.default)("your account is unlocked.")})},this.resendpinsuccess=function(t,e){this.showalert(e.message)},this.updatesmsconfirmationcountrycode=function(t,e){this.trigger("uismsconfirmationcountrychange")},this.phonenumberinput=function(t,e){this.startedphoneinput||(this.trigger("uismsconfirmationphonenumberinput"),this.startedphoneinput=!0)},this.pininput=function(t,e){this.startedpininput||(this.trigger("uismsconfirmationpincodeinput"),this.startedpininput=!0)},this.around("close",function(t){this.isopen() !this.iscompleted .trigger("uicancelsmsconfirmationdialog"),t()}),this.after("initialize",function(){this.on(document,"uineedssmsconfirmationdialog",this.setupdialog),this.on("uidialogopened",this.afteropen),this.on(document,"datasendpinsuccess",this.sendpinsuccess),this.on(document,"dataresendpinsuccess",this.resendpinsuccess),this.on(document,"dataverifypinsuccess",this.verifypinsuccess),this.attr.show_sms_confirmation_dialog .trigger("uineedssmsconfirmationdialog"),this.on("click",{submitregisterbuttonselector:this.sendpincode,submitverifybuttonselector:this.verifypincode,alertboxcloseselector:this.clearinvalidphonemessage,resendcodeselector:this.resendpincode}),this.on("uialertbanner",this.alertbannerhandler),this.on("uialertbannerclose",this.hidealert),this.on("submit",{phonenumberinputmodalselector:this.sendpincode,pinverificationmodalselector:this.verifypincode}),this.on("change",{countrynameselector:this.updatesmsconfirmationcountrycode}),this.on("input",{phonenumberselector:this.phonenumberinput,pincodeselectorraw:this.pininput}),this.startedphoneinput=!1,this.startedpininput=!1,this.iscompleted=!1})}var n=i("dbjh"),o=i("0d4m"),a=i("uhc7"),r=i("zibt"),c=object(n.default)(a.a,r.a,s);e.a=c},"3i53":function(t,e,i){"use strict";(function(t){function s(){var t=array.prototype.slice.call(arguments);if(!(this instanceof s)){var e=t[0],i=e.dbname,a=e.dbversion;return n(o.a.open(i,a).then(function(t){return new s(t)}),e)}this.database=t[0]}function n(e,i){return i=i||{},e.then(i.onsuccess||t.noop,i.onfailure||t.noop)}var o=i("b6cp");e.a=s,s.prototype.closeconnection=function(){this.database.close()},s.prototype.getitembykey=function(t){return n(this.database.get(t.objectstorename,t.key),t)},s.prototype.getitemsbyprefix=function(t){return n(this.database.getbyprefix(t.objectstorename,t.index,t.prefix),t)},s.prototype.additems=function(t){var e={};return e[t.objectstorename]=t.items,n(this.database.add(e),t)},s.prototype.upsertitems=function(t){var e={};return e[t.objectstorename]=t.items,n(this.database.put(e),t)},s.prototype.createobjectstore=function(t){var e=this,i=this.database.name,s=this.database.version;this.database.close();var a={name:t.objectstorename,keypath:t.keypathname,indexes:t.indexes||[]};return n(o.a.open(i,s+1,[a],!0).then(function(t){return e.database=t}),t)},s.prototype.deleteitem=function(t){return n(this.database.destroy(t.objectstorename,t.key),t)},s.prototype.clearobjectstore=function(t){return n(this.database.clear(t.objectstorename),t)},s.prototype.clearallobjectstores=function(t){return n(this.database.clear(),t)},s.prototype.checkifobjectstoreexists=function(t){return this.database.stores.indexof(t)>-1}}).call(e,i("4ksj"))},"40xb":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({buttonselector:".btn",fileinputstring:"media[]",emptyfileinputstring:"media_empty",fileselector:"input.file-input",uploadtype:"",shouldintercepttab:!0}),n.default.mixin(this,[l.a,h.a]),this.gotmedia=function(t){t.isvideo?this.gotvideo(t):this.gotimagedata(t)},this.gotfilehandle=function(t,e){var i={mediacategoryprefix:this.attr.mediacategoryprefix};a.a.getfileinfo(t,e,i).then(this.gotmedia.bind(this))},this.reset=function(){this.resetinput("fileselector",this.attr.emptyfileinputstring),this.trigger("uipreviewthumbnailhide")},this.notifymediasruinit=function(t){var e={fileid:t.fileid,url:t.url,uploadid:t.uploadid,mediacategory:t.mediacategory,sourceurl:t.sourceurl,mediatype:t.mediatype};this.trigger("uimediasruinit",e)},this.beginsru=function(t){var e=c.a.get(t);e .notifymediasruinit(e)},this.resetinput=function(t,e){var i=this.select(t);i.val("");var s=i.clone().attr("name",e);i.replacewith(s)},this.validate=function(t,e){var i=this;return a.a.getfiletype(t,e).then(function(s){var n=!1;if(s===r.a.gif?n=i.validategif(e):s===r.a.image?n=i.validateimage(e):s===r.a.video (n=i.validatevideo(e)),n)return{filename:t,filehandle:e};throw new error("invalid file")},function(){var t=i.hasvideosupport()?o.a.file_unsupported:o.a.not_image;throw i.addfileerror(t),t})},this.setup=function(){this.select("fileselector").attr("name",this.attr.fileinputstring)},this.fileselected=function(t){var e=this.select("fileselector").get(0),i=a.a.getfilename(e.value);if(!i)return promise.resolve();for(var s=a.a.getfilehandles(e),n=[],o=0;o create new collection \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"4lvv":function(t,e,i){"use strict";function s(){this.defaultattrs({reporteruseridselector:"#current-user-id",newreportflowformselector:".new-report-flow-form",newreportflowiframeselector:"#new-report-flow-frame",newreportflownextselector:".new-report-flow-next-button",newreportflownexttextselector:".next-text",newreportflowaddtextselector:".add-text",newreportflowbackselector:".new-report-flow-back-button",newreportflowcloseselector:".new-report-flow-close-button",newreportflowdoneselector:".new-report-flow-done-button"}),this.setupdialog=function(t,e){this.reset(),this.clientevent=e.clientevent||o.a,this.eventdata=e,this.settriggeredtarget(),this.setnewreportflowcontext(),this.shownewreportflow(),this.open()},this.reset=function(){this.iscomplete=!1},this.settriggeredtarget=function(){this.$node.removeclass("report-moment report-user report-tweet report-dm report-rtbad"),"user"===this.eventdata.target?this.$node.addclass("report-user"):"moment"===this.eventdata.target?this.$node.addclass("report-moment"):"dm-conversation"===this.eventdata.target?this.$node.addclass("report-dm"):"rtb-ad"===this.eventdata.target?this.$node.addclass("report-rtbad"):this.$node.addclass("report-tweet")},this.buildreportclientcontextparams=function(t){var e=this.clientevent.scribecontext.page,i=this.clientevent.scribecontext.section||"",s=this.eventdata.scribecontext?this.eventdata.scribecontext.component||"":"",n=e+":"+i+":"+s;if(t.client_location=n,this.clientevent.scribedata)switch(this.clientevent.scribedata.internal_referer (t.client_referer=this.clientevent.scribedata.internal_referer),e){case"profile":t.profile_id=this.clientevent.scribedata.profile_id||"";break;case"search":this.clientevent.scribedata.search_details (t.search_query=this.clientevent.scribedata.search_details.query||"",t.search_source=this.clientevent.scribedata.search_details.query_source||"",t.search_result_filter=this.clientevent.scribedata.search_details.result_filter||"")}return t},this.buildreportsourceparams=function(t){return this.$node.hasclass("report-user")?t.source="reportprofile":this.$node.hasclass("report-moment")?(t.source="reportmoment",t.is_media="true",t.reported_moment_id=this.eventdata.momentid,t.reported_tweet_id=this.eventdata.tweetid):this.$node.hasclass("report-dm")?(t.source="reportdmconversation",t.reported_direct_message_conversation_id=this.eventdata.reporteddirectmessageconversationid,t.reported_direct_message_id=this.eventdata.reporteddirectmessageid,t.reported_user_id=this.eventdata.userid,t.reported_user_id||(t.reported_user_id=0)):this.$node.hasclass("report-rtbad")?(t.source="reportadcreative",t.reported_ad_creative_id=this.eventdata.creativeid,t.reported_user_id=this.eventdata.userid,t.report_type="report_ads"):(t.source="reporttweet",t.reported_moment_id=this.eventdata.momentid,t.reported_tweet_id=this.eventdata.tweetid,this.eventdata.conversationsection (t.conversation_section=this.eventdata.conversationsection)),t},this.setnewreportflowcontext=function(){var t=this.select("reporteruseridselector").val(),e=(!!this.eventdata.mediatype).tostring(),i=("promoted"===this.eventdata.disclosuretype).tostring(),s={next_view:"report_story_start",reporter_user_id:t,reported_user_id:this.eventdata.userid,is_media:e,is_promoted:i,lang:document.documentelement.lang||"en"},n=this.buildreportsourceparams(s),o="/i/safety/report_story?"+r.a.encode(this.buildreportclientcontextparams(n));this.select("newreportflowiframeselector").attr("src",o)},this.shownewreportflow=function(){this.$node.addclass("new-report-flow-dialog"),this.$node.attr("aria-hidden",!1),this.select("newreportflowbackselector").hide(),this.select("newreportflowdoneselector").hide(),this.select("newreportflownextselector").show(),this.select("newreportflownexttextselector").show(),this.select("newreportflowaddtextselector").hide()},this.cancelreport=function(){this.trigger("uididcancelreport",this.eventdata)},this.completereport=function(){this.iscomplete=!0,this.close()},this.around("close",function(t){this.isopen() !this.iscomplete .cancelreport(),this.select("newreportflowiframeselector").attr("src",""),t()}),this.newreportflowframenext=function(){this.select("newreportflowiframeselector").contents().find("#report_webview_form").submit()},this.newreportflowframeback=function(){this.select("newreportflownexttextselector").show(),this.select("newreportflowaddtextselector").hide(),this.select("newreportflowiframeselector").get(0).contentwindow.history.back()},this.getiframelocation=function(){return this.select("newreportflowiframeselector").contents().get(0).location},this.checknewreportflowcontentandupdate=function(){var t=this.getiframelocation(),e=t.href.indexof("report_story_start")>=0,i=t.href.indexof("/i/safety/report_story_complete")>=0;if(e)this.select("newreportflowbackselector").hide(),this.select("newreportflowdoneselector").hide(),this.select("newreportflowcloseselector").hide(),this.select("newreportflownexttextselector").show(),this.select("newreportflowaddtextselector").hide();else if(i){this.select("newreportflowbackselector").hide(),this.select("newreportflownextselector").hide(),this.select("newreportflowaddtextselector").hide(),this.select("newreportflownexttextselector").hide(),this.select("newreportflowdoneselector").show();var s=t.search.match(/\baction=([^ ]+)/),n=void 0;if(this.eventdata.userid)n=this.eventdata.userid;else{var o=t.search.match(/\breported_user_id=([^ ]+)/);n=o[1]}if(null!=s){var a={userid:n,impressionid:this.eventdata.impressionid,disclosuretype:this.eventdata.disclosuretype,skipscribe:!0},r=s[1].tolowercase();if("error"===r)this.select("newreportflowcloseselector").show(),this.select("newreportflowbackselector").hide(),this.select("newreportflowdoneselector").hide();else{var c=void 0;"mute"===r?c="uididmuteuser":"block"===r?c="uiblockaction":"unfollow"===r (c="uiunfollowaction"),void 0!==c .trigger(c,a),this.completereport()}}}else this.select("newreportflowbackselector").show(),this.select("newreportflowdoneselector").hide(),this.select("newreportflowcloseselector").hide()},this.after("initialize",function(){this.iscomplete=!1,this.on(document,"uineedsreportdialog",this.setupdialog);var t=this;this.select("newreportflowiframeselector").on("load",function(){return t.checknewreportflowcontentandupdate()}),this.on("click",{newreportflownextselector:this.newreportflowframenext,newreportflowbackselector:this.newreportflowframeback,newreportflowdoneselector:this.close,newreportflowcloseselector:this.close})})}var n=i("dbjh"),o=i("nnes"),a=i("uhc7"),r=i("tx0g"),c=object(n.default)(a.a,s);e.a=c},"4oxf":function(t,e,i){"use strict";function s(){this.after("initialize",function(){var t=this.attr.typeaheaddata;t (this.attachchild(o.a,this.$node,{inputselector:"div.rich-editor, textarea.tweet-box",completeallentities:t.hashtags .hashtags.enabled,includetweetcontext:!0,tweetcontextenabled:t.tweetcontextenabled,allowaccountswithoutatsign:t.fullnamematchingincompose,inputistweetbox:!0}),this.attachchild(n.a,this.$node,{inputselector:"div.rich-editor, textarea.tweet-box",blocklinkactions:!0,includesearchglass:!1,parsehashflags:!0,typeaheadsrc:"compose",renderlimit:this.attr.renderlimit,datasourcerenders:[["accounts",["accounts"]],["topics",["hashtags"]]],datasourceoptions:{accountswithoutatsignlocalonly:!0,topicsmuststartwithhashtag:!0},accountsshortcutshow:this.attr.accountsshortcutshow,deciders:t}))})}var n=i("ccv7"),o=i("args");e.a=s},"4pj3":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({containerselector:".stream-container",itemsselector:"#stream-items-id",genericitemselector:".js-stream-item",timelineendselector:".timeline-end",backtotopselector:".back-to-top",lastitemselector:".stream-item:last",streamitemcontentsselector:".js-actionable-tweet, .js-actionable-user, .js-activity, .js-story-item",truncationlimit:200,highlightedselector:".stream-container .stream li.js-stream-item.js-activity",tweetcontainerselector:"li",reloadtimelineselector:".js-reload-timeline",usededuping:!1}),this.findfirstitemcontent=function(e){var i=e.find(this.attr.streamitemcontentsselector);return i=i.not(".conversation-tweet"),t(i[0])},this.injectitems=function(e,i,s,n){var o=t(" ").html(i),a=this.getitemstoinject(o),r=o.find(this.attr.genericitemselector);if(a.length>0 .select("timelineendselector").addclass("has-items"),"prepend"===e .length>this.attr.truncationlimit (a.length=this.attr.truncationlimit,r.length=this.attr.truncationlimit),this.injecttodom(e,a),this.reportinjecteditems(r,s,n),"prepend"===e){var c=this.select("itemsselector");c.find(">:gt("+(this.attr.truncationlimit-1)+")").remove();for(var l=c.children().last(),h=void 0;l.find(".promoted-tweet").length;)h=l.prev(),l.remove(),l=h}return a},this.getitemstoinject=function(t){return t.children()},this.injecttodom=function(t,e){this.select("itemsselector")[t](e)},this.removeduplicates=function(t){var e=[];return t.filter(function(t){return!t.tweetid||-1===e.indexof(t.tweetid) (e.push(t.tweetid),!0)})},this.extracttimestamp=function(t){return t.find("[data-time-ms]").attr("data-time-ms")},this.reportinjecteditems=function(e,i,s){function n(t){return"uihasinjectednewtimeline"===i||"uihasinjectedoldtimelineitems"===i||"uihasinjectedrangetimelineitems"===i}var o=this,a=[],c=0;e.each(function(e,s){n(i) (a=a.concat(o.extrainteractiondata(t(s))),a.push(o.interactiondata(o.findfirstitemcontent(t(s)))),c=math.max(c,o.extracttimestamp(t(s)))),o.trigger(s,"uihasinjectedtimelineitem")}),a=this.removeduplicates(a);var l={};n(i) (l={scribecontext:{component:"stream"},scribedata:{},items:a},s .autoplay (l.scribedata.event_initiator=r.a.clientsideapp),s .starttimems (l.scribedata.duration_ms=window.performance.now()-s.starttimems)),this.trigger("uiwantstorefreshtimestamps"),this.trigger(i,l)},this.inspectitemsfromserver=function(t,e){this.isinitialitem(e)?this.notifynewitems(e):this.isolditem(e)?this.injectolditems(e):this.isnewitem(e)?this.notifynewitems(e):this.wasrangerequest(e) .injectrangeitems(e)},this.investigatedataerror=function(t,e){var i=e.sourceeventdata;i (this.wasrangerequest(i)?this.notifyrangeitemserror(e):this.wasnewitemsrequest(i)||this.wasolditemsrequest(i) .notifyolditemserror(e))},this.possiblyshowbacktotop=function(){var e=this.select("lastitemselector").position();e .top>=t(window).height() .select("backtotopselector").show()},this.scrolltotop=function(){object(l.a)(0,"fast")},this.gettimelineposition=function(t){return t.closest(this.attr.genericitemselector).index()},this.updatehighlighting=function(e,i){var s=this;this.select("highlightedselector").each(function(e,n){var o=t(n),a=s.extracttimestamp(o);o.toggleclass("highlighted",a>i),a =0 (i[s]=e[s])}),i},this.after("initialize",function(){"string"==typeof this.attr.href .on("uiswiftloaded",this.triggercommand)})})},"4oun":function(t,e,i){"use strict";e.a=function(t,e,i){return function(){if(e.apply(i||this,arguments))return t.apply(i||this,arguments)}}},"5e2z":function(t,e,i){"use strict";function s(){this.attributes({avatarselector:".dmupdateavatar-avatar",popoverselector:".dmpopover",popovercontentselector:".dmpopover-content",viewavatarselector:".dmupdateavatar-view",removeavatarselector:".dmupdateavatar-remove",changeavatarselector:".dmupdateavatar-change",spinnerclass:"dmspinner",filedataselector:"input.file-data",filedatastring:"media_data[]",emptyfiledatastring:"media_data_empty",fileinputstring:"media[]",emptyfileinputstring:"media_empty",filenameselector:"input.file-name",filenamestring:"media_file_name",fileselector:"input.file-input",gifsupport:!1,videosupport:!1,shouldintercepttab:!1}),this.resetavatar=function(t,e){this.avatarhtml=void 0,this.fullsizeurl=void 0,this.conversationid=e.conversation_id,this.customavatar=!1,this.istrusted=!1,this.editallowed=!1,this.isloading=!1},this.updateavatar=function(t,e){if(!e||!e.html||this.avatarhtml!==e.html){this.avatarhtml=e.html,this.fullsizeurl=e.full_size_url,this.conversationid=e.conversation_id,this.customavatar=e.is_custom,this.istrusted=e.is_trusted;var i=e.is_oto||!this.customavatar !this.istrusted;this.editallowed=!i,this.isloading=!1}},this.showavatar=function(){this.fullsizeurl .trigger("uidmdialogmediapreview",{imgurl:this.fullsizeurl})},this.removeavatar=function(){this.trigger("uidmremoveconversationavatar",{conversation_id:this.conversationid})},this.changeavatar=function(){this.select("fileselector").click()},this.handlefileselected=function(t,e){t.preventdefault(),this.reset();var i=e.fileid;this.beginsru(i),this.trigger("uidmupdateconversationavatar",{conversation_id:this.conversationid,fileid:i})},this.updatefailed=function(){this.isloading=!1},this.addfileerror=function(t){var e=object(o.a)(t);e .trigger("uishowerror",{message:e}),this.updatefailed()},this.togglespinner=function(t){this.$avatar.toggleclass(this.attr.spinnerclass,t)},this.disablepopover=function(){this.select("popoverselector").trigger("uidisabledmpopover")},this.enablepopover=function(){this.select("popoverselector").trigger("uienabledmpopover")},this.render=function(){this.isloading?(this.$avatar.empty(),this.togglespinner(!0),this.disablepopover()):(this.avatarhtml?this.$avatar.html(this.avatarhtml):this.$avatar.empty(),this.togglespinner(!1),this.editallowed?this.enablepopover():this.disablepopover(),this.$node.toggleclass("has-defaultavatar",!this.customavatar),this.$node.toggleclass("has-restrictedactions",!this.istrusted))},this.avatarloading=function(){this.isloading=!0},this.after("updateavatar",this.render),this.after("updatefailed",this.render),this.after("resetavatar",this.render),this.after("avatarloading",this.render),this.after("initialize",function(){this.$avatar=this.select("avatarselector"),this.on("uidmresetconversationavatar",this.resetavatar),this.on("uidmsetconversationavatar",this.updateavatar),this.on("uifileselected",this.handlefileselected),this.on(document,"datadmupdateconversationavatarfailed datadmremoveconversationavatarfailed",this.updatefailed),this.on(document,"uidmremoveconversationavatar uidmupdateconversationavatar",this.avatarloading),this.on("click",{viewavatarselector:this.showavatar,changeavatarselector:this.changeavatar,removeavatarselector:this.removeavatar,popovercontentselector:"uiclosedropdowns"}),this.on("uidmrequestviewconversationavatar",this.showavatar),this.on("uidmrequestuploadconversationavatar",this.changeavatar),this.on("uidmrequestremoveconversationavatar",this.removeavatar)})}var n=i("dbjh"),o=i("ylce"),a=i("40xb");e.a=object(n.default)(s,a.a)},"5hsp":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' @ "),s.b(s.v(s.f("screen_name",t,e,0))),s.b(" "),s.fl()},partials:{},subs:{wrapper_attr:function(t,e,i,s){}}})}).call(e,i("jtwp"))},"5wkh":function(t,e,i){"use strict";function s(){this.dismiss=function(t,e){this.post({url:["/i/feedback/dismiss/",e.feedbackid,".json"].join(""),success:"datab2cfeedbackdismissed",error:"datab2cfeedbackdismissedfailed"}),this.trigger("uidmhideerror")},this.after("initialize",function(){this.on(document,"uib2cfeedbackdismiss",this.dismiss)})}var n=i("dbjh"),o=i("vtwx"),a=object(n.default)(s,o.a);e.a=a},"5dpv":function(t,e,i){"use strict";function s(){this.publishtyping=function(t,e){e .conversation_id (this.trigger("datadmtypingpublished"),this.post({url:"/i/direct_messages/publish_typing",data:{conversation_id:e.conversation_id}}))},this.after("initialize",function(){this.on("uidmusertyping",this.publishtyping)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},"5k28":function(t,e,i){"use strict";function s(){this.defaultattrs({authwebviewdialogiframeselector:".auth-webview-card-iframe",authwebviewdialogtitleselector:".modal-title",authwebviewactionselector:".authwebviewcard-authwebviewaction",authwebviewcardctaclass:"authwebviewcard-button",authwebviewcardimageclass:"authwebviewcard-productimagewrapper",authwebviewtweetselector:".tweet",commercecardselector:".authwebviewcard",top:47}),this.openauthwebviewdialog=function(t,e){if(this.attr.loggedin){var i=e.webviewurl;e.tweetid (i=this.appendqueryparam(i,"referringtweetid",e.tweetid)),e.impressionid (i=this.appendqueryparam(i,"impressionid",e.impressionid)),this.select("authwebviewdialogiframeselector").attr("src",i),this.select("authwebviewdialogtitleselector").html(e.webviewtitle),this.open()}else this.trigger(document,"uiopensignupdialog")},this.appendqueryparam=function(t,e,i){var s=document.createelement("a");s.href=t;var n=encodeuricomponent(e)+"="+encodeuricomponent(i);""===s.search?s.search=n:s.search+=" "+n;var o=s.href;return s=null,o},this.closedialog=function(t,e){this.select("authwebviewdialogiframeselector").attr("src","about:blank"),this.off(window,"message",this.adjustiframeheight),this.off(window,"message",this.proxyiframeevents)},this.adjustiframeheight=function(t){this.fitiframeheight(t,{iframeselector:this.attr.authwebviewdialogiframeselector,isqualified:function(t){return t.name "auth_webview"===t.name .height}})},this.setactiveviewselector=function(t,e){this.activeviewselector=e.selector||""},this.setupmessagelistener=function(){this.on(window,"message",this.adjustiframeheight),this.on(window,"message",this.proxyiframeevents)},this.after("initialize",function(){this.activeviewselector="",this.on("uidialogopened",this.setupmessagelistener),this.on("uidialogclosed",this.closedialog),this.on(window,"uiopenauthwebviewdialog",this.openauthwebviewdialog),this.on(document,"uicommercesetactiveviewselector",this.setactiveviewselector)})}var n=i("dbjh"),o=i("uhc7"),a=i("zvxx"),r=i("ipyt"),c=i("tbnr"),l=i("vuuo"),h=object(n.default)(s,o.a,a.a,r.a,c.a,l.a);e.a=h},"5kfr":function(t,e,i){"use strict";function s(){this.rewriteeventname=function(t){for(var e=[],i=1;i '),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b(" "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"6ycc":function(t,e,i){"use strict";function s(){this.defaultattrs({currentuserpath:""}),this.navigatetoprofilepath=function(){this.trigger("uinavigate",{href:this.attr.currentuserpath})},this.after("initialize",function(){this.on("uinavigatetoprofile",this.navigatetoprofilepath)})}var n=i("dbjh"),o=object(n.default)(s);e.a=o},"78rh":function(t,e,i){"use strict";function s(){this.markdmseen=function(t,e){e=e||{};var i=e.trusted_last_seen_event_id,s=e.untrusted_last_seen_event_id;if(!(!i !s)){var n={last_seen_event_id:e.last_seen_event_id,trusted_last_seen_event_id:e.trusted_last_seen_event_id,untrusted_last_seen_event_id:e.untrusted_last_seen_event_id};this.post({url:"https://api.twitter.com/1.1/dm/update_last_seen_event_id.json",data:n,success:"datadmseensuccess",error:function(){return promise.resolve()},useoauthsessionauth:!0})}},this.after("initialize",function(){this.on("uidminboxtabopened",this.markdmseen)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},"7ks6":function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.togglenotifications=function(t,e){e=e||{};var i=c(r(t.target,"datadmconversationresult"),r(t.target,e.enable_notifications?"datanotificationsenabled":"datanotificationsdisabled")),s=r(t.target,e.enable_notifications?"datanotificationsenablefailed":"datanotificationsdisablefailed");this.post({url:"/i/direct_messages/notifications",data:{id:e.conversation_id,enable_notifications:e.enable_notifications,mute_duration:e.mute_duration},eventdata:e,success:i,error:s})},this.togglementions=function(t,e){e=e||{};var i=c(r(t.target,"datadmconversationresult"),r(t.target,e.disable_mentions?"datamentionsdisabled":"datamentionsenabled")),s=r(t.target,e.disable_mentions?"datamentionsdisablefailed":"datamentionsenablefailed"),n="https://api.twitter.com/1.1/dm/conversation/"+e.conversation_id+"/update_mention_notifications_setting.json";this.post({url:n,data:{mention_notifications_disabled:e.disable_mentions},eventdata:e,success:i,error:s,useoauthsessionauth:!0})},this.after("initialize",function(){this.on("uitogglenotifications",this.togglenotifications),this.on("uitogglementions",this.togglementions)})}var n=i("dbjh"),o=i("vtwx"),a=i("ldny"),r=a.a.triggerfn,c=a.a.chain,l=object(n.default)(s,o.a);e.a=l},"7sib":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' '),s.b(s.t(s.f("explanation",t,e,0))),s.b(" \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"7tgm":function(t,e,i){"use strict";function s(){this.scribeactivitypopupopen=function(t,e){var i=e.sourceeventdata;this.scribe("open",e,{items:[{id:i.contentid,item_type:o.a.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataactivitypopupsuccess",this.scribeactivitypopupopen)})}var n=i("dbjh"),o=i("rbkv"),a=i("3odc");e.a=object(n.default)(s,a.a)},"7vcw":function(t,e,i){"use strict";(function(t){function s(){this.attributes({textselector:"textarea.tokenizedmultiselect-input",selectedclass:"is-selected",suggestionclass:"dmtypeaheadsuggestions-item",suggestionselector:".dmtypeaheadsuggestions-item",highlightedclass:"is-highlighted",highlightedselector:".is-highlighted",suggestionscontainerselector:".dmtypeaheadsuggestions",tokeniddelimiter:"::",topaccountslength:5,accountsdatasource:"dmaccounts",conversationsdatasource:"dmconversations",typeaheadsrc:"compose_message",preselecteditems:[],maxitems:50}),this.buildaccounttemplatedata=function(t){var e=t.id_str,i=this.generatetokenid(this.attr.accountsdatasource,e),s=this.isitemselected(i),n=this.ispreselected(e),o=n?"":this.attr.suggestionclass,r=this.hasbusinesscontext(t),c={emojified_text_as_html:a.a.emojifytext(t.name)};return{data_token_id:i,data_token_text:t.name,suggestion_class:o,title:{text:t.name,rich_text:c,screen_name:t.screen_name,verified:t.verified,protected:!(!t.is_protected !t.protected)},avatar:{images:{src:t.profile_image_url_https,alt:t.name}},selected:s,preselected:n,is_group:!1,has_business_context:r}},this.buildgrouptemplatedata=function(t){return{data_token_id:this.generatetokenid(this.attr.conversationsdatasource,t.id),data_token_text:t.emojified_title,suggestion_class:this.attr.suggestionclass,html:t.html,is_group:!0}},this.buildtemplatedatafromdmconversation=function(t){return t.is_group?this.buildgrouptemplatedata(t):1===t.participants.length?this.buildaccounttemplatedata(t.participants[0]):void 0},this.processemptyquerysuggestions=function(t){var e=t.suggestions.dmconversations||[],i=e.map(this.buildtemplatedatafromdmconversation.bind(this)),s=h.a.render({suggestions:i,has_suggestions:boolean(i.length)});this.trigger("uitokenizedmultiselectsuggestions",{html:s,preserve_previous_hightlight:!1})},this.processnonemptyquerysuggestions=function(t){var e=(t.suggestions.dmaccounts||[]).map(this.buildaccounttemplatedata.bind(this)),i=(t.suggestions.dmconversations||[]).map(this.buildgrouptemplatedata.bind(this)),s=i.length?e.slice(0,this.attr.topaccountslength):e,n=u.a.render({accounts:s,groups:i,has_accounts:s.length,has_groups:i.length});this.trigger("uitokenizedmultiselectsuggestions",{html:n,preserve_previous_hightlight:!0})},this.processsuggestions=function(t,e){var i=e.querydata .querydata.query;e.suggestions .currentquery===i (""===i?this.processemptyquerysuggestions(e):this.processnonemptyquerysuggestions(e))},this.requestemptyquerysuggestions=function(){var t=this.attr.preselecteditems||[],e={id:this.typeaheadid,querydata:{query:"",dmconversationsoptions:{excludegroups:this.selecteditems.length||t.length,sortbysortid:!0,excludeonetoones:!1}},datasources:[this.attr.conversationsdatasource]};this.trigger("uineedstypeaheadsuggestions",e)},this.requestsuggestions=function(t,e){if(this.currentquery=e.text,""===this.currentquery)return void this.requestemptyquerysuggestions();var i=this.attr.preselecteditems||[],s=this.selecteditems.length||i.length,n=s?[this.attr.accountsdatasource]:[this.attr.accountsdatasource,this.attr.conversationsdatasource],o={id:this.typeaheadid,querydata:{query:e.text,typeaheadsrc:this.attr.typeaheadsrc,dmconversationsoptions:{excludegroups:s,sortbysortid:!1,excludeonetoones:!s}},datasources:n};this.trigger("uineedstypeaheadsuggestions",o)},this.splittokenid=function(t){var e=t.split(this.attr.tokeniddelimiter);return{datasource:e[0],id:e[1]}},this.handleitemselected=function(t,e){this.selecteditems=e.selected_items||[];var i=this.selecteditems.map(function(t){var e=this.splittokenid(t.id);return{datasource:e.datasource,id:e.id,text:t.text}},this),s=i.filter(function(t){return t.datasource===this.attr.accountsdatasource},this).map(function(t){return{id:t.id,name:t.text}}),n=i.filter(function(t){return t.datasource===this.attr.conversationsdatasource},this).map(function(t){return{id:t.id,name:t.text}});this.trigger("uidmtypeaheadselecteditemschanged",{accounts:s,groups:n})},this.generatetokenid=function(t,e){return t+this.attr.tokeniddelimiter+e},this.isitemselected=function(e){var i=this.selecteditems.map(function(t){return t.id});return t.inarray(e+"",i||[])>=0},this.ispreselected=function(e){return t.inarray(e+"",this.attr.preselecteditems||[])>=0},this.hasbusinesscontext=function(t){return"enabled"===t.customer_service_state},this.resetandinitialize=function(t,e){this.select("suggestionscontainerselector").empty(),this.trigger("uiresettokenizedmultiselect"),this.attr.preselecteditems=e .preselecteditems .preselecteditems.length?e.preselecteditems:[],e .maxitems (this.attr.maxitems=e.maxitems,this.trigger("uitokenizedmultiselectmaxitems",{maxitems:e.maxitems})),this.selecteditems=[],this.requestemptyquerysuggestions(),this.currentquery=""},this.after("handleitemselected",this.requestemptyquerysuggestions),this.handletokenchangeaccessibility=function(t,e){if(this.splittokenid(e.id).datasource===this.attr.accountsdatasource){var i="uitokenizedmultiselecttokenadded"===t.type?object(n.default)("added {{user}}",{user:e.text}):object(n.default)("removed {{user}}",{user:e.text});this.trigger("uishouldspeakmessage",{message:i})}},this.after("initialize",function(){this.typeaheadid="dm_typeahead"+math.floor(1e6*math.random()),this.attachchild(r.a,this.$node,this.attr),this.on("uitokenizedmultiselecttokenadded uitokenizedmultiselecttokenremoved",this.handletokenchangeaccessibility),this.on("uitokenizedmultiselecttextchanged",this.requestsuggestions),this.on(document,"datatypeaheadsuggestionsresults",this.processsuggestions),this.on("uitokenizedmultiselectitemselectionchanged",this.handleitemselected),this.on("uiinitializedmtypeahead",this.resetandinitialize),this.selecteditems=[],this.requestemptyquerysuggestions()})}var n=i("0d4m"),o=i("dbjh"),a=i("tlys"),r=i("hzqj"),c=i("ajan"),l=i("xh9u"),h=i.n(l),d=i("htfi"),u=i.n(d),p=object(o.default)(s,c.a);e.a=p}).call(e,i("4ksj"))},"7xpg":function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.inittextnode()})}var n=i("dbjh"),o=i("pul/"),a=i("fbsa"),r=object(n.default)(s,o.a,a.a);e.a=r},"7j8l":function(t,e,i){var s;!function(n,o){void 0!==(s=function(){return n.twittervideoplayer=o()}.call(e,i,e,t)) (t.exports=s)}(this,function(){function t(t){if(t .data .data.params .data.params[0]){var e=t.data.params[0],i=t.data.id;if(e .context "twittervideoplayer"===e.context){var s=e.playerid;delete e.playerid,delete e.context;var n=r[s];n .processmessage(t.data.method,e,i)}}}function e(t,e,i){var s=object.keys(i).filter(function(t){return null!=i[t]}).map(function(t){var e=i[t];return encodeuricomponent(t)+"="+encodeuricomponent(e)}).join(" ");return s (s="?"+s),t+e+s}function i(i,n,o,c,l){i.ownerdocument.defaultview.addeventlistener("message",t),this.playerid=a++;var h={embed_source:"clientlib",player_id:this.playerid,rpc_init:1};if(this.scribeparams={},this.scribeparams.suppressscribing=c .suppressscribing,!this.scribeparams.suppressscribing){if(!c.scribecontext)throw"video_player: missing scribe context";if(!c.scribecontext.client)throw"video_player: scribe context missing client property";this.scribeparams.client=c.scribecontext.client,this.scribeparams.page=c.scribecontext.page,this.scribeparams.section=c.scribecontext.section,this.scribeparams.component=c.scribecontext.component}this.scribeparams.debugscribe=c .scribecontext .scribecontext.debugscribing,this.scribeparams.scribeurl=c .scribecontext .scribecontext.scribeurl,this.promotedlogparams=c.promotedcontext,this.adrequestcallback=c.adrequestcallback,c.languagecode (h.language_code=c.languagecode);var d=e(s,n,h);return this.videoiframe=document.createelement("iframe"),this.videoiframe.setattribute("src",d),this.videoiframe.setattribute("allowfullscreen",""),this.videoiframe.setattribute("id",o),this.videoiframe.setattribute("style","width: 100%; height: 100%; position: absolute; top: 0; left: 0;"),this.domelement=i,this.domelement.appendchild(this.videoiframe),r[this.playerid]=this,this.eventcallbacks={},this.emitevent=function(t,e){var i=this.eventcallbacks[t];void 0!==i .foreach(function(t){t.apply(this.playerinterface,[e])}.bind(this))},this.jsonrpc=function(t){var e=this.videoiframe.contentwindow;t.jsonrpc="2.0",e .postmessage .postmessage(json.stringify(t),"*")},this.jsonrpccall=function(t,e){this.jsonrpc({method:t,params:e})},this.jsonrpcresult=function(t,e){this.jsonrpc({result:t,id:e})},this.processmessage=function(t,e,i){switch(t){case"requestplayerconfig":this.jsonrpcresult({scribeparams:this.scribeparams,promotedlogparams:this.promotedlogparams,squarecorners:c.squarecorners,borderradius:c.borderradius,hidecontrols:c.hidecontrols,embedded:c.addtwitterbranding,ignorefinegraingeoblocking:c.ignorefinegraingeoblocking},i);break;case"videoplayeradstart":this.emitevent("adstart",e);break;case"videoplayeradend":this.emitevent("adend",e);break;case"videoplayerplay":this.emitevent("play",e);break;case"videoplayerpause":this.emitevent("pause",e);break;case"videoplayermute":this.emitevent("mute",e);break;case"videoplayerunmute":this.emitevent("unmute",e);break;case"videoplayerplaybackcomplete":this.emitevent("playbackcomplete",e);break;case"videoplayerready":this.emitevent("ready",e);break;case"videoview":this.emitevent("view",e);break;case"debugloggingevent":this.emitevent("logged",e);break;case"requestdynamicad":"function"==typeof this.adrequestcallback?this.jsonrpcresult(this.adrequestcallback(),i):this.jsonrpcresult({},i);break;case"videoplayererror":e "no_cookies_error"===e.error_category?this.emitevent("nocookieserror",e):e "geoblock_error"===e.error_category .emitevent("geoblockerror",e)}},this.playerinterface={on:function(t,e){return void 0===this.eventcallbacks[t] (this.eventcallbacks[t]=[]),this.eventcallbacks[t].push(e),this.playerinterface}.bind(this),off:function(t,e){if(void 0===e)delete this.eventcallbacks[t];else{var i=this.eventcallbacks[t];if(void 0!==i){var s=i.indexof(e);s>-1 .splice(s,1)}}return this.playerinterface}.bind(this),play:function(){return this.jsonrpccall("play"),this.playerinterface}.bind(this),pause:function(){return this.jsonrpccall("pause"),this.playerinterface}.bind(this),mute:function(){return this.jsonrpccall("mute"),this.playerinterface}.bind(this),unmute:function(){return this.jsonrpccall("unmute"),this.playerinterface}.bind(this),playpreview:function(){return this.jsonrpccall("autoplaypreview"),this.playerinterface}.bind(this),pausepreview:function(){return this.jsonrpccall("autoplaypreviewstop"),this.playerinterface}.bind(this),updateposition:function(t){return this.jsonrpccall("updateposition",[t]),this.playerinterface}.bind(this),updatelayoutbreakpoint:function(t){return this.jsonrpccall("updatelayoutbreakpoint",[t]),this.playerinterface}.bind(this),enterfullscreen:function(){return this.jsonrpccall("enterfullscreen"),this.playerinterface}.bind(this),exitfullscreen:function(){return this.jsonrpccall("exitfullscreen"),this.playerinterface}.bind(this),teardown:function(){this.eventcallbacks={},i.removechild(this.videoiframe),this.videoiframe=void 0,delete r[this.playerid]}.bind(this)},this.playerinterface}var s="https://twitter.com",n=/^https?:\/\/([a-za-z0-9]+\.)*twitter.com(:\d+)?$/,o={suppressscribing:!1,squarecorners:!1,hidecontrols:!1,addtwitterbranding:!1},a=0,r={};return{setbaseurl:function(t){n.test(t)?s=t:window.console.error("newbaseurl "+t+" not allowed")},createplayerfortweet:function(t,e,s){return new i(t,"/i/videos/tweet/"+e,"player_tweet_"+e,s||o)},createplayerfordm:function(t,e,s){return new i(t,"/i/videos/dm/"+e,"player_dm_"+e,s||o)},createplayerforlivevideo:function(t,e,s){return new i(t,"/i/videos/live_video/"+e,"player_live_video_"+e,s||o)},findplayerforelement:function(t){for(var e in r)if(r.hasownproperty(e)){var i=r[e];if(i .domelement===t)return i.playerinterface}return null}}})},"7tcb":function(t,e,i){"use strict";function s(){this.defaultattrs({dropdownthresholdselector:".dropdown-threshold"}),this.scrollintoview=function(){var t=this.$node.closest(this.attr.dropdownthresholdselector),e=void 0,i=void 0;t.length (e=this.$node.find(this.attr.dropdownselector),(i=e.offset().top+e.outerheight()-(t.offset().top+t.height()))>0 .animate({scrolltop:t.scrolltop()+i}))},this.after("initialize",function(){this.on("uidropdownopened",this.scrollintoview),this.on(document,"uihasinjectednewtimeline uihasinjectedoldtimelineitems uihasinjectedrangetimelineitems",this.applyariaattrs)})}var n=i("dbjh"),o=i("mgri"),a=object(n.default)(o.a,s);e.a=a},"8/gf":function(t,e,i){"use strict";var s=i("0d4m"),n=i("9tdk"),o=i("iamj"),a=i("9eqs"),r=i.n(a);e.a=function(t){var e=r.a.render({article_number:"20172128"});switch(t){case n.a.invalid_media:return object(s.default)("your video file could not be processed. please see tips for uploading video files. {{learnmorelink}}",{learnmorelink:e});case n.a.file_too_large:return object(s.default)("your video file is too large. videos should be less than {{maxsize}} mb. {{learnmorelink}}.",{maxsize:o.a.getdecidervalue("upload_video_size"),learnmorelink:e});case n.a.unsupported_media:return object(s.default)("your video file is not compatible. please see tips for uploading video files. {{learnmorelink}}",{learnmorelink:e})}}},"84/5":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({richeditortextselector:"div.rich-editor",linksselector:"a",hashtagselector:".twitter-hashtag",pictographsselector:".richeditor-pictographs",pictographtextselector:".richeditor-pictographtext",pictographimageselector:".richeditor-pictographimage",richeditorselector:".richeditor",pictographtextclass:"richeditor-pictographtext",temptextareaclass:"richeditor-temptextarea",fakefocusclass:"is-fakefocus",singlelineclass:"is-singleline",plaintextclass:"is-plaintext",hashflagsenabled:!1,twittertextoptions:g.a.version1}),this.linkify=function(t){var e=this,i={urltarget:null,textwithsymboltag:k?"b":"",linkattributeblock:function(t,i){var s=t.screenname||t.url;s (e.urlandmentionscharcount+=s.length+2),delete i.title,delete i["data-screen-name"],i.dir=t.hashtag .shouldbertl(t.hashtag,0)?"rtl":"ltr",i.role="presentation"}};return this.urlandmentionscharcount=0,p.a.linkify(t,i)},this.setselection=function(t){t .setselectioniffocused(t)},this.getselection=function(){return this.previousselection||this.htmlrich.getselectionoffsets()},this.around("setcursorposition",function(t,e){void 0===e (e=this.cursorposition),void 0===e (e=o),this.setselectioniffocused([e]),this.detectupdatedcursorposition(e)}),this.isinputmethodeditorincomposition=function(){return this.$text.attr("data-in-composition")},this.isemoji=function(t){return c.a.regex.lastindex=0,c.a.regex.test(t)},this.around("detectupdatedtext",function(t,e,i){var s=this.htmlrich.gethtml(),n=this.htmlrich.getselectionoffsets()||this.previousselection||[o],o=void 0!==i;if(s!==this.prevhtml||e||o){var a=o?i:this.htmlrich.gettext(),r=a.replace(i,"");if(2===n.length .isinputmethodeditorincomposition()){var c=a.substr(n[0],n[1]-n[0]),l=a.substr(n[1]);if(r.test(l)){this.caughtimebug=!0;for(var h=r.exec(l)[1],d=c+h,u=c,p=1;p ",{css:{position:"absolute",visibility:"hidden"}}).appendto(this.$node),this.htmlnormalizer=object(d.a)(this.$normalizer[0],this.useragent()));var o=this.linkify(e),a=this.isplaintext||this.isnomarkup?m.a.htmlescape(e):o,r=this.isnomarkup||this.isplaintext?a:this.emojifyplaintextspans(a);this.htmlnormalizer.settextwithmarkup(r),this.interceptdataimageincontent();var c=this.shouldbertl(e,this.urlandmentionscharcount||0);this.$text.attr("dir",c?"rtl":"ltr"),this.$normalizer.find(c?"[dir=rtl]":"[dir=ltr]").removeattr("dir");var l=this.$normalizer.find(".twitter-timeline-link");if(l.length>0){var h=l.map(function(t,e){return e.href}).get();this.trigger("uigoturlintext",{urls:h})}k .$normalizer.find(".twitter-timeline-link").wrapinner(" ").addclass("pretty-link"),this.hashflagsenabled .addhashflags(this.$normalizer);var u=this.getmaxlengthoffset(e);u>=0 (this.htmlnormalizer.emphasizetext([u,o]),this.$normalizer.find("em").each(function(){this.innerhtml=this.innerhtml.replace(m,"")}));var p=this.htmlnormalizer.gethtml();if(p!==i){var f=n !this.isfocusing .hasfocus() !this.hasfakefocus();f (this.togglefakefocus(!0),this.$text.blur()),this.htmlrich.sethtml(p),f (this.$text.focus(),this.togglefakefocus(!1)),this.setselectioniffocused(s)}this.prevhtml=p},this.generatepictographs=function(){var t=this.$text.find(this.attr.pictographtextselector).map(function(t,e){return{left:e.offsetleft,top:e.offsettop,imageurl:e.getattribute("data-pictograph-image")}}).get(),e=c.a.render({pictographs:t});e!==this.previouspictographshtml (this.previouspictographshtml=e,this.$pictographs.html(e))},this.generatepictographsdeferred=function(){settimeout(this.generatepictographs.bind(this),0)},this.addhashflags=function(e){e.find(this.attr.hashtagselector).each(function(e,i){var s=t(i),o=s.text().slice(1),a=h.a.getimageurl(o);a .append(t.a.render({imageurl:a,description:object(n.default)("twitter emoji")}))})},this.interceptdataimageincontent=function(){var t=this;if(this.triggergotimagedata){var e=this.$text.find("img").filter(function(t,e){return e.src.match(/^data:/)})[0];if(e){var i=l.a.getblobfromdatauri(e.src);return l.a.getfileinfo("pasted.png",i).then(function(e){return t.triggergotimagedata([e])})}}},this.getmaxlengthoffset=function(t){var e=m.a.parsetweet(t,d({},this.attr.twittertextoptions,{maxweightedtweetlength:this.attr.maxlength})),i=e.validrangeend;return e.weightedlength ",{class:this.attr.temptextareaclass,tabindex:-1}).appendto(document.body));var i=this.getvisibletext(),s=this.getselection()||[i.length],n=this.$temptextarea[0];this.togglefakefocus(!0),this.$temptextarea.focus().val(i),n.setselectionrange(s[0],s[s.length-1]),settimeout(function(){var t=e.$temptextarea.val(),s=i.length-t.length,o=n.selectionstart,a=n.selectionend;s>0 ===i.slice(0,o)+i.slice(o+s) .htmlrich.deletetext([o,o+s]),e.setvisibletext(t),e.$text.focus(),e.togglefakefocus(!1),e.setselectioniffocused([o,a])},0)}},this.temporarilyremovemarkup=function(){var t=this;this.isnomarkup=!0,this.detectupdatedtext(!0),settimeout(function(){t.isnomarkup=!1,t.detectupdatedtext(!0)},0)},this.itemisimage=function(t){return"file"===t.kind "image/png"===t.type},this.interceptpastedimage=function(t){var e=this,i=t.originalevent||{},s=i.clipboarddata;if(this.triggergotimagedata ){for(var n=s.items||[],o=null,a=0;a ").attr(e,j)[0].contenteditable===j,this.$text=this.select("richeditortextselector"),this.$pictographs=this.select("pictographsselector"),this.previouspictographshtml="",this.hashflagsenabled=this.attr.hashflagsenabled .a.isenabled(),this.htmlrich=object(d.a)(this.$text[0],this.useragent());var s=navigator.platform;this.ismac=-1!==s.indexof("mac"),this.iswin=-1!==s.indexof("win"),this.issingleline=this.$text.hasclass(this.attr.singlelineclass),this.isplaintext=this.$text.hasclass(this.attr.plaintextclass),this.on(this.$text,"click",{linksselector:this.stopevent}),this.on(this.$text,"focusin",this.setfocusingstate),this.on(this.$text,"keydown",this.handlekeydown),this.on(this.$text,"focusout",this.clearselectiononblur),this.on(this.$text,"focusin",this.restoreselectiononfocus),this.on(this.$text,"cut copy paste",this.isfirefox||this.isielessthan11?this.temporarilyremovemarkup:this.temporarilyfocusplaintext),this.on(this.$text,"paste",this.interceptpastedimage),this.on(this.$text,"keypress",this.filterkey),this.ismacchromelessthan55 .on(this.$text,"textinput",this.temporarilyfocusplaintextonemojitextinput),this.on(this.$text,"focusin focusout",this.ignoreduringfakefocus(this.updatescrollcontainerfocus)),this.updatescrollcontainerfocus(),this.on("uiinserttext",this.inserttext),this.on("uicomposerhadfocus",this.temporarilyfocusplaintext),this.on("focusin uicomposerhadfocus",this.setcontenteditableplaintextonly),this.isielessthan12?this.on(this.$text,"domsubtreemodified",this.generatepictographsdeferred):this.on(this.$text,"input",this.generatepictographs),this.on("uitweetboxexpanded uitweetboxcondensed",this.generatepictographs),this.on(this.$node,"mousedown",{pictographimageselector:this.stopevent}),this.detectupdatedtext()}),this.after("teardown",function(){this.$normalizer .$normalizer.remove(),this.$temptextarea .$temptextarea.remove()}),a.default.mixin(this,[b.a,w.a])}var n=i("0d4m"),o=i("rw6j"),a=i("q9/c"),r=i("tlys"),c=i("fuxd"),l=i("+dwm"),h=i("y3hv"),d=i("dzub"),u=i("i3qs"),p=i("ih6c"),f=i("cztd"),m=i.n(f),g=i("cxip"),v=i("iamj"),b=i("btbl"),w=i("cl8q"),s=i("/81g"),c=i.n(s),y=i("mfjv"),t=i.n(y),d=object.assign||function(t){for(var e=1;e ]*>|^)([^ 1 .trigger("uidropmany"),this.trigger("uidragend")},this.after("initialize",function(){this.on("drop",n.a.onlyhandleeventswithfiles(this.drop))})}var n=i("waph"),o=i("+dwm");e.a=s},"8n88":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({geopickerselector:".geo-picker",inlinegeopickerselector:".inline-geo-picker",buttonselector:"button.geo-picker-btn",placeidselector:"input[name=place_id]",statusselector:"span.geo-status",dropdowncontainerselector:"span.dropdown-container",dropdowndisabledselector:"#geo-disabled-dropdown",enablebuttonselector:"button.geo-turn-on",notnowbuttonselector:"button.geo-not-now",dropdownenabledselector:"#geo-enabled-dropdown",geosearchselector:".geo-query-location .icon",dropdownstatusselector:".geo-dropdown-status",searchresultsselector:".geosearch-result--search",placeresultsselector:".geosearch-result--place",turnoffbuttonselector:".geo-turn-off-item",hasinlinegeopickerclass:"has-inline-geo-picker",disabledclass:"disabled",incomposer:!0}),this.selectgeoaction=function(t){if(this.dropdownisopen)return void this.closedropdown();switch(this.geostate.state){case"disabled":this.disable(),this.trigger("uigeopickeroffer");break;case"enableisunavailable":this.trigger("uigeopickeroffer");break;case"locateisunavailable":case"enabledturnedon":this.requestgeostate();break;case"enabledturnedoff":this.turnon();break;case"changing":case"locating":case"located":case"locationunknown":this.trigger("uigeopickeropen")}},this.prepare=function(e,i){var s=void 0,n=void 0;"uigeopickeropen"===e.type?(s=this.attr.dropdownenabledselector,n=1,this.geodetails !this.geodetails.interacted_poi_list (this.geodetails.interacted_poi_list=!0)):(s=this.attr.dropdowndisabledselector,n=0),n!==this.dropdownstate (this.select("dropdowncontainerselector").html(t(s).html()),this.dropdownstate=n),this.showgeostate(),this.applyariaattrstoresultsandannouncenumresults(),this.lastquery="",this.geoqueryfieldchanged=!1},this.after("opendropdown",function(){var t=this.select("enablebuttonselector");t.length||(t=this.select("queryselector").filter(":visible")),t.focus(),this.applyariaattrstodropdown(),this.applyariaattrstoresultsandannouncenumresults()}),this.after("closedropdown",function(){this.select("queryselector").val("")}),this.enable=function(){this.closedropdown(),this.trigger("uigeopickerenable")},this.turnon=function(){this.trigger("uigeopickerturnon")},this.turnoff=function(t){this.closedropdown(),this.trigger("uigeopickerturnoff")},this.changelocation=function(t,e){var i=this.select("queryselector").filter(":visible").val(),s=e.placeid,n=e.placename,o="search"===e.resulttype,a=e.placeoffset;if(this.closedropdown(),s !==this.lastplaceid){this.lastgeoplace (this.discardlastgeoplace(),this.lastgeoplace={place_name:n,place_id:s,offset:a,is_autotag:!1,query:""!==i?i:null,source:o?"search":"default",last_interaction_time:(new date).gettime()});var r={placeid:s,scribedata:{items:[{name:s}]}};this.lastplaceid .scribedata.items.push({name:this.lastplaceid}),o .lastquerydata (r.scribedata.query=this.lastquerydata.query),this.trigger("uigeopickerchange",r)}},this.updatestate=function(t,e){this.geostate=e,this.showgeostate()},this.showgeostate=function(){var t=object(n.default)("add location"),e="",i=!1,s=!1,o="",a=this.geostate;switch("enabling"===a.state .select("buttonselector").removeclass(this.attr.disabledclass),a.state){case"enabling":case"locating":t=object(n.default)("getting location..."),i=!0;break;case"enableisunavailable":case"locateisunavailable":t=object(n.default)("location service unavailable");break;case"changing":t=object(n.default)("changing location..."),i=!0;break;case"locationunknown":t=object(n.default)("unknown location");break;case"located":t=a.place_name,e=a.place_id,o=a.places_html;var c=object(r.a)();o+=p.a.render({id:c}),i=!0,s=!0,this.initializegeoscribedata(a);break;case"enabledturnedoff":this.discardlastgeoplace();break;case"disabled":s=!0,this.disable(),t=object(n.default)("location disabled")}this.select("geopickerselector").toggleclass("active",i),this.select("inlinegeopickerselector").length>0 (this.select("inlinegeopickerselector").toggle(i),this.$node.toggleclass(this.attr.hasinlinegeopickerclass,i)),this.select("buttonselector").toggleclass("enabled",i).toggleclass("js-dropdown-toggle",s).attr("aria-haspopup",s),this.select("statusselector").text(t),this.select("buttonselector").attr("data-original-title",t),this.select("placeresultsselector").add(this.select("searchresultsselector")).remove(),this.select("dropdownstatusselector").text(t).toggle(!i),this.select("dropdownselector").html(o),this.select("placeidselector").val(e),this.lastplaceid=e,this.applyariaattrstoresultsandannouncenumresults()},this.initializegeoscribedata=function(t){this.geodetails||this.resetgeodetails(),this.lastgeoplace .lastgeoplace.place_id||!t.place_id||(this.lastgeoplace={place_name:t.place_name,place_id:t.place_id,source:"default",is_autotag:!0,last_interaction_time:(new date).gettime()})},this.resetgeodetails=function(){this.geodetails={interacted_poi_list:!1,interacted_server_search:!1,geo_place_details:[]}},this.discardlastgeoplace=function(){this.lastgeoplace .lastgeoplace.place_id (this.lastgeoplace.state="discarded",this.geodetails.geo_place_details.push(this.lastgeoplace),this.lastgeoplace={})},this.sendtweetscribedata=function(t){if(this.geodetails){this.lastgeoplace .lastgeoplace.place_id (this.lastgeoplace.state="geotag",this.geodetails.geo_place_details.push(this.lastgeoplace));var e={scribedata:{items:[{item_type:a.a.geodetails,geo_details:this.geodetails}]}};this.trigger("uigeopickersendtweet",e),this.resetgeodetails(),this.lastgeoplace={}}},this.requestgeostate=function(){this.trigger("uirequestgeostate")},this.searchifquerychanged=function(t){var e=this.select("queryselector").filter(":visible").val()||"";t .lastquery===e||(this.geodetails.interacted_server_search||(this.geodetails.interacted_server_search=!0),this.lastisprefix=t,this.lastquery=e,this.select("dropdownstatusselector").text(object(n.default)("searching places...")).show(),this.geoqueryfieldchanged||(this.geoqueryfieldchanged=!0,this.trigger("uigeopickerinteraction")),this.trigger("uigeopickersearch",{placeid:this.lastplaceid,query:e,isprefix:t}))},this.searchexactmatch=function(){this.searchifquerychanged(!1)},this.searchautocomplete=function(){var t=this;settimeout(function(){return t.searchifquerychanged(!0)},0)},this.searchresults=function(t,e){var i=e.sourceeventdata;!i||i.placeid!==this.lastplaceid||i.query!==this.select("queryselector").filter(":visible").val()||i.isprefix !this.lastisprefix||(this.lastquerydata=i,this.select("searchresultsselector").remove(),this.select("dropdownstatusselector").hide(),this.select("dropdownselector").prepend(e.html),this.applyariaattrstoresultsandannouncenumresults())},this.searchunavailable=function(t,e){this.select("dropdownstatusselector").text(object(n.default)("location service unavailable")).show()},this.disable=function(){this.select("buttonselector").addclass(this.attr.disabledclass).addclass("js-dropdown-toggle").attr("aria-haspopup",!0).attr("data-original-title",object(n.default)("location disabled")),this.select("statusselector").text(object(n.default)("location disabled"))},this.after("initialize",function(){this.geostate={},this.skipfocusmanager=!0,this.on("uipreparegeopicker",this.requestgeostate),this.attr.incomposer (this.on("uicomposeractive",this.requestgeostate),this.on("uitweetsent",this.sendtweetscribedata)),this.on("datageostate",this.updatestate),this.on(document,"datageosearchresults",this.searchresults),this.on(document,"datageosearchresultsunavailable",this.searchunavailable),this.on("uidropdownopenrequested",{geopickerselector:this.selectgeoaction}),this.on("click",{buttonselector:this.selectgeoaction,enablebuttonselector:this.enable,notnowbuttonselector:this.closedropdown,turnoffbuttonselector:this.turnoff,geosearchselector:this.searchexactmatch}),this.on("mousedown",{buttonselector:this.preventfocusloss}),this.on("uigeosearchselect",{turnoffbuttonselector:this.turnoff}),this.on("uigeopickeropen uigeopickeroffer",this.prepare),this.on("uigeosearchenter",this.searchexactmatch),this.on("uigeosearchchangelocation",this.changelocation),this.on("uigeosearchautocomplete",this.searchautocomplete);var t="already_did_reset";!0===c.a.getdecidervalue("geo_picker_incident_reset") (this.resetgeostore=new d.a("reset_geo_picker_incident"),this.resetgeostore.getitem(t)||(this.turnoff(),this.resetgeostore.setitem(t,!0),this.scribe({component:"tweet_box",element:"geo_picker",action:"incident_reset"})))})}var n=i("0d4m"),o=i("dbjh"),a=i("rbkv"),r=i("dsew"),c=i("iamj"),l=i("q+ee"),h=i("3odc"),d=i("wodx"),u=i("vfpm"),p=i.n(u);e.a=object(o.default)(l.a,h.a,s)}).call(e,i("4ksj"))},"8qxq":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("icon_class",t,e,1),t,e,0,15,99,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n')}),t.pop()),s.s(s.f("icon_class",t,e,1),t,e,1,0,0,"")||s.b(' \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"8s9k":function(t,e,i){"use strict";var s=i("dbjh"),n=i("uhc7"),o=i("tx0g");e.a=object(s.default)(n.a,function(){this.defaultattrs({whythisadiframeselector:"#why-this-ad-frame",spinnerselector:".why-this-ad-spinner"}),this.setupdialog=function(t,e){this.$spinner.show(),this.$iframe.hide(),this.eventdata=e,this.setwhythisadframe(),this.open()},this.setwhythisadframe=function(){var t="/about-ads?"+o.a.encode({aid:this.eventdata.impressionid});this.$iframe.attr("src",t)},this.around("close",function(t){this.$iframe.attr("src",""),t()}),this.after("initialize",function(){var t=this;this.$iframe=this.select("whythisadiframeselector"),this.$spinner=this.select("spinnerselector"),this.on(document,"uineedswhythisaddialog",this.setupdialog),this.$iframe.on("load",function(){t.$iframe.show(),t.$spinner.hide()})})})},"8t/i":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("second_call_to_action_text",t,e,1),t,e,0,247,794,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' \n'),s.s(s.f("second_call_to_action_url",t,e,1),t,e,0,322,754,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' "),s.b(s.v(s.f( \n '),s.b(s.v(s.f("second_call_to_action_text",t,e,0))),s.b("\n"+i),s.b(" \n")}),t.pop()),s.b(" \n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"8xkx":function(t,e,i){"use strict";function s(){this.prefetch=function(t,e,i,s){var n=this,o={prefetch:!0,result_type:e,count:this.getprefetchcount(),media_tagging_in_prefetch:this.shouldincludecanmediatag()};return this.storage (o[e+"_cache_age"]=this.storage.getcacheage(this.attr.storagehash,this.attr.ttl_ms)),new promise(function(e,a){n.get({url:t,data:o,eventdata:{},success:i,error:s}).then(e).fail(a)})},this.usestaledata=function(){this.storage (this.extendttl(),this.getdatafromlocalstorage())},this.extendttl=function(){for(var t=this.getstoragekeys(),e=0;e learn more \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"9htr":function(t,e,i){"use strict";var s={options_type:"options",text_input_type:"text_input",location_type:"location"};e.a=s},"9nax":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({autosubscribe:!1,allowregistration:!0,serviceworkerpath:"/push_service_worker.js",pushcheckinttl:864e5}),this.subscriptionchangerequested=function(t,e){var i=this,s=promise.resolve();if(!this.serviceworkerregistration||!this.attr.allowregistration)return s;var n=!this.subscription .subscribe,o=this.subscription !e.subscribe,a=void 0;if(n)a=this.subscribe(this.serviceworkerregistration);else if(o){var r=function(){i.subscription=null,i.storeunregister(),i.trigger("uibrowserpushunsubscribe"),i.sendcurrentstatus()};a=this.subscription.unsubscribe().then(r,r)}return a||s},this.showinitialnotification=function(){this.trigger("uidisplaynativenotification",{title:object(l.default)("customize your notifications"),body:object(l.default)("click to visit your settings and choose which web notifications you receive"),displayduration:15e3,click:{eventname:"uipushsettingsnotificationclicked"}})},this.subscribe=function(t){if(!t||!this.attr.allowregistration)return promise.resolve();var e="granted"===this.getnotificationpermission();e?this.trigger("uibrowsersilentsubscribeattempt"):this.trigger("uibrowserpushpromptimpression");var i=r.a.getdecider("allowwebpushvapidupgrade"),s={uservisibleonly:!0};return i (s.applicationserverkey=d),t.pushmanager.subscribe(s).then(this.subscribesuccess.bind(this,e),this.subscribefailure.bind(this,e))},this.subscribesuccess=function(t,e){t?this.trigger("uibrowsersilentsubscribesuccess"):this.trigger("uibrowserpushpromptallow"),this.subscription=e,this.storesubscription(this.subscription,!0),this.sendcurrentstatus(),this.showinitialnotification()},this.subscribefailure=function(t){"denied"===this.getnotificationpermission()?this.trigger("uibrowserpushpromptdeny"):"default"===this.getnotificationpermission()?this.trigger("uibrowserpushpromptdismiss"):t?this.trigger("uibrowsersilentsubscribeerror"):this.trigger("uibrowserpushprompterror")},this.isserviceworkersupported=function(){return"serviceworker"in navigator},this.ispushsupported=function(){var t="pushmanager"in window,e=this.isserviceworkersupported();return e "shownotification"in serviceworkerregistration.prototype },this.isremembermeon=function(){return"1"===object(n.a)("remember_checked_on")},this.supportsvapid=function(){return"pushsubscriptionoptions"in window .pushsubscriptionoptions.prototype.hasownproperty("applicationserverkey")},this.serviceworkerready=function(t){var e=this;if(this.pushsupported)return this.serviceworkerregistration=t,this.serviceworkerregistration.pushmanager.getsubscription().then(function(i){if(!(i||e.isremembermeon() .supportsvapid()))return e.pushsupported=!1,e.sendcurrentstatus();e.subscription=i;var s=r.a.getdecider("allowwebpushvapidupgrade");if("granted"===e.getnotificationpermission() !i .attr.autosubscribe .supportsvapid())e.subscribe(t);else{if(i !e.isvapidsubscription(i) .supportsvapid() )return e.subscription.unsubscribe().then(function(){return e.subscribe(t)});e.sendcurrentstatus()}e.storesubscription(e.subscription)})},this.getnotificationpermission=function(){return"notification"in window .permission},this.isvapidsubscription=function(t){if(!t||!t.options||!t.options.applicationserverkey)return!1;var e=new uint8array(t.options.applicationserverkey);return 65===e.bytelength ===e[0]},this.storesubscription=function(e,i){var s=this;if(e (!this.storage.getitem("issaved")||i)){var n=h({subscribe:!0,token:e.endpoint,usewebclientid:this.isvapidsubscription(e)},e.tojson());e.subscriptionid ===e.endpoint.indexof(e.subscriptionid) (n.token=e.endpoint+"/"+e.subscriptionid),this.post({url:"/i/push_destinations",data:n,success:function(){return s.storage.setitem("issaved",!0,s.attr.pushcheckinttl)},error:t.noop})}},this.storeunregister=function(){this.storage.clear(),this.post({url:"/i/push_destinations/destroy",success:t.noop,error:t.noop})},this.sendcurrentstatus=function(){this.trigger("datapushsubscriptionstate",{permissiondenied:"denied"===this.getnotificationpermission(),supported:this.attr.allowregistration .pushsupported,subscribed:!!this.subscription})},this.navigatetosettings=function(t,e){this.trigger("uinavigate",{href:"/settings/web_notifications"})},this.after("initialize",function(){var t=this;if(this.serviceworkerregistration=null,this.subscription=null,this.on("uipushsettingsnotificationclicked",this.navigatetosettings),this.on("uiwantspushsubscriptionstate",this.sendcurrentstatus),this.pushsupported=this.ispushsupported(),this.serviceworkersupported=this.isserviceworkersupported(),this.pushsupported){var e=object(o.a)({withexpiry:!0});this.storage=new e("push_notifications"),this.on("uipushsubscriptionchangerequested",this.subscriptionchangerequested)}else"denied"===this.getnotificationpermission() .trigger("uibrowserpushpermissiondenied"),this.sendcurrentstatus();if(this.serviceworkersupported){var i=navigator.serviceworker;i.register(this.attr.serviceworkerpath).then(function(){return i.ready}).then(this.serviceworkerready.bind(this)).catch(function(){t.serviceworkersupported=!1,t.pushsupported (t.pushsupported=!1,t.sendcurrentstatus())})}})}var n=i("dsp6"),o=i("rwgq"),a=i("dbjh"),r=i("iamj"),c=i("vtwx"),l=i("0d4m"),h=object.assign||function(t){for(var e=1;e "+i+" ");e.append(s)}),this.refreshdebugjson()},this.refreshdebugjson=function(t){var e=this.select("debugkeyselectorselector").val();if(e .debugdata[e]){var i=this.debugdata[e].map(function(t){return t.data});this.select("pastedcontentselector").html(json.stringify(i,void 0,2))}},this.after("initialize",function(){this.on(document,"datafeedback",this.opendialog),this.on(document,"uipreparefeedbackdialog",this.preparedialog),this.on("change",{debugkeyselectorselector:this.refreshdebugjson}),this.on("click",{dialogtoggleselector:this.toggledebugenabled})})}var n=i("dbjh"),o=i("uhc7");e.a=object(n.default)(s,o.a)}).call(e,i("4ksj"))},b55n:function(t,e,i){"use strict";function s(t,e){if(t=t||{enabled:!1,title:null},t.enabled){var i=n(t.title,"resolved","info"),s=n(t.title,"rejected","warn");return e.then(i,function(t){throw s(t)})}return e}function n(t,e,i){return function(i){("["+e+"] "+(t||"")).trim();return i}}e.a=s},bdsg:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n keyboard shortcuts \n \n keyboard shortcuts are available for common actions and site navigation.\n'),s.b(' view keyboard shortcuts \n dismiss this message \n \n '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},bcvv:function(t,e,i){"use strict";function s(){this.defaultattrs({defaultajaxdata:{include_entities:1,include_available_features:1},noshowerror:!0,startpollinginterval:7500,maxpollinginterval:6e4}),this.requestitems=function(t,e){t .stoppropagation();var i=function(i){this.hastorndown||(e.isnewitemrequest?this.hasactivenewitemsrequest=!1:this.hasactiveolditemsrequest=!1,this.trigger(t.target,"datagotmoretimelineitems",i),this.trigger("uihidegloballoadingindicator"))},s=this.requestinterval,n=function(i){this.hastorndown||(i .xhr "timeout"===i.xhr.statustext ===this.requestinterval (this.requestinterval=math.min(2*this.requestinterval,this.attr.maxpollinginterval)),e.isnewitemrequest?this.hasactivenewitemsrequest=!1:this.hasactiveolditemsrequest=!1,this.trigger(t.target,"datagotmoretimelineitemserror",i),this.trigger("uihidegloballoadingindicator"))},o=e .headers||{};e .frompolling (o["x-twitter-polling"]=!0);var r={contextual_tweet_id:e.contextual_tweet_id,cursor:e.cursor,cursor_index:e.cursor_index,cursor_offset:e.cursor_offset,min_position:e.min_position,max_position:e.max_position,is_forward:e.is_forward,latent_count:e.latent_count,composed_count:e.composed_count,composed_ids:e.composed_ids,include_new_items_bar:e.include_new_items_bar,interval:e.interval,count:e.count,timeline_empty:e.timeline_empty,reset_error_state:e.reset_error_state};e.query (r.q=e.query),e.curated_timeline_since_id (r.curated_timeline_since_id=e.curated_timeline_since_id),e.scroll_cursor (r.scroll_cursor=e.scroll_cursor),e.refresh_cursor (r.refresh_cursor=e.refresh_cursor),e.excluded (r.excluded=e.excluded),e.isnewitemrequest .hasactivenewitemsrequest||!e.isnewitemrequest .hasactiveolditemsrequest||(this.hasactivenewitemsrequest=!(!this.hasactivenewitemsrequest !e.isnewitemrequest),this.hasactiveolditemsrequest=!(!this.hasactiveolditemsrequest .isnewitemrequest),this.get({url:this.attr.endpoint,headers:o,timeout:this.requestinterval,data:a({},this.attr.defaultajaxdata,r),eventdata:e,success:i.bind(this),error:n.bind(this)}))},this.before("teardown",function(){this.hastorndown=!0}),this.after("initialize",function(){this.hasactivenewitemsrequest=!1,this.hasactiveolditemsrequest=!1,this.requestinterval=this.attr.startpollinginterval,this.on("uiwantsmoretimelineitems",this.requestitems)})}var n=i("dbjh"),o=i("vtwx"),a=object.assign||function(t){for(var e=1;e 0?this.trigger(e.target,"datauserhasunreaddmswithcount",{msgcount:t}):this.trigger(e.target,"datauserhasnounreaddmswithcount")},this.dispatchunreadnotification=function(t,e){var i=e .d||{};"ok"===i.status !=i.response .triggerunreadcount(t,{msgcount:i.response})},this.checkforenvelope=function(e,i){i "profile"===i.section .triggerunreadcount(e,{msgcount:t})},this.after("initialize",function(){this.on("uireadstatechanged",this.triggerunreadcount),this.on("datanotificationsreceived",this.dispatchunreadnotification),this.on("uipagechanged",this.checkforenvelope)})}var n=i("dbjh");e.a=object(n.default)(s)},btbl:function(t,e,i){"use strict";function s(){n.default.mixin(this,[r.a]),this.defaultattrs({emojipickerselector:".emojipicker"}),this.insertemoji=function(t,e){this.trigger("uiinserttext",{text:e.unicode,nofocus:!0})},this.after("reset",function(){this.select("emojipickerselector").each(function(t,e){e.style.display="none",e.offsetheight,e.style.display=""})}),this.after("initialize",function(){var t=a.default.merge(this.attr.eventdata,{scribecontext:{element:"emoji_picker"}},!0);this.attachchild(o.a,this.select("emojipickerselector"),{eventdata:t,preferredgravity:this.attr.preferredgravity,preferredweight:this.attr.preferredweight,preventdropdownsopeningup:this.attr.preventdropdownsopeningup,restorefocusonclose:!0,additionaltopbarpositionselector:this.attr.additionaltopbarpositionselector}),this.on("uiemojipicked",this.insertemoji);var e=this.select("emojipickerselector");e.length .on(e,"uidropdownclosed",this.focus)})}var n=i("q9/c"),o=i("iunq"),a=i("yzit"),r=i("ajan");e.a=s},bugu:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dialogs/close_button":i("38hd")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n'),s.b(s.rp(" \n '),s.b(s.v(s.f("title_text",t,e,0))),s.b(" \n \n"),s.s(s.f("body_text",t,e,1),t,e,0,264,374,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n '),i.b(i.v(i.f("body_text",t,e,0))),i.b(" \n \n")}),t.pop()),s.b(' \n '),s.b(s.v(s.f("cancel_text",t,e,0))),s.b(' \n '),s.b(s.v(s.f("submit_text",t,e,0))),s.b(" \n \n \n \n \n"),s.fl()},partials:{" ';e.a=s}).call(e,i("4ksj"))},cdle:function(t,e,i){"use strict";function s(){this.attributes({nextbuttonselector:".dm-initiate-conversation",dmtypeaheadselector:".dmdialogtypeahead",maxparticipants:50,currentuserid:null}),this.enable=function(){this.select("nextbuttonselector").removeclass("disabled").prop("disabled",!1)},this.disable=function(){this.select("nextbuttonselector").addclass("disabled").prop("disabled",!0)},this.isgroupselected=function(t,e){return e .groups .groups.length},this.initiateconversationfromselectedgroup=function(t,e){var i=e.groups[0];this.initiateconversation("uirenderconversationview",{conversation_id:i.id,name:i.name})},this.isnextbuttonselected=function(t,e){return"click"===t.type||"keydown"===t.type .which===r.a.enter},this.initiateconversationfromselectedaccounts=function(){var t=void 0,e=void 0;switch(this.selectedaccounts.length){case 0:t="uirendernewconversationview",e={name:"@"+this.manualscreenname,screen_names:this.manualscreenname?[this.manualscreenname]:[]};break;case 1:var i=this.selectedaccounts[0];t="uirenderconversationview",e={conversation_id:o.a.generateconversationid(this.attr.currentuserid,i.id),name:i.name,is_oto:!0};break;default:var s=this.selectedaccounts.map(function(t){return t.id});t="uirendernewconversationview",e={name:o.a.generateconversationname(this.selectedaccounts),recipient_ids:s}}this.initiateconversation(t,e)},this.reset=function(t,e){this.trigger("uiinitializedmtypeahead"),this.defaultcomposertext=e .default_composer_text||"",this.hastweetattachment=e .has_tweet_attachment||!1},this.storeselectedaccounts=function(t,e){this.selectedaccounts=e.accounts||[]},this.handletextchange=function(t,e){var i=(e.text||"").replace(/^@/,"");this.manualscreenname=l.a.isvalidusername("@"+i)?i:""},this.initiateconversation=function(t,e){this.trigger(t,u({},e,{default_composer_text:this.defaultcomposertext,has_tweet_attachment:this.hastweetattachment,retain_tweet_attachment:!0})),this.reset()},this.updatestate=function(t,e){var i=this.manualscreenname,s=this.selectedaccounts.length;i||s?this.enable():this.disable()},this.after("handletextchange",this.updatestate),this.after("storeselectedaccounts",this.updatestate),this.after("reset",this.updatestate),this.after("initialize",function(){this.attachchild(h.a,this.$node,{maxitems:this.attr.maxparticipants-1}),this.selectedaccounts=[],this.on("uidmtypeaheadselecteditemschanged",this.storeselectedaccounts),this.on("uidmtypeaheadselecteditemschanged",object(a.a)(this.initiateconversationfromselectedgroup,this.isgroupselected)),this.on("uitextchanged",this.handletextchange),this.on("click keydown",{nextbuttonselector:object(a.a)(this.initiateconversationfromselectedaccounts,this.isnextbuttonselected)}),this.on(document,"uiopennewdm",this.reset)})}var n=i("dbjh"),o=i("wrdm"),a=i("4oun"),r=i("i3qs"),c=i("cztd"),l=i.n(c),h=i("7vcw"),d=i("ajan"),u=object.assign||function(t){for(var e=1;e =60)?(this.durationhours=math.max(1,math.floor(this.polldurationmin/60)),this.durationminutes=math.max(0,this.polldurationmin-60*this.durationhours)):(this.durationhours=math.floor(this.polldurationmin/60),this.durationminutes=math.max(1,this.polldurationmin-60*this.durationhours)),this._calculatecustomdurationfromsettings(),this._updatecustomdurationelementsfromsettings()}else this.currentpoll.customduration>this.polldurationmax (this.currentpoll.customduration=this.polldurationmax,this._calculatesettingsfromcustomduration(),this._updatecustomdurationelementsfromsettings());this._disableunavailabledurationoptions()},this._disableunavailabledurationoptions=function(){var t=math.max(0,this.polldurationmin-1440*this.durationdays),e=this.polldurationmax-1440*this.durationdays,i=math.floor(t/60),s=math.floor(e/60);this.select("pollcomposeviewcustomdurationhoursselector").children().toarray().foreach(function(t,e){return t.disabled=t.value s}),t-=60*this.durationhours,e-=60*this.durationhours,this.select("pollcomposeviewcustomdurationminutesselector").children().toarray().foreach(function(i,s){return i.disabled=i.value e})},this._updatecustomdurationelementsfromsettings=function(){this.select("pollcomposeviewcustomdurationdaysselector").val(this.durationdays),this.select("pollcomposeviewcustomdurationhoursselector").val(this.durationhours),this.select("pollcomposeviewcustomdurationminutesselector").val(this.durationminutes)},this._updatecustomdurationsettingsfromelements=function(){this.durationdays=number(this.select("pollcomposeviewcustomdurationdaysselector").val()||0),this.durationhours=number(this.select("pollcomposeviewcustomdurationhoursselector").val()||0),this.durationminutes=number(this.select("pollcomposeviewcustomdurationminutesselector").val()||0)},this._calculatecustomdurationfromsettings=function(){this.currentpoll.customduration=1440*this.durationdays+60*this.durationhours+this.durationminutes},this._calculatesettingsfromcustomduration=function(){this.durationdays=math.floor(this.currentpoll.customduration/1440),this.durationhours=math.floor(this.currentpoll.customduration%1440/60),this.durationminutes=this.currentpoll.customduration%60},this.around("isempty",function(t){return t() !this.haspoll}),this.around("hasvalidcontent",function(t){return this.haspoll?""!==this.getvisibletext().trim() .currentpoll.isvalid !this.dmmode ():t()}),this.after("reset",function(){this.haspoll .trigger("uiresetpollcomposer")}),this.after("initialize",function(){this.$composeview=this.select("pollingcardcomposeviewselector"),this.$composeoptions=this.select("pollcomposeviewoptionsselector"),this.polldurationmin=number(this.$composeview.attr(this.attr.minimaldurationattr)),this.polldurationmax=number(this.$composeview.attr(this.attr.maximaldurationattr)),this.on("uiactivatepollcomposer",this.activatepoll),this.on("uiresetpollcomposer",this.resetpoll),this.on("uitogglepollcomposer",this.togglepollcomposer),this.on("uipolloptiontextchange",this.updateoption),this.on("uipolloptionremove",this.removepolloption),this.on("click",{pollcomposeviewremoveselector:"uiresetpollcomposer",pollcomposeviewaddoptionselector:this.addpolloption,pollcomposeviewdefaultdurationselector:this.turnoncustomduration}),this.on("change",{pollcomposeviewcustomdurationdaysselector:this._updatecustomduration,pollcomposeviewcustomdurationhoursselector:this._updatecustomduration,pollcomposeviewcustomdurationminutesselector:this._updatecustomduration}),this.attachchild(a.a,this.select("pollcreatorselector"),{eventdata:{scribecontext:{element:"poll_composer"}}}),this.attachchild(o.a,this.$composeoptions,{maxlength:r.a.max_option_length,richeditortextselector:this.attr.pollcomposeviewoptionsinputselector})})}var n=i("q9/c"),o=i("vx1t"),a=i("xpsf"),r=i("lywl"),c=i("ajan"),l="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t};e.a=s}).call(e,i("4ksj"))},cnhr:function(t,e,i){"use strict";(function(t){function i(){this.defaultattrs({adaptivephotocontainer:".js-adaptive-photo",adaptivemediacontainer:".adaptivemedia"}),this.getpermalinkpath=function(t){return t.closest(this.attr.streamitemselector).find(this.attr.permalinkselector).attr("href")},this.openadaptivemediagallery=function(e,i){e.preventdefault(),e.stoppropagation();var s=t(e.target).closest(this.attr.adaptivephotocontainer);this.trigger(e.target,"uiopengallery",{timelineselector:this.attr.adaptivemediacontainer,inoverlay:this.attr.inoverlay});var n=s.closest("[data-impression-id]");n.length (n.attr("data-embedded-media-logged",!0),this.trigger("uiembeddedmedia",{impressionid:n.data("impression-id"),disclosuretype:n.data("disclosure-type")})),i .skipclickscribe||this.trigger("uimediathumbnailclick",{url:s.attr("data-image-url"),mediatype:"photo"})},this.openselectedtweetadaptivemediagallery=function(e){this.trigger(t(e.target).find(this.attr.adaptivephotocontainer),"uikeyboardopenadaptivegallery",{skipclickscribe:!0})},this.after("initialize",function(){this.on(document,"uiopenselectedphoto",this.openselectedtweetadaptivemediagallery),this.on("click uikeyboardopenadaptivegallery",{adaptivephotocontainer:this.openadaptivemediagallery})})}e.a=i}).call(e,i("4ksj"))},csbf:function(t,e,i){"use strict";function s(){this.attributes({maxcharacters:20,displayedheaderselector:".dmupdatename-header",displayednameselector:".dmupdatename-name",begineditmodeselector:".dmupdatename-name.edit-allowed",confirmbuttonselector:".dmupdatename-confirm",inputgroupselector:".dmupdatename-form",spinnerselector:".dmupdatename-spinner",displayedscreennameselector:".dmupdatename-screenname",textselector:".dmupdatename-input",updatenamecontainerselector:".dmupdatename-controls",verifiedbadgeselector:".js-verified",protectedbadgeselector:".js-protected",isrichheaderclass:"is-richheader",hiddenclass:"u-hidden",legacyhiddenclass:"hidden",invalidinputclass:"is-invalid"}),this.getcurrentname=function(){return this.$displayedname.data("raw-name")},this.handlecommandinputs=function(t,e){switch(t.keycode){case l.a.esc:t.stoppropagation(),this.hideeditmode();break;case l.a.enter:t.stoppropagation(),this.requestupdateconversationname(t)}},this.showeditmode=function(){this.select("displayedheaderselector").addclass(this.attr.hiddenclass),this.select("inputgroupselector").removeclass(this.attr.hiddenclass),this.select("textselector").focus().val(this.getcurrentname()),this.ineditmode=!0},this.hideeditmode=function(t,e){this.select("displayedheaderselector").removeclass(this.attr.hiddenclass),this.select("inputgroupselector").addclass(this.attr.hiddenclass),this.ineditmode=!1},this.showspinner=function(){this.select("textselector").unbind("blur"),this.hideeditmode(),this.select("displayedheaderselector").addclass(this.attr.hiddenclass),this.select("spinnerselector").removeclass(this.attr.hiddenclass)},this.hidespinner=function(){this.on(this.attr.textselector,"blur",this.hideeditmode),this.hideeditmode(),this.select("spinnerselector").addclass(this.attr.hiddenclass),this.select("displayedheaderselector").removeclass(this.attr.hiddenclass)},this.requestupdateconversationname=function(t){if(this.ineditmode !this.select("inputgroupselector").hasclass(this.attr.invalidinputclass)){var e=this.select("textselector").val();this.trigger("uiupdateconversationname",{conversation_id:this.conversationid,name:e}),this.showspinner()}},this.updatedisplayedname=function(t,e){this.$displayedname.html(e.conversation.title.html),this.hidespinner()},this.prepareupdatenameui=function(t){void 0===t.is_oto||t.is_oto||!t.is_trusted?(this.hidespinner(),this.select("updatenamecontainerselector").addclass(this.attr.hiddenclass),this.select("displayednameselector").removeclass("edit-allowed js-tooltip").removeattr("title")):this.ineditmode||(this.hidespinner(),this.select("updatenamecontainerselector").removeclass(this.attr.hiddenclass),this.select("displayednameselector").attr("title",object(n.default)("click to edit group name")).addclass("edit-allowed js-tooltip"))},this.handleinputchange=function(t,e){var i=r.a.getunicodetextlength(e.text)>this.attr.maxcharacters;this.select("inputgroupselector").toggleclass(this.attr.invalidinputclass,i)},this.detectinputchange=function(){var t=this.select("textselector").val();this.previoustext!==t (this.trigger("uitextchanged",{text:t}),this.previoustext=t)},this.initname=function(t,e){this.ineditmode=!1,this.conversationid=e.conversation_id;var i=e.is_oto 0===this.conversationid,s=e.name||e.generated_name,n=i?"text":"html";this.$displayedname.empty().removedata("raw-name"),s .$displayedname[n](s),this.$dmupdatename.removeclass(this.attr.isrichheaderclass),this.select("verifiedbadgeselector").addclass(this.attr.legacyhiddenclass),this.select("protectedbadgeselector").addclass(this.attr.legacyhiddenclass),this.prepareupdatenameui(e)},this.updatename=function(t,e){if(this.conversationid=e.conversation_id,!this.ineditmode){if(this.$displayedname.html(e.html).data("raw-name",e.raw),e.is_oto){this.$dmupdatename.addclass(this.attr.isrichheaderclass),this.select("verifiedbadgeselector").toggleclass(this.attr.legacyhiddenclass,!e.verified),this.select("protectedbadgeselector").toggleclass(this.attr.legacyhiddenclass,!e.protected);var i=e.screen_name?"@"+e.screen_name:null;this.$displayedscreenname.text(i)}this.prepareupdatenameui(e)}},this.after("initialize",function(){this.$dmupdatename=this.$node,this.$displayedscreenname=this.select("displayedscreennameselector"),this.$displayedname=this.select("displayednameselector"),this.on("click",{begineditmodeselector:this.showeditmode}),this.on("mousedown",{confirmbuttonselector:this.requestupdateconversationname}),this.on(this.attr.textselector,"blur",this.hideeditmode),this.on(this.attr.textselector,"keydown",this.handlecommandinputs),this.on("uieditconversationname",this.showeditmode),this.on("dataupdateconversationnamesuccess",this.updatedisplayedname),this.on("dataupdateconversationnamefailure",this.hidespinner),this.on("uitextchanged",this.handleinputchange),this.on("uiinputpoll",this.detectinputchange),this.on("uidmupdateconversationname",this.updatename),this.on("uidminitconversationname",this.initname),c.a.attachto(this.select("textselector"))})}var n=i("0d4m"),o=i("dbjh"),a=i("cztd"),r=i.n(a),c=i("zwfe"),l=i("i3qs"),h=object(o.default)(s);e.a=h},ctjh:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeonevent("uipromptbirdpromptwasshown",{action:"impression"}),this.scribeonevent("uiinlinepromptscrolledin",{action:"impression"}),this.scribeonevent("uipromptbirdclick",{action:"click"}),this.scribeonevent("uipromptbirddismissprompt",{action:"dismiss"}),this.scribeonevent("uipromptbirdpreviewpromotedaccount",{action:"preview"}),this.scribeonevent("uishowdashboardprofilepromptbird",{action:"show"})})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},cy9x:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({addtweetselector:".js-add-tweet",composerthumbnailselector:".composerthumbnail",shadowtextselector:".tweet-box-shadow",messagingclass:"messaging",tweetactionselector:".tweet-action",placeidselector:"input[name=place_id]",replyformselector:".tweet-form.is-reply",tweetboxdialogselector:null,tweetformselector:".tweet-form",tweetboxdialogtype:null,overrides:{},condensable:!1,suppressflashmessage:!1,suppresssuccessmessage:!1,customdata:{},cantweetdefaulttext:!1,gifsupport:!0,videosupport:!0,sruallmedia:!1,composealttext:!1}),this.confirmandsendtweet=function(){this.sendtweet()},this.geoplaceid=function(){return this.select("placeidselector").val()},this.createdataforsending=function(){return{status:this.addhiddentext(this.getvisibletext()),card_uri:this.carduri?this.carduri:void 0,place_id:this.geoplaceid(),tweet_stat_count:this.overrides.tweetstatcount,impression_id:this.impressionid,earned:this.disclosuretype?"earned"===this.disclosuretype:void 0,is_permalink_page:t(".permalink").length>0,semantic_annotation_ids:this.semanticannotationids,engagement_metadata:this.overrides.engagementmetadata,batch_mode:this.overrides.canbeselfthreaded?"subsequent":"off"}},this.isempty=function(){var t=this.getvisibletext().trim();return!(t (this.cantweetdefaulttext||t!==this.defaulttext.trim())||this.hasattachment())},this.hasattachment=function(){return!1},this.hasvalidcontent=function(){return!this.isempty() !this.maxreached()},this.sendtweet=function(){var t=this.gettweetboxid();this.detectupdatedtext(),this.$node.attr("id",t);var e="uisendtweet",i=void 0,s="",o="";this.hasmedia?e="uisendtweetwithmedia":this.haspoll (e="uisendtweetwithcard",i=this.getpolldata(),s=object(n.default)("sorry, there was a problem creating your poll."),o=object(n.default)("sorry, there was a problem creating your poll. please try again later.")),this.settweeting(!0),this.disable(),this.trigger(e,{tweetboxid:t,tweetdata:k({},this.createdataforsending()),customdata:this.customdata,carddata:i,clienterrormsg:s,servererrormsg:o})},this.alertmedia=function(t){var e=object(n.default)("your tweet has not been sent. are you sure you wish to leave the page?");if("beforeunload"!==t.type "uibeforeunload"!==t.type){"uidialogcloserequested"===t.type (e=object(n.default)("are you sure you wish to close the dialog and cancel sending the tweet?"));confirm(e)?this.trigger("datatweetcancel",{tweetboxid:this.gettweetboxid()}):t.preventdefault()}return e},this.gettweetboxid=function(){return this.tweetboxid||(this.tweetboxid="swift_tweetbox_"+ +new date),this.tweetboxid},this.settweetboxoverrides=function(t,e){var i=this,s=l.default.merge(e||this.attr.overrides,!0);this.overrides=s;var n=s.defaulttext;void 0===n (n=this.$node.attr("data-default-text")),void 0===n (n=this.attr.defaulttext||""),this.defaulttext=n,"string"==typeof s.carduri (this.carduri=s.carduri),this.semanticannotationids=s.semanticannotationids||this.$node.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),this.cantweetdefaulttext=void 0!==s.cantweetdefaulttext?s.cantweetdefaulttext:this.attr.cantweetdefaulttext,this.impressionid=s.impressionid||this.attr.impressionid,this.disclosuretype=s.disclosuretype||this.attr.disclosuretype,this.customdata=s.customdata||this.attr.customdata,void 0!==s.cursorposition?(this.cursorposition=s.cursorposition,settimeout(function(){return i.setcursorposition(i.cursorposition)})):this.cursorposition=this.attr.cursorposition},this.updatetweetstateontextchanged=function(t,e){this.select("shadowtextselector").val(e.text),this.updatebuttons()},this.updatebuttons=function(){!this.hasvalidcontent()||this.$node.hasclass("tweeting")?this.disable():this.enable(),this.validateaddtweetbutton(),this.maybetriggertooltip()},this.notifyimagetweetsuccess=function(t,e){this.attr.composealttext (t.tweetdata.has_alt_text?this.trigger("uitweetboxphototweetwithalttextsuccess",e):this.trigger("uitweetboxphototweetwithoutalttextsuccess",e)),this.trigger("uitweetboxphototweetsuccess",e)},this.notifygiftweetsuccess=function(t){var e=this.foundmediainfo?"uitweetboxremotegiftweetsuccess":"uitweetboxlocalgiftweetsuccess";this.trigger(e,t)},this.notifyvideotweetsuccess=function(t){c.a.getdecidervalue("web_upload_video_advanced") .trigger("uitweetboxprovideotweetsuccess",t),this.trigger("uitweetboxvideotweetsuccess",t)},this.notifymediatweetsuccess=function(t,e){this.isvideo .notifyvideotweetsuccess(e),this.isgif .notifygiftweetsuccess(e),this.isvideo||this.isgif||this.notifyimagetweetsuccess(t,e)},this.getmediadetailsforscribing=function(t){if(this.foundmediainfo)return{photo_count:1,found_media_provider:this.foundmediainfo.provider}},this.tweetsent=function(t,e){if((e.tweetboxid||e.sourceeventdata.tweetboxid)===this.gettweetboxid()){e.customdata=this.customdata,!e.message||this.attr.suppresssuccessmessage !e.unusual||this.trigger(e.unusual?"uishowerror":"uishowmessage",{message:e.message});var i="uitweetboxtweetsuccess",s={id:e.tweet_id,item_type:r.a.tweet};s.media_details=this.getmediadetailsforscribing(e);var n={scribedata:{items:[s],event_value:(this.overrides.screennames||[]).length}};this.overrides.id?(this.notifyreplybuttontweetsuccess(),this.excludereplyuserids.length .trigger("uitweetboxreplyeditedsuccess",n),i="uitweetboxreplysuccess"):this.dmmode (i="uitweetboxdmsuccess"),"uitweetboxreplysuccess"===i||"uitweetboxtweetsuccess"===i?this.trigger(i,k({},n,{text:this.getvisibletext()})):this.trigger(i,n),this.hasmedia?this.notifymediatweetsuccess(e,n):this.haspoll .trigger("uitweetboxpolltweetsuccess",n),this.getvisibletext().match(a.a.regex) .trigger("uitweetboxemojitweetsuccess"),this.geoplaceid() .trigger("uitweetboxgeotaggedtweetsuccess",n),this.settweeting(!1),this.trigger("uitweetsent",e),this.clear()}},this.tweeterror=function(t,e){(e.tweetboxid||e.sourceeventdata.tweetboxid)===this.gettweetboxid() (this.attr.suppressflashmessage||e.spamchallenge||this.trigger("uishowerror",{message:e.error||e.message}),this.settweeting(!1),this.enable(),this.trigger("uitweetboxtweeterror"))},this.tweetcancel=function(t,e){(e.tweetboxid||e.sourceeventdata.tweetboxid)===this.gettweetboxid() (this.settweeting(!1),this.trigger("uitweetcancelled",e),this.clear())},this.enable=function(){this.select("tweetactionselector").removeclass("disabled").prop("disabled",!1),this.$node.trigger("uienabletweetaction")},this.disable=function(){this.select("tweetactionselector").addclass("disabled").prop("disabled",!0),this.$node.trigger("uidisabletweetaction")},this.clear=function(){this.reset()},this.reset=function(){this.resettweettext()},this.resetandfocus=function(){this.reset(),this.focus(),this.setcursorposition(),this.composeractive(),this.trigger("uiclosedropdowns")},this.composeractive=function(){this.trigger("uicomposeractive")},this.resettweettext=function(){this.trigger("uiclearundostate"),this.setvisibletext(this.defaulttext)},this.handlecmdentersubmit=function(){this.select("tweetactionselector").hasclass("disabled")||this.confirmandsendtweet()},this.settweeting=function(e){e?(this.on(window,"beforeunload uibeforeunload",this.alertmedia),this.on(document,"uibeforenavigate",this.alertmedia),this.attr.tweetboxdialogselector .on(t(this.attr.tweetboxdialogselector),"uidialogcloserequested",this.alertmedia)):(this.off(window,"beforeunload uibeforeunload",this.alertmedia),this.off(document,"uibeforenavigate",this.alertmedia),this.attr.tweetboxdialogselector .off(t(this.attr.tweetboxdialogselector),"uidialogcloserequested",this.alertmedia)),this.$node.toggleclass("tweeting",e),this.trigger(this.$text,e?"uidisableediting":"uienableediting")},this.keyshortcuttooltip=function(t){if(9===t.which){var e=-1!==navigator.platform.tolowercase().indexof("mac"),i=e?object(n.default)("you can also press cmd-enter"):object(n.default)("you can also press ctrl-enter");this.select("tweetactionselector").attr("data-original-title",i).filter(document.activeelement).tooltip("show")}},this.reenableforbounceduser=function(){this.settweeting(!1),this.enable()},this.triggertweetstormdialogfrominline=function(e){"tweet_box_dialog"===this.attr.tweetboxdialogtype .trigger(this.$node,"uiclosedialog"),e.preventdefault();var i=t(e.target).closest(this.attr.replyformselector).attr("data-previous-status-id-in-thread"),s=this.$node.find(this.attr.composerthumbnailselector),n=s.toarray().map(function(e){return t(e).attr("data-file-id")}),o=this.currentpoll;this.$node.closest(this.attr.tweetformselector).attr("data-file-reuse-in-thread",!0),this.trigger("uiopentweetstormdialog",{tweettext:this.getvisibletext(),addanothertweet:!0,previousstatusidinthread:i,mediafileids:n,currentpoll:o}),this.clear()},this.after("initialize",function(){this.settweetboxoverrides(),this.on("uitextchanged",this.updatetweetstateontextchanged),this.initdrafttweets(),this.inittextnode(),this.on(this.select("tweetactionselector"),"click",this.confirmandsendtweet),this.on(this.select("addtweetselector"),"click",this.triggertweetstormdialogfrominline),this.on("uishortcutcmdenter",this.handlecmdentersubmit),this.on(document,"datatweetsuccess",this.tweetsent),this.on(document,"datatweeterror",this.tweeterror),this.on(document,"datatweetcancel",this.tweetcancel),this.on(document,"uibouncercancelled",this.reenableforbounceduser),this.on(this.$text,"dragover",this.focus),this.on("uicomposerresetandfocus",this.resetandfocus),this.on("keyup",this.keyshortcuttooltip),this.on("uioverridetweetboxoptions",this.settweetboxoverrides),this.on(this.$text,"focusin",this.ignoreduringfakefocus(this.composeractive)),this.hasfocus()?(this.composeractive(),this.trigger("uicomposerhadfocus")):this.reset()})}var n=i("0d4m"),o=i("dbjh"),a=i("fuxd"),r=i("rbkv"),c=i("iamj"),l=i("yzit"),h=i("prwu"),d=i("6n1l"),u=i("hpdd"),p=i("swj0"),f=i("taxt"),m=i("fdtv"),g=i("02ih"),v=i("lcya"),b=i("pul/"),w=i("zg5a"),s=i("1qjr"),c=i("x8v/"),y=i("4oxf"),t=i("cgr6"),d=i("+hbl"),i=i("lvmq"),x=i("nkyg"),k=object.assign||function(t){for(var e=1;e i) (i=r.bottom),(null===e||r.top o) (o=r.right)}return{top:e,bottom:i,left:n,right:o,width:math.abs(o-n),height:math.abs(i-e)}}function s(){for(var t=f.getclientrects(),e=[],i=0;i 0})}function c(t){return e(t)?t.nodevalue.length:t.childnodes.length}function l(){return t.width()-h()}function h(){var t=i(),e=s(),n=e[e.length-1];return 0===e.length?0:n.right-t.left}function d(t){var e=t.match(a);if(null!==e){var i=e[e.length-1],s=t.lastindexof(i);return{startindex:s,endindex:s+i.length}}return null}function u(t){return!!t.match(o)}function p(t){return(t.match(n)||[]).length}var f=function(){var e=document.createrange(),i=t.contents(),s=t.contents().last()[0];return i.length>0 (e.setstart(i[0],0),e.setend(s,c(s))),e}();this.shortentovisiblecontent=function(){for(var i=t.contents(),s=i.length-1;s>=0;s--){var n=i[s];if(e(n)){for(var o=n.nodevalue.length;o>=0;o--)if(f.setend(n,o),!this.hasoverflow())return}else if(f.setend(n,n.childnodes.length),!this.hasoverflow())return}},this.shortentonearestwordbreak=function(t){var i=f.endcontainer,s=t.maxcharstoremove;if(e(i) (i.nodevalue.match(r)||f.endoffset!==i.nodevalue.length !u(i.nodevalue[f.endoffset]))){var n=i.nodevalue.slice(0,f.endoffset),o=d(n);null!==o (void 0!==s (n.substring(o.endindex))>s||f.setend(i,o.startindex))}},this.ensurelastlineavailablewidth=function(t){for(;l() 1)f.setend(i,f.endoffset-1);else{var s=i.previoussibling;if(null===s)break;f.setend(s,c(s))}}},this.hasoverflow=function(){var e=i(),s=parsefloat(t.css("line-height"));return math.round(e.height/s)>math.round(t.height()/s)},this.todocumentfragment=function(){return f.clonecontents()},this.setend=function(t,e){f.setend(t,e)}}var n=/([\ud800-\udbff][\udc00-\udfff]|[\s\s])/g,o=/\s/,a=/\s+/g,r=/^\n$/;e.a=s},duhp:function(t,e,i){"use strict";function s(){this.updateretweetstate=function(t,e){var i=e.tweet_id||e.id,s=e.retweet_id||e.id_str;this.$node.find('div.tweet[data-tweet-id="'+i+'"]').attr("data-my-retweet-id",s)},this.updateunretweetstate=function(t,e){var i=e.tweet_id||e.id_str;this.$node.find('div.tweet[data-tweet-id="'+i+'"]').removeattr("data-my-retweet-id data-retweet-id data-retweeter")},this.after("initialize",function(){this.attr.loggedin (this.on(document,"datadidretweet",this.updateretweetstate),this.on(document,"datadidunretweet",this.updateunretweetstate))})}var n=i("dbjh"),o=object(n.default)(s);e.a=o},dzhj:function(t,e,i){"use strict";(function(t){function s(){var e=n.a.options_type,i=n.a.text_input_type;this.defaultattrs({hastextinputquickreplyclass:"has-text-input-quick-reply",composereditorselector:".dmcomposer-editor",qrtextinputplaceholderdataattr:"data-qr-text-input-placeholder",dismissselector:".quickreplydismiss",timetodismissselectedqrinms:2e3}),this.getquickreplyresponsedata=function(){var t={};switch(this.quickreplystate.type){case i:t={"quick_reply_response[text_input][id]":this.quickreplystate.id};break;case e:this.quickreplystate.optiondata (t={"quick_reply_response[options][id]":this.quickreplystate.id,"quick_reply_response[options][selected_id]":this.quickreplystate.optiondata.optionid,text:this.quickreplystate.optiondata.optiontext})}return t},this.handletextinputquickreply=function(t){this.quickreplystate.id=t .id;var e=t .label||"";this.$node.addclass(this.attr.hastextinputquickreplyclass),this.select("composereditorselector").attr(this.attr.qrtextinputplaceholderdataattr,e)},this.handleoptionquickreply=function(t){var e=t .id;this.quickreplystate .quickreplystate.id===e||(this.quickreplystate.id=e,this.trigger("uishowquickreplyoptionpanel",t))},this.handleshowquickreply=function(t){if(t)switch(this.quickreplystate.data=t,this.quickreplystate.type=t.type .type.name,this.quickreplystate.type){case e:this.handleoptionquickreply(t);break;case i:this.handletextinputquickreply(t)}},this.removeoptionsquickreply=function(t,e){(e .text .text.length)>0 !this.$node.hasclass(this.attr.hastextinputquickreplyclass) .removequickreply()},this.removetextinputquickreply=function(){this.quickreplystate.type===i .removequickreply()},this.handlesendqroptionresponse=function(t,e){this.quickreplystate.optiondata=e,this.trigger("uisendqroptionresponse")},this.scheduleclearqroptions=function(){var t=this,e=this.quickreplystate.id;this.timer=settimeout(function(){return t.trigger("uiremovequickreplywithid",{id:e})},this.attr.timetodismissselectedqrinms)},this.removequickreply=function(){if(!t.isemptyobject(this.quickreplystate)){this.$node.removeclass(this.attr.hastextinputquickreplyclass);this.select("composereditorselector").removeattr(this.attr.qrtextinputplaceholderdataattr),this.quickreplystate={},this.trigger("uiquickreplyremoved")}},this.removequickreplywithid=function(t,e){var i=e .id;i ===this.quickreplystate.id .removequickreply()},this.removetimer=function(){cleartimeout(this.timer)},this.handlesendqrfailed=function(){this.removetimer(),this.trigger("uiupdateqr")},this.removequickreplypanelifpuredm=function(){t.isemptyobject(this.getquickreplyresponsedata()) .trigger("uiremovequickreply")},this.after("initialize",function(){this.quickreplystate={},this.on(document,"uiqroptionclicked",this.handlesendqroptionresponse),this.on(document,"datadmsendfailed",this.handlesendqrfailed),this.on(document,"uiqroptionclicked",this.scheduleclearqroptions),this.on(document,"uiremovequickreply uidmdialogclosed",this.removequickreply),this.on(document,"uiremovequickreplywithid",this.removequickreplywithid),this.on("uidmsendmessage",this.removequickreplypanelifpuredm),this.on("click",{dismissselector:this.removequickreply})})}var n=i("9htr");e.a=s}).call(e,i("4ksj"))},"e+ft":function(t,e,i){"use strict";(function(t){functions(){n.default.mixin(this,[o.a]),this.defaultattrs({tweetselector:".tweet",tweettranslationselector:".tweet-translation",tweettranslationtextselector:".tweet-translation-text",translatetweetselector:".js-translate-tweet",needstranslationclass:"needs-translation",permalinkcontainerselector:".permalink-tweet-container",permalinkclass:".permalink-tweet",languageselector:".tweet-language",gallerytranslatebuttonselector:".gallery .gallerytweet .tweet .translate-button",translatebuttonselector:".translate-button",translationfeedbackbuttonselector:".js-translation-feedback-button",translationsloadingselector:".tweet-translation-loading"}),this.translatetweet=function(t){var e=this.tweetfromevent(t);if(e.find(this.attr.tweettranslationselector).hasclass(this.attr.needstranslationclass)){var i=this.interactiondata(e);i.dest=e.find(this.attr.tweettranslationselector).data("destlang"),e.find(this.attr.translationsloadingselector).show(),this.trigger(e,"uineedstweettranslation",i)}},this.showtranslationfeedbackdialog=function(t){var e=this.tweetfromevent(t),i=e.find(this.attr.tweettranslationselector);this.trigger(e,"uineedstranslationfeedbackdialog",{tweetid:e.data("tweetid"),translation:i.data("translationtext"),sourcelang:i.data("sourcelang"),destlang:i.data("destlang")})},this.tweetfromevent=function(e){return t(e.target).closest(this.attr.tweetselector)},this.showtweettranslation=function(e,i){if(this.select("translationsloadingselector").hide(),i.item_html){var s=this.findtweetbyid(t(e.target),i.id_str);s.find(this.attr.translatebuttonselector).hide();var n=s.find(this.attr.tweettranslationselector);if(!i.translated_lang)return void s.find(this.attr.translatetweetselector).hide();n.find(this.attr.languageselector).html(i.translated_lang),n.data({translationtext:i.text,sourcelang:i.source_lang}).removeclass(this.attr.needstranslationclass).find(this.attr.tweettranslationtextselector).html(i.item_html),s.find(this.attr.translatetweetselector).toarray().foreach(function(e){var i=t(e);i.is(this.attr.gallerytranslatebuttonselector) .hide()},this)}},this.findtweetbyid=function(t,e){var i=this.tweetselectorbyid(e);return t.is(i)?t:t.find(i)},this.tweetselectorbyid=function(t){return this.attr.tweetselector+"[data-tweet-id="+t.replace(/\d/g,"")+"]"},this.showerror=function(t,e){this.select("translationsloadingselector").hide(),this.trigger("uishowmessage",{message:object(a.default)("unable to translate this tweet. please try again later.")})},this.after("initialize",function(){this.on("datatweettranslationsuccess",this.showtweettranslation),this.on("datatweettranslationerror",this.showerror),this.on("click",{translationfeedbackbuttonselector:this.showtranslationfeedbackdialog,translatetweetselector:this.translatetweet})})}var n=i("q9/c"),o=i("alsu"),a=i("0d4m");e.a=s}).call(e,i("4ksj"))},e3dh:function(t,e,i){"use strict";function s(){this.defaultattrs({tweetactionselector:".retweet-action",tweetboxid:"retweet",iswithcommentclass:"is-withcomment",defaulttitle:void 0}),this.dmregex=/^\s*(?:d|m|dm)\s+[@]?(\s+)\s*(.*)/i,this.createdataforsending=function(){return{status:this.getvisibletext(),impression_id:this.impressionid,earned:this.earned,attachment_url:this.urltoretweet}},this.isempty=function(){return!this.getvisibletext().trim()},this.hasattachment=function(){return!0},this.sendretweet=function(){this.detectupdatedtext(),this.isempty()||(this.trigger("uisendtweet",{tweetboxid:this.attr.tweetboxid,tweetdata:this.createdataforsending()}),this.$node.addclass("tweeting"),this.disable())},this.updatetweetstateontextchanged=function(t){var e=!this.isempty();this.maxreached()||this.$node.hasclass("tweeting")||this.getvisibletext().match(this.dmregex)?this.disable():this.enable(),this.$node.toggleclass(this.attr.iswithcommentclass,e),e?this.trigger("uidialogupdatetitle",{title:object(n.default)("quote tweet")}):this.trigger("uidialogupdatetitle",{title:this.attr.defaulttitle}),this.maybetriggertooltip(),this.validateaddtweetbutton()},this.retweetsent=function(t,e){(e.tweetboxid||e.sourceeventdata.tweetboxid)===this.attr.tweetboxid (this.trigger("uishowmessage",{message:object(n.default)("your tweet was posted!")}),this.trigger("uiretweetwithcommentsuccess",e),this.$node.removeclass("tweeting"),this.clear())},this.retweeterror=function(t,e){(e.tweetboxid||e.sourceeventdata.tweetboxid)===this.attr.tweetboxid (this.$node.removeclass("tweeting"),this.enable())},this.enable=function(){this.$tweetbutton.removeclass("disabled").prop("disabled",!1)},this.disable=function(){this.$tweetbutton.addclass("disabled").prop("disabled",!0)},this.clear=function(){this.reset()},this.reset=function(){this.resettweettext()},this.resetandfocus=function(){this.reset(),this.focus()},this.resettweettext=function(){this.trigger("uiclearundostate"),this.setvisibletext("")},this.handlecmdentersubmit=function(){this.$tweetbutton.hasclass("disabled")||this.$tweetbutton.click()},this.overrideoptions=function(t,e){this.urltoretweet=e.urltoretweet,this.impressionid=e.impressionid,this.earned=e.earned},this.triggertweetstormdialogfrominline=function(t,e){this.trigger("uiclosedialog");var i=void 0,s=void 0;"object"===(void 0===e?"undefined":m(e)) (i=e.quotedtweetid,s=e.quoteduserscreenname),this.trigger("uiopentweetstormdialog",{tweettext:this.getvisibletext(),addanothertweet:!0,quotedtweetid:i,quoteduserscreenname:s}),this.clear()},this.after("initialize",function(){this.$tweetbutton=this.select("tweetactionselector"),this.on("uitextchanged",this.updatetweetstateontextchanged),this.on("uicomposerresetandfocus",this.resetandfocus),this.initdrafttweets(),this.inittextnode(),this.on(this.$tweetbutton,"click",this.sendretweet),this.on("uishortcutcmdenter",this.handlecmdentersubmit),this.on(document,"datatweetsuccess",this.retweetsent),this.on(document,"datatweeterror",this.retweeterror),this.on("uioverridetweetboxoptions",this.overrideoptions),this.on("uiclickaddmoretweetonquoteretweet",this.triggertweetstormdialogfrominline),this.reset()})}var n=i("0d4m"),o=i("dbjh"),a=i("prwu"),r=i("hpdd"),c=i("swj0"),l=i("+hbl"),h=i("lcya"),d=i("pul/"),u=i("84/5"),p=i("4oxf"),f=i("nkyg"),m="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t};e.a=object(o.default)(s,a.a,d.a,u.a,r.a,h.a,c.a,p.a,l.a,f.a)},ec06:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({composealttext:!1}),this.createtweetboxattarget=function(t,e){this.createtweetbox(t.target,e)},this.createtweetbox=function(e,i){var s=t(e);if(!((i.eventdata||{}).scribecontext||{}).component)throw new error("please specify scribing component for tweet box.");s.find(".geo-picker").length>0 .a.attachto(s,i,{eventdata:{scribecontext:{element:"geo_picker"}},restorefocusonclose:!0,skipfocusmanager:!0});var r=s.find("div.rich-editor").length>0?[l.a]:[],h=(i.dmonly?o.a:n.a).mixin.apply(this,r),d=!i.dmonly .attr.composealttext,u=c.a.getconfig(),p={typeaheaddata:this.attr.typeaheaddata,hashflagsenabled:!i.dmonly,composealttext:d,mediacategoryprefix:i.dmonly?"dm_":"tweet_",twittertextoptions:u,maxlength:u.maxweightedtweetlength};h.attachto(s,p,i)},this.after("initialize",function(){this.on("uiinittweetbox",this.createtweetboxattarget)})}var n=i("cy9x"),o=i("t2va"),a=i("8n88"),r=i("dbjh"),c=i("cxip"),l=i("84/5"),h=object(r.default)(s);e.a=h}).call(e,i("4ksj"))},eec2:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"promptbird/templates/dismiss_button":i("02ms"),"promptbird/templates/title":i("orcd")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n'),s.b(s.rp(" \n "),s.b(s.v(s.f( \n '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b(" \n "),s.b(s.v(s.f("explanation",t,e,0))),s.b("\n"+i),s.b(' '),s.b(s.v(s.f("preview_text",t,e,0))),s.b(" \n \n \n"),s.fl()},partials:{" -1 %1==0 >t}function o(t){return"number"==typeof t >-1 %1==0 >=t}function a(t){for(var e=c(t),i=e.length,s=i .length,a=!!s (s) (d(t)||h(t)),r=-1,l=[];++r 0;++s 2?i[a-2]:void 0,c=a>2?i[2]:void 0,l=a>1?i[a-1]:void 0;for("function"==typeof r?(r=n(r,l,5),a-=2):(r="function"==typeof l?l:void 0,a-=r?1:0),c (i[0],i[1],c) (r=3>a?void 0:r,a=1);++s -1 %1==0 >t}function n(t,e,n){if(!a(n))return!1;var o=typeof e;if("number"==o?i(n) (e,n.length):"string"==o in n){var r=n[e];return t===t?t===r:r!==r}return!1}function o(t){return"number"==typeof t >-1 %1==0 >=t}function a(t){var e=typeof t;return!!t ("object"==e||"function"==e)}var r=/^\d+$/,c=9007199254740991,l=function(t){return function(e){return null==e?void 0:e[t]}}("length");t.exports=n},function(t,e){function i(t,e){if("function"!=typeof t)throw new typeerror(s);return e=n(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,s=-1,o=n(i.length-e,0),a=array(o);++s -1 %1==0 >=t}function r(t){var e=typeof t;return!!t ("object"==e||"function"==e)}function c(t){return!!t "object"==typeof t}var l=9007199254740991,h="[object arguments]",d="[object function]",u="[object generatorfunction]",p=object.prototype,f=p.hasownproperty,m=p.tostring,g=p.propertyisenumerable,v=function(t){return function(e){return null==e?void 0:e[t]}}("length");t.exports=i},function(t,e){function i(t){return!!t "object"==typeof t}function s(t){return"number"==typeof t >-1 %1==0 >=t}function n(t){return o(t) .call(t)==r}function o(t){var e=typeof t;return!!t ("object"==e||"function"==e)}function a(t){return null!=t (n(t)?p.test(h.call(t)):i(t) .test(t))}var r="[object function]",c=/^\[object .+?constructor\]$/,l=object.prototype,h=function.prototype.tostring,d=l.hasownproperty,u=l.tostring,p=regexp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$ ").replace(/hasownproperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),f=function(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}(array,"isarray"),m=9007199254740991,g=f||function(t){return i(t) (t.length) "[object array]"==u.call(t)};t.exports=g}])})},eyue:function(t,e,i){"use strict";var s=0,n=10,o={unknown:s,top_left:1,top_right:2,bottom_right:3,bottom_left:4,left_top:5,right_top:6,right_bottom:7,left_bottom:8,detectorientation:function(t,e,i){function o(n,o,a){var r=n-l,h=r+o;if(r>=0 8 (4,4);if(!a||a+2>t.length)return void e(s);var r=i(a,2);if(a+12*r+6>t.length)return void e(s);for(var c=a+2;r--;){if(274===i(c,2) ===i(c+2,2) ===i(c+4,4))return void e(i(c+8,2));c+=12}e(s)}function r(t,i){var c=t[1];if(t.length 217?(t[2] 8 "exif\0\0"===string.fromcharcode.apply(null,t.subarray(4,10))?o(i+10,l-8,a):o(i+2+l,n,r)}i=i||65536;var c=[],l=0;t instanceof blob?o(0,n,r):e(s)}};e.a=o},ehjk:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,54,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweet")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,100,129,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweets")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},el2s:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[a.a,h.a]),this.defaultattrs({followbuttonselector:".follow-button, .follow-link, .profiletweet-follow-button",topiclinkselector:".user-topic-link",userinfoselector:".user-actions",dropdownselector:".user-actions .dropdown",blockorunblockselector:".block-text, .unblock-text",dropdownitemselector:".user-actions .dropdown.open .dropdown-menu li",blockorreportbuttonselector:".block-or-report-text",tweetitemselector:".tweet",reportbuttonselector:".blocked-report-text",unmutebuttonselector:".unmute-button",mutebuttonselector:".mute-button",showthreadlinkselector:".show-thread-link",followstates:["not-following","following","blocked","pending"],useractionclassestoevents:{"mention-text":["uimentionaction","mentionuser"],"dm-text":["uidmaction","dmuser"],"list-text":["uilistaction"],"block-text":["uineedsblockdialog","attachuserdata"],"report-text":["uineedsreportdialog","attachuserdata"],"unblock-text":["uiunblockaction"],"hide-suggestion-text":["uihidesuggestionaction"],"retweet-on-text":["uiretweetonaction"],"retweet-off-text":["uiretweetoffaction"],"device-notifications-on-text":["uidevicenotificationsonaction","devicenotificationson"],"device-notifications-off-text":["uidevicenotificationsoffaction"],"embed-profile":["uiembedprofileaction","redirecttoembedprofile"]}}),this.getclassnamefromlist=function(t,e){return e.filter(function(e){return t.hasclass(e)})[0]},this.getuseractioneventnameandmethod=function(t){var e=this.getclassnamefromlist(t.closest("li"),object.keys(this.attr.useractionclassestoevents));return this.attr.useractionclassestoevents[e]},this.getfollowstate=function(t){return this.getclassnamefromlist(t,this.attr.followstates)},this.getinfoelementfromevent=function(e){return t(e.target).closest(this.attr.userinfoselector)},this.findinfoelementforuser=function(t){var e=this.attr.userinfoselector+"[data-user-id="+c.a.parsebigint(t)+"]";return this.$node.find(e)},this.geteventname=function(t){return{"not-following":"uifollowaction",following:"uiunfollowaction",blocked:"uiunblockaction",pending:"uicancelfollowrequestaction"}[t]},this.addcancelhoverstyleclass=function(t){t.addclass("cancel-hover-style"),t.one("mouseleave",function(){return t.removeclass("cancel-hover-style")});var e=t.closest(this.attr.userinfoselector);e.addclass("show-more-actions-button"),t.one("mouseleave",function(){return e.removeclass("show-more-actions-button")})},this.handlefollowbuttonclick=function(e){e.stoppropagation(),this.trigger(t(e.target),"uiclosedropdowns");var i=this.getinfoelementfromevent(e),s=t(e.target).closest(this.attr.followbuttonselector),n=this.gettweetforevent(e,"closest");this.addcancelhoverstyleclass(s);var a=this.getfollowstate(i),r=!s.closest(".stream").length;"not-following"===a .data("protected") .trigger("uishowmessage",{message:object(o.default)("a follow request has been sent to @{{screen_name}} and is pending their approval.",{screen_name:i.data("screen-name")})});var c=this.geteventname(a),l={originalfollowstate:a,shouldrefreshtimeline:r,mediatype:this.getmediatype(n),screenname:i.data("screen-name")};this.trigger(c,this.interactiondatawithcard(e,l))},this.handletopiclinkclick=function(t){var e=this.interactiondata(t);this.trigger("uiusertopicclickaction",e)},this.blockfollowwithsignupdialog=function(e){e.stoppropagation(),this.trigger(t(e.target),"uiclosedropdowns"),this.trigger("uiopensignupdialog",{signuponly:!0,screenname:this.getinfoelementfromevent(e).data("screen-name")}),this.trigger("uiloggedoutfollowattempt",this.interactiondata(e))},this.getblockorreportdatafromevent=function(t){var e=this.getinfoelementfromevent(t),i=e.data("screen-name"),s=e.data("user-id").tostring(),n=this.getfollowstate(e);return d({},this.interactiondata(t),{screenname:i,userid:s,target:"user",viewerfollowsauthor:"following"===n,viewerblocksauthor:"blocked"===n})},this.handleblockorreportclick=function(t){this.trigger("uineedsblockorreportdialog",this.getblockorreportdatafromevent(t))},this.handleblockorunblockclick=function(t){var e=this.getblockorreportdatafromevent(t),i=this.getinfoelementfromevent(t);"blocked"===this.getfollowstate(i)?this.trigger("uiunblockaction",e):this.trigger("uineedsblockdialog",e)},this.handleuseraction=function(e){var i=t(e.target),s=this.getuseractioneventnameandmethod(i);if(s){e.stoppropagation();var n=this.getinfoelementfromevent(e),o=s[0],a=s[1],r=this.getfollowstate(n),c={originalfollowstate:r};a (c=this[a](n,o,c)),c .trigger(o,this.interactiondata(e,c)),this.trigger(i,"uiclosedropdowns")}},this.devicenotificationson=function(t,e,i){return this.attr.deviceenabled?i:(this.attr.smsdeviceverified||this.attr.haspushdevice?this.trigger("uiopenconfirmdialog",{titletext:object(o.default)("enable mobile notifications for tweets"),bodytext:object(o.default)("before you can receive mobile notifications for @{{screenname}}'s tweets, you need to enable the tweet notification setting.",{screenname:t.data("screen-name")}),canceltext:object(o.default)("close"),submittext:object(o.default)("enable tweet notifications"),action:this.attr.haspushdevice?"showpushtweetsnotifications":"showmobilenotifications",top:this.attr.top}):this.trigger("uiopenconfirmdialog",{titletext:object(o.default)("setup mobile notifications"),bodytext:object(o.default)("before you can receive mobile notifications for @{{screenname}}'s tweets, you need to set up your phone.",{screenname:t.data("screen-name")}),canceltext:object(o.default)("cancel"),submittext:object(o.default)("set up phone"),action:"showmobilenotifications",top:this.attr.top}),!1)},this.redirecttomobilenotifications=function(){window.location="/settings/devices"},this.redirecttopushnotificationshelp=function(){window.location="//support.twitter.com/articles/20169887"},this.redirecttoembedprofile=function(t,e,i){return this.trigger("uinavigate",{href:"/settings/widgets/new/user?screen_name="+t.data("screen-name")}),!0},this.mentionuser=function(t,e,i){this.trigger("uiopentweetdialog",{screenname:t.data("screen-name"),title:object(o.default)("tweet to {{name}}",{name:t.data("name")})})},this.attachuserdata=function(t,e,i){return d({},this.interactiondata(i),{screenname:l.a.getscreenname(t),userid:l.a.getid(t),target:"user"})},this.dmuser=function(t,e,i){return this.trigger("uineedsdmdialog",{id:l.a.getid(t),screen_name:l.a.getscreenname(t),name:l.a.getname(t),oto_only:!0}),i},this.hidesuggestion=function(t,e,i){return d({},i,{feedbacktoken:t.data("feedback-token")})},this.followstatechange=function(t,e){this.updatefollowstate(e.userid,e.newstate),e.fromshortcut ("not-following"===e.newstate?this.trigger("uishowmessage",{message:object(o.default)("you have unblocked {{username}}",{username:e.username})}):"blocked"===e.newstate .trigger("uiupdateafterblock",{userid:e.userid}))},this.updatefollowstate=function(t,e){var i=this.findinfoelementforuser(t),s=this.getfollowstate(i);s .removeclass(s),i.addclass(e),"blocked"===e?this.trigger("uiupdateafterblock",{userid:t}):"not-following"===e .trigger("uishowprofiletweets")},this.follow=function(t,e){var i=this.findinfoelementforuser(e.userid),s=i.data("protected")?"pending":"following";this.updatefollowstate(e.userid,s),i.addclass("including")},this.unfollow=function(t,e){var i=this.findinfoelementforuser(e.userid);this.updatefollowstate(e.userid,"not-following"),i.removeclass("including notifying")},this.cancel=function(t,e){this.updatefollowstate(e.userid,"not-following")},this.block=function(t,e){var i=this.findinfoelementforuser(e.userid);this.trigger("jsclearreinjectioncookiesforuser",{userid:e.userid}),this.updatefollowstate(e.userid,"blocked"),i.removeclass("including notifying")},this.unblock=function(t,e){this.updatefollowstate(e.userid,"not-following")},this.retweetson=function(t,e){this.findinfoelementforuser(e.userid).addclass("including")},this.retweetsoff=function(t,e){this.findinfoelementforuser(e.userid).removeclass("including")},this.notificationson=function(t,e){var i=this.findinfoelementforuser(e.userid),s=i.find(this.attr.devicefollowcheckboxselector);i.addclass("notifying"),s.prop("checked",!0)},this.notificationsoff=function(t,e){var i=this.findinfoelementforuser(e.userid),s=i.find(this.attr.devicefollowcheckboxselector);i.removeclass("notifying"),s.prop("checked",!1)},this.blockuserconfirmed=function(t,e){t.stopimmediatepropagation(),this.trigger("uiblockaction",e.sourceeventdata)},this.preventfocus=function(t,e){t.preventdefault()},this.handlemutebuttonclick=function(t){return function(e,i){i=this.interactiondata(e),i.scribecontext={element:"muted_button"},this.trigger(e.target,t,i)}},this.updatemutebuttonstate=function(t,e){var i=this.$node.find(this.attr.userinfoselector+"[data-user-id="+e.userid+"]"),s=i.find(this.attr.unmutebuttonselector),n=i.find(this.attr.mutebuttonselector),o=s.is(":focus"),a=n.is(":focus");i[e.modop](e.modclass),n.removeclass("first-load"),o?n.focus():a .focus()},this.ishomepage=function(){return"/"===window.location.pathname},this.after("initialize",function(){if(r.a.attachto(this.$node),this.on("click",{showthreadlinkselector:"uishowthreadctaclicked"}),!this.attr.loggedin)return void this.on("click",{followbuttonselector:this.blockfollowwithsignupdialog});this.on(document,"uifollowstatechange datafollowstatechange databulkfollowstatechange",this.followstatechange),this.on(document,"uifollowaction",this.follow),this.on("click",{followbuttonselector:this.handlefollowbuttonclick}),this.attr.loggedin (this.on("click",{topiclinkselector:this.handletopiclinkclick,dropdownitemselector:this.handleuseraction,unmutebuttonselector:this.handlemutebuttonclick("uididunmuteuser"),mutebuttonselector:this.handlemutebuttonclick("uididmuteuser"),blockorreportbuttonselector:this.handleblockorreportclick,blockorunblockselector:this.handleblockorunblockclick,reportbuttonselector:this.handleblockorreportclick}),this.on("mousedown",{unmutebuttonselector:this.preventfocus,mutebuttonselector:this.preventfocus}),this.on(document,"uiunfollowaction",this.unfollow),this.on(document,"uicancelfollowrequestaction",this.cancel),this.on(document,"uiunblockaction",this.unblock),this.on(document,"uiretweetonaction dataretweetonaction",this.retweetson),this.on(document,"uiretweetoffaction dataretweetoffaction",this.retweetsoff),this.on(document,"uidevicenotificationsonaction datadevicenotificationsonaction",this.notificationson),this.on(document,"uidevicenotificationsoffaction datadevicenotificationsoffaction",this.notificationsoff),this.on(document,"uishowmobilenotificationsconfirm",this.redirecttomobilenotifications),this.on(document,"uishowpushtweetsnotificationsconfirm",this.redirecttopushnotificationshelp),this.on(document,"uiupdatemutebuttonstate",this.updatemutebuttonstate),this.on(document,"uiblockaction",this.block),this.on(document,"uididblockuser",this.blockuserconfirmed),this.on(document,"uididtriggerblockingaction",this.block))})}var n=i("q9/c"),o=i("0d4m"),a=i("alsu"),r=i("7tcb"),c=i("luie"),l=i("uxvi"),h=i("rhwy"),d=object.assign||function(t){for(var e=1;e =this.attr.warnlength,i=this.maxreached(),s=this.attr.maxlength-t;this.$counter.html(s).toggleclass(this.attr.warnclass,e).toggleclass(this.attr.maxreachedclass,i),e .trigger("uicharcountwarningvisible",{charcount:s})},this.parsetweet=function(t){t=this.addhiddentext(void 0===t?this.getvisibletext():t),this.prevcountertext=t;var e=a.a.parsetweet(t,this.attr.twittertextoptions);return this.prevcounterlength=e.weightedlength,e},this.getlength=function(t){return this.parsetweet(t,this.twittertextoptions).weightedlength},this.maxreached=function(){return this.getlength()>this.attr.maxlength},this.after("initialize",function(){this.$counter=this.select("counterselector"),this.on("uitextchanged uiattachmentchanged",this.updatecounter),this.updatecounter()})}var n=i("q9/c"),o=i("cztd"),a=i.n(o),r=i("ajan");e.a=s},fuor:function(t,e,i){"use strict";function s(){this.defaultattrs({allowthreading:!0,drafttweetidattr:"draft-tweet-id",dialogtitleattr:"dialog-title",cursorpositionattr:"cursor-position",cursorposition:void 0,cantweetdefaulttextattr:"can-tweet-default-text",defaulttextattr:"default-text",defaulttext:void 0,isglobaltweetbutton:!1}),this.opentweetdialog=function(){this.scribe({element:"tweet_button",action:"click"},this.attr.eventdata),r.a.getdecider("enable_tweetstorm_creation") .attr.allowthreading?this.trigger("uiopentweetstormdialog",this.tweetstormdialogdata()):this.trigger("uiopentweetdialog",this.tweetdialogdata())},this.tweetdialogdata=function(){return{drafttweetid:this.$node.data(this.attr.drafttweetidattr)||"global",screenname:a.a.getscreenname(this.$node),cantweetdefaulttext:this.$node.data(this.attr.cantweetdefaulttextattr),cursorposition:void 0!==this.attr.cursorposition?this.attr.cursorposition:this.$node.data(this.attr.cursorpositionattr),title:this.$node.data(this.attr.dialogtitleattr),text:void 0!==this.attr.defaulttext?this.attr.defaulttext:this.$node.data(this.attr.defaulttextattr)}},this.tweetstormdialogdata=function(){var t=void 0,e=void 0,i=a.a.getscreenname(this.$node),s=this.attr.defaulttext,n=this.$node.data(this.attr.defaulttextattr);return s?(t=" "+s,e=0):n?(t=" "+n,e=0):i (t="@"+i+" "),{tweettext:t,cursorposition:e}},this.after("initialize",function(){this.on("click",this.opentweetdialog),this.attr.isglobaltweetbutton .on(document,"uishortcutshowtweetbox",this.opentweetdialog)})}var n=i("dbjh"),o=i("3odc"),a=i("uxvi"),r=i("iamj");e.a=object(n.default)(s,o.a)},fane:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.deletemessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/destroy",eventdata:e,data:{id:e.id,conversation_id:e.conversation_id,cursor:this.dmcursor},success:c(t.target,["datadmdeletesuccess","datadmuserupdates"]),error:l(c(t.target,"datadmdeletefailed",e),c(t.target,"datadmerror"))})},this.after("initialize",function(){this.on("uidmdialogdeletemessage",this.deletemessage)})}var n=i("dbjh"),o=i("ldny"),a=i("vtwx"),r=i("9uwv"),c=o.a.triggerfn,l=o.a.chain;e.a=object(n.default)(s,a.a,r.a)},frdp:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={emojified_text:i("mdlq")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n'),s.s(s.f("emojified_token_text",t,e,1),t,e,0,170,189,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" \n '),s.fl()},partials:{" 1,this.state.reloadpageonsuccess=o;var a=i>0?r.k.media:0,c=s>0?r.k.poll:0,l=r.k.tweet,h=a+c+l;this.state.peritempercentage[r.l.tweet]=100*l/h/n,this.state.peritempercentage[r.l.media]=i>0?100*a/h/i:0,this.state.peritempercentage[r.l.poll]=s>0?100*c/h/s:0,this.trigger("uishowstickymessage",{message:this.uploadmessage()})},this.updateuploadui=function(t,e){var i=e.stage,s=e.count;this.state.percentage+=this.state.peritempercentage[i]*s,this.trigger("uiupdatemessage",{message:this.uploadmessage()})},this.reloadpagewithdelay=function(){settimeout(function(){return location.reload()},800)},this.successuploadui=function(t,e){this.trigger("uihidemessage");var i=this.state.isthread?object(s.default)("your tweets were sent."):object(s.default)("your tweet was sent.");this.trigger("uishowmessage",{message:i}),this.state.reloadpageonsuccess .reloadpagewithdelay(),this.resetstate()},this.uploadmessage=function(){var t=math.round(this.state.percentage).tostring();return this.state.isthread?object(s.default)("sending your tweets {{percentage}}%",{percentage:t}):object(s.default)("sending your tweet {{percentage}}%",{percentage:t})},this.after("initialize",function(){this.on("datatweetstormuploadstart",this.inituploadui),this.on("datatweetstormuploadupdate",this.updateuploadui),this.on("datatweetstormuploadsuccess",this.successuploadui)})})},g7mz:function(t,e,i){"use strict";(function(t){function s(e,i){this.attr={id:null,ttlmilliseconds:1728e5,itemcount:1e3,limit:6,version:1,localqueriesenabled:!1,remotequeriesenabled:!1,onlydmable:!1,onlyshowuserswithcanmediatag:!1,currentuserid:null,remotepath:"/i/search/typeahead.json",remotetype:"users",prefetchpath:"/i/search/typeahead.json",prefetchtype:"users",storageblacklist:"userblacklist",maxlengthblacklist:100,dbname:i.dbname||"accounts_typeahead",dbversion:20150128,datastores:{metadatastore:{name:"metadatastore",keypath:"key"},accounttokenstoids:{name:"accounttokenstoids",keypath:"token"},idstoaccounts:{name:"idstoaccounts",keypath:"id"}}},this.attr=h.default.merge(this.attr,e),this.after=t.noop,this.defaultattrs=t.noop,l.default.mixin(this,[r.a,d.a,c.a]),this.initialize=function(t){var e=t||this.openindexeddb.bind(this);this.isusingindexeddb=!0,this.initializesocialcontextblacklist();var i=[this.attr.datastores.metadatastore,this.attr.datastores.accounttokenstoids,this.attr.datastores.idstoaccounts],s=this;return e(this.attr.dbname,this.attr.dbversion,i).then(this.checkiflocaldatahasexpired.bind(this)).then(this.fetchdataifexpired.bind(this)).then(this.repopulatedatastore.bind(this)).then(function(){return s.database}).catch(this.oninitializationerror.bind(this))},this.openindexeddb=function(t,e,i){var s=this;return o.a.open(t,e,i).then(function(t){return s.database=t})},this.close=function(){this.database .database.close()},this.checkiflocaldatahasexpired=function(){var t=this;return this.getdata(this.attr.datastores.metadatastore.name,this.attr.datastores.metadatastore.keypath).then(function(e){return t.ismetadataexpired(e)})},this.fetchdataifexpired=function(t){return t .attr.localqueriesenabled .prefetch(this.attr.prefetchpath,this.attr.prefetchtype)},this.getdata=function(t,e){return this.database.get(t,e)},this.repopulatedatastore=function(t){return t .database.clear().then(this.populatedatastore.bind(this,t))},this.populatedatastore=function(t){return t .database.put(this.processdata(t))},this.oninitializationerror=function(t){!this.ishttperror(t) .close()},this.getprefetchcount=function(){return this.attr.itemcount},this.initializesocialcontextblacklist=function(){var t=object(u.a)({withexpiry:!0});this.storage=new t("typeahead"),this.socialcontextblacklist=this.storage.getitem(this.attr.storageblacklist)||{}},this.ismetadataexpired=function(t){if(!t)return!0;var e=t.version!==this.attr.version,i=this.hasttlexpired(t.expirationtime),s=t.protocol!==this.getprotocol();return e||i||s},this.processdata=function(t){var e=t[this.attr.prefetchtype].filter(function(t){return!this.isaccountmalformedandscribe(t,"typeahead_local")},this);t[this.attr.prefetchtype]=e;var i={};return i[this.attr.datastores.accounttokenstoids.name]=this.createitemsforaccounttokenstoidsobjectstore(t),i[this.attr.datastores.idstoaccounts.name]=this.createitemsforidstoaccountsobjectstore(t),i[this.attr.datastores.metadatastore.name]=this.createitemsformetadataobjectstore(t),i},this.createitemsforidstoaccountsobjectstore=function(t){return t[this.attr.prefetchtype].map(function(t){t.prefetched=!0;var e={};return e[this.attr.datastores.idstoaccounts.keypath]=t.id,e.account=t,e},this)},this.createitemsforaccounttokenstoidsobjectstore=function(t){var e=this.attr.datastores.accounttokenstoids.keypath,i={},s=[];t[this.attr.prefetchtype].foreach(function(t){t.tokens.foreach(function(e){var s=e.token;""!==s (array.isarray(i[s])?i[s].push(t.id):i[s]=[t.id])},this)},this);for(var n in i)if(i.hasownproperty(n)){var o={};o.ids=i[n],o[e]=n,s.push(o)}return s},this.createitemsformetadataobjectstore=function(t){var e={};return e[this.attr.datastores.metadatastore.keypath]=this.attr.datastores.metadatastore.keypath,e.expirationtime=this.attr.ttlmilliseconds+(new date).gettime(),e.version=this.attr.version,e.protocol=this.getprotocol(),[e]},this.addaccount=function(t){return this.gettokenidsforaccount(t).then(this.addtokenidsforaccount.bind(this,t)).then(this.addtoidstoaccounts.bind(this,t))},this.gettokenidsforaccount=function(t){t=t.account||t;var e=t.tokens.map(function(t){var e=this.standardizetoken(t);return this.database.get(this.attr.datastores.accounttokenstoids.name,e)},this);return promise.all(e)},this.addtokenidsforaccount=function(t,e){var i=n.a.compact(e);i=this.addnewtokenids(t,i),i=this.addidtotokenids(t,i);var s={};return s[this.attr.datastores.accounttokenstoids.name]=i,this.database.put(s)},this.standardizetoken=function(t){return"string"==typeof t?t:t.token},this.addnewtokenids=function(t,e){var i=[];return t.tokens.foreach(function(t){e.some(function(e){return e.token===t})||i.push(this.createtokenid(t))},this),e.concat(i)},this.addidtotokenids=function(t,e){return e.foreach(function(e){return e.ids.push(t.id)}),e},this.createtokenid=function(t){var e={};return e[this.attr.datastores.accounttokenstoids.keypath]=t,e.ids=[],e},this.removeaccount=function(t){return this.database.destroy(this.attr.datastores.idstoaccounts.name,t)},this.createaddaccountoptions=function(t){var e={},i={};return e[this.attr.datastores.idstoaccounts.keypath]=t.id,e.account=t,i[this.attr.datastores.idstoaccounts.name]=[e],i},this.addtoidstoaccounts=function(t){var e=this.createaddaccountoptions(t);return this.database.put(e)},this.getlocalsuggestions=function(t,e){var i=a.a.tokenizetext(t.query.replace("@",""));if(!this.attr.localqueriesenabled||""===t.query)return void e([]);this.search(i).then(e,e)},this.search=function(t){return this.getids(t).then(this.filterforrelevantids.bind(this)).then(this.getaccounts.bind(this)).then(this.filterandsortaccounts.bind(this))},this.filterforrelevantids=function(t){if(0===t.length)return[];var e=this.createidgroups(t),i=h.default.uniquearray(e.candidateids);return this.getcandidateidsfoundinalltermgroups(i,e.allidgroupsbyterm)},this.getaccounts=function(t){var e=t.map(function(t){return this.database.get(this.attr.datastores.idstoaccounts.name,t)},this);return promise.all(e)},this.filterandsortaccounts=function(t){return t=n.a.compact(t).map(function(t){return t.account}).filter(function(t){return!(this.attr.onlydmable !t.is_dm_able||!this.iseligibleformediatagsuggestion(t))},this),t.sort(this.sorter),t.slice(0,this.attr.limit)},this.sorter=function(t,e){var i=t.prefetched,s=e.prefetched;return i !s?-1:s !i?1:function(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0;return(e.rounded_score?e.rounded_score:0)+s-(n+i)}(t,e)},this.getids=function(t){var e=t.map(function(t){return this.database.getbyprefix(this.attr.datastores.accounttokenstoids.name,t)},this);return promise.all(e)},this.getcandidateidsfoundinalltermgroups=function(t,e){return t.filter(function(t){return e.every(function(e){return-1!==e.indexof(t)})})},this.createidgroups=function(t){var e=[],i=[];return t.foreach(function(t){var s=[];t.foreach(function(t){e=e.concat(t.ids),s=s.concat(t.ids)}),i.push(s)}),{candidateids:e,allidgroupsbyterm:i}},this.processremotesuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.foreach(function(t){return n[t.id_str]=!0},this),this.requiresremotesuggestions(t.querydata) [this.attr.remotetype] [this.attr.remotetype].foreach(function(t){!n[t.id_str] (!this.attr.onlydmable||t.is_dm_able) .iseligibleformediatagsuggestion(t) !this.isaccountmalformedandscribe(t,"typeahead_remote") .push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].foreach(function(t){this.removeblacklistsocialcontext(t)},this),i},this.requiresremotesuggestions=function(t){return!(!t||!t.query) (t.accountswithoutatsignlocalonly?this.attr.remotequeriesenabled ("@"===a.a.getfirstchar(t.query)||t.atsignremoved):this.attr.remotequeriesenabled)},this.ishttperror=function(t){return t .status .status>=400 .status '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},gggp:function(t,e,i){"use strict";function s(){this.defaultattrs({endpoint:"/i/users/prompts",format:""}),this.fetchprompts=function(t,e){e=e||{};var i={format:this.attr.format,tweet_ids:e.tweetids,force_prompt_id:this.getforcepromptidparam()};this.get({url:this.attr.endpoint,eventdata:i,data:i,success:"datapromptbirdmanagerhasprompts",error:"datapromptbirdmanagerpollfailure"})},this.getforcepromptidparam=function(){return a.a.decode(window.location.search.replace(/^\?/,"")).force_prompt_id},this.after("initialize",function(){this.on("uipromptbirdmanagerwantsprompts",this.fetchprompts)})}var n=i("dbjh"),o=i("vtwx"),a=i("tx0g");e.a=object(n.default)(s,o.a)},gkfl:function(t,e,i){"use strict";function s(){this.scribetweetaction=function(t,e,i){var s=i .scribecontext .scribecontext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uimomentmakeraddtweet",this.scribetweetaction.bind(this,"add")),this.on("uimomentmakerremovetweet",this.scribetweetaction.bind(this,"remove")),this.on("datamomentmakeraddtweetfailure",this.scribetweetaction.bind(this,"add_failure")),this.scribeonevent("uiopenaddtomomentdialog",{component:"add_to_moment_dialog",action:"open"})})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},glfs:function(t,e,i){"use strict";function s(){this.defaultattrs({feedbackcookie:"debug_data",data:{}}),this.getfeedbackdata=function(t,e){this.trigger("datafeedback",this.attr.data)},this.togglefeedbackcookie=function(t,e){var i=!!e.enabled||null;object(o.a)(this.attr.feedbackcookie,i),this.refreshpage(),this.checkdebugenabled()},this.refreshpage=function(){document.location.reload(!0)},this.checkdebugenabled=function(){this.trigger("datadebugfeedbackchanged",{enabled:!!object(o.a)(this.attr.feedbackcookie)})},this.addfeedbackdata=function(t,e){var i=this.attr.data;for(var s in e)i[s]?i[s]=[].concat.apply(i[s],e[s]):i[s]=e[s]},this.lognavigation=function(t,e){this.addfeedbackdata(t,{pushstate:[{data:{href:e.href,module:e.module,title:e.title}}]}),e.init_data .init_data.debugdata .addfeedbackdata(t,e.init_data.debugdata.data||{})},this.after("initialize",function(){this.data=this.attr.data||{},this.on("uineedsfeedbackdata",this.getfeedbackdata),this.on("uitoggledebugfeedback",this.togglefeedbackcookie),this.on("datasetdebugdata",this.addfeedbackdata),this.on("uipagechanged",this.lognavigation),this.checkdebugenabled()})}var n=i("dbjh"),o=i("dsp6"),a=i("vtwx");e.a=object(n.default)(s,a.a)},gvv3:function(t,e,i){"use strict";function s(){this.attributes({burstduration:5,burstpollinterval:3e3,dmtoasttype:"direct_message",maxpollinterval:6e4,noteardown:!0}),this.possiblystartburstpolling=function(t,e){e.should_request_inbox||e.is_empty||(cleartimeout(this.stoptimeout),this.timer.resume(),this.stoptimeout=settimeout(this.timer.pause.bind(this.timer),this.attr.burstduration))},this.after("initialize",function(){this.timer=n.default.setintervalevent("uidmrequestuserupdates",this.attr.burstpollinterval,{},this.attr.noteardown),this.timer.pause(),n.default.setintervalevent("uidmrequestuserupdates",this.attr.maxpollinterval,{},this.attr.noteardown),this.on("uiswiftloaded","uidmrequestuserupdates"),this.on("datadmuserupdates",this.possiblystartburstpolling)})}var n=i("r8bt"),o=i("dbjh"),a=object(o.default)(s);e.a=a},gxxu:function(t,e,i){"use strict";(function(t){var s=i("n85q"),n=i("pqps"),o=i.n(n),a=i("wpvw"),r=i.n(a),c=i("mjoy"),l=i.n(c),h={profile_formats:["profileother","profileself"],timeline_layout_types:["inline","inline_pointer"],timelinepromptoptions:function(t){return this.isprofileformat(t)?{timelineselector:".gridtimeline-items",promptoptions:{streamitemselector:".grid .grid-cell .js-stream-item",streamitemcontainerselector:"> .grid"}}:{timelineselector:"#stream-items-id",promptoptions:{streamitemselector:"> .js-stream-item",streamitemcontainerselector:"> .js-stream-item"}}},default_layout:o.a,grid_timeline_layout:r.a,list_timeline_layout:l.a,getpromptlayout:function(t,e){return this.hastimelinelayout(t)?this.isprofileformat(e)?h.grid_timeline_layout:h.list_timeline_layout:h.default_layout},getprompthtml:function(e,i){var n=this.getpromptlayout(e.type,i),o=n.render(e.renderdata),a=s.a[e.template].render(e.renderdata),r=t(" ");return r.html(o),r.find(".js-prompt-layout-content").html(a),r.html()},isprofileformat:function(t){return this.profile_formats.indexof(t)>-1},hastimelinelayout:function(t){return this.timeline_layout_types.indexof(t)>-1}};e.a=h}).call(e,i("4ksj"))},gahx:function(t,e,i){"use strict";(function(t){function s(){r.default.mixin(this,[u.a,o.default.withadvice,f.a,p.a]),this.defaultattrs({scribecontext:{},attachgifselector:"button[data-gif-url]",resultupclass:"foundmediasearch--top",contentselector:".foundmediasearch-content",contentrightclass:"foundmediasearch-content--right",caretselector:".caret",caretupclass:"caret--top",caretdownclass:"caret--bottom",preferredgravity:void 0,preferredweight:void 0,preventdropdownsopeningup:void 0,tweetformselector:".tweet-form",foundmediasearchselector:".js-found-media-search-trigger",queryinputselector:".foundmediasearch-queryinput",queryloadingclass:"foundmediasearch-queryinput--loading",dropdownselector:".foundmediasearch-dropdownmenu",resultselector:".foundmediasearch-results",itemsselector:".foundmediasearch-items",focusableselector:".foundmediasearch-focusable",firstfocusableselector:".foundmediasearch-focusable:first",focusedselector:".foundmediasearch-focusable.is-focused",focusedclass:"is-focused",dropdowncontainerselector:"span.dropdown-menu",categoryselector:".foundmediasearch-category",animatedfoundmediaselector:".foundmediasearch-item",itemvisibleclass:"foundmediasearch-item--visible",columnselector:".foundmediasearch-column",paginationselector:".foundmediasearch-pagination",presentedclass:"js-presented",presentedselector:".js-presented",keyboardclass:"foundmediasearch--keyboard",emptystateclass:"foundmediasearch--emptystate",reloadsearchtriggerselector:".js-found-media-reload-search-trigger"}),this.randomitemclasses=function(){return a.a.shuffleinplace(["foundmediasearch-itemcontainer--bg1","foundmediasearch-itemcontainer--bg2","foundmediasearch-itemcontainer--bg3","foundmediasearch-itemcontainer--bg4","foundmediasearch-itemcontainer--bg5","foundmediasearch-itemcontainer--bg6"])},this.randomcategoryclasses=function(){return a.a.shuffleinplace(["foundmediasearch-categorycontainer--bg1","foundmediasearch-categorycontainer--bg2","foundmediasearch-categorycontainer--bg3","foundmediasearch-categorycontainer--bg4","foundmediasearch-categorycontainer--bg5","foundmediasearch-categorycontainer--bg6"])},this.preparedropdown=function(t,e){this.$node.addclass(this.attr.emptystateclass),this.hasmoreitems(!0),this.select("itemsselector").empty(),this.trigger("uirequestfoundmediacategories")},this.showcategories=function(e,i){var s=this;this.select("queryinputselector").removeclass(this.attr.queryloadingclass),this.$node.removeclass(this.attr.emptystateclass),this.defaultresults=this.defaultresults||{html:i.html},this.select("itemsselector").html(i.html),this.select("resultselector").scrolltop(0),this.$focusables=this.select("focusableselector");var n=this.randomcategoryclasses();this.$focusables.each(function(e,i){var o=n.pop();o||(n=s.randomcategoryclasses(),o=n.pop()),t(i).addclass(o)}),this.hasmoreitems(!1),this.trigger("uifoundmediagalleryimpression")},this.updatecategoryitems=function(t,e){this.select("queryinputselector").removeclass(this.attr.queryloadingclass),this.$node.removeclass(this.attr.emptystateclass),this.defaultresults||(this.defaultresults={html:e.html,cursor:e.cursor}),this.presentfoundmediaitems(this.select("itemsselector").html(e.html),"string"==typeof e.cursor),this.select("resultselector").scrolltop(0),this.trigger(this.scribeevents.itemsimpression)},this.errorstate=function(){this.trigger("uishowerror",{message:object(n.default)("failed to load gifs. please try again later.")})},this.attachtarget=function(t){var e=t.closest(this.attr.attachgifselector),i=e.data("gif-url");if(i){this.trigger(this.scribeevents.itemselect);var s=this.$node.closest(this.attr.tweetformselector),n=e.data(),o={url:i,origin:n.origin,provider:n.providername,attribution:{name:n.attributionname,image:n.attributionimage},detailsurl:n.detailsurl,thumbnail:{src:n.stillurl,width:n.width,height:n.height},isgif:!0,mediacategoryprefix:this.attr.mediacategoryprefix};this.itemwasattached=!0,this.trigger(s,"uipreviewthumbnailplaceholderadd",o),this.trigger("uiattachimageurl",o),this.closedropdown()}},this.selectitem=function(t){if(t.has(this.attr.animatedfoundmediaselector).length)this.attachtarget(t.find(this.attr.animatedfoundmediaselector));else if(t.has(this.attr.categoryselector).length){var e=t.find(this.attr.categoryselector),i=e.data("display-name");this.trigger("uirequestfoundmediacategoryitems",{categoryname:e.data("name")}),this.lastquery=i,this.select("queryinputselector").val(i).focus().addclass(this.attr.queryloadingclass)}},this.selectfocuseditem=function(){this.selectitem(this.select("focusedselector"))},this.selectclickeditem=function(e){this.selectitem(t(e.target).closest(this.attr.focusableselector))},this.getelementtopoffset=function(t){var e=t[0],i=0;return e (i=e.getboundingclientrect().top),i},this.getwindowheight=function(){return t(window).height()},this.showdropdownposition=function(t){this.$node.toggleclass(this.attr.resultupclass,t),this.select("caretselector").toggleclass(this.attr.caretupclass,!t).toggleclass(this.attr.caretdownclass,t)},this.positiondropdownup=function(){this.showdropdownposition(!0)},this.positiondropdowndown=function(){this.showdropdownposition(!1);var t=this.select("resultselector"),e=this.getelementtopoffset(this.select("foundmediasearchselector"))+s,i=this.getwindowheight();t.css({height:math.max(i-e-w,c)})},this.positiondropdown=function(){this.positiondropdowndown();var t=this.adjacent(this.select("dropdownselector"),this.select("foundmediasearchselector"),{gravity:this.attr.preferredgravity||"vertical-north",weight:this.attr.preferredweight});this.select("contentselector").toggleclass(this.attr.contentrightclass,"right"===t.weight),this.$dropdown.find(this.attr.dropdownmenuselector).toggleclass(this.attr.dropdownmenualignrightclass,"right"===t.weight),"south"!==t.gravity||this.attr.preventdropdownsopeningup||this.positiondropdownup(),this.animatevisiblegifs()},this.positiondropdowndebounced=d.default.debounce(this.positiondropdown,100),this.gotfoundmediabinarydata=function(t,e){this.trigger(this.scribeevents.itemadd),this.trigger("uigotimagedata",{fileids:[e.fileid]})},this.failedfoundmediabinarydata=function(t,e){this.trigger(this.scribeevents.itemerror),this.trigger("uishowerror",{message:object(n.default)("failed to attach gif. please try again later.")})},this.onfoundmediadropdownopened=function(){this.itemwasattached=!1,this.positiondropdown(),this.select("itemsselector").html(' '),this.select("foundmediasearchselector").addclass("enabled"),this.select("queryinputselector").focus(),this.on(window,"resize",this.positiondropdowndebounced)},this.onfoundmediadropdownclosed=function(){this.itemwasattached||this.trigger(this.scribeevents.itemcancel),this.off(window,"resize",this.positiondropdowndebounced),this.select("queryinputselector").val(""),this.select("foundmediasearchselector").removeclass("enabled"),this.select("itemsselector").empty()},this.searchquery=function(t){""!==t .select("queryinputselector").addclass(this.attr.queryloadingclass),this.trigger("uifoundmediasearch",{query:t||""})},this.searchretry=function(){var t=this.select("queryinputselector").val()||"";this.lastquery===t (this.searchquery(t),this.select("queryinputselector").focus())},this.searchifquerychanged=function(){var t=this.select("queryinputselector").val()||"";this.lastquery!==t (this.lastquery=t,this.searchquery(t))},this.searchautocomplete=function(){var t=this;settimeout(function(){return t.searchifquerychanged()},0)},this.buildfocusindex=function(){var e=this.select("focusableselector");this.$focusables=e.sort(function(e,i){var s=t(e).offset(),n=t(i).offset();return s.top>n.top||s.top===n.top .left>n.left?1:-1})},this.searchreset=function(){this.select("queryinputselector").removeclass(this.attr.queryloadingclass),this.select("resultselector").scrolltop(0),this.defaultresults?this.presentfoundmediaitems(this.select("itemsselector").html(this.defaultresults.html),"string"==typeof this.defaultresults.cursor):this.preparedropdown()},this.searchresults=function(t,e){var i=e.sourceeventdata;i .query===this.select("queryinputselector").val() (this.select("queryinputselector").removeclass(this.attr.queryloadingclass),this.lastquerydata=i,this.presentfoundmediaitems(this.select("itemsselector").html(e.html),"string"==typeof e.cursor),this.select("resultselector").scrolltop(0))},this.searchunavailable=function(t,e){this.select("queryinputselector").removeclass(this.attr.queryloadingclass);var i=b.a.render({});this.select("itemsselector").html(i),this.hasmoreitems(!1),this.buildfocusindex()},this.presentfoundmedia=function(t,e,i,s){var n=[i,this.attr.presentedclass];s .push("foundmediasearch-slidein"),e.addclass(n.join(" "))},this.presentfoundmediaitems=function(e,i){var s=this;this.buildfocusindex();var n=this.randomitemclasses();if(this.$focusables.not(this.attr.presentedselector).each(function(e,i){var o=n.pop();o||(n=s.randomitemclasses(),o=n.pop()),s.presentfoundmedia(e,t(i),o,e =this.$focusables.length?i:t(this.$focusables.get(n))}if(i.removeclass(this.attr.focusedclass),s.addclass(this.attr.focusedclass),s.length>0){var o=this.select("resultselector"),a=s.offset().top-o.offset().top,r=s.height(),c=o.height();c 0){var s=e.shift();i="running";var n=function(e,s){if(i="idle",t(),e)return s;throw s},o=s();o.queuedpromise().then(n.bind(null,!0),n.bind(null,!1)).then(o.resolve,o.reject)}}var e=[],i="idle";return{enqueue:function(i){return new promise(function(s,n){var o=function(){return{queuedpromise:i,resolve:s,reject:n}};e.push(o),t()})},numpending:function(){return e.length},numinprogress:function(){return"running"===i?1:0},length:function(){return this.numpending()+this.numinprogress()}}}e.a=s},h6fk:function(t,e,i){"use strict";var s=i("yzit"),n={},o=0,a={add:function(t){var e=++o;return n[e]=t,e},update:function(t,e){var i=this.get(t);return n[t]=s.default.merge(i,e,!0)},remove:function(t){delete n[t]},removeall:function(){n={}},get:function(t){return n[t]},keys:function(){return object.keys(n)}};e.a=a},hedp:function(t,e,i){"use strict";function s(){this.curatetweets=function(t,e){function i(t){var i=this;e.added.foreach(function(){return i.scribe({component:"tweet",action:"add_to_timeline"},t)});var s=object(c.default)("tweet successfully added/removed.");this.trigger("uishowmessage",{message:s}),this.trigger("datatweetscurated",t)}function s(t){var e=object(c.default)("failed to add/remove tweet.");this.trigger("uishowerror",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetid,impression_id:e.impressionid};this.post({url:"/i/curate/batch",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.addtweet=function(t,e){function i(t){var e=object(c.default)("added tweet to {{url}} {{name}} ",{url:t.timeline_url,name:t.timeline_name});this.trigger("uishowmessage",{message:e,timeout:1e4}),this.trigger("datatweetaddedtotimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uishowerror",t),this.trigger("datatweetnotaddedtotimeline",t)}var n={timeline_id:e.timelineid,tweet_id:e.tweetid,impression_id:e.impressionid};this.post({url:"/i/curate/add_tweet",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.removetweet=function(t,e){function i(t){this.trigger("datatweetremovedfromtimeline",t),this.trigger("uishowmessage",{message:object(c.default)("tweet successfully removed.")}),this.trigger("datatweetremovedfromtimeline",t)}function s(t){this.trigger("uishowerror",{message:object(c.default)("error removing tweet.")}),this.trigger("datatweetnotremovedfromtimeline",t)}var n={timeline_id:e.timelineid,tweet_id:e.tweetid,id:e.tweetid};this.post({url:"/i/curate/remove_tweet",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.createcustomtimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uinavigate",{href:t.timeline_url})}function s(t){this.trigger("uishowerror",{message:object(c.default)("error creating collection.")})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetid,impression_id:e.impressionid};this.post({url:"/i/curate/create",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.updatecustomtimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=object(c.default)("collection updated. {{url}} click here to refresh. ",{url:t.timeline_url});this.trigger("uishowmessage",{message:e,timeout:5e3}),this.trigger("datacustomtimelineupdated",t)}function s(t){this.trigger("uishowerror",{message:object(c.default)("error updating collection.")})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.deletecustomtimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uinavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uishowerror",{message:object(c.default)("error deleting collection.")})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventdata:e,success:i.bind(this),error:s.bind(this)})},this.getfullcustomtimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventdata:e,data:{tweet_id:e.tweetid},success:"datagotfullcustomtimelines",error:"datafailedtogetfullcustomtimelines"})},this.getcustomtimelinesfordropdown=function(t,e){e.tweetid .get({url:"/i/curate/timelines",eventdata:e,data:{tweet_id:e.tweetid},success:"datagotcustomtimelines",error:"datafailedtogetcustomtimelines"})},this.after("initialize",function(){a.a.getdecider("custom_timeline_curation") (this.on("uicuratetweets",this.curatetweets),this.on("uicurateaddtweet",this.addtweet),this.on("uicurateremovetweet",this.removetweet),this.on("uineedscustomtimelines",this.getcustomtimelinesfordropdown),this.on("uineedsfullcustomtimelines",this.getfullcustomtimelines),this.on("uicreatecustomtimeline",this.createcustomtimeline),this.on("uiupdatecustomtimeline",this.updatecustomtimeline),this.on("uideletecustomtimeline",this.deletecustomtimeline))})}var n=i("dbjh"),o=i("vtwx"),a=i("iamj"),r=i("3odc"),c=i("0d4m"),l=object(n.default)(s,o.a,r.a);e.a=l},htfi:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dm/dm_typeahead_account_suggestion":i("koam"),"dm/dm_typeahead_group_suggestion":i("afwj")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_accounts",t,e,1),t,e,0,45,111,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n people \n \n')}),t.pop()),s.s(s.f("accounts",t,e,1),t,e,0,142,185,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" \n groups \n \n')}),t.pop()),s.s(s.f("groups",t,e,1),t,e,0,333,374,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" l (p=math.ceil(p*(l/u)),u=l,e.width(p).height(u)),p>h (p=h,u=math.ceil(p/f),e.width(p).height(u)),(!i.find(".gallerynav").hasclass("enabled")||p>this.galw) (this.galw=p,i.width(this.galw)),u+a>this.galh?(this.galh=u+a,i.css("min-height",this.galh),e.css("margin-top",0)):o?i.css("min-height",0):(e.css("margin-top",(this.galh-a-u)/2),e.css("margin-bottom",(this.galh-a-u)/2))}}}();e.a=i}).call(e,i("4ksj"))},hpdd:function(t,e,i){"use strict";function s(){n.default.mixin(this,[c.a]),this.defaultattrs({composecounterselector:".js-character-counter",maxlength:280,warnlength:260}),this.updatecounter=function(){var t=this.parsetweet(),e=t.weightedlength,i=t.permillage;this.$composecharactercounter.trigger("uiupdatecounter",{tweetlength:e,percent:i/10})},this.parsetweet=function(t){t=this.addhiddentext(void 0===t?this.getvisibletext():t),this.prevcountertext=t;var e=r.a.parsetweet(t,this.attr.twittertextoptions);return this.prevcounterlength=e.weightedlength,e},this.getlength=function(t){return this.parsetweet(t,this.twittertextoptions).weightedlength},this.maxreached=function(){return this.getlength()>this.attr.maxlength},this.after("initialize",function(){this.$composecharactercounter=this.select("composecounterselector"),this.attachchild(o.a,this.$composecharactercounter,{maxlength:this.attr.maxlength}),this.on("uitextchanged uiattachmentchanged",this.updatecounter),this.updatecounter()})}var n=i("q9/c"),o=i("0uxa"),a=i("cztd"),r=i.n(a),c=i("ajan");e.a=s},hpo3:function(t,e,i){"use strict";function s(){this.deletemediatag=function(t,e){var i=function(t){this.trigger("datamediatagremovesuccess",t)},s=function(t,i,s){this.trigger("datamediatagremovefailure",{id:e.id,status:i,errorthrown:s})},n={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uididremovemediatag",this.deletemediatag)})}var n=i("dbjh"),o=i("vtwx"),a=object(n.default)(s,o.a);e.a=a},hzyy:function(t,e,i){"use strict";function s(){this.defaultattrs({cache_limit:10}),this.getcachedsuggestions=function(t){return this.cache[t]?this.cache[t].value:null},this.clearcache=function(){this.cache={newest:null,oldest:null,count:0,limit:this.attr.cache_limit}},this.deletecachedsuggestions=function(t){return!!this.cache[t] (this.cache.count>1 (t===this.cache.newest.query?(this.cache.newest=this.cache.newest.before,this.cache.newest.after=null):t===this.cache.oldest.query?(this.cache.oldest=this.cache.oldest.after,this.cache.oldest.before=null):(this.cache[t].after.before=this.cache[t].before,this.cache[t].before.after=this.cache[t].after)),delete this.cache[t],this.cache.count-=1,!0)},this.setcachedsuggestions=function(t,e){0!==this.cache.limit (this.deletecachedsuggestions(t),this.cache.count>=this.cache.limit .deletecachedsuggestions(this.cache.oldest.query),0===this.cache.count?(this.cache[t]={query:t,value:e,before:null,after:null},this.cache.newest=this.cache[t],this.cache.oldest=this.cache[t]):(this.cache[t]={query:t,value:e,before:this.cache.newest,after:null},this.cache.newest.after=this.cache[t],this.cache.newest=this.cache[t]),this.cache.count+=1)},this.aroundgetsuggestions=function(t,e,i){var s=i.id+":"+i.query,n=this.getcachedsuggestions(s);if(n)return void this.triggersuggestionsevent(i.id,i.query,n);t(e,i)},this.aftertriggersuggestionsevent=function(t,e,i,s){if(!s){var n=t+":"+e;this.setcachedsuggestions(n,i)}},this.after("triggersuggestionsevent",this.aftertriggersuggestionsevent),this.around("getsuggestions",this.aroundgetsuggestions),this.after("initialize",function(){this.clearcache(),this.on("uitypeaheaddeleterecentsearch",this.clearcache)})}e.a=s},ibie:function(t,e,i){"use strict";function s(){n.default.mixin(this,[o.a]),this._builddata=function(t,e){var i={card_data:json.stringify(t)};return void 0!==e (i.guid=e),i},this.createcard=function(t,e){var i=this;return new promise(function(s,n){var o={url:"/i/cards/create/v1",data:i._builddata(t,e),ismutation:!1,datatype:"json",timeout:3e4,retryifunavailable:!0};i.post(o).done(function(t){return s(t.card_uri)}).fail(function(){return n()})})}}var n=i("q9/c"),o=i("vtwx");e.a=s},iq7t:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n '),s.b(s.v(s.f("title",t,e,0))),s.b(' \n '),s.b(s.v(s.f("description",t,e,0))),s.b(" \n"),s.s(s.f("has_cta",t,e,1),t,e,0,168,580,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,237,364,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' visit: '),i.b(i.v(i.f("cta_url",t,e,0))),i.b(" \n")}),t.pop()),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,414,545,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' watch now: '),i.b(i.v(i.f("cta_url",t,e,0))),i.b(" \n")}),t.pop()),i.b(" \n")}),t.pop()),s.b(' \n \n'),s.s(s.f("embeddable",t,e,1),t,e,0,712,807,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' video embedding: allowed\n')}),t.pop()),s.s(s.f("embeddable",t,e,1),t,e,1,0,0,"")||s.b(' video embedding: not allowed\n'),s.b(" \n \n \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"it+l":function(t,e,i){"use strict";function s(){this.postfunction=function(t,e,i,s,n){var o={prompt_id:n.prompt_id,scribe_action:n.prompt_scribe_action},a=n.prompt_action_type||t;this.post({url:"/i/users/prompts/"+a,eventdata:o,data:o,success:e,error:i})},this.after("initialize",function(){this.on("uipromptbirddismissprompt",this.postfunction.bind(this,"dismiss","datapromptbirdpromptdismissed","datapromptbirdpromptdismissalerror")),this.on("uipromptbirdclick",this.postfunction.bind(this,"click","datapromptbirdpromptclicked","datapromptbirdpromptclickerror")),this.on("uipromptbirdpromptwasshown uiinlinepromptscrolledin",this.postfunction.bind(this,"impress","datapromptbirdpromptimpressed","datapromptbirdpromptimpresserror")),this.on("uipromptbirdpromptwasshown uiinlinepromptscrolledin","uiitemsinjected")})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},ibme:function(t,e,i){"use strict";function s(){this.defaultattrs({prompttype:"inline_pointer",promptitemselector:".promptbirdprompt--inlinepointer",pointerarrowselector:".promptbirdprompt-arrow",pointertargetselectors:{favorite_action:".profiletweet-action .js-actionfavorite .icon, .profiletweet-action .js-actionfavorite .heartanimation",reply_action:".profiletweet-action .js-actionreply .icon",retweet_action:".profiletweet-action .js-actionretweet .icon",more_action:".profiletweet-action .js-dropdown-toggle .icon"}}),this.insertprompt=function(t){this.trigger("uipromptneedsinsertionindex",{prompt:t})},this.insertpromptwithindex=function(t,e){var i=e.prompt;this.insertpromptatindex(i,e.insertionindex,e.shouldinsertabove),this.setpointerarrowoffset(i)},this.setpointerarrowoffset=function(t){var e=this.attr.pointertargetselectors[t.renderdata.pointertarget],i=this.getpromptbypromptid(t.id,!0),s=i.find(this.attr.pointerarrowselector),n=i.prev(),o=n.find(e),a=o.offset().left-n.offset().left;a i[0].scrolltop (this.setcategoryicon(s.attr("data-category")),o=!0),o},this)}},this.updatecategoryvisibility=function(){var e=this;this.select("categoryiconselector").each(function(i,s){var n=t(s),o=t(s).attr("data-category"),a=e.$node.find(e.attr.categoryresultselector+'[data-category="'+o+'"]'),r=!a.find(e.attr.itemselector+":not(.u-hidden)").length;a.toggleclass("u-hidden",r),n.prop("disabled",r)}),this.checkscrollposition()},this.scrollcategoryresultintoview=function(t){var e=this.select("scrollablerowselector");e[0].scrolltop=t[0].offsettop-e[0].offsettop,this.checkscrollposition()},this.pickcategory=function(e){var i=t(e.target).attr("data-category"),s=this.$node.find(this.attr.categoryresultselector+'[data-category="'+i+'"]');this.scrollcategoryresultintoview(s)},this.getrecentarray=function(){var t=this.getemojistore().getitem("recent");return(array.isarray(t)?t:[]).slice(0,this.attr.maxrecents)},this.setrecentcategoryitems=function(){this.setcategoryitems("recent",this.getrecentarray().map(function(t){return{key:t}}))},this.clearrecent=function(t){this.getemojistore().removeitem("recent"),this.setrecentcategoryitems(),this.updatecategoryvisibility()},this.setnewcategoryitems=function(){var t=[];u.a.getdecidervalue("emojinewcategory") (t=["1f468-200d-1f9b0*","1f468-200d-1f9b1*","1f468-200d-1f9b2*","1f468-200d-1f9b3*","1f469-200d-1f9b0*","1f469-200d-1f9b1*","1f469-200d-1f9b2*","1f469-200d-1f9b3*","1f6f9","1f94d","1f94e","1f94f","1f96c","1f96d","1f96e","1f96f","1f970","1f973","1f974","1f975","1f976","1f97a","1f97c","1f97d","1f97e","1f97f","1f998","1f999","1f99a","1f99b","1f99c","1f99d","1f99e","1f99f","1f9a0","1f9a1","1f9a2","1f9b4","1f9b5*","1f9b6*","1f9b7","1f9b8-200d-2640-fe0f*","1f9b8-200d-2642-fe0f*","1f9b9-200d-2640-fe0f*","1f9b9-200d-2642-fe0f*","1f9c1","1f9c2","1f9e7","1f9e8","1f9e9","1f9ea","1f9eb","1f9ec","1f9ed","1f9ee","1f9ef","1f9f0","1f9f1","1f9f2","1f9f3","1f9f4","1f9f5","1f9f6","1f9f7","1f9f8","1f9f9","1f9fa","1f9fb","1f9fc","1f9fd","1f9fe","1f9ff","265ft","267e"]),this.select("newcategoryselector").toggleclass("u-hidden",!u.a.getdecidervalue("emojinewcategory")),this.setcategoryitems("new",this.additemflags(t))},this.additemflags=function(t){return t.map(function(t){return{key:t.replace(/[*=t]/g,""),is_diversity:t.indexof("*")>=0,is_variant:t.indexof("=")>=0,is_text_default:t.indexof("t")>=0}})},this.pickitem=function(e){var i=t(e.target),s=i.attr("data-key");e.shiftkey .preventdefault();var n=this.skintoneforitem(i);n?s=this.updatekeywithskintone(s,n):!e.shiftkey .hasclass("is-variant") (s+="-fe0f");var o=h.a.hexcodepointstounicode(s);this.hasadded||(this.hasadded=!0,this.trigger("uiemojipickeradd")),this.trigger("uiemojipicked",{key:s,unicode:o});var r=a.a.unique([s].concat(this.getrecentarray())).slice(0,this.attr.maxrecents);this.getemojistore().setitem("recent",r)},this.scrolintoview=function(t){var e=t.closest(this.attr.scrollablerowselector);if(e.length){var i=e[0],s=t[0].offsettop-i.offsettop,n=i.scrolltop,o=e.height()-t.outerheight(),a=this.attr.extrapixelstoscrollintoview;s n-a (i.scrolltop=math.min(s-o+a,i.scrollheight-e.height()))}},this.movefocus=function(t,e){var i=this.select("focusedselector"),s=this.select("focusableselector"),n=s.index(i),o=s.length-1,a=void 0,r=e?o:0;do{n+=t,n o (n=0),a=s.eq(n)}while(r-- >0 !a.parent().children(":visible:first").is(a));if(i.removeclass(this.attr.focusedclass),e){var c=a.closest(this.attr.categoryresultselector);this.scrollcategoryresultintoview(c)}else this.scrolintoview(a);this.togglekeyboardfocus(!0),a.addclass(this.attr.focusedclass+" js-tooltip").tooltip("enable").tooltip("show");var l=a.attr("title");l .attr("data-original-title",l).removeattr("title"),this.checkscrollposition()},this.preventdefaultandupdatequeryresults=function(t){t.preventdefault(),this.updateresultsifquerychanges()},this.querykeydown=function(e){switch(!e.metakey !e.ctrlkey .which){case d.a.up:this.preventdefaultandupdatequeryresults(e),this.movefocus(-1);break;case d.a.down:this.preventdefaultandupdatequeryresults(e),this.movefocus(1);break;case d.a.page_up:this.preventdefaultandupdatequeryresults(e),this.movefocus(-1,!0);break;case d.a.page_down:this.preventdefaultandupdatequeryresults(e),this.movefocus(1,!0);break;case d.a.enter:this.preventdefaultandupdatequeryresults(e);var i=t.event("click",{shiftkey:e.shiftkey}),s=this.select("focusedselector");s.trigger(i),s.length>0?this.closedropdown():this.temporarilyactivateitem(s);break;case d.a.left:case d.a.right:default:this.togglekeyboardfocus(!1)}},this.temporarilyactivateitem=function(t){var e=this;t.addclass(this.attr.activeclass),settimeout(function(){return t.removeclass(e.attr.activeclass)},this.attr.temporarilyactivatedelayinms)},this.togglekeyboardfocus=function(t){this.$node.hasclass(this.attr.keyboardclass)!==t (this.$node.toggleclass(this.attr.keyboardclass,t),t||this.select("itemwithtooltipselector").removeclass("js-tooltip").tooltip("hide").tooltip("disable"))},this.setfocus=function(e){this.togglekeyboardfocus(!1);var i=t(e.target).closest(this.attr.focusableselector);i.hasclass(this.attr.focusedclass)||(this.select("focusedselector").removeclass(this.attr.focusedclass),i.addclass(this.attr.focusedclass))},this.clearfocus=function(e){t(e.target).closest(this.attr.focusableselector).removeclass(this.attr.focusedclass)},this.updateresultsifquerychanges=function(){var t=this.select("queryinputselector").val()||"";this.lastquery!==t (this.lastquery=t,this.updateresults())},this.clearquery=function(){this.select("queryinputselector").val("").focus(),this.updateresultsifquerychanges()},this.positiondropdown=function(){var t=this.adjacent(this.select("dropdownselector"),this.select("emojipickertriggerselector"),{gravity:this.attr.preferredgravity||"vertical-north",weight:this.attr.preferredweight,allowgravityswitch:this.attr.allowgravityswitch}),e="south"===t.gravity !this.attr.preventdropdownsopeningup;this.$node.toggleclass(this.attr.resultupclass,e),this.select("caretselector").toggleclass(this.attr.caretupclass,!e).toggleclass(this.attr.caretdownclass,e);var i="right"===t.weight;this.select("contentselector").toggleclass(this.attr.contentrightclass,i),this.$dropdown.find(this.attr.dropdownmenuselector).toggleclass(this.attr.dropdownmenualignrightclass,i)},this.positiondropdowndebounced=p.default.debounce(this.positiondropdown,100),this.toggletriggeractive=function(t){this.select("emojipickertriggerselector").toggleclass(this.attr.textusercolorclass,t)},this.onemojidropdownopened=function(){this.positiondropdown(),this.select("queryinputselector").focus(),this.on(window,"resize",this.positiondropdowndebounced),this.checkscrollposition(),this.activeel=null,this.trigger("uiemojipickeropen"),this.hasadded=!1,this.hassearched=!1,this.haschangedskintone=!1,this.toggletriggeractive(!0)},this.onemojidropdownclosed=function(){this.off(window,"resize",this.positiondropdowndebounced),this.togglekeyboardfocus(!1),this.select("queryinputselector").val(""),this.hasadded||this.trigger("uiemojipickercancel"),this.toggletriggeractive(!1)},this.after("initialize",function(){this.on("uidropdownopenrequested",this.preparedropdown),this.on("click",{categoryiconselector:this.pickcategory,itemselector:this.pickitem,clearrecentselector:this.clearrecent,clearqueryselector:this.clearquery}),this.on("change",{skintoneselector:this.changeskintone}),this.on("mousedown",{skintoneselector:this.preventfocusloss,categoryiconselector:this.preventfocusloss,itemselector:this.preventfocusloss,clearrecentselector:this.preventfocusloss}),this.on("mouseover",{focusableselector:this.setfocus}),this.on("mouseout",{focusableselector:this.clearfocus}),this.on("input",{queryinputselector:p.default.debounce(this.updateresultsifquerychanges,this.attr.querychangethrottledelayinms)}),this.on("keydown",{queryinputselector:this.querykeydown}),this.on("dataemojiinfoloaded",this.continueinitializing),this.on("uidropdownopened",this.onemojidropdownopened),this.on("uidropdownclosed",this.onemojidropdownclosed)})}var n=i("0d4m"),o=i("gugq"),a=i("kgvp"),r=i("q9/c"),c=i("wodx"),l=i("dbjh"),h=i("tlys"),d=i("i3qs"),u=i("iamj"),p=i("yzit"),f=i("1hky"),m=i("ohsy"),g=i("zvxx"),v=i("ajan"),b=i("lcsn"),w=i.n(b),s=i("d2kf"),c=i.n(s);e.a=object(l.default)(s,v.a);var y=4}).call(e,i("4ksj"))},jfpi:function(t,e,i){"use strict";function s(t,e,i){return e in t?object.defineproperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"c",function(){return r}),i.d(e,"g",function(){return c}),i.d(e,"i",function(){return l}),i.d(e,"l",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"k",function(){return u}),i.d(e,"b",function(){return p}),i.d(e,"j",function(){return f}),i.d(e,"d",function(){return m}),i.d(e,"a",function(){return g}),i.d(e,"f",function(){return v}),i.d(e,"e",function(){return b});var n,o=i("0d4m"),a=i("2doy"),r=object.freeze({single_tweet:"off",first_tweet:"first",subsequent_tweet:"subsequent"}),c=object.freeze({hide_and_show:0,hide_only:1,show_only:2}),l=object.freeze({tweetbox:[300,"easeoutquad"],toolbar:[200,"easeoutquad"],delay:0}),h=object.freeze({none:"none",media:"media",poll:"poll",tweet:"tweet"}),d=object.freeze({photo:"photo",gif:"gif",video:"video",none:"none"}),u=object.freeze({media:60,poll:10,tweet:30}),p={card:{send:"datatweetstormcardsend",send_success:"datatweetstormcardsendsuccess",send_error:"datatweetstormcardsenderror"},media:{send_batch:"datatweetstormmediasendbatch",send_batch_success:"datatweetstormmediasendbatchsuccess",send_success:"datatweetstormmediasendsuccess",send_error:"datatweetstormmediasenderror"},tweet:{send:"datatweetstormtweetsend",send_success:"datatweetstormtweetsendsuccess",send_error:"datatweetstormtweetsenderror"}},f=object.freeze((n={},s(n,a.a.duplicatestatuserror,object(o.default)("you have already sent this tweet.")),s(n,a.a.mentionlimitintweetexceeded,object(o.default)("the text of your tweet exceeds the number of allowed @mentions.")),s(n,a.a.urllimitintweetexceeded,object(o.default)("the text of your tweet exceeds the number of allowed urls.")),s(n,a.a.hashtaglimitintweetexceeded,object(o.default)("the text of your tweet exceeds the number of allowed hashtags.")),s(n,a.a.cashtaglimitintweetexceeded,object(o.default)("the text of your tweet exceeds the number of allowed cashtags.")),s(n,a.a.hashtaglengthlimitintweetexceeded,object(o.default)("the text of your tweet contains a hashtag that is longer than allowed.")),s(n,a.a.inreplytotweetnotfound,object(o.default)("you attempted to reply to a tweet that is deleted or not visible to you.")),s(n,a.a.attachmenttypeslimitintweetexceeded,object(o.default)("the tweet exceeds the number of allowed attachment types.")),n)),m=object.freeze({titletext:object(o.default)("remove this tweet?"),bodytext:object(o.default)("are you sure you want to remove this tweet from your thread?"),canceltext:object(o.default)("cancel"),submittext:object(o.default)("remove"),action:"removetweetfromthread"}),g=object.freeze({titletext:object(o.default)("send twitter alerts"),bodytext:object(o.default)("are you sure you want to send twitter alerts to your followers?"),canceltext:object(o.default)("cancel"),submittext:object(o.default)("send"),action:"sendlifelinealert"}),v=object.freeze({titletext:object(o.default)("discard this tweet?"),bodytext:object(o.default)("are you sure you want to discard this tweet?"),canceltext:object(o.default)("cancel"),submittext:object(o.default)("discard"),action:"closetweetstormdialog"}),b=object.freeze({titletext:object(o.default)("discard this thread?"),bodytext:object(o.default)("are you sure you want to discard this thread?"),canceltext:object(o.default)("cancel"),submittext:object(o.default)("discard"),action:"closetweetstormdialog"})},jggw:function(t,e,i){"use strict";function s(){this.requestanimationframe=window.requestanimationframe.bind(window),this.attributes({conversationcontentselector:".dmconversation-content",pagebackrange:500,scrollcontainerselector:".dmconversation-scrollcontainer",spinnerselector:".dmconversation-spinner"}),this.checkforconversationhistory=function(){var t=this;this.requestanimationframe(function(){!t.$spinner.hasclass("u-hidden") !==t.$scrollcontainer.prop("clientheight") (t.$content.prop("clientheight") =200 .status li:"+n),this.getadjacentchilditem(i,e)):i},this.selectadjacentitem=function(t,e){var i=void 0;if(i=this.$selected.length?this[t](this.$selected):this.select("firstitemselector").eq(0),i.length||(i=this.getadjacentparentitem(this.$selected,t)),i=this.getadjacentchilditem(i,t),i.length .hasclass(this.attr.unselectableclass))return this.$selected=i,this.selectadjacentitem(t,e);this.selectitem(i);var s="next"===t?"uinextitemselected":"uipreviousitemselected";this.trigger(this.$selected,s),this.focusselected(),!i.length||e .maintainposition||this.adjustscrollforselecteditem(e)},this.next=function(t){return t.next()},this.prev=function(t){return t.prev()},this.selectitem=function(t){t.length .$selected!==t (this.clearselection(),this.$selected=t,this.$selected.addclass(this.attr.selectedclass),this.trigger(this.$selected,"uitimelineitemselected"))},this.focusselected=function(){var t=this;this.$selected.attr("tabindex",-1).focus(),settimeout(function(e){return t.trigger(e,"uiaftertimelineselectionfocused")},0,this.$previousselection)},this.deselect=function(e){var i=-1!==["html","body"].indexof(e.target.tagname),s="page-outer"===e.target.id !t(e.target).parents("#page-container").length;(i||s) .clearselection()},this.muteuser=function(){this.triggerblockactiononnode(this.$selected,"uididmuteuser")},this.blockuser=function(){this.triggerblockactiononnode(this.$selected,"uiopenblockuserdialog")},this.updateafterblock=function(e,i){var s=i.userid.tostring()===t(this.attr.profileowneruseridselector).attr("data-user-id"),n=0!==t(this.attr.profilepageselector).length;s?this.trigger("uihideprofiletweets"):n||(this.selectnextitemnotfrom(i.userid),this.trigger("uiremovetweetsfromuser",i))},this.removetweetsandengagementsfromuser=function(t,e){this.selectnextitemnotfrom(e.userid),this.trigger("uiremovetweetsfromuser",e)},this.updateselectionbeforedelete=function(t,e){this.select("genericitemselector").length .$selected.attr("data-item-id")===e.sourceeventdata.id.tostring() .selectnextadjacentitem()},this.adjustscrollforitem=function(e,i){i .scrolltotop?t(window).scrolltop(0):e.length (window).scrolltop(e.offset().top-t(window).height()/10)},this.notifyexpansionrequest=function(e,i){var s=this.$selected.find(".tweet"),n=s.data("permalink-path"),o=s.data("conversation-id");n (document).trigger("uinavigate",{href:n,conversation_id:o})},this.adjustscrollforselecteditem=function(t){this.adjustscrollforitem(this.$selected,t)},this.processactivenavigation=function(){settimeout(this.removeactivenavigationclass.bind(this),2e3)},this.setnavigationactive=function(){this.$linkclicked.addclass(this.attr.navigationactiveclass)},this.removeactivenavigationclass=function(){this.$node.find("."+this.attr.navigationactiveclass).removeclass(this.attr.navigationactiveclass)},this.handleevent=function(e){return function(){t("body").hasclass("modal-enabled")||this[e].apply(this,arguments)}},this.changeselection=function(e,i){var s=t(e.target);this.$selected.length (this.selectitem(s),i .setfocus .focusselected())},this.after("initialize",function(){this.$selected=this.$node.find(this.attr.selectedselector),this.$linkclicked=t(),this.on(document,"uishortcutselectprev",this.handleevent("selectprevitem")),this.on(document,"uishortcutselectnext uiselectnext",this.handleevent("selectnextitem")),this.on(document,"uiselectitem",this.handleevent("changeselection")),this.on(document,"uishortcutenter",this.handleevent("notifyexpansionrequest")),this.on(document,"uiselecttoptweet",this.handleevent("selecttopitemhandler")),this.on(document,"uishortcutgototopofscreen",this.handleevent("selecttopitembykeyboard")),this.on(document,"uigototopofscreen",this.handleevent("injectandpossiblyselecttopitem")),this.on(document,"uishortcutmuteuser",this.handleevent("muteuser")),this.on(document,"uishortcutblock",this.handleevent("blockuser")),this.on(document,"uiupdateafterblock",this.updateafterblock),this.on(document,"uiremovetweetsandengagementsfromuser",this.removetweetsandengagementsfromuser),this.on(document,"uibeforetweetremoved",this.updateselectionbeforedelete),this.on(document,"uiremovedsometweets",this.adjustscrollforselecteditem),this.on(document,"uibeforepagechanged uiclearselection",this.clearselection),this.on(document,"uipagechanged",this.processactivenavigation),this.on("click",{genericitemselector:this.moveselection}),this.on(document,"uinavigate",this.setnavigationactive),this.on(document,"click",this.deselect)})}var n=i("q9/c"),o=i("xopl");e.a=s}).call(e,i("4ksj"))},jhol:function(t,e,i){"use strict";function s(t){var e={woeid:-1,placetypecode:-1,name:object(o.default)("no results were found. try selecting from a list.")};this.attr={id:null,items:[],limit:10},this.attr=n.default.merge(this.attr,t),this.getremotesuggestions=function(t,e,i){return i},this.requiresremotesuggestions=function(t){return!1},this.getlocalsuggestions=function(t,i){var s=this.attr.items,n=function(t){return t.replace(/\s+/g,"").tolowercase()};if(t .query){var o=n(t.query);s=this.attr.items.filter(function(t){return 0===n(t.name).indexof(o)})}i(s.length?s.slice(0,this.attr.limit):[e])},this.settrendlocations=function(t){this.attr.items=t.trendlocations}}var n=i("yzit"),o=i("0d4m");e.a=s},k6ly:function(t,e,i){"use strict";function s(){this.defaultattrs({blockuserlabelselector:".block-user-label",blockusertextselector:".block-user-text",blockbuttonselector:".block-button",blockinputselector:"input[name=block_user]"}),this.setupdialog=function(t,e){this.eventdata=e,this.settriggeredtarget(),this.setscreennametext(),this.iscomplete=!1,this.open()},this.settriggeredtarget=function(){"user"===this.eventdata.target?this.$node.addclass("block-from-user"):this.$node.removeclass("block-from-user")},this.setscreennametext=function(){this.select("blockuserlabelselector").text(object(o.default)("block @{{screenname}}?",this.eventdata)),this.select("blockusertextselector").text(object(o.default)("@{{screenname}} will no longer be able to follow or message you, and you will not see notifications from @{{screenname}}.",this.eventdata))},this.submitblock=function(){this.trigger("uiblockaction",{eventdata:this.eventdata,tweetid:this.eventdata.tweetid,userid:this.eventdata.userid,screenname:this.eventdata.screenname,impressionid:this.eventdata.impressionid,disclosuretype:this.eventdata.disclosuretype,scribecontext:{component:"block_dialog",element:"user"===this.eventdata.target?"user":"tweet"}}),this.trigger("uididtriggerblockingaction",{userid:this.eventdata.userid}),this.iscomplete=!0,this.close()},this.around("close",function(t){this.isopen() !this.iscomplete .trigger("uiblockdialogcancel",this.eventdata),t()}),this.after("initialize",function(){this.on(document,"uineedsblockdialog",this.setupdialog),this.on("click",{blockbuttonselector:this.submitblock})})}var n=i("dbjh"),o=i("0d4m"),a=i("uhc7"),r=object(n.default)(a.a,s);e.a=r},kqm4:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({disablekeyboardshortcuts:!0,globaltweetboxdialogselector:"#global-tweet-dialog",globaltweetboxselector:"#global-tweet-dialog form.tweet-form",globaltweetformgifpickerselector:".tweet-form .found-media-search",top:"20%"}),this.openreply=function(t,e){this.displaytweet(e.retweetid||e.id,{modal:"reply"});var i={},s=e.isreplylinkclick .canbeselfthreaded;i.htmltitle=s?object(r.default)("add another tweet"):l.a.render({in_reply_to_user:e.replytousers[0]}),e.semanticannotationids (i.semanticannotationids=e.semanticannotationids),this.opentweetdialog(t,h({},e,i))},this.opentweetdialog=function(e,i){var s=t(this.attr.globaltweetboxselector),n=void 0;if(i .htmltitle?this.select("modaltitleselector").html(i.htmltitle):this.select("modaltitleselector").text(i .title||object(r.default)("compose new tweet")),this.tweetboxready||(n={autoplaydisabled:this.attr.autoplaydisabled,eventdata:{scribecontext:{component:"tweet_box_dialog"}},thumbnailsize:"large",environment:this.attr.environment,videosupport:!0,tweetboxdialogselector:this.attr.globaltweetboxdialogselector,tweetboxdialogtype:"tweet_box_dialog"},this.trigger(s,"uiinittweetbox",n),this.tweetboxready=!0),i){if(!i.id){var o=null;i.screennames?o=i.screennames:i.screenname (o=[i.screenname]),o (i.defaulttext="@"+o.join(" @")+" ")}i.text (i.defaulttext=" "+i.text),this.trigger(s,"uioverridetweetboxoptions",i)}if(this.open(),this.trigger(s,"uicomposerresetandfocus"),i .attachimageurls){var a=this;t.each(i.attachimageurls,function(t,e){a.trigger(a.select("globaltweetformgifpickerselector"),"uiattachimageurl",{url:e,isimage:!0,mediacategoryprefix:"tweet_",skipsourceurl:!0})})}},this.preventdefaultdialogfocus=function(t){this.isopen() .$dialog.is(t.target) .preventdefault()},this.after("initialize",function(){this.on(document,"uidialoginitialfocus",this.preventdefaultdialogfocus),this.on(document,"uiopentweetdialog",this.opentweetdialog),this.on(document,"uiopenreplydialog",this.openreply),this.on("uitweetsent",this.close),this.on("uidialogclosed",this.removetweet)})}var n=i("dbjh"),o=i("uhc7"),a=i("wqlg"),r=i("0d4m"),c=i("zlk3"),l=i.n(c),h=object.assign||function(t){for(var e=1;e \n sending message '),s.b(s.v(s.f("current",t,e,0))),s.b(" of "),s.b(s.v(s.f("total",t,e,0))),s.b(" \n ... \n "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},kbkg:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({dmimagepreviewselector:".dm-media-preview",dmpreviewselector:".dm-media"}),this.loadimage=function(e,i){var s=this,n=t(' '),o=this.select("dmimagepreviewselector");o.empty(),n.on("load",function(t){o.empty().append(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),r.a.resizemedia(n,s.select("dmpreviewselector")),s.position();var e=parsefloat(n.css("margin-top"));e .css("margin-bottom",e),s.trigger("uidmmedialoaded",{url:n.attr("src"),id:i})}),n.on("error",function(t){return s.trigger("uidmmediafailed",{url:n.attr("src"),id:i})}),n.attr("src",e),o.addclass("js-initial-focus")},this.opendialog=function(t,e){this.calculatescrollbarwidth(),r.a.resetminsize(this.select("dmpreviewselector")),this.loadimage(e.imgurl,e.dmid),this.open()},this.renderconversation=function(t,e){this.trigger("uidmdialogmediapreviewclosed")},this.after("initialize",function(){this.on(document,"uidmdialogmediapreview",this.opendialog),this.on("uidialogcloserequested",this.renderconversation)})}var n=i("dbjh"),o=i("uhc7"),a=i("mrbi"),r=i("hotm");e.a=object(n.default)(s,o.a,a.a)}).call(e,i("4ksj"))},kczs:function(t,e,i){"use strict";function s(){this.defaultattrs({mutebuttonnotificationsselector:".dm-mute-notifications-dialog .modal-submit",mutedurationradioselector:'input[name="dm[mute_notifications_duration]"]:checked',defaultcheckedradioselector:'input[name="dm[mute_notifications_duration]"][value="1"]'}),this.opendialog=function(t,e){this.select("defaultcheckedradioselector").prop("checked",!0),this.conversationid=e.conversation_id,this.open()},this.submitmutenotifications=function(){var t=this.select("mutedurationradioselector").val();this.trigger("uitogglenotifications",{conversation_id:this.conversationid,enable_notifications:!1,mute_duration:this.select("mutedurationradioselector").val()}),this.trigger("uidmupdatenotificationsstate",a({},this.getmutedata(t),{is_muted:!0}))},this.getmutedata=function(t){var e={1:1,2:8,3:168},i=e[t];return{mute_expiration_time:i?date.now()+i*r:null,is_short_interval:i?i this.__lasttriggeredheight||this.lasttriggeredfrom(1))?(i="uinearthetop",this.__lasttriggerfrom=0):this.intriggerrange(1) (e>this.__lasttriggeredheight||this.lasttriggeredfrom(0)) (i="uinearthebottom",this.__lasttriggerfrom=1),i (this.__lasttriggeredheight=e,this.trigger(i))}},this.intriggerrange=function(t){var e=this.$content.height(),i=this.$node.scrolltop(),s=i+this.$node.height(),n=math.abs(math.min(s-e,0)),o=this.$node.height()/2;return i 2 (this.polloptions.splice(t,1),this._validateoptions())}},{key:"updatepolloption",value:function(t,e){this.polloptions[t]=e,this._validateoptions()}},{key:"_validateoptions",value:function(){var t=this,e=this.polloptions.some(this._invalidrule);this.validoptions=this.polloptions.filter(function(e){return e.trim().length !t._invalidrule(e)}).map(function(t){return t.trim()}),this.isvalid=!(e||this.validoptions.length 25}},{key:"_getcardname",value:function(t){return"poll"+t+"choice_text_only"}},{key:"_getchoicename",value:function(t){return"twitter:string:choice"+t+"_label"}},{key:"length",get:function(){return this.polloptions.length}},{key:"createdata",get:function(){var t=this;if(this.isvalid){var e={"twitter:card":this._getcardname(this.validoptions.length),"twitter:api:api:endpoint":"1"};return this.validoptions.foreach(function(i,s){e[t._getchoicename(s+1)]=i},this),this.customduration (e["twitter:long:duration_minutes"]=this.customduration),e}}}]),t}(),l={getpoll:function(t){return t in r||(r[t]=new c),r[t]},putpoll:function(t,e){r[t]=e},deletepoll:function(t){t in r r[t]},deleteallpoll:function(){var t=!0,e=!1,i=void 0;try{for(var s,n=object.keys(r)[symbol.iterator]();!(t=(s=n.next()).done);t=!0){var o=s.value;delete r[o]}}catch(t){e=!0,i=t}finally{try{!t .return .return()}finally{if(e)throw i}}},max_option_length:25,min_option_count:2,max_option_count:4};e.a=l},lcya:function(t,e,i){"use strict";(function(t){function s(t,e,i){var s=0,n="";return e(t).foreach(function(e){n+=t.slice(s,e.indices[0])+i(t.slice(e.indices[0],e.indices[1])),s=e.indices[1]}),n+t.slice(s)}function n(){this.defaultattrs({isrtl:"rtl"===t("body").attr("dir"),rtlcharregex:/[\u0600-\u06ff]|[\u0750-\u077f]|[\u0590-\u05ff]|[\ufe70-\ufeff]/gm,dirmarkregex:/\u200e|\u200f/gm,rtlthreshold:.3}),this.shouldbertl=function(t,e,i){void 0===i (i=t.match(this.attr.rtlcharregex));var s=t.trim();if(!s)return this.attr.isrtl;if(!i)return!1;var n=s.length-e;return n>0 .length/n>this.attr.rtlthreshold},this.removemarkers=function(t){return t.replace(this.attr.dirmarkregex,"")},this.setmarkersandrtl=function(t,e){var i=e.match(this.attr.rtlcharregex),n=0;if(i){t=e,t=s(t,a.a.extractmentionswithindices,function(t){return n+=t.length+1,""+t+""});var o=this.attr.rtlcharregex;t=s(t,a.a.extracthashtagswithindices,function(t){return t[1].match(o)?t:""+t}),t=s(t,a.a.extracturlswithindices,function(t){return n+=t.length+2,t+""})}var r=this.shouldbertl(e,n,i);return this.$text.attr("dir",r?"rtl":"ltr"),t},this.erasepastmarkers=function(t){var e=void 0;if(8===t.which)e=-1;else{if(46!==t.which)return;e=0}var i=r.a.getposition(this.$text[0]),s=this.$text.val(),n=0,o=void 0;do{(o=s[i+e]||"") (i+=e,n++,s=s.slice(0,i)+s.slice(i+1))}while(o.match(this.attr.dirmarkregex));n>1 (this.$text.val(s),r.a.setposition(this.$text[0],i),t.preventdefault(),this.detectupdatedtext())},this.around("cleantext",function(t,e){var i=this.removemarkers(t(e)),s=this.setmarkersandrtl(e,i);if(s!==e){var n=this.$text[0],o=r.a.getposition(n);this.$text.val(s),this.prevtext=s,r.a.setposition(n,o+s.length-e.length)}return i}),this.after("inittextnode",function(){this.on(this.$text,"keydown",this.erasepastmarkers)})}var o=i("cztd"),a=i.n(o),r=i("mj5m");e.a=n}).call(e,i("4ksj"))},lrhz:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({tcoselector:".js-display-url",appendtarget:"head"}),this.preconnect=function(e){var i=e.target.parentnode,s=i .href,n=i .getattribute("data-expanded-url");n ===s.indexof("https://t.co/") (' ').attr({href:n}).appendto(this.attr.appendtarget)},this.after("initialize",function(){this.on("click",{tcoselector:this.preconnect})})}var n=i("dbjh"),o=object(n.default)(s);e.a=o}).call(e,i("4ksj"))},ltqk:function(t,e,i){"use strict";function s(){this.defaultattrs({hoverfetchdelay:100,noshowerror:!0,statsname:"swift_profile_popup"}),this.usercache={screennames:object.create(null),ids:object.create(null)},this.socialproofcache={screennames:object.create(null),ids:object.create(null)},this.savetocache=function(t,e){t.ids[e.user_id]=e,t.screennames[e.screen_name]=e},this.retrievefromcache=function(t,e){var i=void 0;return e.userid?i=t.ids[e.userid]:e.user_id?i=t.ids[e.user_id]:e.screenname?i=t.screennames[e.screenname]:e.screen_name (i=t.screennames[e.screen_name]),i},this.invalidatecaches=function(t,e){var i=void 0,s=void 0,n=void 0;e.userid?(i=e.userid,n=this.usercache.ids[i],s=n .screen_name):(s=e.screenname,n=this.usercache.screennames[s],i=n .user_id),i this.usercache.ids[i],i this.socialproofcache.ids[i],s this.usercache.screennames[s],s this.socialproofcache.screennames[s]},this.getprofilepopupmain=function(t,e){var i=this,s=function(t){i.savetocache(i.usercache,t),i.trigger("dataprofilepopupsuccess",t);var e=i.retrievefromcache(i.socialproofcache,t);e .trigger("datasocialproofsuccess",e)},n=function(t){return i.trigger("dataprofilepopupfailure",t)},o=this.retrievefromcache(this.usercache,t);if(o)return o.sourceeventdata=t,void s(o);var a=function(){i.pendingremoterequest=null,i.get({url:"/i/profiles/popup",data:e,eventdata:t,cache:!1,success:s,error:n})};e.wants_hovercard?this.pendingremoterequest=settimeout(a,this.attr.hoverfetchdelay):a()},this.getprofilepopup=function(t,e){var i={};e.screenname?i.screen_name=e.screenname:e.userid (i.user_id=e.userid),e.ishoverrequest (i.wants_hovercard=!0),this.getprofilepopupmain(e,i)},this.hideprofilehover=function(){this.pendingremoterequest (cleartimeout(this.pendingremoterequest),this.pendingremoterequest=null)},this.after("initialize",function(){this.on("uiwantsprofilepopup",this.getprofilepopup),this.on("uihideprofilehover",this.hideprofilehover),this.on(document,"datafollowstatechange datauseractionsuccess datadidmuteuser datadidunmuteuser",this.invalidatecaches)})}var n=i("dbjh"),o=i("vtwx"),a=object(n.default)(s,o.a);e.a=a},mc7r:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({supportedchallengetypes:["captcha"],captchaname:"captcha",defaultcompletionmessage:object(o.default)("challenge completed."),recaptchaloadtime:100,maxcaptchaloadretries:3}),this.hitchallengeendpoint=function(t){this.get({url:"/account/challenge",data:{challenge:t.challenge,response:t.response,challenge_name:t.challengename},success:this.handlesuccessresponse.bind(this),error:this.handleerrorresponse.bind(this)})},this.handleerrorresponse=function(t){this.closecurrentchallenge(),this.resetchallengeparams()},this.closecurrentchallenge=function(){this.currentchallenge .trigger("uiclosespam"+this.currentchallenge+"challenge")},this.allchallengescompleted=function(t){return!t.challengename},this.isvalidchallengetype=function(t){return-1!==this.attr.supportedchallengetypes.indexof(t.challengename)},this.needtorefreshcaptchachallenge=function(t){return this.currentchallenge===this.attr.captchaname .challengename===this.attr.captchaname},this.handlesuccessresponse=function(t){this.allchallengescompleted(t)?(this.closecurrentchallenge(),this.sendcompletionmessage(),this.resetchallengeparams()):this.needtorefreshcaptchachallenge(t)?this.trigger("uirefreshspamcaptchachallenge"):this.isvalidchallengetype(t)?(this.closecurrentchallenge(),this.setandopennewchallenge(t)):(this.closecurrentchallenge(),this.resetchallengeparams())},this.setandopennewchallenge=function(t){this.setchallengeparams(t.challengename,t.completionmessage),this.trigger("uiopenspam"+this.currentchallenge+"challenge",t)},this.sendcompletionmessage=function(){this.trigger("uishowmessage",{message:this.getcompletionmessage()})},this.getcompletionmessage=function(){return this.completionmessage||this.attr.defaultcompletionmessage},this.createinitialchallenge=function(t,e){this.needtocreaterecaptchawidget(e)?this.fetchrecaptchascript(t,e):this.setandopennewchallenge(e)},this.needtocreaterecaptchawidget=function(t){return t.challengename===this.attr.captchaname !this.isrecaptchaobjectdefined()},this.isrecaptchaobjectdefined=function(){return"undefined"!=typeof recaptcha},this.fetchscriptdone=function(t,e,i){"success"===i?this.ensurerecaptchacreatedandloadchallenge(t):this.trigger(document,"uishowerror",{message:"internal server error."})},this.fetchscriptfailure=function(t,e,i){this.trigger(document,"uishowerror",{message:"internal server error."})},this.fetchrecaptchascript=function(e,i){t.getscript(this.attr.recaptchaapiurl).done(this.fetchscriptdone.bind(this,i)).fail(this.fetchscriptfailure.bind(this))},this.ensurerecaptchacreatedandloadchallenge=function(t){if(this.isrecaptchaobjectdefined())return void this.setandopennewchallenge(t);this.loadattempts=this.attr.maxcaptchaloadretries,this.recaptchaloadinterval=setinterval(this.checkifrecaptchacreated.bind(this,t),this.attr.recaptchaloadtime)},this.clearrecaptchloadinterval=function(){clearinterval(this.recaptchaloadinterval)},this.clearloadattempts=function(){this.loadattempts=void 0},this.isloadattemptsdefined=function(){return void 0!==this.loadattempts},this.checkifrecaptchacreated=function(t){this.isloadattemptsdefined() .loadattempts--,this.isrecaptchaobjectdefined() (this.clearrecaptchloadinterval(),this.setandopennewchallenge(t),this.clearloadattempts()),(!this.isloadattemptsdefined()||this.loadattempts 0 0!==arguments[0]?arguments[0]:1;return"rgba("+[parseint(t),parseint(e),parseint(i),s].join()+")"},this.darker=function(){var n=arguments.length>0 0!==arguments[0]?arguments[0]:.5;return new s(t*n,e*n,i*n)}}function n(){this.defaultattrs({gallerystyleselector:".gallery-styles"}),this.setdominantcolorformedia=function(t){var e=t?t.data("dominant-color"):[];this.dominantcolor=this._getdominantcolor(e),this._applydominantcolor(this.dominantcolor),this._appendhoverruletag(this.dominantcolor)},this._getdominantcolor=function(t){if(array.isarray(t) ===t.length)return new s(t[0],t[1],t[2])},this._applydominantcolor=function(t){t?(this.select("gallerymediaselector").css("background-color",t.tocss()),this.select("galleryselector").css("background-color",t.tocss())):(this.select("gallerymediaselector").css("background-color",""),this.select("galleryselector").css("background-color",""))},this._appendhoverruletag=function(t){var e=this.select("gallerystyleselector")[0];if(t ){var i=t.tocss(.7),s="\n .gallery.with-tweet .gallerytweet .tweet,\n .gallery.with-tweet .gallery-content:hover .gallerytweet.enable-fade .tweet {\n background-color: "+i+";\n }\n ";e.sheet.insertrule(s,e.sheet.cssrules.length)}else if(e)for(var n=e.sheet.cssrules.length;n>0;n--)e.sheet.deleterule(n-1)},this.applydominantcolortoborder=function(){var t=this.select("gallerytweetselector");if(this.dominantcolor){var e=this.dominantcolor.darker(.75).tocss(.8);t.find(".stream-item-footer").css("border-color",e)}else t.find(".stream-item-footer").css("border-color","")}}e.a=n},mzzr:function(t,e,i){"use strict";function s(){this.defaultattrs({successfromendpoints:{destroy:"datadiddeletetweet",retweet:"datadidretweet",like:"datadidfavoritetweet",unretweet:"datadidunretweet",unlike:"datadidunfavoritetweet",report:"datadidreporttweet",pin:"datadiduserpintweet",unpin:"datadiduserunpintweet"},errorsfromendpoints:{destroy:"datafailedtodeletetweet",retweet:"datafailedtoretweet",like:"datafailedtofavoritetweet",unretweet:"datafailedtounretweet",unlike:"datafailedtounfavoritetweet",report:"datafailedtoreporttweet",pin:"datafailedtouserpintweet",unpin:"datafailedtouserunpintweet"},statsname:"swift_tweet_actions"});var t={like:{path:"/favorites/create.json",countername:"favorite"},unlike:{path:"/favorites/destroy.json",countername:"favorite"},retweet:{path:"/statuses/retweet.json",countername:"retweet"},unretweet:{path:"/statuses/unretweet.json",countername:"retweet"}};this.takeaction=function(e,i,s){var n=this,o=t[e],l=!!o,h=function(t){t .message .trigger("uishowmessage",{message:t.message}),this.trigger(this.attr.successfromendpoints[e],t);var i=t.profile_stats,s=t.tweet_stats;l (i=a.a.normalizeprofilestats(t,o,r.a.language),s=a.a.normalizetweetstats(t,o,r.a.language)),i .trigger("datagotprofilestats",{stats:i}),s .trigger("datagottweetstats",{stats:s})},d=void 0;d=("like"===e||"retweet"===e) "retweetid"in s?{id:s.retweetid}:"report"===e?{tweet_id:s.tweetid,user_id:s.userid,screen_name:s.screenname,block_user:s.blockuser,report_type:s.reporttype}:{id:s.id},s.tweetstatcount (d.tweet_stat_count=s.tweetstatcount),s.impressionid (d.impression_id=s.impressionid,s.disclosuretype (d.earned="earned"===s.disclosuretype)),s.featurecontext (d.feature_context=s.featurecontext);var u={destroy:"delete",unretweet:"delete"},p={url:function(t,e){return t?n.apiendpointurl(o.path):"/i/tweet/"+e}(l,e),data:d,eventdata:s,success:h.bind(this),error:this.attr.errorsfromendpoints[e],retryifunavailable:!0,statssubcategory:e,useoauthsessionauth:l};"like"===e (this.trigger("uiabimpression",{experiment:"like_over_http_client_6421"}),c.a.getdecider("like_over_http_client") (p.usehttpclient=!0,p.endpoint=e)),this.jsonrequest(p,u[e]||"post")},this.hitendpoint=function(t){return this.takeaction.bind(this,t)},this.gettweet=function(t,e){var i={id:e.id};e.modal (i.modal=e.modal),this.get({url:e.hasstickers?"/i/tweet/stickershtml":"/i/tweet/html",statssubcategory:"html",data:i,eventdata:e,success:"datagottweet",error:"datafailedtogettweet"})},this.after("initialize",function(){this.on("uididretweet",this.hitendpoint("retweet")),this.on("uididunretweet",this.hitendpoint("unretweet")),this.on("uididdeletetweet",this.hitendpoint("destroy")),this.on("uididfavoritetweet",this.hitendpoint("like")),this.on("uididunfavoritetweet",this.hitendpoint("unlike")),this.on("uididblockorreport uididreporttweet",this.hitendpoint("report")),this.on("uigettweet",this.gettweet),this.on("uididuserpintweet",this.hitendpoint("pin")),this.on("uididuserunpintweet",this.hitendpoint("unpin"))})}var n=i("dbjh"),o=i("vtwx"),a=i("ychi"),r=i("v9eu"),c=i("iamj"),l=object(n.default)(s,o.a);e.a=l},mjoy:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},mmtz:function(t,e,i){"use strict";function s(){this.defaultattrs({alertselector:".lifeline-alert-status-btn.is-thread"}),this.changealertstatus=function(){this.hasalert=!this.hasalert,this.select("alertselector").toggleclass("enabled",this.hasalert),this.focus(),this.detectupdatedtext(!0)},this.around("addhiddentext",function(t,e){return t(e)+(this.hasalert?n:"")}),this.before("reset",function(){this.hasalert=!1,this.select("alertselector").toggleclass("enabled",!1)}),this.after("initialize",function(){this.on(this.select("alertselector"),"click",this.changealertstatus)})}e.a=s;var n=" #alert"},mmtj:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({warningselector:".suspicious-content-warning",messageselector:".dm",conversationselector:".js-dm-conversation",reportbuttonsselector:".suspicious-content-response",reportasspamselector:".js-message-is-spam",reportassafeselector:".js-message-is-safe"}),this.showmessage=function(e,i){e.preventdefault();var s=t(e.target),n=s.prev(this.attr.messageselector);s.hide(),n.show()},this.reportmessage=function(e,i,s){var n=t(i.target),o=n.closest(this.attr.messageselector).attr("data-message-id"),a=n.closest(this.attr.conversationselector).attr("data-thread-id");this.trigger("uidmdialogreportdm",{id:o,conversation_id:a,report_as:e}),this.select("reportbuttonsselector").hide(),this.trigger("uidminboxwantsrefreshed")},this.after("initialize",function(){this.on("uirevealsuspiciousdm",this.showmessage),this.on("uireportdmasspam",this.reportmessage.bind(this,"spam")),this.on("uireportdmassafe",this.reportmessage.bind(this,"not_spam")),this.on("click",{warningselector:"uirevealsuspiciousdm",reportasspamselector:"uireportdmasspam",reportassafeselector:"uireportdmassafe"})})}var n=i("dbjh"),o=object(n.default)(s);e.a=o}).call(e,i("4ksj"))},moyp:function(t,e,i){"use strict";function s(){this.defaultattrs({tweetselector:".tweet",tweetformselector:".tweet-form",conversationmoduleselector:".conversation-module",animatedgifselector:".animated-gif"})}var n=i("dbjh"),o=i("preb"),a=i("dumm"),r=i("f/mh"),c=i("hjqc"),l=i("o/dd"),h=i("hker");e.a=object(n.default)(s,o.a,r.a,c.a,a.a,h.a,l.a)},mzrw:function(t,e,i){"use strict";function s(){this.before("togglefavorite",function(t,e,i){return i.tweetdata.tweetstatcount=i.$tweet.find(".profiletweet-action--favorite .profiletweet-actioncount").attr("data-tweet-stat-count")}),this.before("toggleretweet",function(t,e,i){return i.tweetdata.tweetstatcount=i.$tweet.find(".profiletweet-action--retweet .profiletweet-actioncount").attr("data-tweet-stat-count")})}e.a=s},nwi8:function(t,e,i){"use strict";function s(){this.renderactionprompt=function(t,e,i){this.renderdelayedpromptforaction(i.sourceeventdata.id,t)},this.renderdelayedpromptforaction=function(t,e){var i=this.getdelayedpromptforaction(e);i (i.pointertweetid=t,this.renderprompt(i))},this.getdelayedpromptforaction=function(t){var e=this.attr.delayedprompts.filter(function(e){return e.trigger===t})[0];if(e){var i=this.attr.delayedprompts.indexof(e);this.attr.delayedprompts.splice(i,1)}return e},this.after("initialize",function(){this.on(document,"datadidretweet",this.renderactionprompt.bind(this,"retweet")),this.on(document,"datadidfavoritetweet",this.renderactionprompt.bind(this,"favorite"))})}e.a=s},nkyg:function(t,e,i){"use strict";function s(){this.defaultattrs({triedshowaddtweettooltip:!1,selectoraddtweetbutton:".js-add-tweet"}),this.validateaddtweetbutton=function(){if(this.$addtweetbutton){var t=this.isempty();this.$addtweetbutton.toggleclass("disabled",t).prop("disabled",t)}},this.maybetriggertooltip=function(){!this.attr.triedshowaddtweettooltip .a.getdecider("enable_tweetstorm_tooltip") .getvisibletext().length>n.a.getdecidervalue("text_length_for_tweetstorm_tooltip") .$addtweetbutton .$addtweetbutton.is(":visible") !this.$addtweetbutton.is(":disabled") (this.attr.triedshowaddtweettooltip=!0,this.trigger(this.$addtweetbutton,"uishowaddanothertweettooltip"))},this.after("initialize",function(){this.$addtweetbutton=this.select("selectoraddtweetbutton")})}e.a=s;var n=i("iamj")},nqh4:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeonevent("uidmdialogsharedtweetclick",{element:"shared_tweet_dm",action:"click"})})}var n=i("dbjh"),o=i("3odc"),a=object(n.default)(s,o.a);e.a=a},nsfj:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={emojified_text:i("mdlq")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_name",t,e,1),t,e,0,19,38,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" '),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b(" "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},oyls:function(t,e,i){"use strict";function s(t){this.attr={id:null,maxlength:100,querysource:"typed_query",items:[]},this.attr=n.default.merge(this.attr,t),this.getremotesuggestions=function(t,e,i){return i},this.requiresremotesuggestions=function(){return!1},this.removeallselectedusers=function(){this.attr.items=[]},this.getlocalsuggestions=function(t,e){e(this.attr.items.slice(0,this.attr.maxlength))},this.updateselectedusers=function(t){this.attr.items=t.items}}var n=i("yzit");e.a=s},ofhf:function(t,e,i){"use strict";(function(t){function i(){this.addcancelhoverstyleclass=function(e,i,s){var n=t(e.target).closest(this.attr.tweetitemselector),o=t(e.target).closest(this.attr.togglecontainerselector);if("click"!==e.type||n.hasclass(this.attr.favoritedtweetclass)||n.hasclass(this.attr.retweetedtweetclass))return void o.removeclass("is-hoverstatecancelled");o.addclass("is-hoverstatecancelled"),o.one("mouseleave",function(){return o.removeclass("is-hoverstatecancelled")})},this.after("togglefavorite",this.addcancelhoverstyleclass),this.after("toggleretweet",this.addcancelhoverstyleclass)}e.a=i}).call(e,i("4ksj"))},ogfk:function(t,e,i){"use strict";var s={getdimensions:function(t){return new promise(function(e,i){var s=new image;s.onload=function(){e({height:s.height,width:s.width})},s.onerror=i,s.src=t})},getthumbnailoffset:function(t,e,i){var s=void 0;if(e=+e,t=+t,i=+i,e===t >=i >=i)return{height:i,width:i,"margin-left":0,"margin-top":0};if(t t){var n=i/t*e;s={height:i,width:n,"margin-left":-(n-i)/2,"margin-top":0}}else if(t>e){var o=i/e*t;s={height:o,width:i,"margin-top":-(o-i)/2,"margin-left":0}}return s}};e.a=s},p2na:function(t,e,i){"use strict";var s=i("+dwm"),n={max_dimension:4096,getusermedia:function(){var t=navigator.getusermedia||navigator.webkitgetusermedia||navigator.mozgetusermedia||navigator.msgetusermedia;return!!t .bind(navigator)}(),hascanvas:function(){var t=document.createelement("canvas");return!(!t.getcontext||!t.getcontext("2d"))},supportscropper:function(){return this.hascanvas() .a.hasfilereader()}};e.a=n},p9c3:function(t,e,i){"use strict";function s(){this.defaultattrs({heartbeat:0,doc:document,isie:object(n.a)().msie});var t=void 0,e=!1;this.visibilitychange=function(i){var s=void 0;switch(i.type){case"focus":case"focusin":s=!1;break;case"blur":case"focusout":s=!0;break;case"beforeunload":case"uibeforeunload":this.trigger("uipageunload");break;default:t (s=this.attr.doc[t] !this.attr.doc.hasfocus())}!0===s?(e=!0,this.trigger("uipagehidden")):!1===s (e=!1,this.trigger("uipagevisible"))},this.focustick=function(){e||this.trigger("uipagevisible")},this.after("initialize",function(){var e={hidden:"visibilitychange",mozhidden:"mozvisibilitychange",webkithidden:"webkitvisibilitychange",mshidden:"msvisibilitychange"},i=!1;for(var s in e)if(s in this.attr.doc){t=s,this.on(this.attr.doc,e[t],this.visibilitychange),i=!0;break}i||(this.attr.isie?this.on(this.attr.doc,"focusin focusout",this.visibilitychange):this.on(window,"focus focusin blur focusout",this.visibilitychange)),this.on(window,"beforeunload uibeforeunload",this.visibilitychange),this.attr.heartbeat (this.timer=o.default.setintervalevent("uipagefocustick",this.attr.heartbeat),this.on("uipagefocustick",this.focustick))})}var n=i("rw6j"),o=i("r8bt"),a=i("dbjh");e.a=object(a.default)(s)},pom1:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({noshowerror:!0,profilesearchthrottle:35}),this.isinstate=function(t){return t.split(" ").indexof(this.state)>=0},this.isenabled=function(t){return!this.isinstate("disabled enabling enableisunavailable")},this.setinitialstate=function(){this.attr.geoenabled?this.state="1"===l.webclientcookie()?"enabledturnedon":"enabledturnedoff":this.state="disabled"},this.requeststate=function(t,e){this.shouldlocate()?this.locate(t.target):this.sendstate(t.target,this.state)},this.shouldlocate=function(){return this.isinstate("locating changing enabledturnedon locateisunavailable")||this.isinstate("located locationunknown") (!this.lastlocationtime||this.now()-this.lastlocationtime>h)},this.locate=function(t,e){var i=this;this.sendstate(t,e?"changing":"locating");var s=function(e){return i.sendstate(t,i.locateorenablestate(e)||"locateisunavailable")},n=function(){return i.sendstate(t,"locateisunavailable")},o={override_place_id:e};this.post({url:"/account/geo_locate",data:o,echoparams:{spoof_ip:!0},eventdata:o,success:s,error:n})},this.locateorenablestate=function(t){switch(t.status){case"ok":return this.place_id=t.place_id,this.place_name=t.place_name,this.places_html=t.html,this.lastlocationtime=this.now(),"located";case"unknown":return this.lastlocationtime=this.now(),"locationunknown"}},this.now=function(){return(new date).gettime()},this.sendstate=function(e,i){i (this.state=i);var s={state:this.state};"located"===this.state (s.place_id=this.place_id,s.place_name=this.place_name,s.places_html=this.places_html),t(e).trigger("datageostate",s)},this.turnon=function(t){this.isenabled() (l.webclientcookie("1"),this.locate(t.target))},this.turnoff=function(t){this.isenabled() (l.webclientcookie(null),this.sendstate(t.target,"enabledturnedoff"))},this.enable=function(t,e){var i=this;if(this.isinstate("disabled enableisunavailable")){this.sendstate(t.target,"enabling");var s=function(e){l.webclientcookie("1"),i.sendstate(t.target,i.locateorenablestate(e)||"enableisunavailable")},n=function(){return i.sendstate(t.target,"enableisunavailable")};this.post({url:"/account/geo_locate",data:{enable:"1"},echoparams:{spoof_ip:!0},eventdata:e,success:s,error:n})}},this.change=function(t,e){this.isenabled() .locate(t.target,e.placeid)},this.search=function(t,e){var i=this;if(this.searching)return void(this.pendingsearchdata=e);this.pendingsearchdata=null;var s=function(){if(i.searching=!1,i.pendingsearchdata)return i.search(t,i.pendingsearchdata),!0},n=e.query.trim(),o=[n,e.placeid,e.isprefix].join(","),a=function(t){i.searchcache[o]=t,t=c({},t,{sourceeventdata:e}),s()||i.trigger("datageosearchresults",t)},r=function(){s()||i.trigger("datageosearchresultsunavailable")};if(!n)return void a({html:""});var l=this.searchcache[o];if(l)return void a(l);this.searching=!0,this.get({url:"/account/geo_search",data:{query:n,place_id:e.placeid,is_prefix:e.isprefix?"1":"0"},eventdata:e,success:a,error:r})},this.profilesearch=function(t,e){var i=this,s=e.query.trim(),n=s,o=function(t){i.profilesearchcache[n]=t,t=c({},t,{sourceeventdata:e}),i.trigger("dataprofilegeosearchresults",t)},a=this.profilesearchcache[n];if(a)return void o(a);this.get({url:"/account/geo_profile",data:{query:s},eventdata:e,success:o,error:"dataprofilegeosearchresultsunavailable"})},this.requestdefaultprofilelocations=function(t,e){this.get({url:"/account/geo_profile",eventdata:e,success:"datadefaultprofilelocations",error:"dataprofilegeosearchresultsunavailable"})},this.after("initialize",function(){this.searchcache={},this.profilesearchcache={},this.setinitialstate(),this.on("uirequestgeostate",this.requeststate),this.on("uigeopickerenable",this.enable),this.on("uigeopickerturnon",this.turnon),this.on("uigeopickerturnoff",this.turnoff),this.on("uigeopickerchange",this.change),this.on("uigeopickersearch",this.search),this.on("uirequestdefaultprofilelocations",this.requestdefaultprofilelocations),this.on("uigeoprofilesearch",o.default.throttle(this.profilesearch.bind(this),this.attr.profilesearchthrottle))})}var n=i("dbjh"),o=i("yzit"),a=i("dsp6"),r=i("vtwx"),c=object.assign||function(t){for(var e=1;e \n \n '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},qfjf:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dialogs/close_button":i("38hd")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n'),s.b(s.rp(" \n'),s.b(' keyboard shortcuts \n \n\n'),s.b(' \n\n \n \n note: to use these shortcuts, users of screen readers may need to toggle off the virtual navigation.\n \n'),s.s(s.f("keyboard_shortcuts",t,e,1),t,e,0,780,1478,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n'),i.s(i.f("name",t,e,1),t,e,0,870,1031,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' \n \n '),i.b(i.v(i.f("name",t,e,0))),i.b(" \n \n \n")}),t.pop()),i.b(" \n"),i.s(i.f("shortcuts",t,e,1),t,e,0,1093,1409,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' \n \n'),i.s(i.f("keys",t,e,1),t,e,0,1190,1265,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' '),i.b(i.v(i.d(".",t,e,0))),i.b(" \n")}),t.pop()),i.b(' \n '),i.b(i.v(i.f("description",t,e,0))),i.b(" \n \n")}),t.pop()),i.b(" \n \n")}),t.pop()),s.b(" \n \n \n \n \n\n\n"),s.fl()},partials:{" \n \n\n"),s.b(s.rp(" \n \n"),s.fl()},partials:{" \n \n'),s.b(s.rp(" \n \n gif provided by '),s.b(s.v(s.f("attribution_name",t,e,0))),s.b(' \n \n \n \n '),s.b(s.v(s.f("details_url",t,e,0))),s.b(" \n \n \n \n \n \n"),s.fl()},partials:{" 0;this.$savebutton.prop("disabled",s||n)},this.after("open",function(){this.$savebutton=this.select("saveselector"),this.$name=this.select("nameselector"),this.$description=this.select("descriptionselector"),this.togglesavebutton()}),this.after("initialize",function(){this.on(document,"datacustomtimelineupdated",this.close),this.on("click",{saveselector:this.savecustomtimeline}),this.on("input",{nameselector:this.togglesavebutton}),this.on("uitextchanged",this.togglesavebutton)})}},"sr+t":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b(" "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,47,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" tweet")}),t.pop()),s.b("\n"+i),s.b(" "),s.s(s.f("intnumber_other",t,e,1),t,e,0,88,115,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" tweets")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},swj0:function(t,e,i){"use strict";var s=i("rwgq");e.a=function(){this.defaultattrs({drafttweetttl:864e5}),this.getdrafttweet=function(){return this.drafttweetid .drafttweets().getitem(this.drafttweetid)},this.hasdrafttweet=function(){return!!this.getdrafttweet()},this.savedrafttweet=function(t,e){if(this.drafttweetid .hasfocus()){var i=e.text.trim();i !this.isempty(!0)?this.drafttweets().setitem(this.drafttweetid,i,this.attr.drafttweetttl):this.drafttweets().removeitem(this.drafttweetid)}},this.before("clear",function(){this.drafttweetid .drafttweets().removeitem(this.drafttweetid)}),this.overridedrafttweetid=function(t,e){var i=e .drafttweetid||this.attr.drafttweetid;this.drafttweetid!==i (this.drafttweetid=i,this.resettweettext())},this.drafttweets=function(){if(!this.drafttweetsstore){var t=object(s.a)({withexpiry:!0});this.drafttweetsstore=new t("draft_tweets")}return this.drafttweetsstore},this.after("resettweettext",function(){var t=this.getdrafttweet();t (this.setvisibletext(t),this.trigger("uisaveundostate"),this.trigger("uipreparegeopicker"))}),this.initdrafttweets=function(){this.drafttweetid=this.attr.drafttweetid,this.on("uitextchanged",this.savedrafttweet),this.on("uioverridetweetboxoptions",this.overridedrafttweetid)}}},ss9a:function(t,e,i){"use strict";function s(){this.attributes({notice:".dmdeletemessage",confirm:".dmdeletemessage-confirm",cancel:".dmdeletemessage-cancel"}),this.showconfirmation=function(){this.select("notice").trigger("uishowdmnotice")},this.hideconfirmation=function(){this.select("notice").trigger("uidismissdmnotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deletemessage=function(){var t=this.state();this.trigger("uidmdialogdeletemessage",{id:t.messageid,conversation_id:t.conversationid}),this.hideconfirmation(),this.trigger("uidminboxwantsrefreshed")},this.after("initialize",function(){this.on("uishowdmdeletemessageconfirmation",this.state),this.on("uishowdmdeletemessageconfirmation",this.showconfirmation),this.on("click",{confirm:this.deletemessage,cancel:this.hideconfirmation})})}var n=i("dbjh"),o=object(n.default)(s);e.a=o},swew:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({overrideusercssselector:"#user-style-me",screenname:"me",usercolor:r.a.twitterblue}),this.getlighterblendcolor=function(){return c.a.user.nightmodeactivated?r.a.nightpanelbackground:r.a.white},this.getdarkerblendcolor=function(){return c.a.user.nightmodeactivated?r.a.white:r.a.nightpanelbackground},this.getpagepanelbackgroundcolor=function(){return this.getlighterblendcolor()},this.hasrequiredcontrast=function(t){return object(a.a)(t,this.getpagepanelbackgroundcolor())>1.5},this.getlinkcolor=function(t){return this.hasrequiredcontrast(t)?t:r.a.twitterblue},this.override=function(e,i){var s=i?i.color.replace(d,""):this.attr.usercolor,n=""===s?r.a.black:s;this.attr.usercolor=n;var a=this.getlinkcolor(n),c={screen_name:"override-"+this.attr.screenname,logged_in:!0,user_color_lightest:object(o.a)(a,.1,this.getlighterblendcolor()),user_color_lighter:object(o.a)(a,.25,this.getlighterblendcolor()),user_color_light:object(o.a)(a,.4,this.getlighterblendcolor()),user_color_medium:object(o.a)(a,.8,this.getlighterblendcolor()),user_color:a,user_color_dark:object(o.a)(a,.8,this.getdarkerblendcolor()),user_color_darker:object(o.a)(a,.6,this.getdarkerblendcolor()),rgba_user_color_lightest:object(o.c)(a,.1),rgba_user_color_lighter:object(o.c)(a,.25),rgba_user_color_light:object(o.c)(a,.4),rgba_user_color_medium:object(o.c)(a,.7),page_panel_background_color:this.getpagepanelbackgroundcolor()},l=h.a.render(c);t("#user-style-override-"+this.attr.screenname).remove(),t("#user-style-"+this.attr.screenname).after(l)},this.after("initialize",function(){this.on(document,"uioverrideusercss",this.override)})}var n=i("dbjh"),o=i("9f29"),a=i("uvly"),r=i("wmi3"),c=i("iamj"),l=i("opmg"),h=i.n(l),d=/^#/;e.a=object(n.default)(s)}).call(e,i("4ksj"))},t2va:function(t,e,i){"use strict";function s(){this.defaultattrs({tweetboxselector:".tweet-box",tweetactionselector:".tweet-action",discardtweet:".dmcomposer-discardtweet",imagedataselector:".file-data",removetweetevents:"uidmdialogopenedconversationlist uidmdialogclosed uidmsendmessage datafailedtogettweet",gifsupport:!0,videosupport:!0,sruallmedia:!0,preferredgravity:"vertical",preferredweight:"right",composealttext:!1,typingpublishinterval:2e3}),this.isempty=function(){return!(this.hasattachment()||this.getvisibletext().trim())},this.hasattachment=function(){return!1},this.getmediadata=function(){var t=this.gettweetboxid(),e=r.a.keys().filter(function(e){return r.a.get(e).tweetboxid===t})[0],i=r.a.get(e)||{};return{fileid:i.fileid,filetype:i.filetype,mediacategory:i.mediacategory,trimrange:i.trimrange,uploadid:i.uploadid,foundmediainfo:this.foundmediainfo,sourceurl:i.sourceurl,mediatype:i.mediatype}},this.createdataforsending=function(){return t({conversation_id:this.conversationid,media_data:this.hasmedia?this.getmediadata():void 0,recipient_ids:this.conversationid?[]:this.recipientids,screen_name:this.conversationid||this.recipientids?[]:this.screennames,text:this.addhiddentext(this.getvisibletext()),tweetboxid:this.gettweetboxid(),tweet_id:this.hastweetattachment()?this.tweetattachmentid:void 0,message_me_scribe_data:this.messagemescribedata,card_uri:this.carduri},this.getquickreplyresponsedata())},this.senddm=function(){this.detectupdatedtext(),this.trigger("uidmsendmessage",this.createdataforsending()),this.removetextinputquickreply(),delete this.recipientids,delete this.screennames,this.revertcomposer()},this.gettweetboxid=function(){return this.tweetboxid=this.tweetboxid||"swift_tweetbox_"+ +new date,this.tweetboxid},this.isowntweetbox=function(t,e){return(e.tweetboxid||e.sourceeventdata .sourceeventdata.tweetboxid)===this.gettweetboxid()},this.cansend=function(){var t=this.conversationid||this.recipientids||this.screennames;return!this.isempty() !this.maxreached() },this.updatesendbutton=function(){this.cansend()?this.enable():this.disable()},this.enable=function(){this.select("tweetactionselector").removeclass("disabled").attr("aria-disabled",!1)},this.disable=function(){this.select("tweetactionselector").addclass("disabled").attr("aria-disabled",!0)},this.initializecomposer=function(t,e){e=e||{},this.conversationid=e.conversation_id,this.recipientids=e.recipient_ids,this.screennames=e.screen_names,this.revertcomposer(e.retain_tweet_attachment),this.setvisibletext(e.default_composer_text||""),this.$text.attr("aria-label",object(n.default)("message to {{name}}",{name:e.name})),this.focus()},this.revertcomposer=function(t){!0!==t .handletweetremoval(),this.reset(),this.updatesendbutton(),this.handleattachmentchange(),this.focus()},this.reset=function(){this.setvisibletext("")},this.handlekeyboardsubmit=function(){this.select("tweetactionselector").hasclass("disabled")||this.senddm()},this.handletweetremoval=function(){this.removetweet(),this.removetweetattachment(),this.focus()},this.handleattachmentchange=function(){var t=this.hasattachment()?object(n.default)("add a comment..."):void 0,e=this.hasattachment()?"uicomposerdisableexclusiveattachments":"uicomposerenableexclusiveattachments";this.trigger("uiupdatecomposerplaceholder",{placeholdertext:t}),this.trigger(e)},this.showquickreplyconditionally=function(t,e){var i=e .qrjson,s=e .isfirstresult;!this.isempty() ||this.handleshowquickreply(i)},this.broadcasttyping=function(){this.conversationid .trigger("uidmusertyping",{conversation_id:this.conversationid})},this.unfocus=function(){this.select("composereditorselector").blur()},this.after("initialize",function(){this.inittextnode(),this.updatesendbutton(),this.on(this.select("tweetactionselector"),"click",this.handlekeyboardsubmit),this.on("uisendqroptionresponse",this.senddm),this.on("uishortcutenter uishortcutcmdenter",this.handlekeyboardsubmit),this.on("uiemojisuggestion","uiinserttext"),this.on("uitextchanged uiattachmentchanged",this.updatesendbutton),this.on("keydown",{tweetboxselector:object(o.a)(this.broadcasttyping.bind(this),this.attr.typingpublishinterval,this.attr.typingpublishinterval,!0)}),this.on("uiattachmentchanged",this.handleattachmentchange),this.on("click",{discardtweet:this.handletweetremoval}),this.on("uiinitializedmcomposer",this.initializecomposer),this.on("uirevertcomposer",this.revertcomposer),this.on(document,"uidmdialogclosed",this.revertcomposer),this.on(document,"uishowquickreply",this.showquickreplyconditionally),this.on("uishowquickreplyoptionpanel",this.unfocus)})}var n=i("0d4m"),o=i("zytg"),a=i("dbjh"),r=i("h6fk"),c=i("6n1l"),l=i("fbsa"),h=i("zg5a"),d=i("cedb"),u=i("wqlg"),p=i("+hbl"),f=i("lcya"),m=i("84/5"),g=i("pul/"),v=i("zo2h"),b=i("taxt"),w=i("lvmq"),s=i("dzhj"),c=i("nub0"),y=i("btbl"),t=object.assign||function(t){for(var e=1;e 0) .player.playpreview(),this.trigger("uiplayablemediaready"),this.livevideoid !this.shouldusereactplayer .player.updatelayoutbreakpoint({breakpoint:this.getbreakpoint()})},this.pausemedia=function(){this.player?this.player.pause():(this.autoplayoninit=!1,this.playoninit=!1)},this.playmedia=function(){this.player?this.player.play():(this.autoplayoninit=!1,this.playoninit=!0)},this.mutemedia=function(){this.muteoninit=!0,this.player .player.mute()},this.unmutemedia=function(){this.muteoninit=!1,this.player .player.unmute()},this.requestdynamicvideoad=function(){return this.getdynamicvideoad({id:this.tweetid,promoted_id:this.impressionid})},this.onplaybackcomplete=function(){this.trigger("uiplayablemediaplaybackcomplete"),this.trigger("uilivebroadcasthidebadge")},this.removeplayer=function(){this.$node.removeclass(this.attr.playerloadedclass),this.player (this.playerwrapper .reactdom?(this.reactdom.unmountcomponentatnode(this.playerwrapper),this.playerwrapper.parentnode .playerwrapper.parentnode.removechild(this.playerwrapper),this.playerwrapper=void 0):this.player.teardown(),this.player=void 0)},this.before("teardown",function(){this.removeplayer()}),this.teardownifpresent=function(){0===this.$node.closest("body").length .teardown()},this.updateposition=function(t,e){!this.player||e.tweetid!==this.tweetid .tweetid!==this.tweetnonce||this.player.updateposition(e.positiondata)},this.updatelayoutbreakpoint=function(t,e){this.livevideoid .player !this.shouldusereactplayer .player.updatelayoutbreakpoint(e)},this.onpauseallmedia=function(){(this.livevideoid||this.broadcastid) .attr.livevideocontinueplayingbehindmodalsenabled||this.pausemedia()},this.exitfullscreen=function(){this.livevideoid .player.exitfullscreen()},this.externalurlblockclick=function(t,e){var i=u({},this.getscribecontext(),{action:"click"});this.haspartnervideo (i.element="partner_video_card_content"),this.scribe(i,e,{id:this.tweetid})},this.loadplayer=function(e,i){"tweetid"in i (i.tweetid===this.tweetid||i.tweetid===this.tweetnonce) ("index"in i .$node.attr("data-video-index",i.index),this.$node.removeclass(this.attr.placeholderclass),this.loadmedia(),t(document).trigger("uiwatchplayablemedia"))},this.teardownplayer=function(t,e){"tweetid"in e .tweetid===this.tweetid .removeplayer()},this.after("initialize",function(){var t=this.$node.closest("[data-tweet-id]");this.tweetid=t.attr("data-tweet-id"),this.tweetnonce=t.attr("data-tweet-nonce"),this.haspartnervideo=t.attr("data-has-partner-video"),this.dmid=this.$node.closest("[data-message-id]").attr("data-message-id"),this.livevideoid=this.$node.closest("[data-live-video-id]").attr("data-live-video-id"),this.impressionid=this.$node.closest("[data-impression-id]").attr("data-impression-id"),this.broadcastid=this.$node.closest("[data-broadcast-id]").attr("data-broadcast-id"),this.$playercontainer=this.select("playerselector"),this.playercontainer=this.$playercontainer.get(0),this.shouldusereactplayer=this.playercontainer.hasattribute("data-use-react-player"),this.shouldusebversionofreactplayer=this.playercontainer.hasattribute("data-use-b-version-of-react-player"),this.shoulduseplayerprecache=this.playercontainer.hasattribute("data-use-player-precache"),this.shouldserveadsinplayer=this.playercontainer.hasattribute("data-serve-ads-in-player"),this.on("click",{externalurlblock:this.externalurlblockclick}),this.attr.autoplayonhover (this.on("mouseenter",this.autoplay),this.on("mouseleave",this.autoplaystop)),this.on("uiloadplayablemedia",this.loadmedia),this.on("uiunloadplayablemedia",this.removeplayer),this.on("uiunmutemedia",this.unmutemedia),this.on("uimutemedia",this.mutemedia),this.on("uiplaymedia",this.playmedia),this.on("uipausemedia",this.pausemedia),this.on("uiautoplaymedia",this.autoplay),this.on("uistopautoplayingmedia",this.autoplaystop),this.on(document,"uipauseallmedia",this.onpauseallmedia),this.on(document,"uiplayablemediapositionchange",this.updateposition),this.on(document,"uiwatchplayablemedia uioverlayclosed",this.teardownifpresent),this.on(document,"uilivevideobreakpointupdate",this.updatelayoutbreakpoint),this.on(document,"uilivevideoexitfullscreen",this.exitfullscreen),this.on(document,"uiloadplayer",this.loadplayer),this.on(document,"uiteardowncardplayer",this.teardownplayer)})}var n=i("dbjh"),o=i("vuuo"),a=i("nnes"),r=i("jkw3"),c=i("ttv8"),l=i("3odc"),h=i("7j8l"),d=i.n(h),u=object.assign||function(t){for(var e=1;e n[e]?e:t,i+=1)}s 1?this.trigger("uiopenconfirmdialog",l.e):this.trigger("uiopenconfirmdialog",l.f)}),this.after("initialize",function(){this.on(document,"datagottweet",this.displayreplycontext),this.on(document,"uiopentweetstormdialog",this.opentweetstormdialog),this.on(document,"uirestoretweetstormdialog",this.restoredialogfromdraft),this.on(document,"datatweetstormuploaderror",this.restoredialogfromuploaderror),this.on(document,"datatweetstormuploadstart",this.close),this.on(document,"uiclosetweetstormdialogconfirm",this.close)})})}).call(e,i("4ksj"))},tuog:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({streamitemselector:"> .js-stream-item",streamitemcontainerselector:"> .js-stream-item",scrolldebounceinterval:100}),this.enabledscrollcheck=function(t){var e=this,i=this.getpromptidfromnode(t);settimeout(function(){return e.updatevisibility(t)},0),this.on(window,"scroll.prompt"+i,a.default.debounce(this.updatevisibility.bind(this,t),this.attr.scrolldebounceinterval))},this.disablescrollcheck=function(t){var e=t.data("prompt-id");this.off(window,"scroll.prompt"+e)},this.updatevisibility=function(e,i,s){var n=r.a.iswithinbounds(t(window),e),o=this.getpromptidfromnode(e);!this.promptvisibility[o] .trigger("uiinlinepromptscrolledin",this.triggerdata(o)),this.promptvisibility[o]=n},this.insertpromptatindex=function(e,i,s){var n=s?"before":"after",o=t(e.html);this.select("streamitemcontainerselector").eq(i)[n](o),this.enabledscrollcheck(o)},this.before("removeprompt",this.disablescrollcheck),this.after("initialize",function(){this.attr.triggerimpressiononinsert=!1,this.promptvisibility={}})}var n=i("k7b4"),o=i("bn2o"),a=i("yzit"),r=i("/lrg");e.a=n.a.mixin(s,o.a)}).call(e,i("4ksj"))},twgl:function(t,e,i){"use strict";function s(t){n.a.attachto(document,t),o.a.attachto(document,t),a.a.attachto(document,t),r.a.attachto("#global-tweet-dialog",{autoplaydisabled:t.autoplaydisabled,environment:t.environment}),c.a.attachto("#global-new-tweet-button",{eventdata:{scribecontext:{component:"top_bar",element:"tweet_button"}},isglobaltweetbutton:!0,defaulttext:t.query,cursorposition:t.query?0:void 0}),l.a.attachto(document,t),h.a.attachto(document,t)}var n=i("pom1"),o=i("esrd"),a=i("wvpq"),r=i("kqm4"),c=i("fuor"),l=i("r8vg"),h=i("ec06");e.a=s},"u8+l":function(t,e,i){"use strict";function s(){this.scribecreatemoment=function(t,e){var i=e .scribecontext .scribecontext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uimomentmakercreatemoment",this.scribecreatemoment)})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},ufzu:function(t,e,i){"use strict";function s(){this.attributes({addparticipantsselector:".dmaddparticipants",addparticipantsinputselector:".tokenizedmultiselect-input",addparticipantsdoneselector:".dmaddparticipants-done",dialogbodyselector:".dmaddparticipants-content",spinnerselector:".dmaddparticipants-spinner"}),this.setparticipants=function(t,e){this.conversationid .conversationid===e.conversation_id (this.resetdmtypeahead(e),this.select("dialogbodyselector").css("visibility","visible"),this.select("spinnerselector").addclass("u-hidden"),this.select("addparticipantsinputselector").focus())},this.resetdmtypeahead=function(t){var e=t||{},i=e.participants .participants.map(function(t){return t.id});this.trigger(this.attr.addparticipantsselector,"uiinitializedmtypeahead",{preselecteditems:i,maxitems:e.additional_participants_allowed})},this.prepareaddparticipants=function(t,e){this.conversationid=e.conversation_id,this.select("dialogbodyselector").css("visibility","hidden"),this.select("spinnerselector").removeclass("u-hidden"),this.resetdmtypeahead(),this.trigger("uineedsdmconversation",{conversation_id:e.conversation_id})},this.addparticipants=function(){this.conversationid .selectedaccounts.length .trigger("uiaddconversationparticipants",{conversation_id:this.conversationid,participant_ids:this.selectedaccounts}),this.trigger("uidmaddparticipantsdone")},this.handleselecteditems=function(t,e){var i=e .accounts .accounts.length?e.accounts:[];this.selectedaccounts=i.map(function(t){return t.id})},this.possibleaddparticipants=function(t,e){("click"===t.type||"keydown"===t.type .which===a.a.enter) .addparticipants()},this.after("initialize",function(){this.attachchild(o.a,this.select("addparticipantsselector")),this.selectedaccounts=[],this.on("uidmtypeaheadselecteditemschanged",this.handleselecteditems),this.on(document,"datadmconversationresult",this.setparticipants),this.on("uiaddparticipants",this.prepareaddparticipants),this.on("click keydown",{addparticipantsdoneselector:this.possibleaddparticipants})})}var n=i("dbjh"),o=i("7vcw"),a=i("i3qs"),r=i("ajan");e.a=object(n.default)(s,r.a)},"unb/":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n'),s.s(s.f("is_oto",t,e,1),t,e,0,83,304,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" do you want to allow "),i.b(i.v(i.f("conversation_title",t,e,0))),i.b(" to message you? they won't know you've seen their request until you choose to accept. flag conversation \n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b(" do you want to participate in this group? they won't know you've seen the request until you choose to accept. flag conversation \n"),s.b(' \n \n'),s.s(s.f("is_oto",t,e,1),t,e,0,608,709,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' delete \n')}),t.pop()),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b(' leave \n'),s.b(' accept \n \n '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},unvb:function(t,e,i){"use strict";e.a={clientsideuser:0,serversideuser:1,clientsideapp:2,serversideapp:3}},uvly:function(t,e,i){"use strict";function s(t){var e=object(r.b)(t),i=c(e,3),s=i[0],n=i[1],a=i[2],l={r:.2126,g:.7152,b:.0722};return l.r*o(s/255)+l.g*o(n/255)+l.b*o(a/255)}function n(t,e){return s(t)>s(e)}function o(t){return t ",{class:"mediaeditdialog-photo",src:e,on:{load:this.sizeandposition.bind(this)}});this.select("photocontainerselector").html(i)},this.expandvideodescription=function(){var t=3*parseint(this.select("videodescriptionselector").css("line-height"));this.off(this.select("videodescriptionselector"),"focus",this.expandvideodescription),this.select("videodescriptionselector").height(t)},this.cancomposealttext=function(){return!this.isvideo !this.isgif .composealttext},this.gettitle=function(){var t=void 0;return this.isvideo?t=this.advancedvideofeatures?s:c:this.isgif?t=y:this.isimage (t=this.cancomposealttext()?d:t),t},this.displayvideoctaurl=function(){var t=""===this.select("videoctaselectselector").val();this.select("videoctaselectselector").toggleclass("u-inactive",t),this.select("videoctaurlselector").toggleclass("u-hidden",t),t?this.select("videoctaurlselector").removeattr("data-valid"):(this.validatevideoctaurl(),this.select("videoctaurlselector").focus()),this.trigger("uivalidateform")},this.validateform=function(){var t=this.isvalidinput("videoctaurlselector"),e=this.isvalidinput("videotitleselector") .isvalidinput("videodescriptionselector") return e?this.select("donetargetselector").prop("disabled",!1):(this.select("donetargetselector").prop("disabled",!0),!t .select("videoctaurlselector").val().length (this.trigger(document,"uishowmessage",{message:w}),this.select("videoctaurlselector").focus())),e},this.isvalidinput=function(t){return"false"!==this.select(t).attr("data-valid")},this.validatevideoctaurl=function(){var t=this.select("videoctaurlselector").val(),e=this.isvalidurl(t);return this.select("videoctaurlselector").attr("data-valid",e),this.trigger("uivalidateform"),e},this.isvalidurl=function(t){return b.test(t.trim())},this.notifyeditdone=function(){this.trigger("uimediaeditdialogdone",{fileid:this.fileid})},this.updatevideoinfo=function(t,e){var i=g({},e,{duration:t.trimend-t.trimstart});return c.a.update(t.fileid,i)},this.editdone=function(){var t=this.isvideo,e=t?{trimstart:this.trimstart,trimend:this.trimend,trimrange:this.trimrange}:{},i=t .advancedvideofeatures?{advanced:{title:this.select("videotitleselector").val(),description:this.select("videodescriptionselector").val(),ctatype:this.select("videoctaselectselector").val(),ctaurl:this.select("videoctaurlselector").val(),embeddable:this.select("videoembeddableselector").is(":checked")}}:{},s=this.cancomposealttext()?{alttext:(this.select("alttexttextareaselector").val()||"").trim()}:{},n=g({},e,i,s),o=c.a.update(this.fileid,n);t?a.a.getvideoinfo(o.filehandle,this.trimstart).then(this.updatevideoinfo.bind(this,o)).then(this.notifyeditdone.bind(this)):this.notifyeditdone()},this.closemediaeditdialog=function(e,i){this.isvideo (this.trigger(this.select("videotrimselector"),"uiunloadvideo"),this.mediaobjecturl (a.a.revokeobjecturl(this.mediaobjecturl),this.mediaobjecturl=null)),this.cancomposealttext() .select("alttexttextareaselector").val(""),this.close(),this.activeel?t(this.activeel).closest(".tweet-form, .modal").find(".tweet-box").focus():this.restorepreviousfocus()},this.updatetrimrange=function(t,e){this.trimstart=e.trimstart,this.trimend=e.trimend,this.trimrange=e.trimrange},this.resizealttextinput=function(t){var e=this.select("alttexttextareaselector"),i=e[0],s=e.innerheight()-e.height(),n=this.select("applybuttonselector"),o=n.outerheight()-4;e.height(1);var a=math.max(i.scrollheight,o);e.height(math.min(a-s,i)),i.style.display="none",i.offsetheight,i.style.display=""},this.toggleapplybuttonstate=function(e){var i=t(e.target).val();this.select("applybuttonselector").prop("disabled",!(this.initialalttext!==i))},this.after("initialize",function(){this.on(document,"uiopenmediaeditdialog",this.openmediaeditdialog),this.on("uishortcutesc uidialogclosed uimediaeditdialogdone",this.closemediaeditdialog),this.on("uitrimrangechanged",this.updatetrimrange),this.on("click",{donetargetselector:this.editdone,closetargetselector:this.closemediaeditdialog}),this.on("uishortcutcmdenter",this.editdone),this.on("change",{videotitleselector:this.validateform,videodescriptionselector:this.validateform,videoctaselectselector:this.displayvideoctaurl,videoctaurlselector:this.validatevideoctaurl}),this.on("input",{alttexttextareaselector:this.toggleapplybuttonstate}),this.on("uivalidateform",this.validateform),this.on("focusin",{videodescriptionselector:this.expandvideodescription}),this.on("input",{alttexttextareaselector:this.resizealttextinput})})}var n=i("wf2x"),o=i("dbjh"),a=i("+dwm"),r=i("hotm"),c=i("h6fk"),l=i("iamj"),h=i("t0ie"),d=i("uhc7"),u=i("ajan"),p=i("0d4m"),f=i("lsln"),m=i.n(f),g=object.assign||function(t){for(var e=1;e #%",{}\\|\\^[\]`]+)?$/,w=object(p.default)("url is not valid"),s=object(p.default)("edit"),c=object(p.default)("trim"),y=object(p.default)("gif"),t=object(p.default)("image"),d=object(p.default)("image description"),i=60,x=45,k=140;e.a=v}).call(e,i("4ksj"))},uchl:function(t,e,i){"use strict";(function(t){function i(){this.registeritem=function(e){var i=t(e),s=i.attr("data-item-id");s (this.idhash[s]?this.idhash[s]=!0:this.dedupitem(s))},this.dedupitem=function(e){this.select("genericitemselector").filter("[data-item-id="+e+"]").filter(function(e,i){return 0===t(i).closest(".js-no-dedup").length}).slice(1).remove()},this.registerinjecteditem=function(t,e){this.registeritem(t.target)},this.registerexistingitems=function(){var t=this;this.select("genericitemselector").get().foreach(function(e){return t.registeritem(e)})},this.after("initialize",function(){this.attr.usededuping (this.idhash={},this.registerexistingitems(),this.on("uihasinjectedtimelineitem",this.registerinjecteditem))})}e.a=i}).call(e,i("4ksj"))},ueze:function(t,e,i){"use strict";(function(t){function s(){this.viewporthelpers=o.a,this.defaultattrs({scrollthrottlems:200,mediaselectors:":not(.playablemedia--placeholder).playablemedia .playablemedia-player, :not(.with-inline-playable-media).js-macaw-cards-iframe-container.card-type-promo_video_convo, .js-macaw-cards-iframe-container.card-type-audio",tweetiddataattr:"data-tweet-id",tweetsselector:".tweet",permalinkoverlayselector:".permalinkoverlay",opendropdownselector:".dropdown.open .dropdown-menu",tweetnonceid:"data-tweet-nonce"}),this.notifyviewportpositionchange=function(){var t=this,e=o.a.getvisibleviewport(),i=this.getdropdownboundingrect();this.watchedmedia.filter(function(t){return 0!==t.mediaelement.children.length}).filter(function(e){return t.permalinkopen===e.inpermalink}).map(function(s){var n=s.mediaelement.getboundingclientrect(),o=!1;return i (o=0!==t.generatepercentvisible(n,i)),{tweetid:s.tweetid,parentviewportsize:e,positioninparent:object(r.a)(n),videohidden:t.pagehidden||t.modalwithinpermalinkopen||t.modalopen !s.inpermalink||o}}).foreach(function(e){return t.notifyviewportpositionchangeforelement(e.tweetid,e.parentviewportsize,e.positioninparent,e.videohidden)})},this.notifyviewportpositionchangeforelement=function(t,e,i,s){var n={parentviewportsize:e,positioninparent:object(r.a)(i),videohidden:s,percentvisible:s?0:this.generatepercentvisible(e,i),percentofviewportoccupied:s?0:this.generatepercentofviewportoccupied(e,i),sizesinfo:this.generatesizesinfo(e,i)};this.trigger("uiplayablemediapositionchange",{tweetid:t,positiondata:n})},this.generatepercentvisible=function(t,e){return this.generatepercentincontainer(e,t)},this.generatepercentofviewportoccupied=function(t,e){return this.generatepercentincontainer(t,e)},this.generatepercentincontainer=function(t,e){var i=t.bottom-t.top,s=t.right-t.left,n=s*i,o={top:math.max(t.top,e.top),left:math.max(t.left,e.left),bottom:math.min(t.bottom,e.bottom),right:math.min(t.right,e.right)},a=math.max(0,o.bottom-o.top),r=math.max(0,o.right-o.left),c=a*r;return document.fullscreenelement||document.webkitfullscreenelement||document.mozfullscreenelement||document.msfullscreenelement?1:0===n?0:c/n},this.generatesizesinfo=function(t,e){return{viewportsize:{width:t.right-t.left,height:t.bottom-t.top},mediasize:{width:e.right-e.left,height:e.bottom-e.top}}},this.ismediaelementwithinpermalink=function(t){return t.closest(this.attr.permalinkoverlayselector).length>0},this.updatetweetlist=function(){var e=this;this.updatepermalinkvisibility(),this.watchedmedia=this.select("mediaselectors").map(function(i,s){var n=t(s),o=e.permalinkopen .ismediaelementwithinpermalink(n),a=n.closest(e.attr.tweetsselector);return{mediaelement:s,tweetid:a.attr(e.attr.tweetnonceid)||a.attr(e.attr.tweetiddataattr),inpermalink:o}}).get(),this.throttlednotifyviewportpositionchange()},this.updatepermalinkvisibility=function(){this.permalinkopen=this.$permalink.is(":visible")},this.updatepagevisibility=function(){var t=!document.hasfocus()||document.hidden;t!==this.pagehidden (this.pagehidden=t,this.throttlednotifyviewportpositionchange())},this.setmodalopen=function(){this.permalinkopen?this.modalwithinpermalinkopen=!0:this.modalopen=!0,this.throttlednotifyviewportpositionchange()},this.setmodalclosed=function(){this.modalwithinpermalinkopen?this.modalwithinpermalinkopen=!1:this.modalopen=!1,this.updatetweetlist()},this.getdropdownboundingrect=function(){return this.dropdownopen?this.dropdownopen.getboundingclientrect():null},this.setdropdownopen=function(){this.dropdownopen=this.select("opendropdownselector")[0],this.throttlednotifyviewportpositionchange()},this.setdropdownclosed=function(){this.dropdownopen=null,this.throttlednotifyviewportpositionchange()},this.after("initialize",function(){this.watchedmedia=[],this.pagehidden=!1,this.modalopen=!1,this.permalinkopen=!1,this.modalwithinpermalinkopen=!1,this.dropdownopen=null,this.throttlednotifyviewportpositionchange=a.default.throttle(this.notifyviewportpositionchange.bind(this),this.attr.scrollthrottlems),this.on(document,"scroll uidynamiccardloaded uidynamiccardunloaded uiplayablemediaready",this.throttlednotifyviewportpositionchange),this.on(window,"resize",this.throttlednotifyviewportpositionchange),this.on(document,"uipagehidden uipagevisible",this.updatepagevisibility),this.on(window,"focus focusin blur focusout",this.updatepagevisibility),this.$permalink=this.select("permalinkoverlayselector"),this.$permalink.on("scroll",this.throttlednotifyviewportpositionchange),this.on(document,"uidialogopened",this.setmodalopen),this.on(document,"uidialogclosed",this.setmodalclosed),this.on(document,"uidropdownopened",this.setdropdownopen),this.on(document,"uidropdownclosed",this.setdropdownclosed),this.on(document,"uiwatchplayablemedia",this.updatetweetlist),this.updatetweetlist()})}var n=i("dbjh"),o=i("/lrg"),a=i("yzit"),r=i("v+rc");e.a=object(n.default)(s)}).call(e,i("4ksj"))},"v+rc":function(t,e,i){"use strict";function s(t){return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}e.a=s},v93p:function(t,e,i){"use strict";function s(){this.scribesrustats=function(t,e){var i=["stats","sru",e.mediacategory,e.command,e.status],s={browser:object(n.a)(),append_byte_size:e.appendbytesize,total_duration_ms:e.totalduration,total_byte_size:e.totalbytesize};this.scribeperftown(i.join(":"),e.duration,s)},this.after("initialize",function(){r.a.getdecider("web_sru_stats") .on("datasrustats",this.scribesrustats)})}var n=i("rw6j"),o=i("dbjh"),a=i("2coy"),r=i("iamj");e.a=object(o.default)(s,a.a)},vsco:function(t,e,i){"use strict";function s(){this.listmembershipcontent=function(t,e){this.get({url:"/i/"+e.userid+"/lists",datatype:"json",data:{},eventdata:e,success:"datagotlistmembershipcontent",error:"datafailedtogetlistmembershipcontent"})},this.addusertolist=function(t,e){this.post({url:"/i/"+e.userid+"/lists/"+e.listid+"/members",datatype:"json",data:{},eventdata:e,success:"datadidaddusertolist",error:"datafailedtoaddusertolist"})},this.removeuserfromlist=function(t,e){this.destroy({url:"/i/"+e.userid+"/lists/"+e.listid+"/members",datatype:"json",data:{},eventdata:e,success:"datadidremoveuserfromlist",error:"datafailedtoremoveuserfromlist"})},this.createlist=function(t,e){this.post({url:"/i/lists/create",datatype:"json",data:e,eventdata:e,success:"datadidcreatelist",error:"datafailedtocreatelist"})},this.after("initialize",function(){this.on("uineedslistmembershipcontent",this.listmembershipcontent),this.on("uiaddusertolist",this.addusertolist),this.on("uiremoveuserfromlist",this.removeuserfromlist),this.on("uicreatelist",this.createlist)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},vx1t:function(t,e,i){"use strict";function s(){this.defaultattrs({removeoptionselector:".pollingcardcomposer-removeoption",optionindexattr:"data-option-index"}),this.textchanged=function(){this.trigger("uipolloptiontextchange",{index:this.index,text:this.getvisibletext()})},this.removeoption=function(){this.trigger("uipolloptionremove",{index:this.index})},this.resetpollcomposeinput=function(){this.setvisibletext("")},this.updatepolloption=function(t,e){e "option"in e .setvisibletext(e.option)},this.focuspollinput=function(){this.select("richeditortextselector").focus()},this.after("initialize",function(){this.index=this.$node.attr(this.attr.optionindexattr),this.inittextnode(),this.textchanged(),this.on("uitextchanged",this.textchanged),this.on("uipolloptionreset",this.resetpollcomposeinput),this.on("uipolloptionupdate",this.updatepolloption),this.on("uipolloptionfocus",this.focuspollinput),this.on("click",{removeoptionselector:this.removeoption})})}var n=i("dbjh"),o=i("+97u"),a=i("84/5"),r=i("lcya"),c=i("pul/"),l=i("+hbl"),h=object(n.default)(s,c.a,a.a,o.a,r.a,l.a);e.a=h},vl6w:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.dmsubscription=function(t,e){e=e||{};var i=void 0;i=!0===e.enable_subscriptions?"https://api.twitter.com/1.1/dm/subscriptions/new.json":"https://api.twitter.com/1.1/dm/subscriptions/destroy.json",this.post({acceptemptystringasjsonresponse:!0,url:i,data:{user_id:e.user_id},headers:{"content-type":"application/x-www-form-urlencoded"},useoauthsessionauth:!0})},this.after("initialize",function(){this.on("uitoggledmbroadcastsubscription",this.dmsubscription)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},"vnf/":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({birdselector:"h1.bird-topbar-etched",spinnercontainer:"body",globalheadingselector:".global-nav h1",spinnerclass:"pushing-state",spinnerselector:".pushstate-spinner"}),this.showspinner=function(t,e){this.select("birdselector").removeattr("style"),this.select("spinnercontainer").addclass(this.attr.spinnerclass)},this.hidespinner=function(t,e){this.select("spinnercontainer").removeclass(this.attr.spinnerclass)},this.addspinner=function(){this.select("spinnerselector").length||t(' ').insertafter(this.select("globalheadingselector"))},this.after("initialize",function(){this.on("uiswiftloaded",this.addspinner),this.on("uishowgloballoadingindicator",this.showspinner),this.on("uihidegloballoadingindicator",this.hidespinner)})}var n=i("dbjh"),o=object(n.default)(s);e.a=o}).call(e,i("4ksj"))},vvp0:function(t,e,i){"use strict";function s(){this.gettweettranslation=function(t,e){var i=function(e){e .message .trigger("uishowmessage",{message:e.message}),this.trigger(t.target,"datatweettranslationsuccess",e)},s=function(i,s,n){this.trigger(t.target,"datatweettranslationerror",{id:e.id,status:s,errorthrown:n})},n={id:e.tweetid,dest:e.dest};this.get({url:"/i/translations/show.json",data:n,eventdata:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uineedstweettranslation",this.gettweettranslation)})}var n=i("dbjh"),o=i("vtwx"),a=object(n.default)(s,o.a);e.a=a},w0am:function(t,e,i){"use strict";function s(){this.defaultattrs({showunreadnotificationcount:!1,badgeaftertweetcount:!1}),this.addcount=function(t,e){this.trigger(document,{type:"uiupdatepagecount",defaultbehavior:this.updatecount.bind(this,e)})},this.updatecount=function(){var t=arguments.length>0 0!==arguments[0]?arguments[0]:{},e=t.count,i=void 0===e?0:e,s=i;this.attr.badgeaftertweetcount .attr.badgeaftertweetcount 0?this.updatecount(o({},e,{count:e.localized_count})):this.removecount()},this.after("initialize",function(){this.title=document.title,this.attr.showunreadnotificationcount?this.on("uiupdateconnectbadge",this.updatenotificationscount):(this.on("uiaddpagecount",this.addcount),this.on("uihasinjectednewtimeline",this.removecount)),this.on(document,"uibeforepagechanged uiupdatepagetitle",this.settitle)})}var n=i("dbjh"),o=object.assign||function(t){for(var e=1;e 2?object(s.default)("{{first}} + {{count}}",{first:t[0].name,count:t.length-1}):void 0},generateconversationid:function(t,e){if(t ){var i=[t,e];return(n.a.compare(i[0],i[1]) 45;s .a.update(i,{duration:45}),this.notifyfileselected({fileid:i,uploadtype:this.attr.uploadtype}),s .trigger(document,"uiopenmediaeditdialog",{fileid:t.fileid})},this.validatevideo=function(t){if(!this.hasvideosupport())return this.addfileerror(n.a.not_image),!1;if(-1===this.canplayformats().indexof(t.type))return this.addfileerror(n.a.file_unsupported),!1;var e=r.a.getdecidervalue("upload_video_size")||15;return!(t.size>1024*e*1024)||(this.addfileerror(n.a.video_too_large),!1)}}var n=i("jsdv"),o=i("+dwm"),a=i("h6fk"),r=i("iamj");e.a=s},"wre/":function(t,e,i){"use strict";(function(t){function s(){this.defaults={thumbselector:".composerthumbnail",thumbsselector:".composerthumbnails",thumbimageselector:".composerthumbnail-image",thumbremoveselector:".composerthumbnail-remove",composerselector:".tweet-form",attributionselector:".js-attribution",thumbnailsize:"small",composealttext:!1},this.update=function(t,e){var i=l.a.get(e.fileid);i (i.isvideo?this.updatevideothumbnail(i):!i.isgif .isimage .updatedescription(i),this.updatelabels())},this.updatevideothumbnail=function(t){var e=this.getbyfileid(t.fileid);e.length (e.find("img").attr("src",t.thumbnail.src),e.find(".composerthumbnail-duration").text(u.a.formatduration(t.duration)))},this.updatedescription=function(t){var e=t.alttext;if(void 0!==e){var i=this.getbyfileid(t.fileid),s=e||w;i.find(".composerthumbnail-description").text(s)}},this.updatelabels=function(){this.select("thumbselector").each(function(e){var i=t(this),s=i.find("img").attr("alt"),n=s||object(p.default)("image {{image_number}}",{image_number:e+1}),o=s?i:d;i.find(".composerthumbnail-ariadescription").text(o),i.attr("aria-label",n)})},this.getbyfileid=function(t){return this.select("thumbsselector").find(".composerthumbnail[data-file-id="+t+"]")},this.removeallblobs=function(){object(o.a)(this.attr.tweetboxid).foreach(function(t){return t.thumbnail .a.revokeobjecturl(t.thumbnail.src)})},this.removeall=function(t,e){this.removeallblobs(),this.select("thumbsselector").empty(),this.select("attributionselector").empty(),this.removedynamicsizing(),this.$node.closest(this.attr.composerselector).removeclass(k).removeclass(m)},this.addplaceholder=function(t,e){var i=b({},e,{isplaceholder:!0});this.add(i),this.trigger("uipreviewthumbnailshow",i)},this.render=function(t){var e=t.isvideo,i=t.isgif,s=!e !i,n=x[this.attr.thumbnailsize],o=d.a.getdecidervalue("web_upload_video_advanced")?s:c,a=t.thumbnail,c=s?r.a.getthumbnailoffset(a.height,a.width,n):{},l=object.keys(c).map(function(t){return t+": "+c[t]+"px"}).join(";"),f=this.select("thumbselector").length,g=void 0;g=e?t:i?y:object(p.default)("image {{image_number}}",{image_number:f+1});var v={aria_description_id:object(h.a)(),aria_description:d,can_compose_alt_text:!e !i .attr.composealttext,duration:u.a.formatduration(t.duration),edit_button_label:o,file_id:t.fileid,is_gif:i,is_large_size:!e !i "large"===this.attr.thumbnailsize,is_photo:s,is_placeholder:t.isplaceholder,is_video:e,offset_styles:l,label:g,src:a.src,whitelisted_video_user:d.a.getdecidervalue("web_upload_video_advanced")},b=this.select("thumbsselector");b.find(".composerthumbnail-loading").closest(".composerthumbnail").remove();var w=m.a.render(v);b.append(w)},this.add=function(t){var e=t.fileid,i=t.thumbnail.width,s=t.thumbnail.height,n=t.attribution,o=void 0!==n,a=this.$node.closest(this.attr.composerselector);a.toggleclass(m,o),this.render(t),o .find(this.attr.attributionselector).attr("data-file-id",e).html(v.a.render(n)),t.isvideo?this.resize(s,i):t.isgif (a.addclass(k),this.resize(s,i,o)),this.trigger("uiupdatedthumbnails"),this.trigger(a,"uipreviewthumbnailadded",{fileid:e})},this.resize=function(e,i,s){var n=this.select("thumbselector"),o=this.$node.closest(this.attr.composerselector);if(!n.length)return this.removedynamicsizing(),void o.removeclass(k);var a={},r=void 0,c=void 0;e>i?(r=math.min(e,330),c=math.round(i*(r/e))):(c=math.min(i,330),r=math.round(e*(c/i))),a={height:r,width:c},o.addclass(p),n.each(function(){var e=t(this),i=e.find("img");e.add(i).add(i.closest(".composerthumbnail-imagecontainer")).css(a)})},this.removedynamicsizing=function(){var t=this.$node.closest(this.attr.composerselector);this.$node.removeattr("style"),t.find(".richeditor,.tweet-box").eq(0).removeattr("style"),t.find(".typeahead").removeattr("style"),t.removeclass(p).removeclass(m),this.$node.closest(".composerthumbnail--video").removeclass("composerthumbnail--video")},this.completeremoval=function(e){var i=t(e.target),s=i.attr("data-file-id"),n=l.a.get(s),o=n.thumbnail.height,a=n.thumbnail.width,c=x[this.attr.thumbnailsize];this.trigger("uipreviewthumbnailremove",{fileid:s}),i.remove(),this.trigger("uipreviewthumbnailremoved",{fileid:s}),n.isvideo||n.isgif?this.resize(o,a):i.find("img").css(r.a.getthumbnailoffset(o,a,c)),this.updatelabels(),l.a.remove(s)},this.remove=function(e){var i=t(e.target).closest(this.attr.thumbselector),s=i.attr("data-file-id"),n=l.a.get(s);if(n){a.a.revokeobjecturl(i.find("img").attr("src")),i.addclass("is-removing"),i.on("animationend",this.completeremoval.bind(this));var o=n.uploadid;o .trigger(document,"uimediasrucancel",{uploadid:o}),this.trigger("uiimagepickerremove"),this.trigger("uiupdatedthumbnails")}},this.openmediaeditdialog=function(e){var i=t(e.target);if(!i.closest(this.attr.thumbremoveselector).length){if(!this.$node.closest(this.attr.composerselector).hasclass("tweeting")){var s=i.closest(this.attr.thumbselector),n=s.attr("data-file-id"),o=l.a.get(n);if(o){var a={fileid:n},r=o.isvideo||o.isgif?a:b({},a,{composealttext:this.attr.composealttext});this.trigger(document,"uiopenmediaeditdialog",r)}}}},this.showattributionlink=function(t){var e=t.target.getattribute("data-file-id");this.trigger("uineedscopyfoundmediadialog",{fileid:e})},this.handlekeyactions=function(t){a.indexof(t.keycode)>=0 (t.preventdefault(),this.remove(t)),o.indexof(t.keycode)>=0 .openmediaeditdialog(t)},this.preventfocus=function(t){t.preventdefault()},this.after("initialize",function(){var t=this.$node.closest(this.attr.composerselector);this.on(t,"uifileselected",function(t,e){var i=l.a.get(e.fileid);i .add(i)}),this.on(t,"uipreviewthumbnailplaceholderadd",this.addplaceholder),this.on(t,"uipreviewthumbnailremoveall",this.removeall),this.on("click",{attributionselector:this.showattributionlink,thumbselector:this.openmediaeditdialog,thumbremoveselector:this.remove}),this.on("keydown",{thumbselector:this.handlekeyactions}),this.on("mousedown",{thumbselector:this.preventfocus}),this.on(document,"uimediaeditdialogdone",this.update)})}var n=i("dbjh"),o=i("wkyg"),a=i("+dwm"),r=i("ogfk"),c=i("i3qs"),l=i("h6fk"),h=i("dsew"),d=i("iamj"),u=i("20ha"),p=i("0d4m"),f=i("i17q"),m=i.n(f),g=i("vdti"),v=i.n(g),b=object.assign||function(t){for(var e=1;e \n \n'),s.s(s.f("avatar",t,e,1),t,e,0,103,120,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" \n \n \n'),s.s(s.f("title",t,e,1),t,e,0,248,519,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' '),s.s(s.f("rich_text",t,e,1),t,e,0,305,324,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" "),s.b(s.rp(" \n"),s.s(s.f("has_business_context",t,e,1),t,e,0,603,718,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n provides support\n \n')}),t.pop()),s.b(" \n \n"),s.fl()},partials:{" =0?s-1:0:s}function n(t,e,i){var n=s(t,e),o=e.countername,r=t.retweeted_status .retweeted_status.id_str?t.retweeted_status.id_str:t.id_str;if(void 0!==n ){var l=a.a.compactorcommaize(n,i),h=a.a.getcommaizedformat(n),d=o===c?a.a.getfavoritestattitle(n,h):a.a.getretweetstattitle(n,h);return[{status_id:r,name:o,count:n.tostring(),commaized_count:h,compact_count:l,title:d}]}}function o(t,e,i){if("object"===r(t.user)){var s=void 0,n=void 0,o=e.countername,u="\n",p=void 0,f=void 0;if(o===c){var m=t.user.favourites_count;f=a.a.getcommaizedformat(m),s=a.a.getfavoritestatphrase(m,f),n=a.a.getnumericstattext(m,f),p=h}else if(o===l){var g=t.user.statuses_count,v=a.a.compactorcommaize(g,i);f=a.a.getcommaizedformat(g),s=a.a.gettweetstatphrase(g,f),n=a.a.getnumericstattext(g,f),u=a.a.getprofiletweetstat(f,v),p=d}return[{highline_stat_phrase:s,highline_stat_value:n,html:u,stat:p,user_id:t.user.id_str}]}}var a=i("znut"),r="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t},c="favorite",l="retweet",h="favorite",d="tweet";e.a={normalizetweetstats:n,normalizeprofilestats:o}},yfcj:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={verified_account_badge:i("hadd"),translator_account_badges:i("oh3l"),protected_account_badge:i("nffu")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' '),s.b(s.rp(" "),s.fl()},partials:{" =n||e>=s) .dragend()},this.preparedata=function(t){var e=(t.originalevent||t).datatransfer,i={};i.types=array.prototype.slice.call(e.types,0);var s=e.items||e.files;if(s){i.items=[];for(var n=0;n learn more .',{maxsize:o.a.getdecidervalue("upload_video_size")});default:return}}},zdao:function(t,e,i){"use strict";var s=["2586390716:authenticated_web_view","3260518932:moment","3691233323:periscope_broadcast","app","direct_store_link_app","poll2choice_image","poll3choice_image","poll4choice_image","poll2choice_text_only","poll3choice_text_only","poll4choice_text_only","promo_website","summary","summary_large_image","unified_card"];e.a=s},zg5a:function(t,e,i){"use strict";(function(t){function s(){o.default.mixin(this,[f.a,p.a]),this.defaultattrs({thumbcontainerselector:".thumbnail-container",taggingselector:".photo-tagging-container",taggingbuttonselector:".js-open-user-select",taggedusersselector:".tagged-users",thumbselector:".composerthumbnail",photoselectorselector:".photo-selector"}),this.hasmedia=!1,this.isvideo=!1,this.isgif=!1,this.taggedusers=[],this.showpreview=function(t,e){this.isvideo=e.isvideo,this.isgif=e.isgif;var i=["has-thumbnail",this.attr.composealttext?"has-alt-text":"",this.isvideo?"has-video":""];this.stateclasses=i.join(" "),this.$node.addclass(this.stateclasses),this.hasmedia=!0,this.detectupdatedtext(!0);var s=this.select("taggingbuttonselector");this.isgif||this.isvideo?s.hide():s.show().prop("disabled",!1)},this.updatethumbnailcount=function(t){0!==this.select("thumbselector").length !==this.taggedusers.length||this.trigger("uiupdatedselectedusers",{items:[]})},this.hidepreview=function(t,e){this.$node.removeclass(this.stateclasses),this.hasmedia=!1,this.isvideo=!1,this.isgif=!1,this.detectupdatedtext(!0),this.trigger("uiupdatedselectedusers",{items:[]}),this.select("taggingbuttonselector").prop("disabled",!0)},this.updatetaggedusers=function(t,e){var i=this.select("taggedusersselector"),s=this.select("taggingbuttonselector");if(this.taggedusers=e.items,0===e.items.length)return this.updatetagtext(),void s.addclass("no-users");s.removeclass("no-users"),i.html(this.gettaggedusersstring(e.items)),this.trigger("uitaggedusersupdated")},this.updatetagtext=function(){if(!this.taggedusers.length){var t=this.select("thumbselector").length,e=t>1?g:m;this.select("taggedusersselector").text(e)}},this.gettaggedusersstring=function(t){return 1===t.length?object(n.default)("{{name1}}",{name1:t[0].name}):2===t.length?object(n.default)(" {{name1}} and 1 other",{name1:t[0].name}):t.length>2?object(n.default)(" {{name1}} and {{count}} others",{name1:t[0].name,count:t.length-1}):void 0},this.after("reset",function(){var t=this.select("thumbselector").map(function(){return this.getattribute("data-file-id")}).get();this.trigger("uipreviewthumbnailhide"),this.trigger("uipreviewthumbnailremoveall"),this.trigger(this.select("taggingselector"),"uiresetselectedusercomposer"),!this.$node.attr("data-file-reuse-in-thread") .foreach(function(t){h.a.remove(t)}),this.$node.removeattr("data-file-reuse-in-thread")}),this.around("createdataforsending",function(t){var e=t();return e.tagged_users=this.taggedusers.map(function(t){return t.id_str}).join(","),this.trigger("uiupdaterecenttags",{items:this.taggedusers}),e}),this.around("hasattachment",function(t){return this.hasmedia||t()}),this.getphotolimit=function(){return!this.attr.dmonly .a.hasfilereader() .a.hascanvas()?4:1},this.annotatethumbwithtweetboxid=function(t,e){var i=e.fileid;h.a.get(i) .a.update(i,{tweetboxid:this.gettweetboxid()})},this.focusifnotcondensed=function(){this.iscondensed .iscondensed()?t(document.activeelement).not("body").blur():this.focus()},this.after("initialize",function(t,e){this.attachchild(a.a,this.select("thumbcontainerselector"),{eventdata:this.attr.eventdata,composealttext:this.attr.composealttext,thumbnailsize:this.attr.thumbnailsize,tweetboxid:this.gettweetboxid()});var i={photolimit:this.getphotolimit(),gifsupport:!this.attr.dmonly,environment:e.environment};["filedatastring","filedataselector","fileinputstring","emptyfiledatastring","emptyfileinputstring","uploadtype","eventdata","gifsupport","videoformats","videosupport","sruallmedia","mediacategoryprefix"].foreach(function(t){t in this.attr (i[t]=this.attr[t])},this),this.attachchild(l.a,this.select("photoselectorselector"),i),this.on("uipreviewthumbnailshow",this.showpreview),this.on("uipreviewthumbnailhide",this.hidepreview),this.on("uiimagepickeradd uivideopickeradd uipreviewthumbnailremove",this.focus),this.on("uifileinputclicked",this.focusifnotcondensed),this.on("uipreviewthumbnailadded",this.annotatethumbwithtweetboxid),this.attachchild(d.a,this.select("taggingselector"),{includepreviouslyselectedusers:!0,eventdata:this.attr.eventdata}),this.attachchild(u.a,this.select("taggingselector")),this.on(this.select("taggingbuttonselector"),"click",function(){this.trigger(this.select("taggingselector"),"uishowselectpopover"),this.trigger(this.select("taggingbuttonselector"),"uidropdownopened")}),this.on("uiupdatedselectedusers",this.updatetaggedusers),this.on("uiupdatedthumbnails",this.updatethumbnailcount),this.on("uipreviewthumbnailremoved",this.updatetagtext)})}var n=i("0d4m"),o=i("q9/c"),a=i("wre/"),r=i("+dwm"),c=i("p2na"),l=i("+jq1"),h=i("h6fk"),d=i("yx8t"),u=i("mbsm"),p=i("g/am"),f=i("jona"),m=object(n.default)("who's in this photo?"),g=object(n.default)("who's in these photos?");e.a=s}).call(e,i("4ksj"))},"zk//":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({dmlinkselector:".js-dm-dialog, .dm-button, .global-dm-nav"}),this.opendialog=function(e,i){e.preventdefault();var s=t(i.el);i={id:o.a.getid(s),screen_name:o.a.getscreenname(s),name:o.a.getname(s),oto_only:!0},this.trigger("uineedsdmdialog",i)},this.after("initialize",function(){this.on(document,"click",{dmlinkselector:this.opendialog})})}var n=i("dbjh"),o=i("uxvi");e.a=object(n.default)(s)}).call(e,i("4ksj"))},znut:function(t,e,i){"use strict";function s(t,e){return t>=1e3 ===h.indexof(e)}function n(t){return t 65535?(t-=65536,string.fromcharcode(55296+(t>>10),56320+(1023 ))):string.fromcharcode(t)},t.char_code_at=function(t,e){var i,s,n,o,a;for(t+="",s=t.length,a=/[\ud800-\udbff][\udc00-\udfff]/g;null!==a.exec(t) .lastindex-2 =s||e o) (e=this.char_code_at(t,i));i=0 =c;i=n s (s=t[i]);return s},t.min=function(t){var e,i,s,n,o,a,r,c;for(s=null,n=o=0,r=t.length;o =c;i=n 0?t.join("|"):null},t.traverse_object=function(t,e){var i,s,n,o;if(s=t,0===e.length)return null;for(n=0,o=e.length;n s;e=0 =this.number_min?this.get_type():"decimal",i=n===this.get_type()?this.get_key(t):null,s=this.all_tokens()[n],s=t n;s=0 0?(i=t.slice(0,e),n=[t.length-e-1],i.lastindexof(",")>-1 .push(i.length-i.lastindexof(",")-1),n=function(){var t,e,i;for(i=[],t=0,e=n.length;t i;e=0 0?this.decimal+this.interpolate(this.format_for(e),t,"left"):""},e.prototype.format_for=function(t){var e,i;return i=null!=t.precision?t.precision:this.precision,i?function(){var t,s;for(s=[],e=t=0;0 i;e=0 -1?this.tonum(this._n(t).replace(/([0]+\.$)/,"")):this.tonum(this._n(t))},this.i=function(t){return this.tonum(this._i(t))},this.f=function(t){return this.tonum(this._f(t))},this.t=function(t){return this.tonum(this._t(t))},this.v=function(t){return this.tonum(this._v(t))},this.w=function(t){return this.tonum(this._w(t))},this.tonum=function(t){return 0==t.length?0:t.indexof(".")>-1?parsefloat(t):parseint(t)},this._n=function(t){return/(-)?(.*)/.exec(t)[2]},this._i=function(t){return/([\d]+)(\..*)?/.exec(this._n(t))[1]},this._f=function(t){return/([\d]+\.?)(.*)/.exec(this._n(t))[2]},this._t=function(t){return this._f(t).replace(/([0]+$)/,"")},this._v=function(t){return this._f(t).length.tostring()},this._w=function(t){return this._t(t).length.tostring()},this}.call({}),t.names={cardinal:["one","other"],ordinal:["few","one","other","two"]},t.all=function(t){return null==t (t="cardinal"),this.names[t]},t.rule_for=function(t,e){null==e (e="cardinal");try{return this.rules[e](t.tostring(),this.runtime)}catch(t){return t,"other"}},t}(),t.listformatter=function(){function e(t){null==t (t={}),this.formats={2:"{0} and {1}",end:"{0}, and {1}",middle:"{0}, {1}",start:"{0}, {1}"}}return e.prototype.format=function(t){return null!=this.formats[t.length.tostring()]?this.compose(this.formats[t.length.tostring()],t):this.compose_list(t)},e.prototype.compose_list=function(t){var e,i,s,n,o;if(s=this.compose(this.formats.end||this.formats.middle||"",[t[t.length-2],t[t.length-1]]),t.length>2)for(i=n=3,o=t.length;3 =o;i=3 1?(n=e.replace(/\{(\d+)\}/g,"$1"),t.is_rtl (n=t.bidi.from_string(n,{direction:"rtl"}).reorder_visually().tostring()),n.replace(/(\d+)/g,function(t){return i[parseint(t)]})):i[0]||""},e}(),n=void 0!==e !==e?e:(this.twittercldr={},this.twittercldr);for(i in t)s=t[i],n[i]=s}).call(this)},zwfe:function(t,e,i){"use strict";function s(){this.defaultattrs({pollintervalinms:100}),this.hasfocus=function(){return document.activeelement===this.node},this.start=function(){this.poll(),void 0===this.intervalid (this.intervalid=setinterval(this.poll.bind(this),this.attr.pollintervalinms))},this.poll=function(){this.trigger("uiinputpoll"),this.hasfocus()||this.stop()},this.stop=function(){void 0!==this.intervalid (clearinterval(this.intervalid),this.intervalid=void 0)},this.after("initialize",function(){this.on("focus",this.start),this.hasfocus() .start()}),this.before("teardown",this.stop)}var n=i("dbjh");e.a=object(n.default)(s)},zytg:function(t,e,i){"use strict";function s(t,e,i,s){var n=void 0,o=void 0,a=void 0;return function(){var r=this,c=arguments;n (n);var l=date.now(),h=function(){n=null,a=void 0,o=s?o:t.apply(r,c)};return a?l-a>i (o=t.apply(r,c),a=l):(o=s?t.apply(r,c):o,a=l),n=settimeout(h,e),o}}e.a=s},"zao/":function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.viewparticipants=function(t,e){e=e||{},this.get({url:"/i/direct_messages/participants",data:{conversation_id:e.conversation_id},eventdata:e,success:r(t.target,"dataconversationparticipantsresult"),error:r(t.target,"datadmerror")})},this.after("initialize",function(){this.on("uineedsconversationparticipants",this.viewparticipants)})}var n=i("dbjh"),o=i("vtwx"),a=i("ldny"),r=a.a.triggerfn;e.a=object(n.default)(s,o.a)},zo2h:function(t,e,i){"use strict";function s(){this.addtweetattachment=function(t,e){e .id (this.tweetattachmentid=e.id,this.trigger("uiwantstweet",{tweetid:this.tweetattachmentid,tweetoptions:{modal:"dm",disablelinks:!0}}),this.trigger("uiattachmentchanged"))},this.removetweetattachment=function(){this.tweetattachmentid=void 0,this.trigger("uiattachmentchanged")},this.hastweetattachment=function(){return!!this.tweetattachmentid},this.around("hasattachment",function(t){return this.hastweetattachment()||t()}),this.after("initialize",function(){this.tweetattachmentid=void 0,this.on(document,"uicomposewithtweet",this.addtweetattachment)})}e.a=s},a0ja:function(t,e,i){"use strict";function s(t){return array.isarray(t)?t:array.from(t)}function n(t,e){if(!(t instanceof e))throw new typeerror("cannot call a class as a function")}var o=i("cztd"),a=i.n(o),r=i("cxip"),c=i("wkyg"),l=i("lywl"),h=i("jfpi"),d="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var i=0;i 0?h.c.first_tweet:h.c.single_tweet,n.foreach(function(t){return t.tweetdata.batch_mode=h.c.subsequent_tweet})}};e.a=m},aixw:function(t,e,i){function s(t){return i(n(t))}function n(t){var e=o[t];if(!(e+1))throw new error("cannot find module '"+t+"'.");return e}var o={"./above_timeline_prompt.mustache":"qxjx","./account_health_prompt.mustache":"zp5u","./dashboard_profile_prompt.mustache":"eec2","./default_layout.mustache":"pqps","./grid_timeline_layout.mustache":"wpvw","./inline_pointer_prompt.mustache":"/eqt","./inline_prompt.mustache":"fnnq","./list_timeline_layout.mustache":"mjoy","./modal_prompt.mustache":"skr5"};s.keys=function(){return object.keys(o)},s.resolve=n,t.exports=s,s.id="aixw"},ao66:function(t,e,i){"use strict";(function(t){function s(t,e){return t=t.getattribute("data-aria-label-part")||0,e=e.getattribute("data-aria-label-part")||0,"last"===t?1:"last"===e?-1:(t=parseint(t,10),e=parseint(e,10),t||e?t?e?t ?t===e?1:t-e:void 0:-1:1:0)}function n(){this.createimagelabel=function(e,i){var s=t(i);s.removeattr("data-aria-label-part");var n=s.attr("alt");if(n){s.attr({alt:"","data-alt":n});var a=t(" ",{addclass:"u-hiddenvisually image-description","data-aria-label-part":"",text:object(o.default)("image: {{imagedescription}}",{imagedescription:n})});s.before(a)}},this.createarialabel=function(e,i){var n=e.target,o=t(n),r=o.find("img[data-aria-label-part]");r.each(this.createimagelabel);var c=o.find("[data-aria-label-part]").toarray();if(c.length){c.sort(s);var l=c.map(function(t,e){return object(a.a)(t)});n.setattribute("aria-labelledby",l.join(" ")),r.attr("data-aria-label-part","")}},this.removeitemlabel=function(e,i){var s=t(e.target);s.removeattr("aria-labelledby").find(".image-description[data-aria-label-part]").remove(),s.find("img[data-alt]").each(function(e,i){var s=t(i);s.attr("alt",s.attr("data-alt")).removeattr("data-alt")})},this.after("initialize",function(){this.on("uibeforetimelineselectioncleared uiaftertimelineselectionfocused",this.removeitemlabel),this.on("uitimelineitemselected",this.createarialabel)})}var o=i("0d4m"),a=i("dsew");e.a=n}).call(e,i("4ksj"))},az36:function(t,e,i){"use strict";function s(t){this.attr={id:null,maxlength:10,querysource:"typed_query",customitems:[],ttl_ms:12096e5,storagelist:"recentlyselectedlist"},this.attr=n.default.merge(this.attr,t),this.getremotesuggestions=function(t,e,i){return i},this.requiresremotesuggestions=function(){return!1},this.updatestorage=function(){this.storage.setitem(this.attr.storagelist,this.storageitems,this.attr.ttl_ms)},this.updaterecentlyselectedusers=function(t){var e=this.storageitems;t.items.foreach(function(t){this.removerecentuserfromlist(t),e.unshift(t),e.length>this.attr.maxlength (this.storageitems=e.slice(0,this.attr.maxlength))},this),this.updatestorage()},this.removerecentuserfromlist=function(t){var e=this.storageitems,i=this.getsuggestionindexbyid(t,e);-1!==i .splice(i,1)},this.getsuggestionindexbyid=function(t,e){for(var i=0;i \n \n '),s.b(s.t(s.f("html",t,e,0))),s.b("\n"+i),s.b(" \n \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},b2of:function(t,e,i){"use strict";function s(){this.defaultattrs({draggingclass:"currently-dragging",supportsdraggingclass:"supports-drag-and-drop"}),this.dragenter=function(){this.$node.addclass(this.attr.draggingclass)},this.dragleave=function(){this.$node.removeclass(this.attr.draggingclass)},this.addsupportsdraggingclass=function(){this.$node.addclass(this.attr.supportsdraggingclass)},this.hassupport=function(){return"draggable"in document.createelement("span") !object(n.a)().msie},this.after("initialize",function(){this.hassupport() (this.addsupportsdraggingclass(),this.on("uidragenter",this.dragenter),this.on("uidragleave uidrop",this.dragleave))})}var n=i("rw6j"),o=i("dbjh"),a=i("yjbg");e.a=object(o.default)(s,a.a)},b6cp:function(t,e,i){"use strict";function s(){var t=array.prototype.slice.call(arguments);if(!(this instanceof s))return s.open.apply(null,t);var e=t[0];this.database=e,this.name=e.name,this.version=e.version,this.stores=n(e),e.onversionchange=function(){e.close(),self.location .location.reload(!0)}}function n(t){for(var e=[],i=t.objectstorenames,s=0;s =r.a.length-1?this._findnextstage():"function"==typeof this["_upload"+i] (this.state.index++,this["_upload"+i]())},this._findnextstage=function(){switch(this.state.stage){case h.l.none:if(r.a.mediacount){this._setuploadstage(h.l.media),this._uploadmedia();break}case h.l.media:if(r.a.mediacount .trigger("dataneedrefreshadditionalmediainfo"),r.a.pollcount){this._setuploadstage(h.l.poll),this._uploadpoll();break}case h.l.poll:this._setuploadstage(h.l.tweet),this._uploadtweet();break;case h.l.tweet:this.uploadtweetstormsuccess()}},this._uploadmedia=function(){var t=object(o.a)(this._gettweet().tweetboxid);this._gettweet().hasmedia .length?this.trigger(h.b.media.send_batch,{mediaitems:t}):this._uploadnext()},this._uploadpoll=function(){var t=a.a.getpoll(this._gettweet().tweetboxid).createdata;this._gettweet().haspoll !this._gettweet().hasmedia ?this.trigger(h.b.card.send,t):this._uploadnext()},this._uploadtweet=function(){this.trigger(h.b.tweet.send,this._gettweet().tweetdata)},this.onmediasuccess=function(t,e){this._isstage(h.l.media) (this._gettweet().mediaentityid=e.mediaids,this.trigger("datatweetstormuploadupdate",{stage:h.l.media,count:e.mediaids.length}),this._uploadnext())},this.onpollsuccess=function(t,e){this._isstage(h.l.poll) (this._gettweet().carduri=e.carduri,this.trigger("datatweetstormuploadupdate",{stage:h.l.poll,count:1}),this._uploadnext())},this.ontweetsuccess=function(t,e){if(this.trigger("datatweetstormtweetsentsuccessscribe",{senttweet:this._gettweet(),response:e}),this._isstage(h.l.tweet)){var i=this.state.index;i 1 .trigger("datatweetstormuploadsuccessscribe",d({},this.gettypecounts(),{is_reply:!!r.a.gettweet(0).tweetdata.in_reply_to_status_id})),this.trigger("datatweetstormuploadsuccess"),this._resetuploadstage()},this.uploadtweetstormerror=function(t,e){this.disablealertdialoglistener();var i=e .xhr .xhr.status;r.a.length>1 !==i .trigger("datatweetstormuploaderrorscribe",d({},this.gettypecounts(),{is_reply:!!r.a.gettweet(0).tweetdata.in_reply_to_status_id,attempted_failure:this.getcurrentuploadingtype()}));var s=this.state.stage!==h.l.tweet?0:this.state.index,n=r.a.gettweet(s).tweetdata.in_reply_to_status_id,o=r.a.length;r.a.deletefirstntweets(s),this.trigger("datatweetstormuploaderror",{recoverfromindex:s,previousstatusidinthread:n,initiallength:o}),this._resetuploadstage()},this.gettypecounts=function(){return{attempted_tweet_count:r.a.length,photo_count:r.a.phototweetcount,gif_count:r.a.giftweetcount,video_count:r.a.videotweetcount,poll_count:r.a.pollcount}},this.getcurrentuploadingtype=function(){var t=this.state.stage;return t===h.l.media?this._gettweet().mediatype:t},this.enblealertdialoglistener=function(t){this.on(window,"beforeunload uibeforeunload",this.alertupload)},this.disablealertdialoglistener=function(t){this.off(window,"beforeunload uibeforeunload",this.alertupload)},this.alertupload=function(){return r.a.length>1?object(s.default)("are you sure you want to leave while you are sending your tweets?"):object(s.default)("are you sure you want to leave while you are sending your tweet?")},this.after("initialize",function(){this.on("uitweetstormsend",this.startupload),this.on(h.b.tweet.send_success,this.ontweetsuccess),this.on(h.b.media.send_batch_success,this.onmediasuccess),this.on(h.b.card.send_success,this.onpollsuccess),this.on(h.b.tweet.send_error+" "+h.b.media.send_error+" "+h.b.card.send_error,this.uploadtweetstormerror)})})},bn2o:function(t,e,i){"use strict";function s(){this.defaultattrs({removepromptduration:400}),this.around("removeprompt",function(t,e){e.slideup(this.attr.removepromptduration,function(){return t(e)})})}e.a=s},bwsk:function(t,e,i){"use strict";function s(t,e){return new promise(function(i,s){var n=e .errors .errors[0]?e.errors[0].code:void 0,o=t[n];o?(o(e),i(e)):s(e)})}e.a=s},buw5:function(t,e,i){"use strict";(function(t){var s=i("0d4m"),n=i("pnul"),o=i("9tdk"),a=i("8/gf"),r=i("dcvh"),c=i("8jxu"),l=function(t){switch(t){case o.a.file_too_large:return object(s.default)("the selected media is too large.");case o.a.invalid_media:return object(s.default)("your media file could not be processed.");case o.a.timeout:return object(s.default)("the upload session has timed out.");case o.a.unsupported_media:return object(s.default)("your media file is not compatible.");case o.a.zero_file_length:return object(s.default)("file has zero length.");default:return object(s.default)("uploading media failed! please try again later.")}},h=function(t,e){switch(e){case n.a.video:return object(a.a)(t);case n.a.image:return object(r.a)(t);case n.a.gif:return object(c.a)(t)}};e.a=function(e,i,s){return(s=s||t.noop)(i,e)||h(i,e)||l(e)}}).call(e,i("4ksj"))},bwwj:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.addwelcomemessage=function(t,e){if(e=e||{},!e.has_tweet_attachment !1!==e.is_oto){var i={};void 0!==e.welcome_message_id (i.welcome_message_id=e.welcome_message_id),this.post({url:"/messages/add_welcome_message_to_conversation/"+e.conversation_id,data:i,eventdata:e,success:r(t.target,"datadmconversationresult")})}},this.after("initialize",function(){this.on("uirenderconversationview",this.addwelcomemessage)})}var n=i("dbjh"),o=i("ldny"),a=i("vtwx"),r=o.a.triggerfn;e.a=object(n.default)(s,a.a)},c9ff:function(t,e,i){"use strict";(function(t){function s(t,e,i){return e in t?object.defineproperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){this.attributes({conversationlistselector:".dminbox-conversations",reportuseridselector:"[data-other-participant-id]",conversationidselector:".dmconversationactions [data-conversation-id]",conversationtypeselector:".dmconversationactions [data-is-oto]",deleteconversationselector:".dminbox .js-actiondeleteconversation",reportconversationselector:".dminbox .js-actionreportconversation",viewparticipantsselector:".dminbox .inbox-to-convosettings",eventdata:{scribecontext:{component:"dm_conversation_list_dialog"}},loadnextpagerange:150,hiddenclass:"u-hidden",activeclass:"is-active",inboxselector:".dminbox-content",inboxitemselector:".dminboxitem",markallreadselector:".mark-all-read",nomessagesselector:".dm-no-messages",openpopovermenuselector:".dmpopover.is-open .dmpopovermenu",primaryinboxselector:".dminbox-primary",primaryinboxspinnerselector:".dminbox-primary .dminbox-spinner",primaryinboxtype:"trusted",primaryinboxtabselector:".dminbox-inboxtab",primaryinboxtabclass:"dminbox-inboxtab",secondaryinboxselector:".dminbox-secondary",secondaryinboxspinnerselector:".dminbox-secondary .dminbox-spinner",secondaryinboxtabselector:".dminbox-requesttab",secondaryinboxtype:"untrusted",notifications:!1,tabcopyselector:".dminbox-tabcopy",tabselector:".dminbox-tab",tabtoggleitemselector:".dminbox-tabtoggleitem",untrustedconversationlistselector:".dminbox-untrustedconversations",usepushnotifications:!1}),this.removestaleinboxitems=function(t,e){var i=(e||[]).map(function(t){return this.generateinboxitemwithidselector(t)},this).join(", ");t.find(i).parent("li").remove()},this.sortinboxclone=function(e){var i=e.children().get();i.sort(function(e,i){var s=t(e).children().first().attr("data-sort-event-id"),n=t(i).children().first().attr("data-sort-event-id");return-1*o.a.compare(s,n)});var s=(i||[]).reduce(function(t,e){return t+e.outerhtml},"");e.html(s)},this.getdeletedconversationids=function(t){return(t||[]).filter(function(t){return"conversation_delete"===t.type}).map(function(t){return t.conversation_id})},this.applyuserupdates=function(t,e){e.should_request_inbox?this.trigger("uineedsdmconversationlist"):e.is_empty||(this.applysubinboxuserupdates(e,this.attr.primaryinboxtype,"conversationlistselector"),this.applysubinboxuserupdates(e,this.attr.secondaryinboxtype,"untrustedconversationlistselector"))},this.applysubinboxuserupdates=function(t,e,i){var s=t.inbox_updates,n=this.dm_secondary_inbox?s [e]:s,o=t.update_events,a=this.findopenactionmenuid(),r=this.select(i).clone(),c=s .updated_conversation_ids,l=this.getdeletedconversationids(o),h=(c||[]).concat(l);this.removestaleinboxitems(r,h),r.prepend(n .html),this.sortinboxclone(r),this.select(i).replacewith(r),a .reopenactionmenu(a),!n.is_empty .notifications.length .updateunseenmessages(t.notifications,e,i),this.displayunreadcount(e,this.getunseenconversations(i).length),this.$node.data({markallreadid:s.max_sort_id}),this.updatelastseenid(this.$node.data(),s.max_sort_id),this.updatelastseenid(this.$node.data(e),n.max_sort_id)},this.updateunseenmessages=function(t,e,i){var s=this,n=this.$node.data(e),a=n.lastseenid,r=void 0===a?"0":a;t.foreach(function(t){o.a.compare(t.id,r)>0 .select(i).find('[data-last-message-id="'+t.id+'"]').attr("data-is-unseen","")})},this.promoteuntrustedconversation=function(t,e){var i=this.select("untrustedconversationlistselector"),s=this.select("conversationlistselector"),n=e.conversation_id,o=i.find(this.generateinboxitemwithidselector(n)).parent("li");s.prepend(o)},this.findopenactionmenuid=function(){return this.select("openpopovermenuselector").attr("data-conversation-id")},this.reopenactionmenu=function(t){var e='[data-thread-id="'+t+'"] .dmpopover';this.$node.find(e).addclass("is-open")},this.initializeinboxtabs=function(t,e){this.dm_secondary_inbox=e.dm_secondary_inbox;var i=!(e.untrusted .untrusted.is_empty),s=this.dm_secondary_inbox (l.a.get("open_dm_enabled")||i);this.select("tabselector").toggleclass("u-hidden",!s)},this.displayunreadcount=function(t,e){var i=void 0;t===this.attr.primaryinboxtype?(i=c.a.render({primary:!0,count:e}).trim(),this.$primaryinboxtab.find(this.attr.tabcopyselector).text(i)):(i=c.a.render({count:e}).trim(),this.$secondaryinboxtab.find(this.attr.tabcopyselector).text(i));var s=e>0;this.togglecountresetclicklistener(t,s)},this.togglecountresetclicklistener=function(t,e){var i=this.select("trusted"===t?"primaryinboxselector":"secondaryinboxselector").find(".dminboxitem");e?this.on(i,"click",this.notifytabopened):this.off(i,"click",this.notifytabopened)},this.applyinboxresults=function(t,e){e.sourceeventdata .sourceeventdata.max_entry_id?(this.applypaginationresult(e,this.attr.primaryinboxtype,"conversationlistselector"),this.applypaginationresult(e,this.attr.secondaryinboxtype,"untrustedconversationlistselector")):(this.$node.removedata(),this.$node.data({markallreadid:e.max_sort_id,lastseenid:e.max_sort_id}),this.applysubinboxresult(e,this.attr.primaryinboxtype,"conversationlistselector"),this.applysubinboxresult(e,this.attr.secondaryinboxtype,"untrustedconversationlistselector")),this.trigger("uiresetdmpoll"),this.notifytabopened()},this.applysubinboxresult=function(t,e,i){var n=t[e]||{},o=n .html;this.select(i).html(o||""),this.displayunreadcount(e,this.getunseenconversations(i).length),this.trigger("datadmcursor",{cursor:t.cursor}),this.$node.data(s({},e,{lastseenid:n.max_sort_id,minentryid:n.min_entry_id,hasmore:n.has_more}))},this.applypaginationresult=function(t,e,i){var n=t[e]||{},o=this.activeinboxstate(),a=n .html;if(this.isnextpage(o.minentryid,n.max_entry_id)){var r=this.select(i).clone();this.removestaleinboxitems(r,n.threads),r.append(a),this.select(i).replacewith(r);var c=this.$node.data(e);this.$node.data(s({},e,p({},c,{minentryid:n.min_entry_id,hasmore:n.has_more})))}},this.isnextpage=function(t,e){return!(!t||!e) .a.compare(t,e)>=0},this.updatelastseenid=function(t,e){var i=t .lastseenid||"0";e .a.compare(e,i)>0 (t.lastseenid=e)},this.updatespinner=function(){this.select("primaryinboxspinnerselector").toggleclass(this.attr.hiddenclass,!this.$node.data().trusted.hasmore),this.select("secondaryinboxspinnerselector").toggleclass(this.attr.hiddenclass,!this.$node.data().untrusted.hasmore)},this.handleinboxscroll=function(e,i){var s=t(e.currenttarget);s[0].scrollheight-s.scrolltop()-this.attr.loadnextpagerange =0},this);if(this.completions=[],0!==s.length){var o={query:e.query,message:s.length,event_info:n.length,format_version:2};this.scribe("entities",e,o)}}},this.scribeselection=function(t,e){if(!e.fromselectionevent||"uitypeaheaditemcomplete"!==t.type){var i={element:"typeahead_"+e.source,action:"select"},s=void 0;"uitypeaheaditemcomplete"===t.type?s="autocomplete":e.isclick?s="click":"uitypeaheaditemselected"===t.type (s="key_select");var n={position:e.index,description:s};"account"===e.source?(n.item_type=c.a.user,n.id=e.query):"topics"===e.source?(n.item_type=c.a.search,n.item_query=e.query):"follow_search"===e.source?(n.item_type=c.a.savedsearch,n.item_query=e.query):"saved_search"===e.source?(n.item_type=c.a.savedsearch,n.item_query=e.query):"recent_search"===e.source?(n.item_type=c.a.search,n.item_query=e.query):"trend_location"===e.source?(n.item_type=c.a.trend,n.item_query=e.item.woeid,-1===e.item.woeid (i.action="no_results")):"concierge"===e.source (n.item_type=c.a.search,n.item_query=e.query||e.item.name);var o={message:e.input,items:[n],format_version:2,event_info:e.item?e.item.origin:null,search_details:e.item?e.item.searchdetails:null};this.scribe(i,e,o)}},this.scribemalformedaccount=function(){this.scribe({element:"typeahead_account",action:"empty"})},this.after("initialize",function(){this.completions=[],this.on("uitypeaheaditemcomplete uitypeaheaditemselected",this.storecompletiondata),this.on("uitypeaheaditemcomplete uitypeaheaditemselected",this.scribeselection),this.on("uitweetboxtweetsuccess uitweetboxreplysuccess",this.handletweetcompletion),this.on("uitypeaheadaccountmalformed",this.scribemalformedaccount)})}var n=i("dbjh"),o=i("3odc"),a=i("cztd"),r=i.n(a),c=i("rbkv");e.a=object(n.default)(s,o.a)},cxip:function(t,e,i){"use strict";var s=i("v9eu"),n=i("cztd"),o=(i.n(n),i("iamj")),a=["ja","zh-cn","zh-tw","ko"];e.a={getconfig:function(){return o.a.getdecider("twitter_text_emoji_counting_enabled")?n.configs.version3:n.configs.version2},getlanguageweight:function(){return a.indexof(s.a.language)>-1?2:1},version1:n.configs.version1,version2:n.configs.version2}},ca1w:function(t,e,i){"use strict";function s(){this.attributes({markerselector:".dmconversation-lastreadmarker",messageidattr:"data-message-id",receivedmessagesselector:".directmessage--received",scrollcontainerselector:".dmconversation-scrollcontainer"}),this.removemarker=function(){this.select("markerselector").slideup({duration:350})},this.applymarker=function(t){var e=this.findlastreadnode(t),i=e.nextall().filter(this.attr.receivedmessagesselector),s=i.first();if(!!s.length){s.prev().removeclass("is-rapidfire");var n=i.length,a={unread_count:n};a["unread_count_"+o.a.pluralrules.rule_for(i.length)]=!0,s.before(r.a.render(a));var c=s.prop("offsettop")-.33*this.$scrollcontainer.height();this.$scrollcontainer.scrolltop(c)}},this.findlastreadnode=function(t){return this.$node.find("["+this.attr.messageidattr+"="+t+"]")},this.after("initialize",function(){this.$scrollcontainer=this.select("scrollcontainerselector")})}var n=i("zvsr"),o=i.n(n),a=i("iaiq"),r=i.n(a);e.a=s},ckc9:function(t,e,i){"use strict";(function(t){function s(t){n.a.attachto(document,t),r.a.attachto(document),f.a.attachto("#dm_dialog",t,{timestampselector:".time"}),u.a.attachto(document,t),b.a.attachto(".dm-media-container"),i.a.attachto(".dm-mute-notifications-dialog"),x.a.attachto(document),q.a.attachto(document),l.a.attachto(document),$.a.attachto(document),n.a.attachto(document),l.a.attachto(document),m.a.attachto(document),p.a.attachto(document),p.a.attachto(document),a.a.get("welcome_message_add_to_conversation_enabled") .a.attachto(document),f.a.attachto(document),k.a.attachto(".dminbox",{notifications:a.a.get("notifications"),usepushnotifications:a.a.get("usepushfornotifications")}),a.a.attachto(".dmcompose",{maxparticipants:a.a.get("participant_max")||t.dm_participant_max||50,currentuserid:t.userid}),c.a.attachto("#dm_dialog"),a.a.get("notifications") .a.attachto(document,{conversationselector:".dmconversation-content"}),d.a.attachto(document),m.a.attachto(document),s.a.attachto(document),c.a.attachto(document),t.a.attachto(document),d.a.attachto(document),g.a.attachto("#dm_dialog"),u.a.attachto(document),v.a.attachto(document),w.a.attachto(document),y.a.attachto(document),b.a.attachto(document),r.a.attachto(document),o.a.attachto(document),j.a.attachto(document);var e=t.dm_options||{};v.a.attachto(document,{open:e.show_dm_dialog,text:e.default_composer_text,welcomemessageid:e.welcome_message_id,conversation:{id:e.conversation_id},compose:{id:e.recipient_id,screenname:e.recipient,name:e.recipient_name,avatar:e.recipient_avatar}}),h.a.attachto(document),w.a.attachto(document),a.a.get("card_prefetch") .a.attachto(".dmcomposer",{cardprefetchinterval:a.a.get("card_prefetch_interval_in_seconds")})}var n=i("rbio"),o=i("97d5"),a=i("cdle"),r=i("5dpv"),c=i("xxli"),l=i("wyka"),h=i("bwwj"),d=i("hwdg"),u=i("fane"),p=i("f+gd"),f=i("dtnq"),m=i("+q5d"),g=i("itx7"),v=i("rgul"),b=i("igdv"),w=i("y27k"),s=i("7ks6"),c=i("w0o4"),y=i("nqh4"),t=i("tblw"),d=i("p4ep"),i=i("kczs"),x=i("vl6w"),k=i("c9ff"),m=i("/y1u"),p=i("zao/"),a=i("8tpw"),o=i("qir8"),e=i("1f87"),j=i("gpu+"),r=i("+uin"),f=i("tx0k"),u=i("zk//"),b=i("kbkg"),n=i("xna7"),l=i("wlom"),$=i("78rh"),v=i("+q9n"),q=i("bsga"),h=i("5wkh"),w=i("ggwq"),g=!!t("#dm_dialog").length;e.a=g?s:t.noop}).call(e,i("4ksj"))},cl8q:function(t,e,i){"use strict";function s(){this.saveundostatedeferred=function(t){var e=this;"mousemove"===t.type !==t.which||settimeout(function(){e.detectupdatedtext(),e.saveundostate()},0)},this.clearundostate=function(){this.undohistory=[],this.undoindex=-1},this.saveundostate=function(){var t=this.htmlrich.gettext(),e=this.getselection()||[t.length],i=this.undohistory,s=i[this.undoindex];s .text===t?s (s.selection=e):i.splice(++this.undoindex,i.length,{text:t,selection:e})},this.isundokey=function(t){return this.ismac?t.which===n.a.z .metakey !t.shiftkey !t.ctrlkey !t.altkey:t.which===n.a.z .ctrlkey !t.shiftkey !t.altkey},this.isredokey=function(t){return this.ismac?t.which===n.a.z .metakey .shiftkey !t.ctrlkey !t.altkey:this.iswin?t.which===n.a.y .ctrlkey !t.shiftkey !t.altkey:t.which===n.a.z .shiftkey .ctrlkey !t.altkey},this.setundostate=function(t){this.detectupdatedtext(!1,t.text),this.htmlrich.setselectionoffsets(t.selection),this.trigger("uihideautocomplete")},this.emulateundo=function(t){this.isundokey(t) (this.stopevent(t),this.saveundostate(),this.undoindex>0 .setundostate(this.undohistory[--this.undoindex]))},this.emulateredo=function(t){var e=this.undohistory,i=this.undoindex;i =0 .saveundostatedeferred(t)},this.undostatefordeletekeys=function(t){var e=this;if(!(!this.ischrome !this.isfirefox||t.metakey||t.which!==n.a.backspace .which!==n.a.delete)){var i=this.htmlrich.gettext(),s=this.getselection()||[i.length],o=s;settimeout(function(){var a=e.htmlrich.gettext(),r=a.length,c=i.length-r;if(c>0){if(1===o.length){var l=o[0];o=t.which===n.a.backspace?[l-c,l]:[l,l+c]}if(o[0]>=0 [1] =0 [e.undoindex].text===i .undoindex--;var d=e.undoindex>=0 [e.undoindex].deletedspan;d (s=h[e.undoindex].selection,t.which===n.a.backspace [1]===d[0]?(i=h[e.undoindex--].text,o=[o[0],d[1]]):t.which===n.a.delete [0]===d[0] (i=h[e.undoindex--].text,o=[d[0],d[1]+c])),e.ischrome (s=o),h.splice(++e.undoindex,h.length,{text:i,selection:s,deletedspan:o}),e.saveundostate()}}},0)}},this.handlekeydownforundo=function(t){this.emulateundo(t),this.emulateredo(t),this.undostateaftercursormovement(t),this.undostatefordeletekeys(t)},this.after("inittextnode",function(){this.undohistory=[{text:"",selection:[0]}],this.undoindex=0,this.on(this.$text,"keydown",this.handlekeydownforundo),this.on(this.$text,"focusin",this.ignoreduringfakefocus(this.saveundostatedeferred)),this.on(this.$text,"cut paste drop",this.saveundostate),this.on(this.$text,"cut paste drop mousedown mousemove",this.saveundostatedeferred),this.on("uisaveundostate",this.saveundostate),this.on("uiclearundostate",this.clearundostate)})}var n=i("i3qs");e.a=s},cutm:function(t,e,i){"use strict";(function(t){function s(e){if(!e.no_global_infinite_scroll){var i=e.infinitescrollnode||window;n.a.attachto(i,{contentselector:e.contentselector,immediatelyrequestmoreitems:t(".stream-container").hasclass("js-request-more-stream-items")})}var s=e.inoverlay?".permalinkoverlay":document;a.a.attachto(s,e),o.a.attachto(document)}var n=i("kjck"),o=i("pmre"),a=i("bcvv");e.a=s}).call(e,i("4ksj"))},d2kf:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("items",t,e,1),t,e,0,10,349,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' ')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},dcvh:function(t,e,i){"use strict";var s=i("0d4m"),n=i("9tdk"),o=i("9eqs"),a=i.n(o);e.a=function(t){var e=a.a.render({article_number:"20156423"});switch(t){case n.a.invalid_media:return object(s.default)("your image file could not be processed. please see tips for uploading images. {{learnmorelink}}",{learnmorelink:e});case n.a.file_too_large:return object(s.default)("your image file is too large. images should be less than 5 mb. {{learnmorelink}}.",{learnmorelink:e});case n.a.unsupported_media:return object(s.default)("your image file is not compatible. please see tips for uploading images. {{learnmorelink}}",{learnmorelink:e})}}},dsew:function(t,e,i){"use strict";function s(t,e){t=t||{},e=e||n;var i=t.id;if(i)return i;do{o++,i=e+o}while(document.getelementbyid(i));return t.id=i,i}var n="uuid-",o=0;s.resetcount=function(){o=0},e.a=s},dtnq:function(t,e,i){"use strict";function s(){this.attributes({darktraffic:!1}),this.processdmtypingevent=function(t){!this.attr.darktraffic .trigger("datadmtyping",t)},this.processdmupdate=function(t){!this.attr.darktraffic .trigger("datadmupdate",t)},this.processlpmessage=function(t,e){e.payload.dm_typing?this.processdmtypingevent(e.payload.dm_typing):e.payload.dm_update .processdmupdate(e.payload.dm_update)},this.updatesubscriptions=function(t,e){if(e ){var i="subscribe"===t?"datalpsubscribe":"datalpunsubscribe";this.trigger(i,{consumer_id:this.consumerid,topic:this.gettopicsforconversation(e)})}},this.handleconversationupdate=function(t,e){e.conversation_id!==this.conversationid .updatesubscriptions("unsubscribe",this.conversationid),this.updatesubscriptions("subscribe",e.conversation_id),this.conversationid=e.conversation_id},this.handleconversationviewchange=function(t){var e="uidmconversationactivityhidden"===t.type?"unsubscribe":"subscribe";this.updatesubscriptions(e,this.conversationid)},this.gettopicsforconversation=function(t){return["/dm_typing/"+t,"/dm_update/"+t]},this.after("initialize",function(){this.consumerid=parseint(math.random()*number.max_safe_integer,10),this.on("datalpmessage",this.processlpmessage),this.on("uidmconversationupdated",this.handleconversationupdate),this.on("uidmconversationactivityhidden uidmconversationactivityvisible",this.handleconversationviewchange)})}var n=i("dbjh");e.a=object(n.default)(s)},dumm:function(t,e,i){"use strict";(function(t){function s(t,e,i){return e in t?object.defineproperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){var e,i;c.default.mixin(this,[f.a,g.a,m.a]),this.defaultattrs({cardwrapperclass:".js-macaw-cards-iframe-container",tweetiddata:"tweet-id",tweetnonceiddata:"tweet-nonce",itemiddata:"item-id",dmiddata:"message-id",advertiseriddata:"advertiser-id",itemtype:"tweet",fullcardiframeurl:"data-full-card-iframe-url",srcattr:"data-src",cardurl:"data-card-url",publisherid:"data-publisher-id",creatorid:"data-creator-id",srcdataattr:"src",cardurldataattr:"card-url",publisheriddataattr:"publisher-id",creatoriddataattr:"creator-id",cardname:"data-card-name",card2typeattr:"card2-type",supportsbroadcastplayerattr:"supports-broadcast-player",macawcardsuserstyles:"macaw-cards-user-styles"}),this.default_scribe_element="platform_card",this.default_scribe_component="tweet",this.default_scribe_action="undefined",this.cards_requiring_user_defined_styles=["2586390716:message_me"],this.broadcast_player_cards={periscope:"3691233323:periscope_broadcast",broadcast:"745291183405076480:broadcast",live_event:"745291183405076480:live_event"},this.cards_requiring_live_broadcast_player=[this.broadcast_player_cards.broadcast,this.broadcast_player_cards.live_event],this.card_player_component_map=(e={},s(e,this.broadcast_player_cards.periscope,"broadcastcard"),s(e,this.broadcast_player_cards.broadcast,"broadcastcard"),s(e,this.broadcast_player_cards.live_event,"lexcard"),e),this.card_player_surface_map=(i={},s(i,this.broadcast_player_cards.periscope,"broadcast_card"),s(i,this.broadcast_player_cards.broadcast,"broadcast_card"),s(i,this.broadcast_player_cards.live_event,"event_card"),i),this.createcard=function(e){var i=this;if(window.opener (!document.hasfocus()||!window.__user_interactive))return settimeout(function(){i.createcard(e)},500);var s=void 0,n=this._getcardwrapper(e),o=this._getuniqueidforcard(e),c=this._gettweetid(e),h=this._getadvertiserid(e),u=void 0,f=void 0,m=e.closest("[data-card-component]").attr("data-card-component"),g={element:this.default_scribe_element,component:m||this.default_scribe_component},v=w({},r.a.scribecontext,{component:g.component}),s={impressionid:e.data("impression-id"),disclosuretype:e.data("disclosure-type")};if(n .length [0].childnodes.length 0,autoplaypreviewpreroll:d.a.getdecider("autoplaypreviewpreroll"),usevmapvariants:d.a.getdecider("usevmapvariants")}},resizecard:function(t){s.iframe.height=parseint(t.height,10),n.removeclass("initial-card-height")},statuscomposetweet:function(e){"htmltitle"in e e.htmltitle,"screenname"in e (e.screenname=c(e.screenname)),"screennames"in e (array.isarray(e.screennames)||(e.screennames=[e.screennames]),e.screennames=e.screennames.map(c)),e.defaulttext=e.tweettext||"",p.a.isvalidtweettext(e.defaulttext)||delete e.defaulttext,t(document).trigger("uiopentweetdialog",w({},e,{cantweetdefaulttext:!0,disclosuretype:i._getdisclosuretype(e.earned)}))},retweetstatus:function(t){return i._triggertweetaction(e,"uiopenretweetdialog",{id:t.tweetid||c,tweetid:t.tweetid||c})},favoritestatus:function(t){return i._triggertweetaction(e,"uididfavoritetweet",{id:t.tweetid||c})},sharestatus:function(t){return i._triggertweetaction(e,"uineedsshareviaemaildialog",{id:t.tweetid||c})},followadvertiser:function(t){h ._triggertweetaction(e,"uifollowaction",{userid:h})},unfollowadvertiser:function(t){h ._triggertweetaction(e,"uifollowaction",{userid:h})},rawscribeinterface:function(t){return i.trigger(document,"scribe",{scribeevent:w({},r.a.scribecontext,g,t.namespace),scribedata:t.data})},rawpromotedloggerinterface:function(t){return i.trigger(document,"uilogpromotedevent",t)},scribe:function(t){var e=i.default_scribe_element,s=i.default_scribe_action,o=void 0;t.hasownproperty("customscribe") (t.customscribe.hasownproperty("element") (e=t.customscribe.element),t.customscribe.hasownproperty("action") (s=t.customscribe.action),t.customscribe.hasownproperty("itemdata") (o=t.customscribe.itemdata),i.scribecardinteraction(s,i._getcarddatawithscribecontext(n,g),e,o))},logpromotedinfo:function(t){return i.trigger(document,"uimacawcardclicked",{event:t.event,impressionid:t.impressionid,earned:t.earned,sync:t.sync})},logpromotedcontentevent:function(s){return i._triggertweetaction(e,"uiplayablemediaevent",t.extend(i.interactiondata(e,s),s))},followuser:function(t){t.userid ._triggertweetaction(e,"uifollowaction",{userid:t.userid})},unfollowuser:function(t){t.userid ._triggertweetaction(e,"uiunfollowaction",{userid:t.userid})},unblockuser:function(t){t.userid ._triggertweetaction(e,"uiunblockaction",{userid:t.userid})},cancelfollowuser:function(t){t.userid ._triggertweetaction(e,"uicancelfollowrequestaction",{userid:t.userid})},subscribetoevent:function(t){t .subscribeto (o in i.activesubscriptions?i.activesubscriptions[o].push(t.subscribeto):i.activesubscriptions[o]=[t.subscribeto],i._addsubscription(o,t.subscribeto))},unsubscribefromevent:function(t){t .unsubscribefrom ._removesubscription(o,t.unsubscribefrom)},emojifytext:function(t){for(var e in t)t[e]=l.a.emojifytext(t[e]);s.transmitemojifiedtext(t)},initplayerforliveeventcard:function(t){i._triggertweetaction(e,"uiloadplayerforliveeventcard",{broadcast_id:t.broadcast_id})},teardownplayerforliveeventcard:function(){i._triggertweetaction(e,"uiteardownplayerforliveeventcard",{})},initcardplayerforbroadcast:function(t){i._triggertweetaction(e,"uiloadcardplayerforbroadcast",{broadcast_id:t.broadcast_id,requested_timecode:t.requested_timecode})},initcardplayerformediatweetid:function(t){i._triggertweetaction(e,"uiloadcardplayerformediatweetid",{media_tweet_id:t.media_tweet_id})},initcardplayer:function(t){i._triggertweetaction(e,"uiloadplayer",{tweetid:o,index:t.index})},teardowncardplayer:function(){i._triggertweetaction(e,"uiteardowncardplayer",{tweetid:c})}},remote:{localmethodnames:{},callvideoplayermethod:{},transmitemojifiedtext:{},transmitevent:{}}}),t(s.iframe).attr("allowfullscreen",""),this.channels[o]=s;if(e.data(this.attr.dmiddata) .is(":visible")){var i=this.getcard2item(this.getcarddatafromcontainer(n));this.trigger("uinewdmcardloaded",{carditem:i})}}return s},this.destroycard=function(t){var e=this._getuniqueidforcard(t);if(this.channels[e]){this.channels[e].destroy(),delete this.channels[e];var i=this.activesubscriptions[e];delete this.activesubscriptions[e];for(var s in i)this._subscriptionexistsfor(event)||this.off(document,s)}},this.destroyallcards=function(){var t=this.channels;object.keys(this.channels).foreach(function(e){return t[e].destroy()}),this.channels={}},this.handlestreamitemremoval=function(e){var i=this,s=e.target;s (s).find(".tweet").each(function(e,s){return i.destroycard(t(s))})},this._getcardwrapper=function(t){return t.find(this.attr.cardwrapperclass)},this._gettweetid=function(t){return t.data(this.attr.tweetiddata)},this._getuniqueidforcard=function(t){return t.data(this.attr.tweetnonceiddata)||t.data(this.attr.tweetiddata)||t.data(this.attr.dmiddata)},this._getadvertiserid=function(t){return t.data(this.attr.advertiseriddata)},this._getusercolor=function(e){var i=t(" ").css("display","none").appendto(e),s=i.css("color");return i.remove(),s},this._getcard2type=function(t){return t.data(this.attr.card2typeattr)},this._addlivebroadcastplayerparamtourl=function(t){return h.a.addtourl(t,{supports_broadcast_player:!0})},this._addusercolortourl=function(t,e){var i=this._getusercolor(t);return i?h.a.addtourl(e,{user_color:i}):e},this._addscribecontexttourl=function(t,e){return t?h.a.addtourl(e,{scribe_context:json.stringify(t)}):e},this._addbearertokentourl=function(t,e){return t?h.a.addtourl(e,{bearer_token:t}):e},this._adddminfotourl=function(t,e){var i=t.find(".card2"),s=parseint(i.css("border-top-left-radius"),10),n=parseint(i.css("border-top-right-radius"),10),o=parseint(i.css("border-bottom-right-radius"),10),a=parseint(i.css("border-bottom-left-radius"),10),r=e;if(!(isnan(s)||isnan(n)||isnan(o)||isnan(a))){var c=[s,n,o,a].map(function(t){return t>0}),l={client:"dm",border_radius:c.tostring()};l.edge=!0,r=h.a.addtourl(e,l)}return r},this._addnightmodetourl=function(t,e){return d.a.user.nightmodeactivated?h.a.addtourl(e,{night_mode:!0}):e},this._addheighttourl=function(t,e){var i=t.height();return i?h.a.addtourl(e,{card_height:i}):e},this._addrtbadinfotourl=function(t,e,i){var s={card_name:e.data("card-name"),card_url:e.data("card-url"),website_url:t.data("card-website-url"),title:t.data("card-title"),vanity_url:t.data("card-vanity-url"),image_width:t.data("card-image-width"),image_height:t.data("card-image-height"),image_url:t.data("card-image-url")};return h.a.addtourl(i,{rtb_data:json.stringify(s)})},this._getcarddatawithscribecontext=function(t,e){return w({},this.getcarddatafromcontainer(t),{scribecontext:e})},this._getdisclosuretype=function(t){return!0===t?"earned":"_"},this._triggertweetaction=function(t,e,i){t.trigger(e,i)},this._addsubscription=function(t,e){var i=this;this.on(document,e,function(s,n){var o=i.channels[t];o .activesubscriptions[t] .activesubscriptions[t].indexof(e)>-1 .transmitevent(e,{type:s.type,timestamp:s.timestamp,data:s.data},n)})},this._removesubscription=function(t,e){var i=this.activesubscriptions[t];if(this.channels[t] .isarray(i)){var s=i.indexof(e);s>-1 (i.splice(s,1),i.length>0?this.activesubscriptions[t]=i:delete this.activesubscriptions[t],this._subscriptionexistsfor(e)||this.off(document,e))}},this._getallsubscriptions=function(){return object.keys(this.activesubscriptions).map(function(t){return this.activesubscriptions[t]},this).filter(function(t){return!!t})},this._subscriptionexistsfor=function(t){return this._getallsubscriptions().map(function(t){return t.subscribedto}).some(function(e){return e.subscribedto.indexof(t)>-1})},this.autoplaymedia=function(e){var i=this._getuniqueidforcard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s .callvideoplayermethod("autoplaypreview")},this.loadvideocards=function(t,e){var i=this;e .tweets .tweets.foreach(function(t){var e=i.$node.find(".tweet[data-tweet-id="+t.tweetid+"]");e.find('[data-card-name=__entity_video][data-has-autoplayable-media="true"]:empty').length .createcard(e)})},this.stopautoplayingmedia=function(e,i){var s=this._getuniqueidforcard(t(e.target).closest(".tweet[data-tweet-id]")),n=this.channels[s];n .callvideoplayermethod("autoplaypreviewstop")},this.pausemedia=function(e){var i=this._getuniqueidforcard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s (s.callvideoplayermethod("pause"),s.callvideoplayermethod("autoplaypreviewstop"))},this.pauseallmedia=function(t,e){var i=this.channels;object.keys(i).foreach(function(t){i[t].callvideoplayermethod("pause"),i[t].callvideoplayermethod("autoplaypreviewstop")})},this.updateposition=function(t,e){var i=e .tweetid .channels[e.tweetid];i .callvideoplayermethod("updateposition",e.positiondata)},this._attachlivebroadcastplayer=function(t){var e=this._getcard2type(t),i=this.card_player_component_map[e],s=this.card_player_surface_map[e],n=t.data("supports-landscape-presentation");o.a.attachto(t,{playercomponentcontext:i,playersurface:s,supportslandscapepresentation:n})},this._isliveeventcard=function(t){return t===this.broadcast_player_cards.live_event},this.after("initialize",function(){this.channels={},this.activesubscriptions={},this.before("teardown",this.destroyallcards),this.on(document,"uiautoplaymedia",this.autoplaymedia),this.on(document,"uistopautoplayingmedia",this.stopautoplayingmedia),this.on(document,"uipauseallmedia",this.pauseallmedia),this.on(document,"uipausemedia",this.pausemedia),this.on(document,"uiplayablemediapositionchange",this.updateposition),this.on(document,"uihasinjectednewtimeline uihasinjectedoldtimelineitems uihasinjectedrangetimelineitems",this.loadvideocards),this.on(document,"uiwillremovestreamitem",this.handlestreamitemremoval)})}e.a=n;var o=i("hkib"),a=i("e//n"),r=i("nnes"),c=i("q9/c"),l=i("tlys"),h=i("sxxh"),d=i("iamj"),u=i("cztd"),p=i.n(u),f=i("vuuo"),m=i("ttv8"),g=i("alsu"),v=i("z2y5"),b=i.n(v),w=object.assign||function(t){for(var e=1;e ":" "," ]/g,function(t){return s[t]})}}).call(e,i("4ksj"))},dfh9:function(t,e,i){"use strict";function s(){this.defaultattrs({prompttype:"above_timeline"}),this.insertprompt=function(t){this.$node.html(t.html)}}var n=i("k7b4"),o=i("qwum"),a=i("bn2o");e.a=n.a.mixin(s,o.a,a.a)},dzub:function(t,e,i){"use strict";function s(t){return 3===t.nodetype||4===t.nodetype}function n(t){return 1===t.nodetype}function o(t,e){return t.nodename.tolowercase()===e}function a(t,e){for(;t!==e;){if(!t)return!0;t=t.parentnode}}var r="microsoft internet explorer"===navigator.appname,c=/[\xa0\n\t]/g,l=/\u2003/,h=/\r\n/g,d=/(.*?)\n/g,u=/^ |( ]+>) | (?= )/g,p=/^ | $|( ) /g,f=number.max_value,m="emoji--forlinks",g=function(t,e){function i(t,e){function i(t){var u=a.length;if(s(t)){var p=t.parentnode;o(p,"em") (p=p.parentnode);var f=t.nodevalue,g=-1,v=void 0,b=0;if(p.hasattribute("data-pictograph-text")){var w=p.getattribute("data-pictograph-text");v=f.replace(l,function(t,e){return g=e,b=w.length-t.length,w})}else p.classlist .classlist.contains(m)?(g=0,b=-f.length,v=""):v=f.replace(c," ");var d=v.length;d (a+=v,r=!0),e(t,!0,0,u,u+d,g,b)}else if(n(t))if(e(t,!1,0,u,u),o(t,"br")||t===y !t.firstchild " "===t.innerhtml)t===h?d=!0:(a+="\n",r=!1);else if(o(t,"img")){var i=t.getattribute("alt")||"",x=i.length;x (a+=i,r=!0)}else{var k=t.currentstyle||window.getcomputedstyle(t,""),m="block"===k.display;!m||t!==s !==c||(r=!0);for(var p=t.firstchild,a=1;p;p=p.nextsibling,a++){if(i(p),d)return;u=a.length,e(t,!1,a,u,u)}d||t===h?d=!0:m (a+="\n",r=!1)}}for(var a="",r=void 0,h=void 0,d=void 0,u=t;u (u);u=u.lastchild)h=u;return i(t),a}function g(t,e){var s=null,n=e.length-1,a=e.map(function(){return{}}),r=void 0;return i(t,function(t,i,s,c,l,h,d){r||a.foreach(function(a,u){var p=e[u];c h (s=math.max(s-d,0))),a.offset=s,r=i ===n >=p)})}),a[0].node [n].node (s=document.createrange(),s.setstart(a[0].node,a[0].offset),s.setend(a[n].node,a[n].offset)),s}function v(){return document.body.contains(t)}function b(e){if(t.innerhtml=e,r)for(var i=t.firstchild;i;i=i.nextsibling)o(i,"p") ""===i.innerhtml (i.innertext="")}function w(t,e){return t.map(function(t){return math.min(t,e.length)})}var s=4,c=5,y=6,t=void 0,d=(e||navigator.useragent).tolowercase();return t=/edge/.test(d)?y:/chrome|webkit/.test(d)?1:/opera/.test(d)?3:/trident\/7/.test(d)?c:/msie/.test(d)?s:!/compatible/.test(d) /mozilla/.test(d)?2:0,{gethtml:function(){if(r){for(var e="",i=document.createelement("div"),n=t.firstchild;n;n=n.nextsibling)s(n)?(i.innertext=n.nodevalue,e+=i.innerhtml):e+=n.outerhtml.replace(h,"");return e}return t.innerhtml},sethtml:function(t){b(t)},gettext:function(){return i(t,function(){})},settextwithmarkup:function(t){b((t+"\n").replace(d,function(t,e){return 2===t||t===s?(e=e.replace(u,"$1 "),2===t?e+" ":" "+e+" "):(e=(e||" ").replace(p,"$1 "),3===t||t===c?" "+e+" ":" "+e+" ")}))},getselectionoffsets:function(){var e=getselection();if(!v()||!e||1!==e.rangecount)return null;var s=e.getrangeat(0);if(a(s.commonancestorcontainer,t))return null;var n=[{node:s.startcontainer,offset:s.startoffset}];s.collapsed||n.push({node:s.endcontainer,offset:s.endoffset});var o=n.map(function(){return f}),r=i(t,function(t,e,i,s,a,r,c){return n.foreach(function(n,l){if(o[l]===f ===n.node (e||i===n.offset)){var h=0;e (h=math.min(a-s,n.offset),c >r (h+=c)),o[l]=s+h}})});return w(o,r)},setselectionoffsets:function(e){if(e ()){var i=g(t,e);if(i){var s=window.getselection();s.removeallranges(),s.addrange(i)}}},emphasizetext:function(e){var s=[];e .length>1 () (i(t,function(t,i,n,o,a){if(i){var r=math.max(o,e[0]),c=math.min(a,e[1]);c>r .push([r,c])}}),s.foreach(function(e){var i=g(t,e);i .surroundcontents(document.createelement("em"))}))},deletetext:function(e){var i=g(t,e);i .deletecontents()}}};e.a=g},emog:function(t,e,i){"use strict";var s={cropratiothreshold:.05,calculatecrop:function(t,e,i){var s=e.width/e.height,n=i.width/i.height,o=(s-n)/s;return math.abs(o)>this.cropratiothreshold (i=this.getdefaultcroprect(t,s),n=i.width/i.height),{width:t.width/i.width*100+"%",height:t.height/i.height*100+"%",marginleft:i.x/i.width*100*-1+"%",margintop:i.y/i.width*100*-1+"%"}},getdefaultcroprect:function(t,e){var i=e.width/e.height,s=i 1,o=void 0;if(s){var a=t.height*i;o={width:a,height:t.height}}else if(n){var r=t.width/i;o={width:t.width,height:r}}else{var c=math.min(t.width,t.height);o={width:c,height:c}}var l=1;return o.width>t.width?l=t.width/o.width:o.height>t.height (l=t.height/o.height),o.width=o.width*l,o.height=o.height*l,o.x=.5*(t.width-o.width),o.y=.5*(t.height-o.height),["width","height","x","y"].foreach(function(t){return o[t]=math.round(o[t])}),o}};e.a=s},"eh/h":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({enabletooltip:!0,tooltipselector:".dmconversation-tooltip"}),this.disabletooltip=function(){this.$node.tooltip("disable")},this.hideanddisabletooltip=function(){this.$node.tooltip("hide").tooltip("disable")},this.showtooltip=function(){this.$node.attr("data-template",' '),this.$node.tooltip("show"),this.$node.one("mouseover",this.hideanddisabletooltip.bind(this)),t(this.attr.tooltipselector).one("click",this.hideanddisabletooltip.bind(this)),t(document).one("uidmconversationactivityhidden",this.hideanddisabletooltip.bind(this))},this.getdmmentionsstore=function(){return this.dmmentionsstore||(this.dmmentionsstore=new a.a("dm_mentions_"+o.a.user.id)),this.dmmentionsstore},this.shouldshowtooltip=function(){var t=this.getdmmentionsstore();return!t.getitem("seen_tooltip") (t.setitem("seen_tooltip","1"),!0)},this.after("initialize",function(){this.attr.enabletooltip .shouldshowtooltip()?this.showtooltip():this.disabletooltip()})}var n=i("dbjh"),o=i("iamj"),a=i("wodx"),r=object(n.default)(s);e.a=r}).call(e,i("4ksj"))},ey4t:function(t,e,i){"use strict";function s(){this.scribesavedsearchaction=function(t,e){this.scribe({component:e.sourceeventdata.scribecomponent,element:"saved_search",action:e.sourceeventdata.scribeaction})},this.after("initialize",function(){this.on("dataaddedsavedsearch dataremovedsavedsearch",this.scribesavedsearchaction)})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},f0az:function(t,e,i){"use strict";(function(t){function s(){this.defaults={addtweetbuttonselector:".retweetdialog-footer .add-tweet-button",retweetselector:".retweet-action",commentboxselector:".retweetdialog-commentbox",tweetboxselector:"form.tweet-form",iswithcommentclass:"is-withcomment",top:"20%"},this.openretweet=function(t,e){if(!this.tweetboxready){var i=r.a.getconfig();n.a.attachto(this.$tweetbox,{condensable:!0,condensecontainer:this.attr.commentboxselector,typeaheaddata:this.attr.typeaheaddata,noteardown:this.attr.noteardown,hashflagsenabled:!0,defaulttitle:this.select("modaltitleselector").text(),twittertextoptions:i,maxlength:i.maxweightedtweetlength}),this.tweetboxready=!0}this.trigger(this.$tweetbox,"uioverridetweetboxoptions",{drafttweetid:"retweet_"+e.tweetid,urltoretweet:["https://twitter.com",e.screenname,"status",e.id].join("/"),impressionid:e.impressionid,earned:e.disclosuretype?"earned"===e.disclosuretype:void 0}),this.quotedtweetid=e.id,this.quoteduserscreenname=e.screenname,this.sourceeventdata=e,this.displaytweet(e.id,{modal:"retweet",disablelinks:!0}),this.select("retweetselector").removeclass("disabled"),this.open()},this.retweet=function(){this.select("retweetselector").addclass("disabled"),this.$tweetbox.hasclass(this.attr.iswithcommentclass)||this.trigger("uididretweet",this.sourceeventdata)},this.retweetsuccess=function(t,e){void 0!==this.sourceeventdata (this.trigger("uididretweetsuccess",this.sourceeventdata),"uiretweetwithcommentsuccess"===t.type .trigger("uididretweetwithcommentsuccess",this.sourceeventdata)),this.close(),this.sourceeventdata=void 0},this.restorefocustotweet=function(e){t(e.target).is(this.$dialog) .activeel (e.preventdefault(),this.trigger(t(this.activeel).closest(".tweet"),"uishouldaddfocusstyle"),this.activeel.focus())},this.updatetitle=function(t,e){e .title .select("modaltitleselector").text(e.title)},this.enableretweetbuttonafterretweetfailed=function(t,e){object(o.b)(e)===o.a.alreadyretweeted?this.close():(this.select("retweetselector").removeclass("disabled"),this.trigger("uishowerror",{message:object(h.default)("failed to retweet. please try again later.")}))},this.handleaddtweetbuttonclick=function(t,e){t.preventdefault(),this.trigger(this.$tweetbox,"uiclickaddmoretweetonquoteretweet",{quotedtweetid:this.quotedtweetid,quoteduserscreenname:this.quoteduserscreenname})},this.quotedtweetid=null,this.quoteduserscreenname=null,this.around("close",function(t,e,i){this.quotedtweetid=null,this.quoteduserscreenname=null,t()}),this.after("initialize",function(t){this.$tweetbox=this.select("tweetboxselector"),this.on("click",{retweetselector:this.retweet}),this.on(document,"uiopenretweetdialog",this.openretweet),this.on(document,"uiretweetwithcommentsuccess datadidretweet",this.retweetsuccess),this.on(document,"uidialogrestorepreviousfocus",this.restorefocustotweet),this.on("uidialogupdatetitle",this.updatetitle),this.on(document,"datafailedtoretweet",this.enableretweetbuttonafterretweetfailed),this.on(this.select("addtweetbuttonselector"),"click",this.handleaddtweetbuttonclick)})}var n=i("e3dh"),o=i("2doy"),a=i("dbjh"),r=i("cxip"),c=i("uhc7"),l=i("wqlg"),h=i("0d4m");e.a=object(a.default)(s,c.a,l.a)}).call(e,i("4ksj"))},faud:function(t,e,i){"use strict";function s(){this.attributes({notice:".dmreportmessage",abuseconfirmation:".dmreportmessage-abuse",spamconfirmation:".dmreportmessage-spam",cancel:".dmreportmessage-cancel"}),this.showconfirmation=function(){this.select("notice").trigger("uishowdmnotice")},this.hideconfirmation=function(){this.select("notice").trigger("uidismissdmnotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportmessage=function(t){var e=this.state();this.trigger("uidmdialogreportdm",{id:e.messageid,conversation_id:e.conversationid,report_as:t});var i=object(o.default)("marked as spam"),s=object(o.default)("report sent. the message has been deleted from your conversation view."),n=object(o.default)("marked as abusive. the message has been deleted from your conversation view."),a=e.is_group?n:s,r="spam"===t?i:a;this.hideconfirmation(),this.trigger("uidmshowtoast",{message:r}),this.trigger("uidminboxwantsrefreshed")},this.launchreportingwebview=function(t,e){var i={reporteddirectmessageconversationid:e.conversationid,reporteddirectmessageid:e.messageid,userid:e.senderid,target:"dm-conversation"};this.trigger("uineedsreportdialog",i)},this.after("initialize",function(){this.on("uidmlaunchdmreportwebview",this.launchreportingwebview),this.on("uishowdmreportmessageconfirmation",this.state),this.on("uishowdmreportmessageconfirmation",this.showconfirmation),this.on("click",{abuseconfirmation:this.reportmessage.bind(this,"abuse"),spamconfirmation:this.reportmessage.bind(this,"spam"),cancel:this.hideconfirmation})})}var n=i("dbjh"),o=i("0d4m"),a=object(n.default)(s);e.a=a},fo1a:function(t,e,i){"use strict";function s(){this.defaultattrs({titleselector:"#gdpr-age-gate-title",bodyselector:"#gdpr-age-gate-body"}),this.showdialog=function(t,e){this.setcopy(e),this.open(),this.scribeimpression()},this.setcopy=function(t){t.errorcode===o.a.usermustbealcoholagescreened?(this.$title.html(d),this.$body.html(f)):t.errorcode===o.a.cannotfollowfromcountry?(this.$title.html(d),this.$body.html(p)):t.errorcode===o.a.birthdaterequired (this.$title.html(h),this.$body.html(u))},this.closedialog=function(){this.$title.html(""),this.$body.html(""),this.close()},this.scribeimpression=function(){this.scribe({component:"age_gate_dialog",action:"impression"})},this.after("initialize",function(){this.$title=this.$node.find(this.attr.titleselector),this.$body=this.$node.find(this.attr.bodyselector),this.on(document,"uineedsagegatedialog",this.showdialog),this.on(document,"uineedsgdpragegatedialog",this.showdialog),this.on("click",this.closedialog)})}var n=i("0d4m"),o=i("2doy"),a=i("dbjh"),r=i("uhc7"),c=i("3odc"),l=object(a.default)(s,r.a,c.a),h=object(n.default)("please update your profile first"),d=object(n.default)("you cant follow this account"),u=object(n.default)("to follow this account, youll need to include your birth date on your profile, ensuring you meet minimum age requirements."),p=object(n.default)("this account cant be followed from your country."),f=object(n.default)("youre not old enough to follow this account.");e.a=l},fdtv:function(t,e,i){"use strict";function s(){this.defaultattrs({lifelinealertbtnselector:".lifeline-alert-status-btn.is-tweet"}),this.sendlifelinealerttweet=function(){this.sendtweet(),this.trigger("uilifelinealertstweet")},this.cancellifelinealerttweet=function(){this.trigger("uilifelinealertscancel")},this.around("confirmandsendtweet",function(t){this.lifelinealertmode?(this.trigger("uilifelinealertsimpression"),this.trigger("uiopenconfirmdialog",{titletext:object(n.default)("send twitter alert"),bodytext:object(n.default)("are you sure you want to send a twitter alert to your followers?"),canceltext:object(n.default)("cancel"),submittext:object(n.default)("send"),action:"sendlifelinealert"})):t()}),this.setlifelinealertmode=function(t){this.lifelinealertmode!==t (t?(this.select("lifelinealertbtnselector").addclass("enabled"),this.trigger("uilifelinealertsselect")):this.select("lifelinealertbtnselector").removeclass("enabled"),this.focus(),this.lifelinealertmode=t,this.detectupdatedtext(!0))},this.selectlifelinealertaction=function(){this.setlifelinealertmode(!this.lifelinealertmode)},this.around("addhiddentext",function(t,e){return e=t(e),this.lifelinealertmode (e+=this.lifelinealerttext),e}),this.before("clear",function(){this.setlifelinealertmode(!1)}),this.after("initialize",function(){this.lifelinealertmode=!1,this.lifelinealerttext=" #alert",this.on(this.attr.lifelinealertbtnselector,"click",this.selectlifelinealertaction),this.on("uisendlifelinealertconfirm",this.sendlifelinealerttweet),this.on("uisendlifelinealertcancel",this.cancellifelinealerttweet)})}var n=i("0d4m");e.a=s},fjsp:function(t,e,i){"use strict";function s(t,e,i){return e in t?object.defineproperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t){if(array.isarray(t)){for(var e=0,i=array(t.length);e 0||this.hasmedia||this.haspoll||this.hasalert?this.trigger("uiopenconfirmdialog",t.d):this.delete()},this.delete=function(){var t;this.trigger("uitweetboxdeleting",{index:this.getindex()}),(t=this.$node.delay(t.i.delay)).animate.apply(t,n(this.tweetboxtransitionoptions).concat([this.afterdeleted.bind(this)]))},this.afterdeleted=function(){this.trigger("uitweetboxdeleted"),this.reset()},this.initgeopicker=function(t){var e=this.select("selectorgeopicker");e.hasclass(this.attr.classactive)||r.a.attachto(this.$node,{eventdata:{scribecontext:{element:"geo_picker"}},restorefocusonclose:!0,skipfocusmanager:!0}),t?e.trigger("uigeopickerchange",{placeid:t}):e.trigger("uipreparegeopicker")},this.gettweetboxid=function(){return this.$node.attr("id")},this.reset=function(){this.trigger("uiclearundostate"),this.setvisibletext(""),this.$node.removeclass(this.attr.hasquotedtweetclass),this.select("selectorquotedtweetcontent").empty()},this.composerfocused=function(){var t=this.getindex();this.trigger("uitweetboxfocused",{index:t})},this.mediainfo=function(){return{hasphoto:this.hasmedia !this.isgif !this.isvideo,hasgif:this.isgif,hasvideo:this.isvideo,gifinfo:this.foundmediainfo}},this.updatetextdata=function(t,e){var i=this.getindex();this.trigger("uitweetboxchanged",k({index:i,text:this.addhiddentext(this.getvisibletext())},this.mediainfo(),{haspoll:this.haspoll,hasalert:this.hasalert})),this.maybetriggertooltip(),this.select("selectorshadowtext").val(e .text||"")},this.lostfocus=function(t,e){var i=e .transition;this.hidetoolbar(i)},this.gotfocus=function(t,e){var i=e .transition;this.showtoolbar(i)},this.hidetoolbar=function(t){if(t){var e;(e=this.$toolbar).animate.apply(e,n(this.toolbartransitionoptions))}else this.$toolbar.hide()},this.showtoolbar=function(t){if(t){var e;(e=this.$toolbar).animate.apply(e,n(this.toolbartransitionoptions))}else this.$toolbar.show()},this.changecursor=function(t,e){this.setcursorposition(e.cursorposition)},this.updategeolocationdata=function(t,e){var i=void 0;"located"===e.state?i=e.place_id:"enabledturnedoff"===e.state (i=""),this.trigger("uitweetboxchanged",k({index:this.getindex(),placeid:i},this.mediainfo()))},this.updatetaggedusersdata=function(){this.trigger("uitweetboxchanged",k({index:this.getindex(),taggedusers:this.taggedusers},this.mediainfo()))},this.restorepreviouslyattachedmedia=function(t,e){var i=this;"object"===(void 0===e?"undefined":x(e)) "object"===x(e.fileids) .fileids.foreach(function(t){i.trigger("uifileselected",{fileid:t});var e=l.a.get(t);if("object"===(void 0===e?"undefined":x(e))){var s=e.advanced;e.isvideo .renderadvancedvideoinfo(s)}})},this.refreshadditionalmediainfo=function(){var t={};this.hasmedia (c.a)(this.gettweetboxid()).some(function(t){return t.alttext}) (t.has_alt_text=!0),this.isvideo .a.getdecidervalue("web_upload_video_advanced") (c.a)(this.gettweetboxid()).foreach(function(e){"object"===x(e.advanced) .mediaid (t[e.mediaid]={title:e.advanced.title,description:e.advanced.description,embeddable:e.advanced.embeddable},e.advanced.ctatype (t[e.mediaid].call_to_actions=s({},e.advanced.ctatype,{url:e.advanced.ctaurl})))}),object.keys(t).length .trigger("uitweetboxchanged",k({index:this.getindex(),additionalmediainfo:t},this.mediainfo()))},this.after("initialize",function(){this.$toolbar=this.select("selectortoolbar"),this.inittextnode(),this.reset(),this.on("click",{selectordeletetweetbutton:this.deleteclicked}),this.on("focusin",{selectorricheditor:this.ignoreduringfakefocus(this.composerfocused)}),this.on("uitextchanged uipollactivated",this.updatetextdata),this.on("datageostate",this.updategeolocationdata),this.on("uitaggedusersupdated",this.updatetaggedusersdata),this.on("uitweetboxactivate",this.activate),this.on("uitweetboxdeactivate",this.deactivate),this.on("uitweetboxlostfocus",this.lostfocus),this.on("uitweetboxgotfocus",this.gotfocus),this.on("uitweetboxchangecursor",this.changecursor),this.on("uiremovetweetfromthreadconfirm",this.delete),this.on(document,"dataneedrefreshadditionalmediainfo",this.refreshadditionalmediainfo),this.on("uirestorepreviouslyattachedmedia",this.restorepreviouslyattachedmedia)})}var a=i("dbjh"),r=i("8n88"),c=i("wkyg"),l=i("h6fk"),h=i("yzit"),d=i("hpdd"),u=i("+hbl"),p=i("lcya"),f=i("pul/"),m=i("84/5"),g=i("4oxf"),v=i("zg5a"),b=i("taxt"),w=i("lvmq"),s=i("cgr6"),c=i("mmtz"),y=i("ws2j"),t=i("jfpi"),d=i("nkyg"),i=i("iamj"),x="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t},k=object.assign||function(t){for(var e=1;e \n'),s.b(s.rp(" \n"),s.fl()},partials:{" =this.$tweetboxes.length;t?this.$addtweetbutton.attr(this.attr.attrtooltiptext,object(n.default)("you've reached the limit")):this.$addtweetbutton.attr(this.attr.attrtooltiptext,object(n.default)("add another tweet"));var e=t||a.a.hasempty;this.$addtweetbutton.toggleclass(this.attr.classdisabled,e).prop("disabled",a.a.hasempty)},this._validatecontainerclasses=function(){var t=a.a.length>1;this.$tweetstormcontainer.toggleclass(this.attr.classisthread,t),this.$tweetstormcontainer.toggleclass(this.attr.classisreply,!!this.replystatusid),this._updatetitle(t,!!this.replystatusid)},this._updatetitle=function(t,e){e?this.$tweetstormtitle.text(t?object(n.default)("continue your thread"):object(n.default)("add another tweet")):this.$tweetstormtitle.text(t?object(n.default)("compose new thread"):object(n.default)("compose new tweet"))},this._threadedavatar=function(){for(var t=0;t =a.a.length-1 .$tweetboxes.eq(s).removeclass(this.attr.classthreadeddown),this._changefocus(this.$tweetboxes.eq(s),c.g.show_only,!0),a.a.deletetweet(i),this._validatecontainerclasses(),this.trigger("uitweetstormdbupdate")},this.ontweetboxdeleted=function(e,i){var s=t(e.target),n=this.$tweetboxes.eq(a.a.length);s.insertafter(n),this._orderindex(),this._validations()},this.ontweetboxfocused=function(t,e){var i=this.$tweetboxes.eq(e.index);i.is(this.$focusedtweetbox)||this._changefocus(i,c.g.hide_and_show,!0)},this.addtweet=function(){if(!this.$addtweetbutton.hasclass(this.attr.classdisabled)){var t=number(this.$focusedtweetbox.attr(this.attr.attrindex)),e=this.$tweetboxes.eq(a.a.length),i=a.a.gettweet(t).tweetdata.place_id,n=t===a.a.length-1;if(a.a.addtweet(t+1).tweetbox=e.attr("id"),e.insertafter(this.$focusedtweetbox),this._orderindex(),this._validations(),this._activatetweetbox(e,!0,{place_id:i}),this._changefocus(e,c.g.hide_only,!0),n){var o;(o=this.$tweetstormbody).animate.apply(o,[{scrolltop:this.$tweetstormbody[0].scrollheight}].concat(s(c.i.tweetbox)))}}},this.permalinkvisible=function(){return t(this.attr.selectorpermalinkoverlay).filter(":visible").length>0},this.sendtweetstorm=function(){this.trigger(document,"uitweetstormsend",{reloadpageonsuccess:this.permalinkvisible()})},this.closedropdowns=function(){this.$tweetboxes.trigger("uidropdowncloseonscroll")},this.sendconfirmedtweetstorm=function(){a.a.isvalid (a.a.hasalert?this.trigger("uiopenconfirmdialog",c.a):this.sendtweetstorm())},this.restorefromuploadfailure=function(e,i){var s=this,n=i||{},o=n.recoverfromindex,r=void 0===o?0:o,l=n.initiallength,h=void 0===l?a.a.length:l;this.$tweetboxes.slice(0,r).each(function(e,i){t(i).trigger("uitweetboxdeactivate"),t(i).insertafter(s.$tweetboxes.eq(h-1))}),this._orderindex(),this._changefocus(this.$tweetboxes.eq(0),c.g.hide_and_show,!0),this.replystatusid=i.previousstatusidinthread},this.restorefromdraft=function(t){var e=arguments.length>1 0!==arguments[1]?arguments[1]:{};this._orderindex(),this.reset(),e .isarray(e.tweets) .tweets.length>0?a.a.restore(e.tweets):a.a.reset(),this._renderdata()},this.reset=function(){a.a.reset(),this.select("selectortweetboxes").trigger("uitweetboxdeactivate"),this.$focusedtweetbox=void 0,this.replystatusid=void 0},this.after("initialize",function(t,e){this.$tweetstormcontainer=this.select("selectortweetstormcontainer"),this.$tweetstormbody=this.select("selectortweetstormbody"),this.$tweetstormtitle=this.select("selectortweetstormtitle"),this.$addtweetbutton=this.select("selectoraddtweetbutton"),this.$sendtweetstormbutton=this.select("selectorsendtweetstormbutton"),this.reset(),this.on("uitweetstorminit",this.init),this.on(document,"uitweetstormabandon datatweetstormuploadsuccess",this.reset),this.on("uitweetstormrestoreonerror",this.restorefromuploadfailure),this.on("uitweetstormrestoredraft",this.restorefromdraft),this.on(this.$addtweetbutton,"click",this.addtweet),this.on(this.$tweetstormbody,"scroll",this.closedropdowns),this.on(this.$sendtweetstormbutton,"click",this.sendconfirmedtweetstorm),this.on("uishortcutcmdenter",this.sendconfirmedtweetstorm),this.on("uisendlifelinealertconfirm",this.sendtweetstorm),this.on("uitweetboxchanged",this.ontweetboxchanged),this.on("uitweetboxdeleting",this.ontweetboxdeleting),this.on("uitweetboxdeleted",this.ontweetboxdeleted),this.on("uitweetboxfocused",this.ontweetboxfocused)})})}).call(e,i("4ksj"))},fygb:function(t,e,i){"use strict";(function(t){function i(e){e=e||{};var n={urls:{events:e.urls .urls.events||s.urls.events,subscribe:e.urls .urls.subscribe||s.urls.subscribe,unsubscribe:e.urls .urls.unsubscribe||s.urls.unsubscribe},retry:{enabled:void 0===(e.retry .retry.enabled)?s.retry.enabled:e.retry.enabled,backofffactor:void 0===(e.retry .retry.backofffactor)?s.retry.backofffactor:e.retry.backofffactor,maxdelay:void 0===(e.retry .retry.maxdelay)?s.retry.maxdelay:e.retry.maxdelay},resubpreemptduration:e.resubpreemptduration||s.resubpreemptduration};this.onmessagecallback=n.message,this.onerrorcallback=n.error;var o=void 0,a=[],r={},c=void 0,l=void 0,h=void 0,d=!1;this.updatesessiondata=function(t){r.sessionid=t.session_id,r.ttl=t.subscription_ttl_millis},this.neweventsource=function(t,e){return new eventsource(t,e)},this.hassubscribedtopics=function(){return!!a.length},this.openconnection=function(){if(this.hassubscribedtopics()){var t="?topic="+a.map(encodeuricomponent).join(",");this.close(),o=this.neweventsource(n.urls.events+t,{withcredentials:!0}),o.onmessage=this.messagehandler.bind(this),o.onerror=this.errorhandler.bind(this)}},this.messagehandler=function(t){var e=this.tryparsejson(t.data);if(e)switch(e.topic){case"/system/config":this.updatesessiondata(e.payload.config),d .refreshsubscriptions(),this.resetretrycount();break;default:this.onmessagecallback .onmessagecallback(e)}},this.errorhandler=function(t){this.close(),this.onerrorcallback .onerrorcallback(t),this.retry()},this.tryparsejson=function(t){try{return json.parse(t)}catch(t){return}},this.subunsuberrorhandler=function(t){if(400===t.status){var e=this.tryparsejson(t.responsetext),s=e .errors .errors[0];s .code===i.api_error_codes.session_not_found .retry()}},this.resetretrycount=function(){c=void 0},this.retry=function(){if(n.retry.enabled){c=void 0===c?0:c+1;var t=math.random()*(math.pow(2,c)-1)*n.retry.backofffactor,e=math.min(t,n.retry.maxdelay);l=settimeout(this.openconnection.bind(this),e)}},this.refreshsubscriptions=function(){var e=this;return this.connectionstatus()===i.connecting?void(d=!0):r.sessionid .connectionstatus()!==i.closed?void(a.length (d=!1,t.ajax({method:"post",url:n.urls.subscribe,data:{session_id:r.sessionid,topic:a.join(",")},headers:{"livepipeline-session":r.sessionid},xhrfields:{withcredentials:!0},success:function(){e.resetretrycount(),cleartimeout(h),h=settimeout(e.refreshsubscriptions.bind(e),math.max(0,r.ttl-n.resubpreemptduration))},error:this.subunsuberrorhandler.bind(this)}))):void this.openconnection()},this.subscribe=function(t,e){var s=-1===a.indexof(t),n=!e (s||this.connectionstatus()===i.closed);s .push(t),n .refreshsubscriptions()},this.unsubscribe=function(t){-1!==a.indexof(t) (a=a.filter(function(e){return t!==e}),r.sessionid (this.makeunsubrequest(t),a.length||this.close()))},this.makeunsubrequest=function(e){t.ajax({method:"post",url:n.urls.unsubscribe,data:{session_id:r.sessionid,topic:e},xhrfields:{withcredentials:!0}})},this.onmessage=function(t){this.onmessagecallback=t},this.onerror=function(t){this.onerrorcallback=t},this.connectionstatus=function(){return o?o.readystate:i.closed},this.reconnect=this.openconnection.bind(this),this.close=function(){r.sessionid .foreach(this.makeunsubrequest.bind(this)),o .close(),r={},o=void 0,cleartimeout(l),cleartimeout(h)}}var s={urls:{events:"https://api.twitter.com/live_pipeline/events",subscribe:"/i/live_pipeline/subscribe",unsubscribe:"/i/live_pipeline/unsubscribe"},retry:{enabled:!0,backofffactor:500,maxdelay:12e4},resubpreemptduration:25e3};i.issupported=function(){return"eventsource"in window},i.open=i.issupported() .open,i.closed=i.issupported() .closed,i.connecting=i.issupported() .connecting,i.api_error_codes={session_not_found:392};var n=function(t){var e=new i(t);this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.connectionstatus=e.connectionstatus.bind(e),this.reconnect=e.reconnect.bind(e),this.close=e.close.bind(e),this.onmessage=e.onmessage.bind(e),this.onerror=e.onerror.bind(e),this.__privateinstance=e};n.issupported=i.issupported,n.open=i.open,n.closed=i.closed,n.connecting=i.connecting,n.api_error_codes=i.api_error_codes,n.__privateobject=i,e.a=n}).call(e,i("4ksj"))},"g/am":function(t,e,i){"use strict";function s(){n.default.mixin(this,[a.a]),this.triggergotimagedata=function(t){var e=t.map(function(t){return t.fileid});this.trigger("uigotimagedata",{fileids:e})},this.captureimagedata=function(t,e){for(var i={mediacategoryprefix:this.attr.mediacategoryprefix},s=[],n=0;n 0}catch(t){e=!1}this.trigger("datagetfollowsearchstatussuccess",{isfollowing:e})};this.getfollowedqueries(e,i)},this.getfollowedsearcheslist=function(t,e){var i=function(t){try{var e=t.timeline.instructions[0].addentries.entries.reverse();e.length>0 .trigger("datagetfollowsearchlistsuccess",{entries:e})}catch(t){}};this.getfollowedqueries(e,i)},this.getfollowedqueries=function(t,e){this.get({url:"https://api.twitter.com/2/follow_search/show.json",data:t,useoauthsessionauth:!0,success:e.bind(this),error:"datafollowsearchgetlistfailure"})},this.followsearch=function(t,e){function i(t){try{var e=t.timeline.instructions[0].addentries.entries;e.length>0 (this.trigger("dataupdatefollowsearchbuttonstate",{isfollowing:!0}),this.trigger("dataaddfollowsearchtotypeaheadlist",{entries:e}),this.trigger("dataaddfollowsearchsuccess",t))}catch(t){}}function s(){this.trigger("dataupdatefollowsearchbuttonstate",{isfollowing:!1})}this.post({url:"https://api.twitter.com/2/follow_search/create.json",data:{query:e.query,t:"home_timeline"},eventdata:{scribecomponent:e.scribecomponent,scribeaction:"add"},useoauthsessionauth:!0,success:i.bind(this),error:s.bind(this)})},this.unfollowsearch=function(t,e){function i(t){this.trigger("dataupdatefollowsearchbuttonstate",{isfollowing:!1}),this.trigger("dataremovefollowsearchfromtypeaheadlist",{query:e.query}),this.trigger("dataremovefollowsearchsuccess",t)}function s(){this.trigger("dataupdatefollowsearchbuttonstate",{isfollowing:!0})}this.post({url:"https://api.twitter.com/2/follow_search/destroy.json",acceptemptystringasjsonresponse:!0,data:e,eventdata:{scribecomponent:e.scribecomponent,scribeaction:"remove"},useoauthsessionauth:!0,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("datagetfollowsearchlist",this.getfollowedsearcheslist),this.on("uigetfollowsearchstatus",this.getfollowsearchfollowstatus),this.on("uiaddfollowsearch",this.followsearch),this.on("uiremovefollowsearch",this.unfollowsearch)})}var n=i("dbjh"),o=i("vtwx");e.a=object(n.default)(s,o.a)},gew7:function(t,e,i){"use strict";function s(){this.defaultattrs({limit:10,remotedebounceinterval:300,remotethrottleinterval:300,outstandingremoterequestcount:0,queuedrequestdata:!1,outstandingremoterequestmax:6,usethrottle:!1,tweetcontextenabled:!1,topicswithfiltersenabled:!1}),this.triggersuggestionsevent=function(t,e,i){this.trigger("datatypeaheadsuggestionsresults",{suggestions:i,querydata:e,id:t})},this.hasanysuggestions=function(t,e){return e.some(function(e){return t[e] [e].length})},this.needsremoterequest=function(t,e){return e.some(function(e){return this.datasources[e] .datasources[e].requiresremotesuggestions .datasources[e].requiresremotesuggestions(t)},this)},this.getlocalsuggestions=function(t,e,i){function s(){++o===e.length (n)}var n={},o=0;e.foreach(function(e){this.datasources[e]?this.datasources[e].getlocalsuggestions(t,function(t){t.length (t.foreach(function(t){return t.origin="prefetched"}),n[e]=t),s()}):s()},this)},this.processremotesuggestions=function(t){this.adjustrequestcount(-1);var e=t.sourceeventdata,i=e.suggestions||{};e.datasources.foreach(function(s){var n=s.processremotesuggestions(e,t,i);if(n[s.attr.id] [s.attr.id].length){for(var o in n)n[o].foreach(function(t){return t.origin=t.origin||"remote"});e.suggestions[s.attr.id]=n[s.attr.id]}},this),this.processsuggestionsbydataset(i),this.triggersuggestionsevent(e.id,e.querydata,i),this.makequeuedremoterequestifpossible()},this.getremotesuggestions=function(t,e,i,s){e .needsremoterequest(e,s) (this.request[t]||(this.attr.usethrottle?this.request[t]=a.default.throttle(this.splitremoterequests.bind(this),this.attr.remotethrottleinterval):this.request[t]=a.default.debounce(this.splitremoterequests.bind(this),this.attr.remotedebounceinterval)),0===e.query.indexof("@") "compose"===e.typeaheadsrc (e.query=e.query.substring(1),e.atsignremoved=!0),this.request[t](t,e,i,s))},this.makequeuedremoterequestifpossible=function(){if(this.attr.outstandingremoterequestcount===this.attr.outstandingremoterequestmax-1 .attr.queuedrequestdata){var t=this.attr.queuedrequestdata;this.getremotesuggestions(t.id,t.querydata,t.suggestions,t.datasources),this.attr.queuedrequestdata=!1}},this.adjustrequestcount=function(t){this.attr.outstandingremoterequestcount+=t},this.canmakeremoterequest=function(t){return this.attr.outstandingremoterequestcount 1e3) (e.tweetcontext=void 0),this.adjustrequestcount(1),this.get({url:s[0].attr.remotepath,data:{q:e.query,context_text:e.tweetcontext,count:this.attr.limit,result_type:s.map(function(t){return t.attr.remotetype}).join(","),filters:this.attr.topicswithfiltersenabled,src:e.typeaheadsrc},eventdata:n,success:this.processremotesuggestions.bind(this),error:this.processremoterequesterror.bind(this)}))},this.truncatetopicswithrecentsearches=function(t){if(t.topics .recentsearches){var e=t.recentsearches.length,i=4-e;t.topics=t.topics.slice(0,i)}},this.dedupsuggestions=function(t,e,i){function s(t){var e=t.topic||t.name;return!n[e.tolowercase()]}if(i[t] (){return e.some(function(t){return t in i})}()){var n={};i[t].foreach(function(t){var e=t.name||t.topic;n[e.tolowercase()]=!0}),e.foreach(function(t){t in i (i[t]=i[t].filter(s))})}},this.processsuggestionsbydataset=function(t){this.dedupsuggestions("recentsearches",["topics"],t),this.truncatetopicswithrecentsearches(t)},this.getsuggestions=function(t,e){var i=this;if(void 0===e)throw"no parameters specified";if(!e.datasources)throw"no datasources specified";if(void 0===e.querydata)throw"no query data specified";if(void 0===e.querydata.query)throw"no query specified";if(!e.id)throw"no id specified";this.getlocalsuggestions(e.querydata,e.datasources,function(t){i.processsuggestionsbydataset(t);var s="@"!==e.querydata.query .needsremoterequest(e.querydata,e.datasources);!i.hasanysuggestions(t,e.datasources) ||i.triggersuggestionsevent(e.id,e.querydata,t),s .getremotesuggestions(e.id,e.querydata,t,e.datasources)})},this.getglobaldatasources=function(){return x},this.setglobaldatasources=function(t){x=t},this.addsynchronousdatasource=function(t,e,i){var s=i[e]||{};this.isdatasourceenabled(e) (x.hasownproperty(e)?this.datasources[e]=x[e]:x[e]=this.datasources[e]=new t(i({},s,{id:e})),this.setupeventlisteners(e))},this.addasynchronousdatasource=function(t){var e=this,i=t.datasource;t=t||{};var s=t.dsname,n=this.componentoptions[s]||{},o=new i(i({},n,{id:s}),t);return o.initialize().then(function(t){return x[s]=e.datasources[s]=o,t})},this.initializelocaldata=function(t){this.adddatasourcesnotusingindexeddb();var e=this.shoulduseindexeddb()?this.addasynchronousdatasources():this.addsynchronousdatasources(),i=this.adddmtypeaheaddatasources();promise.all([e,i]).then(t,t)},this.isdatasourceenabled=function(t){return!!(this.componentoptions[t]||{}).enabled},this.isbrowsersafari=function(){return object(n.a)().safari},this.shoulduseindexeddb=function(){return y.a.issupported() .attr.useindexeddb !this.isbrowsersafari()},this.addasync=function(t){var e=arguments,i=t.dsname,s=t.dbname,n=t.datasource,o=this;return object(d.a)({title:"typeahead ("+i+")",enabled:window.debug .debug.enabled},new promise(function(t,a){o.isdatasourceenabled(i)?o.addasynchronousdatasource({dbname:s,dsname:i,datasource:n,indexeddbwrapper:t.a}).then(function(e){o.setupeventlisteners(i),o.adddbhandletoglobals(s,e),t([i,s,e])}).catch(function(){o.indexeddbinitializationfailed=!0,a(e)}):t()}))},this.adddbhandletoglobals=function(t,e){e (window.globalindexeddbs[t]=e)},this.adddmtypeaheaddatasources=function(){return this.addasync({dsname:"dmconversations",dbname:"dm_typeahead",datasource:u.a})},this.addasynchronousdatasources=function(){var t=this;return this.pendingasyncdatasources=this.addasync({dsname:"accounts",dbname:"accounts",datasource:d.a}).then(function(){return t.addasync({dsname:"dmaccounts",dbname:"accounts",datasource:d.a})}).then(function(){return t.addasync({dsname:"mediatagaccounts",dbname:"accounts",datasource:d.a})})},this.adddatasourcesnotusingindexeddb=function(){this.addsynchronousdatasource(p.a,"savedsearches",this.componentoptions),this.addsynchronousdatasource(f.a,"followedsearches",this.componentoptions),this.addsynchronousdatasource(v.a,"topics",this.componentoptions),this.addsynchronousdatasource(v.a,"hashtags",a.default.merge(this.componentoptions,{hashtags:{remotetype:"hashtags"}},!0)),this.addsynchronousdatasource(b.a,"trendlocations",this.componentoptions),this.addsynchronousdatasource(s.a,"selectedusers",this.componentoptions),this.addsynchronousdatasource(c.a,"prefillusers",this.componentoptions),this.addsynchronousdatasource(m.a,"recentsearches",this.componentoptions),this.addsynchronousdatasource(w.a,"concierge",this.componentoptions)},this.addsynchronousdatasources=function(){return this.addsynchronousdatasource(h.a,"accounts",this.componentoptions),this.addsynchronousdatasource(h.a,"dmaccounts",this.componentoptions),this.addsynchronousdatasource(h.a,"mediatagaccounts",this.componentoptions),promise.resolve()},this.possiblyscribeindexeddb=function(){if(this.shoulduseindexeddb()){var t=this.indexeddbinitializationfailed?"failure":"success";this.scribe({component:"indexeddb",action:t})}},this.after("initialize",function(t,e){var i=this;this.datasources={},this.request={},this.componentoptions=e,this.initializelocaldata(function(){i.on("uineedstypeaheadsuggestions",i.getsuggestions),i.possiblyscribeindexeddb()})})}var n=i("rw6j"),o=i("dbjh"),a=i("yzit"),r=i("vtwx"),c=i("hzyy"),l=i("3odc"),h=i("1qzw"),d=i("g7mz"),u=i("1ihi"),p=i("bz2s"),f=i("d6di"),m=i("in+x"),g=i("tceo"),v=i("z8pp"),b=i("jhol"),w=i("pafg"),s=i("oyls"),c=i("az36"),y=i("b6cp"),t=i("3i53"),d=i("b55n"),i=object.assign||function(t){for(var e=1;e \n \n'),s.s(s.f("options",t,e,1),t,e,0,214,745,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n \n '),i.b(i.v(i.f("label",t,e,0))),i.b(" \n"),i.s(i.f("description",t,e,1),t,e,0,612,693,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' '),i.b(i.v(i.d(".",t,e,0))),i.b(" \n")}),t.pop()),i.b(" \n \n")}),t.pop()),s.b(" \n \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},gyvj:function(t,e,i){"use strict";function s(){this.defaultattrs({prompttype:"dashboard_profile"}),this.insertprompt=function(t){this.$node.html(t.html)}}var n=i("k7b4"),o=i("bn2o");e.a=n.a.mixin(s,o.a)},"h3u/":function(t,e,i){var s;void 0!==(s=function(){var t=1,e=3,i=4,s=1,n={file_too_large:2,internal_error:131,invalid_media:1,rate_limit:88,timeout:67,unsupported_media:3,zero_file_length:4},o={0:n.internal_error,1:n.invalid_media,2:n.file_too_large,3:n.unsupported_media,4:n.timeout};return function(a,r){function c(){d(),p=0,k=null,m={},u=j,b=0,r=0,v=!1,l (l.abort(),l=null)}function l(){if(o){$="uploading";var t=" ="+o+" ="+encodeuricomponent(e);m.extrainitparams (t+=m.extrainitparams),x("post","init",t,null,h,c,s)}else c({error:{code:n.zero_file_length}})}function h(e){p===t (k=e.media_id_string,u(e.expires_after_secs),p())}function d(){n (cleartimeout(n),n=null)}function u(t){if(t){d();var e=math.min(2147483647,1e3*t);n=settimeout(function(){c({error:{code:n.timeout}}),i("none","timeout"),c()},e)}}function p(){if(r===o)m();else{f=math.min(u,o-r);var t=a.webkitslice||a.mozslice||a.slice,e=t.call(a,r,r+f),i=new formdata;i.append("media",e),x("post","append"," ="+k+" ="+b,i,f,c,s)}}function f(){p===t (b++,r+=f,t(y()),p())}function m(){if(m.pausebeforefinalize)p=2;else{v=!0;var t=" ="+k;m.trimranges (t+=" ="+encodeuricomponent(m.trimranges)),/^video\//.test(e) (t+=" =true"),t+=m.extrafinalizeparams||"",x("post","finalize",t,null,b,c,s)}}function g(){$="uploading";var t=" ="+encodeuricomponent(m.sourceurl);m.mediatype (t+=" ="+encodeuricomponent(m.mediatype)),m.mediacategory (t+=" ="+encodeuricomponent(m.mediacategory)),t+=m.extrainitparams||"",t+=m.extrafinalizeparams||"",x("post","init",t,null,v,c,s)}function v(t){k=t.media_id_string,w()}function b(t){u(t.expires_after_secs);var e=t.processing_info,i=0;if(!e)return void s(t);switch(e.state){case"pending":$="waiting";break;case"in_progress":$="processing",i=e.progress_percent;break;case"succeeded":return void s(t);case"failed":var s=e.error||{};return s.code=o[s.code]||n.internal_error,void c({error:s});default:return void c(t)}t(i,k),settimeout(w,1e3*e.check_after_secs)}function w(){p===t ("get","status"," ="+k,null,b,c,s)}function s(i){p===t (p=e,d())}function c(e){p===t (a=e .error .error.code?e.error:{code:n.internal_error},p=i,d())}function y(){return o?100*r/o:0}function t(t,e){p!==i .progress .progress(t,$,e)}function d(){p===e .success .success(k),p===i .error .error(a)}function i(t,e){if(m.stats){var i={mediatype:e,command:t,status:e,duration:new date-q,totalbytesize:o,totalduration:new date-h};"append"===t (i.appendbytesize=f),m.stats(i)}}function x(t,e,i,s,n,o,a){function r(){if(l.status>=200 .status =e;i--)this.yearselect.options.add(new option(i,i));this.yearselect.options.add(new option(object(a.default)("before {{year}}",{year:i}),i))},this.month={1:object(a.default)("january"),2:object(a.default)("february"),3:object(a.default)("march"),4:object(a.default)("april"),5:object(a.default)("may"),6:object(a.default)("june"),7:object(a.default)("july"),8:object(a.default)("august"),9:object(a.default)("september"),10:object(a.default)("october"),11:object(a.default)("november"),12:object(a.default)("december")},this.fillmonthselect=function(){for(var t=1;t =0 .month>=0 .month =0 .day 12)){this.resetselect(this.dayselect,"day");var e=this.getnumberofdaysgivenmonthyear(t.month,t.year);this.filldayselect(1,e),t.day>0 .day '),i.b(' verified account '),i.b(" ")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},hdvg:function(t,e,i){"use strict";function s(){this.updatemomentmapandtriggerevent=function(t){var e=this;return function(i){e.momentmap=c({},e.momentmap,i.moment_map||{}),e.trigger(document,t,i)}},this.getdropdownusermoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updatemomentmapandtriggerevent("datamomentsgetdropdownusermomentssuccess"),error:"datamomentsgetdropdownusermomentsfailure"})},this.getdialogusermoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updatemomentmapandtriggerevent("datamomentsgetdialogusermomentssuccess"),error:"datamomentsgetdialogusermomentsfailure"})},this.addtweetsuccess=function(t,e){var i=e.moment_id .momentmap[e.moment_id],s=void 0;i (s=i.is_empty_title?object(r.default)('tweet added to " {{url}} untitled moment "',{url:e.moment_maker_url}):object(r.default)('tweet added to " {{url}} {{moment_name}} "',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uishowmessage",{message:s}))},this.removetweetsuccess=function(t,e){var i=e.moment_id .momentmap[e.moment_id],s=void 0;i (s=i.is_empty_title?object(r.default)('tweet removed from " {{url}} untitled moment "',{url:e.moment_maker_url}):object(r.default)('tweet removed from " {{url}} {{moment_name}} "',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uishowmessage",{message:s}))},this.after("initialize",function(){this.momentmap={},this.on("uimomentsgetdropdownusermoments",this.getdropdownusermoments),this.on("uimomentsgetdialogusermoments",this.getdialogusermoments),this.on(document,"datamomentmakeraddtweetsuccess",this.addtweetsuccess),this.on(document,"datamomentmakerremovetweetsuccess",this.removetweetsuccess)})}var n=i("dbjh"),o=i("vtwx"),a=i("3odc"),r=i("0d4m"),c=object.assign||function(t){for(var e=1;e 0||(this.refeventdata=i,this.refel=t(e.target).find(this.attr.subtargetclass)[0]||e.target,this.lastrequested=i.screenname?i.screenname.tolowercase():i.userid,this.preparehover(this.lastrequested),this.$node.attr("data-associated-tweet-id",i.tweetid||null),this.$node.attr("data-impression-id",i.impressionid||null),this.$node.attr("data-disclosure-type",i.disclosuretype||null),this.$node.attr("data-impression-cookie",i.impressioncookie||null),this.trigger("uiwantsprofilepopup",i))))},this.dataavailable=function(e,i){if(i.screen_name .lastrequested===i.screen_name.tolowercase()||this.lastrequested===i.user_id){this.$node.attr("data-screen-name",i.screen_name||null),this.$node.attr("data-user-id",i.user_id||null);var s=t(i.html);s.find("a[href^='/"+i.screen_name+"']").attr("data-send-impression-cookie","true"),this.showhtml(i.user_id,s,t(this.refel),this.refeventdata)}},this.after("initialize",function(t,e){c.a.attachto(this.$node,{eventdata:{scribecontext:{component:"profile_hover"}}}),e.profile_user (this.skipscreenname=e.profile_user.screen_name,this.skipuserid=e.profile_user.id_str),this.on(document,"dataprofilepopupsuccess",this.dataavailable),this.on(document,"uishowprofilehover",this.openprofilehover),this.on(document,"uihideprofilehover",this.hide)})}var n=i("dbjh"),o=i("dsp6"),a=i("xq8/"),r=i("el2s"),c=i("y9hg"),l=object(n.default)(s,a.a,r.a);e.a=l}).call(e,i("4ksj"))},hjqc:function(t,e,i){"use strict";(function(t){function s(){o.default.mixin(this,[a.a]),this.defaultattrs({snapreelvideoselector:"video.js-snap-reel",easingacceleration:.5,fps:object(n.a)().chrome?20:30}),this.loginteraction=function(t){var e=t.attr("data-tweet-id");this.eventscribed[e]||(this.scribeinteraction({action:"snap_reel_interaction"},this.interactiondata(t)),this.eventscribed[e]=!0)},this.mouseover=function(e){var i=this;this.video=t(e.target),this.tweet=this.video.parents(this.attr.tweetselector),this.tweet.hasclass("animated-gif-playing") (this.scribetimeout=settimeout(function(){return i.loginteraction(i.tweet,i.video)},3e3)),this.start()},this.mouseout=function(t){cleartimeout(this.scribetimeout),this.tweet .tweet.hasclass("animated-gif-playing") (this.tweet.removeclass("animated-gif-playing"),this.trigger(this.tweet,"uistartgif")),this.stop(),this.scribetimeout=void 0,this.tweet=void 0,this.targetposition=void 0},this.mousemove=function(t){this.tweet .tweet.hasclass("animated-gif-playing") (this.targetposition=t.pagex-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){var t=this;if(this.running){var e=1e3/this.attr.fps;settimeout(function(){requestanimationframe(t.tick.bind(t)),t.update()},e)}},this.update=function(){if(this.targetposition){this.currentposition+=(this.targetposition-this.currentposition)*this.attr.easingacceleration;var t=this.currentposition/this.video.width();this.trigger(this.tweet,"uiseekgif",{position:t})}},this.after("initialize",function(t,e){this.scribetimeout=void 0,this.eventscribed={},this.currentposition=0,this.on("mouseover",{snapreelvideoselector:this.mouseover}),this.on("mouseout",{snapreelvideoselector:this.mouseout}),this.on("mousemove",{snapreelvideoselector:this.mousemove})})}e.a=s;var n=i("rw6j"),o=i("q9/c"),a=i("alsu")}).call(e,i("4ksj"))},hk7e:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("call_to_action_text",t,e,1),t,e,0,96,828,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' \n'),s.s(s.f("call_to_action_url",t,e,1),t,e,0,164,455,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' "),s.b(s.v(s.f( \n '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b(" \n")}),t.pop()),s.s(s.f("call_to_action_url",t,e,1),t,e,1,0,0,"")||(s.b(' \n '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b(" \n")),s.b(" \n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},hker:function(t,e,i){"use strict";(function(t){function i(){this.defaultattrs({requestreplyactivityselector:"",requestretweetedactivityselector:".request-retweeted-popup",requestfavoritedactivityselector:".request-favorited-popup",requestactivityselectors:".request-retweeted-popup, .request-favorited-popup",requesttaggingactivityselector:".request-tagging-popup",targettweetselector:".tweet",targettaggeduserslistselector:".popup-tagged-users-list",targettitleselector:"[data-activity-popup-title]",tweetpivotlinkselector:".tweet-pivot-link",hiddenclass:"hidden"}),this.requestreplyactivity=function(t){this.trigger("uirequestreplyactivity")},this.requestretweetedactivity=function(t){this.requestactivitypopup(t),this.trigger("uirequestretweetedactivity")},this.requestfavoritedactivity=function(t){this.requestactivitypopup(t),this.trigger("uirequestfavoritedactivity")},this.requesttaggingactivity=function(t){this.requestactivitypopup(t),this.trigger("uirequesttaggingactivity")},this.requestactivitypopup=function(e,i){var s=t(e.target),n=s.closest(this.attr.targettitleselector).attr("data-activity-popup-title"),o=s.closest(this.attr.targettweetselector).attr("data-tweet-id"),a=i?i.usershtml:null,r=void 0;e.preventdefault(),e.stoppropagation(),r=s.closest(this.attr.requestretweetedactivityselector).length?"retweeted_popup":s.closest(this.attr.requesttaggingactivityselector).length?"media_tagged_popup":"favorited_popup",this.trigger("uirequestactivitypopup",{titlehtml:n,contentid:o,usershtml:a,component:r})},this.handleloggedoutretweetedactivityclick=function(t,e){this.trigger("uiloggedoutactionattempt",{action:"retweeted_activity_attempt"})},this.handleloggedoutfavoritedactivityclick=function(t,e){this.trigger("uiloggedoutactionattempt",{action:"favorited_activity_attempt"})},this.uiopensignupdialog=function(t,e,i){this.trigger("uiopensignupdialog")},this.uitweetpivotclick=function(e){var i=t(e.target),s={item_details:{item_type:"0",id:i.attr("data-item-id")},component_details:{id:i.attr("data-entity-id"),name:i.attr("data-name"),description:i.attr("data-id")}};this.trigger("uitweetpivotclick",s)},this.after("initialize",function(){if(!this.attr.loggedin)return void this.on("click",{requestactivityselectors:this.uiopensignupdialog,requestretweetedactivityselector:this.handleloggedoutretweetedactivityclick,requestfavoritedactivityselector:this.handleloggedoutfavoritedactivityclick,requesttaggingactivityselector:this.requesttaggingactivity});this.on("click",{requestreplyactivityselector:this.requestreplyactivity,requestretweetedactivityselector:this.requestretweetedactivity,requestfavoritedactivityselector:this.requestfavoritedactivity,requesttaggingactivityselector:this.requesttaggingactivity,tweetpivotlinkselector:this.uitweetpivotclick})})}e.a=i}).call(e,i("4ksj"))},hkib:function(t,e,i){"use strict";var s=i("1qaw"),n=i.n(s),o=i("dbjh");e.a=object(o.default)(function(){this.attributes({cardcontainerselector:".card2.js-media-container",cardiframecontainerselector:".js-macaw-cards-iframe-container",playablemediaplayerselector:".playablemedia-player",playablemediaselector:".playablemedia",playersurface:"broadcast_card",supportslandscapepresentation:!1,landscapepresentationclass:"livebroadcastcard--supportslandscapepresentation",playercomponentcontext:"broadcastcard"}),this.loadplayer=function(t,e){if(!this.isplayerloaded){var i=n.a.render(),s=e.broadcast_id,o=e.media_tweet_id,a=e.requested_timecode;s?this.select("cardcontainerselector").attr("data-broadcast-id",s):o .select("cardcontainerselector").attr("data-tweet-id",o),this.select("cardcontainerselector").attr("data-player-component-context",this.attr.playercomponentcontext),this.select("cardcontainerselector").prepend(i),this.attr.supportslandscapepresentation .select("playablemediaselector").addclass(this.attr.landscapepresentationclass),a .select("playablemediaplayerselector").attr("data-requested-timecode",a),this.select("playablemediaplayerselector").attr("data-player-surface",this.attr.playersurface),this.trigger("uiwatchplayablemedia"),this.isplayerloaded=!0}},this.teardownplayer=function(){if(this.isplayerloaded){this.select("playablemediaselector").trigger("uiunloadplayablemedia").remove(),this.isplayerloaded=!1}},this.before("teardown",function(){this.teardownplayer(),this.select("cardiframecontainerselector").addclass("initial-card-height")}),this.after("initialize",function(){this.isplayerloaded=!1,this.on("uiloadcardplayerforbroadcast",this.loadplayer),this.on("uiloadcardplayerformediatweetid",this.loadplayer),this.on("uiteardowncardplayer",this.teardownplayer),this.on("uiloadplayerforliveeventcard",this.loadplayer),this.on("uiteardownplayerforliveeventcard",this.teardownplayer)})})},hwdg:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.deleteconversation=function(t,e){e=e||{};var i=l(c(t.target,"dataconversationdeleted",{conversation_id:e.conversation_id}),c(t.target,"datadmuserupdates")),s=l(c(t.target,"dataconversationdeletefailed",{conversation_id:e.conversation_id}),c(t.target,"datadmerror"));this.destroy({url:"/messages/with/conversation",data:{id:e.conversation_id,cursor:this.dmcursor},eventdata:e,success:i,error:s})},this.after("initialize",function(){this.on("uideleteconversation",this.deleteconversation)})}var n=i("dbjh"),o=i("vtwx"),a=i("9uwv"),r=i("ldny"),c=r.a.triggerfn,l=r.a.chain,h=object(n.default)(s,o.a,a.a);e.a=h},hzqj:function(t,e,i){"use strict";(function(t){function s(){this.keymap=r.a;this.attributes({textselector:"textarea.tokenizedmultiselect-input",inputcontainerselector:".tokenizedmultiselect-inputcontainer",textminwidth:100,tokenclass:"inputtoken",tokenselector:".inputtoken",focusedtokenselector:".inputtoken:focus",tokendeleteclass:"inputtoken-delete",tokendeleteselector:".inputtoken-delete",highlightedclass:"is-highlighted",highlightedselector:".is-highlighted",selectedclass:"is-selected",suggestionclass:"tokenizedmultiselect-suggestion",suggestionselector:".tokenizedmultiselect-suggestion",suggestionscontainerselector:".tokenizedmultiselect-suggestionscontainer",maxitems:50}),this.handlekeypress=function(t){if("keydown"===t.type !t.shiftkey){var e=t.which||t.keycode,i=this.select("focusedtokenselector").length,s=this.select("highlightedselector").length,n=!this.$text.val();switch(e){case r.a.tab:i?(t.preventdefault(),t.stoppropagation(),this.focusinput()):s (t.preventdefault(),t.stoppropagation(),this.tokenizehighlightedsuggestion());break;case r.a.enter:t.preventdefault(),this.toggletokenization();break;case r.a.esc:s (t.preventdefault(),t.stoppropagation(),this.clearhighlight());break;case r.a.backspace:i?(this.removefocusedtoken(),t.preventdefault()):n (this.removelasttoken(),t.preventdefault());break;case r.a.delete:i .removefocusedtoken();break;case r.a.up:t.preventdefault(),i .focusinput(),this.movesuggestionhighlight(1);break;case r.a.down:t.preventdefault(),i .focusinput(),this.movesuggestionhighlight(0);break;case r.a.left:i?this.focusneighbor(1):n .focuslasttoken();break;case r.a.right:i .focusneighbor(0)}}},this.focusneighbor=function(t){var e=0===t?"next":"prev",i=this.select("focusedtokenselector");i.length [e]().focus()},this.focuslasttoken=function(){this.select("tokenselector").last().focus()},this.focusinput=function(){this.$text.focus()},this.removefocusedtoken=function(t){var e=this.select("focusedtokenselector");t "click"===t.type?this.focusinput():this.focusneighbor(0),this.removetoken(e)},this.removelasttoken=function(){this.removetoken(this.select("tokenselector").last())},this.removetoken=function(t){t.length (this.trigger("uitokenizedmultiselecttokenremoved",{text:t.attr("data-token-text"),id:t.attr("data-token-id")}),t.remove())},this.getfirstsuggestion=function(){return this.select("suggestionselector").first()},this.gethighlightedsuggestion=function(){return this.select("highlightedselector").first()},this.getneighboringsuggestion=function(t,e){return t[0===e?"nextall":"prevall"](this.attr.suggestionselector).first()},this.movesuggestionhighlight=function(t){var e=this.gethighlightedsuggestion(),i=this.getneighboringsuggestion(e,t);e.length?i.length .sethighlight(i):this.sethighlight(this.getfirstsuggestion())},this.toggletokenization=function(){var t=this.gethighlightedsuggestion(),e=t.attr("data-token-id");this.istokenized(t)?(this.removetoken(this.select("tokenselector").filter('[data-token-id="'+e+'"]')),this.$text.val("").focus()):this.tokenizehighlightedsuggestion()},this.tokenizehighlightedsuggestion=function(){var e=this.gethighlightedsuggestion(),i=e.attr("data-token-text");if(this.cantokenize(e)){var s=t(l.a.render({token_class:this.attr.tokenclass,token_delete_class:this.attr.tokendeleteclass,emojified_token_text:{emojified_text_as_html:o.a.emojifytext(i),text:i},token_id:e.attr("data-token-id"),token_text:i}));e.addclass(this.attr.selectedclass),this.$text.before(s),this.$text.val("").focus(),this.trigger("uitokenizedmultiselecttokenadded",{text:s.attr("data-token-text"),id:s.attr("data-token-id")})}},this.istokenized=function(e){return t.inarray(e.attr("data-token-id"),this.getselecteditemsids())>=0},this.cantokenize=function(t){return!(this.select("tokenselector").length>=this.attr.maxitems) .length !this.istokenized(t)},this.getselecteditemsids=function(){return t.map(this.select("tokenselector"),function(e){return t(e).attr("data-token-id")})},this.getselecteditems=function(){return t.map(this.select("tokenselector"),function(e){return{id:t(e).attr("data-token-id"),text:t(e).attr("data-token-text")}})},this.handletextchange=function(t,e){this.trigger("uitokenizedmultiselecttextchanged",{text:e.text,selected_items:this.getselecteditemsids()})},this.handlemouseover=function(e){this.sethighlight(t(e.target).closest(this.attr.suggestionselector))},this.updatewidth=function(){var t=this.select("tokenselector").last();if(t.length){var e=this.select("inputcontainerselector").width()-t.position().left-t.outerwidth(!0),i=e this.$text.prop("clientheight") .$text.outerwidth("100%")},this.selecteditemschanged=function(){this.trigger("uitokenizedmultiselectitemselectionchanged",{selected_items:this.getselecteditems()})},this.updatescroll=function(){var t=this.gethighlightedsuggestion(),e=this.select("suggestionscontainerselector"),i=e.prop("scrolltop"),s=t.position().top+t.outerheight();if(s>e.height()){var n=s-e.height();e.scrolltop(i+n)}else t.position().top '),s.s(s.f("is_reply_user_count_1",t,e,1),t,e,0,149,225,"{{ }}") (s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,180,196,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(i.rp(" \n"),s.fl()},partials:{" \n \n'),s.b(' "),s.b(s.v(s.f( \n \n\n'),s.s(s.f("is_gif",t,e,1),t,e,0,1022,1266,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n \n \n'),i.s(i.f("is_placeholder",t,e,1),t,e,0,1187,1244,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(' \n')}),t.pop())}),t.pop()),s.b("\n"+i),s.s(s.f("is_video",t,e,1),t,e,0,1294,1580,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' '),i.b(i.v(i.f("edit_button_label",t,e,0))),i.b(' \n '),i.b(i.v(i.f("duration",t,e,0))),i.b(' \n \n \n \n')}),t.pop()),s.b("\n"+i),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,1622,1818,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' add description \n '),i.b(i.v(i.f("aria_description",t,e,0))),i.b(" \n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_placeholder",t,e,1),t,e,1,0,0,"")||s.b(' \n \n \n'),s.b(" \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},i3qs:function(t,e,i){"use strict";e.a={backspace:8,clear:12,tab:9,enter:13,esc:27,page_up:33,page_down:34,end:35,home:36,left:37,up:38,right:39,down:40,delete:46,y:89,z:90}},i4aw:function(t,e,i){"use strict";function s(){this.scribeemailsettingsclick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"settings",action:"click"})},this.scribephonesettingsclick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"phone_verification",action:"click"})},this.scriberesendconfirmationemailclick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"resend_confirmation_email",action:"click"})},this.after("initialize",function(){this.on("uiclickemailsettingslink",this.scribeemailsettingsclick),this.on("uiclickphonesettingslink",this.scribephonesettingsclick),this.on("uiresendconfirmationemail",this.scriberesendconfirmationemailclick)})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},iaiq:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n \n \n '),s.s(s.f("unread_count_one",t,e,1),t,e,0,181,197,"{{ }}") (s.rs(t,e,function(t,e,i){i.b("1 unread message")}),t.pop()),s.b("\n"+i),s.b(" "),s.s(s.f("unread_count_other",t,e,1),t,e,0,252,284,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("unread_count",t,e,0))),i.b(" unread messages")}),t.pop()),s.b("\n"+i),s.b(" \n \n \n \n "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},icf7:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\n\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},ih6c:function(t,e,i){"use strict";var s=i("kgvp"),n=i("cztd"),o=i.n(n),a=object.assign||function(t){for(var e=1;e this.attr.maxlength .pop()},this.removerecentsearchfromlist=function(t){for(var e=this.items,i=-1,s=t.tolowercase(),n=0;n 0).before(e.html)},this.setcurationclassvalue=function(t){var e=this;return function(i,s){return e.select("momentitemselector").filter("[data-moment-id="+s.moment_id+"]").toggleclass(e.attr.momentmemberclass,t)}},this.triggermomentcurationevent=function(e){return function(i,s,n){var o=t(s.el),a=o.attr("data-moment-id"),r=n.$tweet.attr("data-tweet-id");this.trigger(e,{moment_id:a,tweet_id:r,scribecontext:{component:"tweet_actions_dropdown"}}),this.trigger("uiclosedropdowns")}},this.getmomentswithevent=function(t){return function(e,i,s){var n=s.$tweet.attr("data-tweet-id");this.trigger(t,{tweet_id:n})}},this.after("initialize",function(){this.attr.loggedin (this.on("click",{addtweetfrommomentselector:this.composehandler(this.getclosesttweet,this.triggermomentcurationevent("uimomentmakeraddtweet")),removetweetfrommomentselector:this.composehandler(this.getclosesttweet,this.triggermomentcurationevent("uimomentmakerremovetweet")),addtweettoothermomentselector:this.composehandler(this.getclosesttweet,this.getmomentswithevent("uiopenaddtomomentdialog")),addtweettonewmomentselector:this.composehandler(this.getclosesttweet,this.triggermomentcurationevent("uimomentmakercreatemoment"))}),this.on("uidropdownopened",this.composehandler(this.getclosesttweet,this.getmomentswithevent("uimomentsgetdropdownusermoments"))),this.on(document,"datamomentmakeraddtweetsuccess",this.setcurationclassvalue(!0)),this.on(document,"datamomentmakerremovetweetsuccess",this.setcurationclassvalue(!1)),this.on(document,"datamomentsgetdropdownusermomentssuccess",this.renderusermomentslist))})}e.a=i}).call(e,i("4ksj"))},igdv:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.mergeerrorparams=function(t,e,i,s){return h({},t,{error:{type:e,code:i,message:s}})},this.sendimage=function(t,e){var i=this,s=e.media_data||{},n=function(t){return i.trigger("datamediasrucomplete",s),h({},e,{media_id:t})},o=d(t.target,"datadmsendfailed",function(t){return i.trigger("datamediasrucancel",s),i.mergeerrorparams(e,"media_upload",t.code,t.message)});return s.uploadid?this.mediasrufinalize(s).then(n,o):promise.resolve(e)},this._sendmessagepromise=function(t,e,i){var s=this;return new promise(function(n,o){var a=function(t){e(t),n()},r=function(t){i(t),o()};s.post({url:"/i/direct_messages/new",data:t,eventdata:t,success:a,error:r})})},this.sendmessage=function(t,e){var i=this,s=function(i,s){var n=this;return s .retry "datadmdialogsendmessageretry"!==t.type?settimeout(function(){return n.trigger(i,"datadmdialogsendmessageretry",e)},s.delay):this.trigger(i,"datadmsendsuccess",s),s},n=d(t.target,"datadmsendfailed",function(t){return i.mergeerrorparams(e,"message_send",t.xhr.status,t.message)}).bind(this);return this._sendmessagepromise(e,s.bind(this,t.target),n)},this.getconversationqueue=function(t){if(t)return this.conversationqueues[t]=this.conversationqueues[t]||object(c.a)(),this.conversationqueues[t]},this.updateinflight=function(t){var e=this,i=object.keys(this.conversationqueues).reduce(function(t,i){return t[i]=e.conversationqueues[i].length(),t},{});return this.trigger("datadmmessagesinflight",i),t},this.enqueuemessage=function(t,e){var i=this.updateinflight.bind(this),s=this.getconversationqueue(t).enqueue(e).then(i,i);return this.updateinflight(),s},this.handlesend=function(t,e){var i=this;e.resend_id=e.resend_id||l.a.add({event:t,sendparams:e});var s=function(){return i.sendimage(t,e).then(i.sendmessage.bind(i,t))},n=e.conversation_id;return n?this.enqueuemessage(n,s):s()},this.discarddraftdata=function(t,e){e.resend_id .a.remove(e.resend_id)},this.handleresend=function(t,e){var i=l.a.get(e.resend_id);i .handlesend(i.event,i.sendparams)},this.after("initialize",function(){this.on("uidmsendmessage datadmdialogsendmessageretry",this.handlesend),this.on("uidmresendconfirm",this.handleresend),this.conversationqueues={},this.on("uidmconversationneedsinflightstate",this.updateinflight),this.on("datadmsendsuccess uidmresenddiscard",this.discarddraftdata)})}var n=i("dbjh"),o=i("ldny"),a=i("vtwx"),r=i("x+k1"),c=i("gshy"),l=i("h6fk"),h=object.assign||function(t){for(var e=1;e 0?i.data("item-id").tostring():void 0}},this.getmutualfollowtweet=function(){var e=this;return this.geteligibletweets().filter(function(i,s){var n=t(s).find(e.attr.originaltweetselector);return n.data("you-follow") .data("follows-you")}).eq(0)},this.getnotfollowingtweet=function(){var e=this;return this.geteligibletweets().filter(function(i,s){return!t(s).find(e.attr.originaltweetselector).data("you-follow")}).eq(0)},this.getmostfavoritedtweet=function(){var e=this;return this.geteligibletweets().filter(function(i,s){return!t(s).find(e.attr.originaltweetselector).hasclass(e.attr.favoritedclass)}).sort(function(i,s){var n=function(i){return t(i).find(e.attr.favoritecountselector).data(e.attr.tweetstatcountselector)};return n(s)-n(i)}).eq(0)},this.after("initialize",function(){this.on("uipromptneedsinsertionindex",this.getinsertionindex)})}var n=i("dbjh");e.a=object(n.default)(s)}).call(e,i("4ksj"))},jctv:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({tweetitemselector:".tweet",deleteselector:".js-actiondelete",shareviadmselector:".js-actionshareviadm",copylinktotweetselector:".js-actioncopylinktotweet",embedtweetselector:".js-actionembedtweet",embedvideoselector:".js-actionembedvideo",openadsinfolinkselector:".js-actionopenadsinfopage",openwhythisadmodalselector:".js-actionwhythisad",blockorreporttweetselector:".js-actionblockorreport",blocktweetselector:".js-actionblock",reporttweetselector:".js-actionreport",unblocktweetselector:".js-actionunblock",usertogglepintweetselector:".js-actionpintweet",curatetweetselector:".js-actioncuratetweet",curatetootherselector:".js-actioncuratetweetother",curatetonewtimelineselector:".js-actioncuratetweetnewtimeline",removemediatagselector:".js-actionremovetag",tweetcontainerselector:".js-stream-item",mediatagcontainerselector:".media-tags-container",pinnedtweetclass:"user-pinned",hastimelinesclass:"has-timelines"}),this.rendercustomtimelineslist=function(t,e){var i=this.select("curatetootherselector");this.select("curatetweetselector").remove(),i.before(e.html),this.select("curatetweetselector").length>0 .addclass(this.attr.hastimelinesclass)},this.curatetweet=function(e,i,s){var n=t(i.el),o=n.attr("data-timeline-id"),a=n.data("is-member"),r=s.tweetdata;r.timelineid=o,a?this.trigger("uicurateremovetweet",r):this.trigger("uicurateaddtweet",r),this.trigger("uiclosedropdowns")},this.getcustomtimelines=function(t,e,i){var s=i.$tweet.attr("data-tweet-id");this.trigger("uineedscustomtimelines",{tweetid:s})},this.confirmremovemediatag=function(t){this.trigger(t.target,"uiopenconfirmdialog",{titletext:object(n.default)("remove photo tag from tweet?"),bodytext:object(n.default)("are you sure you want to remove your photo tag from this tweet?"),canceltext:object(n.default)("cancel"),submittext:object(n.default)("ok"),action:"mediatagremove"})},this.removemediatag=function(t,e,i){this.trigger(document,"uididremovemediatag",i.tweetdata)},this.handleremovemediatagsuccess=function(t,e){object(a.a)(this.$node,this.attr.tweetitemselector,e.id_str).find(this.attr.mediatagcontainerselector).html(e.item_html),this.trigger("uishowmessage",{message:object(n.default)("photo tag removed")})},this.handleremovemediatagfailure=function(t){this.trigger("uishowmessage",{message:object(n.default)("cannot delete the tag. please try again later.")})},this.showconfirmpindialog=function(t){t.stopimmediatepropagation(),this.trigger(t.target,"uiopenconfirmdialog",{titletext:object(n.default)("pin this tweet to the top of your profile"),bodytext:object(n.default)("this will replace any previously pinned tweet. are you sure?"),canceltext:object(n.default)("cancel"),submittext:object(n.default)("pin"),action:"userpintweettoggle"})},this.showconfirmunpindialog=function(t){t.stopimmediatepropagation(),this.trigger(t.target,"uiopenconfirmdialog",{titletext:object(n.default)("unpin from your profile"),bodytext:object(n.default)("are you sure?"),canceltext:object(n.default)("cancel"),submittext:object(n.default)("unpin"),action:"userpintweettoggle"})},this.showuserpintoggledmessage=function(t,e){this.trigger("uishowstickymessage",e)},this.unpinothertweets=function(t,e){this.select("tweetitemselector").removeclass(this.attr.pinnedtweetclass),this.handletransition("addclass",this.attr.pinnedtweetclass).call(this,t,e)},this.handletransition=function(t,e){return function(i,s){var n=s.id||s.sourceeventdata.id;object(a.a)(this.$node,this.attr.tweetitemselector,n)[t](e)}},this.confirmpintoggle=function(t,e,i){var s=i.$tweet.hasclass(this.attr.pinnedtweetclass)?"uineeduserunpintweetconfirm":"uineeduserpintweetconfirm";this.trigger(i.$tweet,s)},this.togglepinnedtweet=function(t,e,i){return i.$tweet.hasclass(this.attr.pinnedtweetclass)?"uididuserunpintweet":"uididuserpintweet"},this.unblockfromtweetaction=function(t,e){this.trigger("uiclosedropdowns"),this.trigger("uiunblockaction",e)},this.openadsinfolink=function(t,e){window.open("https://business.twitter.com/help/how-twitter-ads-work","_blank"),this.trigger("uiclosedropdowns")},this.after("initialize",function(){var t=this.mktweetdatacollectorforaction(this.interactiondatawithcard);this.on("click",{embedtweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedsembedtweetdialog")),embedvideoselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedsembedvideodialog")),copylinktotweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedscopylinktotweetdialog")),openwhythisadmodalselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedswhythisaddialog")),openadsinfolinkselector:this.openadsinfolink}),this.attr.loggedin (this.on("click",{deleteselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uiopendeletedialog")),usertogglepintweetselector:this.composehandler(this.getclosesttweet,this.confirmpintoggle),shareviadmselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uicomposenewdmwithtweet")),curatetweetselector:this.composehandler(this.getclosesttweet,t,this.curatetweet),curatetootherselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uiopencuratedialog")),curatetonewtimelineselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uiopencreatecustomtimelinedialog")),removemediatagselector:this.confirmremovemediatag,blockorreporttweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedsblockorreportdialog")),blocktweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedsblockdialog")),unblocktweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uididunblockfromtweet")),reporttweetselector:this.composehandler(this.getclosesttweet,t,this.triggertweetaction("uineedsreportdialog"))}),this.on("uidropdownopened",this.composehandler(this.getclosesttweet,this.getcustomtimelines)),this.on("uiuserpintweettoggleconfirm",this.composehandler(this.getclosesttweet,t,this.triggertweetaction(this.togglepinnedtweet.bind(this)))),this.on("uimediatagremoveconfirm",this.composehandler(this.getclosesttweet,t,this.removemediatag)),this.on(document,"uihasinjectednewtimeline uihasinjectedoldtimelineitems uihasinjectedrangetimelineitems",this.applyariaattrs),this.on(document,"datagotcustomtimelines",this.rendercustomtimelineslist),this.on(document,"uineeduserpintweetconfirm",this.showconfirmpindialog),this.on(document,"uineeduserunpintweetconfirm",this.showconfirmunpindialog),this.on(document,"uididunblockfromtweet",this.unblockfromtweetaction),this.on(document,"datadiduserpintweet datadiduserunpintweet",this.showuserpintoggledmessage),this.on(document,"datadiduserpintweet",this.unpinothertweets),this.on(document,"uididuserpintweet datafailedtouserunpintweet",this.handletransition("addclass",this.attr.pinnedtweetclass)),this.on(document,"uididuserunpintweet datafailedtouserpintweet",this.handletransition("removeclass",this.attr.pinnedtweetclass)),this.on(document,"datamediatagremovesuccess",this.handleremovemediatagsuccess),this.on(document,"datamediatagremovefailure",this.handleremovemediatagfailure))})}var n=i("0d4m"),o=i("dbjh"),a=i("xo2u"),r=i("mgri"),c=i("alsu"),l=i("2kb6"),h=i("rhwy"),d=i("id66"),u=object(o.default)(s,r.a,h.a,c.a,l.a,d.a);e.a=u}).call(e,i("4ksj"))},jmwl:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dialogs/close_button":i("38hd")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n'),s.b(s.rp(" \n \n '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,194,217,"{{ }}") (s.rs(t,e,function(t,e,i){i.b("create a new collection")}),t.pop()),s.b("\n"+i),s.b(" "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("edit collection"),s.b("\n"+i),s.b(' \n \n\n \n \n '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,430,621,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n collections are public sets of tweets that you control.\n \n create a collection, add tweets, and share it with the world.\n ')}),t.pop()),s.b("\n"),s.b("\n"+i),s.b(' \n collection name \n \n \n 25 characters \n 25 \n \n \n \n\n \n description \n '),s.b(s.v(s.f("timeline_description",t,e,0))),s.b(' \n \n 160 characters, optional \n 160 \n \n \n \n\n \n collection order \n \n \n \n recently added first \n \n \n \n oldest first \n \n \n \n newest first \n \n \n \n \n\n \n \n '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,2994,3011,"{{ }}") (s.rs(t,e,function(t,e,i){i.b("create collection")}),t.pop()),s.b("\n"+i),s.b(" "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("save collection"),s.b("\n"+i),s.b(" \n \n \n \n \n \n"),s.fl()},partials:{" \n \n'),s.b(s.rp(" \n \n \n in group \n \n \n'),s.fl()},partials:{" \n \n '),s.s(s.f("user_count_one",t,e,1),t,e,0,80,100,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" other")}),t.pop()),s.b("\n"+i),s.b(" "),s.s(s.f("user_count_other",t,e,1),t,e,0,145,166,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" others")}),t.pop()),s.b("\n"+i),s.b(" \n "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},lrgq:function(t,e,i){"use strict";(function(t){function i(){this.defaultattrs({focusclass:"focus",focuscontainerselector:".tweet"}),this.addfocusstyle=function(e,i){t(i.el).addclass(this.attr.focusclass)},this.addfocusstyletotarget=function(e){t(e.target).addclass(this.attr.focusclass)},this.removefocusstyle=function(e,i){var s=this;settimeout(function(){var e=i.el,n=document.activeelement;t.contains(e,n)||e===n||t(e).removeclass(s.attr.focusclass)},0)},this.after("initialize",function(){this.on(document,"uishouldaddfocusstyle",this.addfocusstyletotarget),this.on("focusin",{focuscontainerselector:this.addfocusstyle}),this.on("focusout",{focuscontainerselector:this.removefocusstyle})})}e.a=i}).call(e,i("4ksj"))},ltdq:function(t,e,i){"use strict";function s(){this.createactionhandler=function(t,e){var i=this;return function(s,n){return i.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"datamomentmaker"+e+"tweetsuccess",error:"datamomentmaker"+e+"tweetfailure"})}},this.bindaction=function(t){var e=t.charat(0).touppercase()+t.slice(1).tolowercase();this.on("uimomentmaker"+e+"tweet",this.createactionhandler(t.tolowercase(),e))},this.sortmoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"datamomentmakersortmomentsuccess",error:this.genericerrormessage.bind(this)})},this.editmetadata=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"datamomentmakereditmetasuccess",error:"datamomentmakereditmetafailure",noabortonnavigate:!0})},this.setcoverdata=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"datamomentmakersetcoversuccess",error:"datamomentmakersetcoverfailure"})},this.setcovercropdata=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"datamomentmakersetcovercropsuccess",error:"datamomentmakersetcovercropfailure"})},this.setcoverdatabymediaid=function(t,e){function i(){this.trigger("datamomentmakersetcoverfailure")}var s=this,n=e.fileid,a=o.a.get(n);if(a)return this.trigger(document,"uimediasruinit",{fileid:n,uploadid:a.uploadid,mediacategory:a.mediacategory}),this.mediasrufinalize(a).then(function(t){return s.post({url:"/i/moments/edit/"+e.momentid+"/update_cover/"+t,success:"datamomentmakersetcoversuccess",error:"datamomentmakersetcoverfailure"})}).catch(function(t){throw i(),t})},this.createmoment=function(t,e){function i(t){this.trigger("uinavigate",{href:t.url})}function s(){this.trigger("uishowerror",{message:object(l.default)("something went wrong. this moment couldn't be created. give it a minute, then try again.")})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deletemoment=function(t,e){function i(t){this.trigger("datamomentmakerdeletemomentsuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"datamomentmakerdeletemomentfailure"})},this.updatecrop=function(t,e){function i(){this.trigger("datamomentmakerupdatecropfailure"),this.genericerrormessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"datamomentmakerupdatecropsuccess",error:i.bind(this)})},this.updatemomentvisibility=function(t,e){function i(t){t .permission_error?this.trigger("uishowerror",{message:object(l.default)("you do not currently have permission to perform this action.")}):this.trigger("uimomentmakerupdatevisibilitysuccess",h({},t,e))}function s(){this.trigger("uimomentmakerupdatevisibilityerror",e),this.genericerrormessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updatensfwsetting=function(t,e){function i(){this.trigger("uishowmessage",{message:object(l.default)("moment sensitivity updated successfully.")})}function s(){this.trigger("datamomentmakerupdatensfwerror",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatepublishlocationsetting=function(t,e){function i(){this.trigger("uishowmessage",{message:object(l.default)("moment location setting updated successfully.")})}function s(){this.trigger("datamomentmakerupdatepublishlocationerror",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updatethemecolorsetting=function(t,e){function i(){this.trigger("datamomentmakerupdatethemecolorerror",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"datamomentmakerupdatethemecolorsuccess",error:i.bind(this)})},this.genericerrormessage=function(){this.trigger("uishowerror",{message:object(l.default)("something went wrong. give it a minute, then try again.")})},this.after("initialize",function(){this.bindaction("add"),this.bindaction("remove"),this.bindaction("reorder"),this.on("uimomentmakersortmoment",this.sortmoment),this.on("uimomentmakereditmeta",this.editmetadata),this.on("uimomentmakersetcover",this.setcoverdata),this.on("uimomentmakersetcovercrop",this.setcovercropdata),this.on("uimomentmakersetcoverbymediaid",this.setcoverdatabymediaid),this.on("uimomentmakercreatemoment",this.createmoment),this.on("uimomentmakerdeletemoment",this.deletemoment),this.on("uimomentmakerupdatevisibility",this.updatemomentvisibility),this.on("uimomentmakerupdatecrop",this.updatecrop),this.on("uimomentmakerupdatensfw",this.updatensfwsetting),this.on("uimomentmakerupdatepublishlocation",this.updatepublishlocationsetting),this.on("uimomentmakerupdatethemecolor",this.updatethemecolorsetting)})}var n=i("dbjh"),o=i("h6fk"),a=i("vtwx"),r=i("9np9"),c=i("x+k1"),l=i("0d4m"),h=object.assign||function(t){for(var e=1;e =0){i=this.node.options[this.node.selectedindex];for(var s=0;s ");for(var n in e)"text"===n?i.html(e[n]):i.attr(n,e[n]);i.appendto(s.$node)}),this.itemselect()},this.after("initialize",function(){this.node.jquery (this.node=this.node[0]),this.attr.items .node.trigger("setitems",{items:this.attr.items}),this.on("setitems",this.setitems),this.on("change",this.itemselect),this.on("mousedown",this.clickitems)})}var n=i("dbjh");e.a=object(n.default)(s)}).call(e,i("4ksj"))},lcsn:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n'),s.s(s.f("categories",t,e,1),t,e,0,59,205,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n')}),t.pop()),s.b(" "),s.b(' \n \n \n \n \n \n \n \n \n \n'),s.s(s.f("categories",t,e,1),t,e,0,723,1107,"{{ }}") (s.rs(t,e,function(t,e,s){s.b(' \n \n '),s.b(s.v(s.f("title",t,e,0))),s.b("\n"+i),s.s(s.f("is_recent",t,e,1),t,e,0,894,999,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' clear \n')}),t.pop()),s.b(' \n \n \n')}),t.pop()),s.b(' \n \n '),s.s(s.f("skin_tones",t,e,1),t,e,0,1208,1466,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' '),i.b(' '),i.b(" ")}),t.pop()),s.b(" \n \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},ldny:function(t,e,i){"use strict";(function(t){e.a={triggerfn:function(e,i,s){return i=array.isarray(i)?i:[i],function(n){i.foreach(function(i){var o=t.isfunction(i)?i(n):i,a=t.isfunction(s)?s(n):s;o (e).trigger(o,a||n)})}},chain:function(){var e=array.prototype.slice.call(arguments);return function(){var i=array.prototype.slice.call(arguments);for(var s in e)t.isfunction(e[s]) [s].apply(e[s],i)}}}}).call(e,i("4ksj"))},liht:function(t,e,i){"use strict";function s(){this.defaultattrs({sharedtweetselector:".directmessage-tweet"}),this.opensharedtweet=function(t,e){this.trigger("uidmdialogsharedtweetclick")},this.after("initialize",function(){this.on("click",{sharedtweetselector:this.opensharedtweet})})}var n=i("dbjh"),o=i("o/dd"),a=object(n.default)(s,o.a);e.a=a},lsln:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={"dialogs/close_button":i("38hd"),"media/video_trim":i("icf7")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n'),s.b(s.rp(" \n '),s.b(s.v(s.f("title",t,e,0))),s.b(" \n \n"),s.s(s.f("is_video",t,e,1),t,e,0,259,2741,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n \n'),i.b(i.rp(" \n \n \n \n \n \n \n \n \n '),i.b(i.v(i.f("video_description",t,e,0))),i.b(' \n \n \n \n \n \n choose a call to action \n visit site: \n watch now: \n \n \n \n \n \n \n \n allow video to be embedded\n \n \n \n \n")}),t.pop()),i.b(' \n \n \n done\n \n \n \n')}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||(s.b(' \n \n'),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,2944,3380,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n '),i.b(i.v(i.f("alt_text",t,e,0))),i.b(' \n apply \n \n')}),t.pop()),s.b(" \n")),s.b(" \n \n"),s.fl()},partials:{" 0;s .$avatarscontainerselector.append(i);var n=this.select("avatarselector").not(".is-hidden").not(this.attr.overflowavatarselector);n.css("visibility","");var o=this.attr.maxnumavatars-n.length;if(o>0){var a=this.select("overflowavatarselector").slice(0,o);a.removeclass(this.attr.overflowavatarclass),s .last().css("visibility","hidden")}},this.addavatar=function(e){var i=this.profileimagedata[e].image_url,s=this.profileimagedata[e].name;if(i){var n=t(c.a.render({alt:s,image_count:1,images:[{src:i}],overflow:this.activeavatarlist().length>=this.attr.maxnumavatars}));!this.activeavatarlist().length .$avatarscontainerselector.empty(),this.$avatarscontainerselector.append(n),this.activeavatars[e]={timer:this.setremovetimeout(e),node:n},this.updateoverflow(),this.$container.hasclass("u-hidden") .show()}},this.setremovetimeout=function(t){return settimeout(this.removeavatar.bind(this,t,!0),this.attr.avatardisplayduration)},this.refreshtimer=function(t){var e=this.activeavatars[t];e (cleartimeout(e.timer),e.timer=this.setremovetimeout(t))},this.iseventforcurrentconvo=function(t,e){return this.conversationid .conversationid===e.conversation_id},this.removeavatar=function(t,e){var i=this.activeavatars[t];if(i){cleartimeout(i.timer);var s=1===this.activeavatarlist().length;!s .node.addclass("is-hidden"),delete this.activeavatars[t],this.updateoverflow(),s .hide(e)}},this.activeavatarlist=function(){return object.keys(this.activeavatars)},this.handleuserupdate=function(t,e){var i=this;if(!e.should_request_inbox !e.is_empty){var s=(e.conversations||[]).filter(function(t){return t.conversation_id===i.conversationid})[0];s !s.is_empty (this.avatarstoclear.foreach(function(t){return i.removeavatar(t,!1)}),this.avatarstoclear=[])}},this.handleconversationupdate=function(t,e){e.conversation_id!==this.conversationid (this.reset(),this.conversationid=e.conversation_id);var i=e.participants||[];this.profileimagedata=i.reduce(function(t,e){return t[e.id]={image_url:e.profile_image_url,name:e.name},t},{})},this.handleupdateevent=function(t,e){e.user_id .avatarstoclear.push(e.user_id)},this.handletypingevent=function(t,e){var i=e.user_id;if(o.a.user.id!==i){this.activeavatars[i]?this.refreshtimer(i):this.addavatar(i)}},this.after("addavatar",function(){this.trigger("uidmtypingindicatoravataradded",{num_avatars:this.activeavatarlist().length})}),this.after("refreshtimer",function(){this.trigger("uidmtypingindicatoravatarrefreshed",{num_avatars:this.activeavatarlist().length})}),this.after("initialize",function(){this.activeavatars={},this.profileimagedata={},this.avatarstoclear=[],this.$container=this.select("containerselector"),this.$avatarscontainerselector=this.select("avatarscontainerselector"),this.$messagebubble=this.select("messagebubbleselector"),this.on(document,"datadmuserupdates",this.handleuserupdate),this.on(document,"uidmconversationupdated",this.handleconversationupdate),this.on(document,"datadmtyping",object(a.a)(this.handletypingevent,this.iseventforcurrentconvo)),this.on(document,"datadmupdate",object(a.a)(this.handleupdateevent,this.iseventforcurrentconvo))})}var n=i("dbjh"),o=i("iamj"),a=i("4oun"),r=i("+71d"),c=i.n(r),l=i("0t2c"),h=i.n(l);e.a=object(n.default)(s)}).call(e,i("4ksj"))},mbsm:function(t,e,i){"use strict";function s(){this.scribeclickonbutton=function(t,e){this.scribe({element:"media_tag_prompt",action:"click"},e)},this.scribeuserselected=function(t,e){e.items.length .scribe({component:"media_tag",element:"taggable_user",action:"click"},e)},this.scribeusernotselected=function(t,e){this.scribe({component:"media_tag",element:"nontaggable_user",action:"click"},e)},this.scribetweet=function(t,e){e.tweetdata.tagged_users .tweetdata.tagged_users.length .tweetdata.in_reply_to_status_id .tweetdata.in_reply_to_status_id.length?this.scribe({action:"reply_with_tags"},e):e.tweetdata.tagged_users .tweetdata.tagged_users.length .scribe({action:"tweet_with_tags"},e)},this.after("initialize",function(){this.on("uishowselectpopover",this.scribeclickonbutton),this.on("uiupdatedselectedusers",this.scribeuserselected),this.on("uisendtweetwithmedia",this.scribetweet),this.on("uicouldnotselectuser",this.scribeusernotselected)})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},mdlq:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_text_as_html",t,e,1),t,e,0,27,55,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.t(i.f("emojified_text_as_html",t,e,0)))}),t.pop()),s.s(s.f("emojified_text_as_html",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},mpc1:function(t,e,i){"use strict";var s={feedbacknpscardname:"2586390716:feedback_nps",feedbackcsatcardname:"2586390716:feedback_csat",feedbacknpsscribecomponentname:"nps_feedback_survey",feedbackcsatscribecomponentname:"csat_feedback_survey"};e.a=s},"n/jq":function(t,e,i){"use strict";function s(){this.defaults={cancelselector:".cancel-action",blockselector:".block-action"},this.openblockuser=function(t,e){var i={useronly:!0,modal:"block"};this.attr.sourceeventdata=e,this.displaytweet(e.tweetid,i),this.open()},this.blockuser=function(){this.trigger("uididblockuser",{sourceeventdata:this.attr.sourceeventdata}),this.close()},this.after("initialize",function(){this.on("click",{cancelselector:this.close,blockselector:this.blockuser}),this.on(document,"uiopenblockuserdialog",this.openblockuser)})}var n=i("dbjh"),o=i("uhc7"),a=i("wqlg");e.a=object(n.default)(s,o.a,a.a)},n85q:function(t,e,i){"use strict";function s(t){var e=t.match(n);if(e)return e[1];throw new error("unexpected mustache path: "+t)}var n=/^\.\/(.+)\.mustache$/,o=function(t){var e={};return t.keys().foreach(function(i){var n=s(i);e[n]=t(i)}),e}(i("aixw"));e.a=o},nvga:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({showshortcutsbtnselector:"#show-shortcuts-btn",dismissshortcutsbtnselector:"#dismiss-shortcuts-btn",suppresssrmsgcookie:"suppress_sr_shortcuts_msg",loggedin:!1,closeonotherdialogopened:!0,keyboardshortcuts:[]}),this.rendersrmessage=function(){if(!t("#kb-shortcuts-msg").length){var e=h.a.render({});t(e).insertbefore(document.body.firstchild)}},this.addmessage=function(){object(a.a)(this.attr.suppresssrmsgcookie)||this.rendersrmessage()},this.removemessage=function(){t("#kb-shortcuts-msg").remove(),object(a.a)(this.attr.suppresssrmsgcookie,"1",{expires:1/0})},this.rendershortcutsdialog=function(){if(!t("#keyboard-shortcut-dialog").length){var e={keyboard_shortcuts:this.attr.keyboardshortcuts};t("body").append(c.a.render(e)),this.$dialogcontainer=t("#keyboard-shortcut-dialog"),this.$dialog=this.$dialogcontainer.find(this.attr.modalselector)}},this.showshortcutsdialog=function(){this.rendershortcutsdialog(),this.open()},this.after("initialize",function(){this.on(document,"click",{showshortcutsbtnselector:this.showshortcutsdialog,dismissshortcutsbtnselector:this.removemessage}),this.on(document,"uiswiftloaded",this.addmessage),this.on(document,"uiopenkeyboardshortcutsdialog",this.showshortcutsdialog)})}var n=i("dbjh"),o=i("uhc7"),a=i("dsp6"),r=i("qfjf"),c=i.n(r),l=i("bdsg"),h=i.n(l),d=object(n.default)(s,o.a);e.a=d}).call(e,i("4ksj"))},nffu:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("protected",t,e,1),t,e,0,14,128,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' '),i.b(' protected tweets '),i.b(" ")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},nnea:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({stickerselector:".stickersmediaimage-stickerimage",stickerlinkselector:".stickersmediaimage-stickerlink",stickermediaimageselector:".stickersmediaimage",hittestingenabledclass:"is-hittesting"}),this.animatesticker=function(e){var i=t(e.target),s="stickeranimation-"+i.data("animationrefindex"),n=i.data("currentanimationpattern");n="a"===n?"b":"a",i.data("currentanimationpattern",n),s=s+"-"+n,i.css("-webkit-animation-name",s),i.css("animation-name",s)},this.transformsticker=function(t,e){return"matrix("+t.matrix.join(",")+")scale("+e+")"},this.generatestickerdataarray=function(t){var e=this.select("imageselector").width();this.stickerdata=t.map(function(t,i){var s=e*t.aspectratio;return h({width:e,height:s,halfwidth:e/2,halfheight:s/2,animationrefindex:i,matrix:[t.transforma,t.transformb,t.transformc,t.transformd,t.transformtx*e,t.transformty*s]},t)},this)},this.generatetemplatevariables=function(t,e,i,s){var n=math.ceil((e.width()-i.width())/2);return{image:t.src,width:t.width,height:t.height,bgwidth:i.width(),bgheight:i.height(),blackbarwidth:n,stickers:this.stickerdata.map(function(t){return h({},t,{link:s?"/i/stickers/"+t.id:"",transform:this.transformsticker(t,1)})},this)}},this.rendermainimageandstickerplaceholders=function(t,e){this.generatestickerdataarray(e);var i=r.a.getdecidervalue("stickersinteractivity"),s=this.generatetemplatevariables(t,this.select("gallerymediaselector"),this.select("imageselector"),i),n=l.a.render(s);this.$current.attr("loaded",!0),this.stickersfirstvisibletime=date.now(),this.select("gallerymediaselector").html(n),this.$stickerscontainer=this.select("stickermediaimageselector"),r.a.getdecidervalue("stickersinteractivityduringloading")||this.enablehittesting()},this.detectedbrowser=function(){return object(n.a)().name},this.isnotfirefoxorie=function(){var t=this.detectedbrowser();return!("mozilla"===t||"msie"===t)},this.isvalidbrowserforsvg=function(){return!(document.implementation !document.implementation.hasfeature("http://www.w3.org/tr/svg11/feature#image","1.1")) .isnotfirefoxorie()},this.hypot=function(t,e){return math.sqrt(t*t+e*e)},this.getbiggestrastersticker=function(t){var e=t.images.raster;return e[e.length-1].url},this.findbestsizedrastersticker=function(t){for(var e=!1,i=t.width*this.hypot(t.matrix[0],t.matrix[2]),s=t.height*this.hypot(t.matrix[1],t.matrix[3]),n=t.images.raster,o=0;o i [o].h>s){e=n[o].url;break}return e||this.getbiggestrastersticker(t)},this.determinestickerurl=function(t){return this.isvalidbrowserforsvg() .images.vector?t.images.vector.url:this.findbestsizedrastersticker(t)},this.loadstickersasbloburls=function(t,e,i){var s=this;this.rendermainimageandstickerplaceholders(t,e);var n=this.stickerdata.map(function(t){return t.url=s.determinestickerurl(t),t.url}),a=this.$stickerscontainer.width(),r=this.$stickerscontainer.height();i===this.currentstickerkey .a.createmapofbloburls(n).then(function(t){i===s.currentstickerkey (s.urltobloburlmap=t,promise.all(s.stickerdata.map(function(t){return this.generatehittestpixels(t,a,r,i)},s)).then(function(){return s.beginhittesting()}))})},this.loadmainimageandstickers=function(t,e,i){var s=this;a.a.load(t,function(t){var n=t[0];s.loadstickersasbloburls(n,e,i)})},this.replacemediawithimageandstickers=function(t){var e=this.getlargemediaurl(this.$current),i=e+json.stringify(t);this.currentstickerkey!==i (this.currentstickerkey=i,this.loadmainimageandstickers(e,t,i))},this.resetstickers=function(){this.lasthitindex=-1,this.$stickerscontainer=null,this.ishittesting=!1,this.stickerdata=[],this.currentstickerkey=null,this.urltobloburlmap .a.revokemapofbloburls(this.urltobloburlmap),this.urltobloburlmap=null},this.generatehittestpixels=function(t,e,i,s){var n=this,o=document.createelement("canvas");o.width=e,o.height=i;var a=new image,r=this.getbloburlforsticker(t);return new promise(function(c,l){if(a.onload=function(){var s=o.getcontext("2d");s.transform.apply(s,t.matrix),s.drawimage(a,-t.halfwidth,-t.halfheight,t.width,t.height),t.hittestpixels=s.getimagedata(0,0,e,i),c(t)},a.onerror=l,s!==n.currentstickerkey||!r)return l();a.src=n.urltobloburlmap[t.url]})},this.enablehittesting=function(){this.select("galleryselector").addclass(this.attr.hittestingenabledclass),this.ishittesting=!0},this.getbloburlforsticker=function(t){return this.urltobloburlmap .urltobloburlmap[t.url]},this.replacetempimageswithrealimages=function(){var e=this;this.select("stickerselector").each(function(i,s){var n=e.stickerdata[i],o=e.getbloburlforsticker(n);o (s).css("background-image","url("+o+")")})},this.beginhittesting=function(){this.enablehittesting(),this.replacetempimageswithrealimages();var t=this.select("stickerselector"),e=math.max(0,d-(date.now()-this.stickersfirstvisibletime));settimeout(function(){return t.trigger("uianimatesticker")},e)},this.getstickerhitindex=function(t){if(!this.$stickerscontainer)return-1;var e=this.$stickerscontainer[0].getboundingclientrect(),i=e.bottom-e.top,s=e.right-e.left;if(!s||!i)return-1;var n=this.$stickerscontainer.offset(),o=(t.pagex-n.left)/s,a=(t.pagey-n.top)/i;return o =1||a =1?-1:this.stickerdata.reduce(function(t,e,i){var s=e.hittestpixels;return s .data[4*(math.floor(o*s.width)+math.floor(a*s.height)*s.width)+3]?i:t},-1)},this.animateifhittestchanged=function(t){if(this.ishittesting){var e=this.getstickerhitindex(t);e!==this.lasthitindex (this.lasthitindex=e,this.select("stickerlinkselector").css("cursor",e>=0?"pointer":"default"),e>=0 .select("stickerselector").eq(e).trigger("uianimatesticker"))}},this.navigateifhittestsucceeds=function(t){if(this.ishittesting){var e=this.getstickerhitindex(t);e>=0 .select("stickerselector").eq(e).trigger("click")}},this.preventwhenhittesting=function(t){this.ishittesting .originalevent (t.stoppropagation(),t.preventdefault())},this.after("initialize",function(){this.resetstickers(),this.on("uianimatesticker",{stickerselector:this.animatesticker}),this.on("mousemove",{stickermediaimageselector:this.animateifhittestchanged}),this.on("click",{stickerlinkselector:this.preventwhenhittesting}),this.on("mouseup",{stickerlinkselector:this.navigateifhittestsucceeds})}),this.before("teardown",this.resetstickers)}e.a=s;var n=i("rw6j"),o=i("+dwm"),a=i("/zmn"),r=i("iamj"),c=i("w3xn"),l=i.n(c),h=object.assign||function(t){for(var e=1;e 0},this.targetisblacklistedtoexpandtweet=function(t,e){var i=["a","button",this.attr.jslinkselector,this.attr.dropdownselector,this.attr.jsadaptivephotoselector,this.attr.playablemediaplayerselector];return t.closest(i.join(),e).length},this.selectedtext=function(){return n.a.getselection()},this.modifierkey=function(t){return t.shiftkey||t.ctrlkey||t.metakey||t.which>1},this.preventfocusonclick=function(t){t.preventdefault()},this.setcookie=function(t,e){object(o.a)("ic",t,{expires:e})},this.after("initialize",function(){this.on("click",{jsmediapreviewselector:this.handlemediapreviewclick,quotetweetselector:this.handletweetclick,jstweetselector:this.handletweetclick}),this.on("uishortcutenter",{quotetweetselector:this.handletweetclick}),this.on("mousedown",{profiletweetactionbuttonselector:this.preventfocusonclick,profiletweetactioncountselector:this.preventfocusonclick,quotetweetselector:this.preventfocusonclick})})}e.a=s;var n=i("mj5m"),o=i("dsp6"),a=i("rbkv"),r=object.assign||function(t){for(var e=1;e \n'),s.b("\n"+i),s.s(s.f("user_color",t,e,1),t,e,0,395,1485,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" a,\n a:hover,\n a:focus,\n a:active {\n color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n }\n\n .u-textusercolor,\n .u-textusercolorhover:hover,\n .u-textusercolorhover:hover .profiletweet-actioncount,\n .u-textusercolorhover:focus {\n color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n }\n\n .u-borderusercolor,\n .u-borderusercolorhover:hover,\n .u-borderusercolorhover:focus {\n border-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n }\n\n .u-bgusercolor,\n .u-bgusercolorhover:hover,\n .u-bgusercolorhover:focus {\n background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n }\n\n .u-dropdownusercolor > li:hover,\n .u-dropdownusercolor > li:focus,\n .u-dropdownusercolor > li > button:hover,\n .u-dropdownusercolor > li > button:focus,\n .u-dropdownusercolor > li > a:focus,\n .u-dropdownusercolor > li > a:hover {\n color: #fff !important;\n background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n }\n\n .u-boxshadowinsetusercolorhover:hover,\n .u-boxshadowinsetusercolorhover:focus {\n box-shadow: inset 0 0 0 5px #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n }\n\n .u-dropdownopenusercolor.dropdown.open .dropdown-toggle {\n color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_light",t,e,1),t,e,0,1575,1935,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-textusercolorlight {\n color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n }\n\n .u-borderusercolorlight,\n .u-borderusercolorlightfocus:focus,\n .u-borderusercolorlighthover:hover,\n .u-borderusercolorlighthover:focus {\n border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n }\n\n .u-bgusercolorlight {\n background-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("rgba_user_color_lighter",t,e,1),t,e,0,2045,2195,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-boxshadowusercolorlighterfocus:focus {\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.05), inset 0 1px 2px "),i.b(i.v(i.f("rgba_user_color_lighter",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lightest",t,e,1),t,e,0,2304,2568,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-textusercolorlightest {\n color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n }\n\n .u-borderusercolorlightest {\n border-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n }\n\n .u-bgusercolorlightest {\n background-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lighter",t,e,1),t,e,0,2671,2929,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-textusercolorlighter {\n color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n }\n\n .u-borderusercolorlighter {\n border-color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n }\n\n .u-bgusercolorlighter {\n background-color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_dark",t,e,1),t,e,0,3025,3202,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-bgusercolordarkhover:hover {\n background-color: #"),i.b(i.v(i.f("user_color_dark",t,e,0))),i.b(" !important;\n }\n\n .u-borderusercolordark {\n border-color: #"),i.b(i.v(i.f("user_color_dark",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_darker",t,e,1),t,e,0,3299,3399,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .u-bgusercolordarkeractive:active {\n background-color: #"),i.b(i.v(i.f("user_color_darker",t,e,0))),i.b(" !important;\n }\n")}),t.pop()),s.b("\n"),s.b("\n"+i),s.b("\n"+i),s.b("\n"+i),s.b("a,\n.btn-link,\n.btn-link:focus,\n.icon-btn,\n"),s.b(".pretty-link b,\n.pretty-link:hover s,\n.pretty-link:hover b,\n.pretty-link:focus s,\n.pretty-link:focus b,\n"),s.b(".metadata a:hover,\n.metadata a:focus,\n"),s.b("a.account-group:hover .fullname,\na.account-group:focus .fullname,\n.account-summary:focus .fullname,\n"),s.b(".message .message-text a,\n.message .message-text button,\n.stats a strong,\n.plain-btn:hover,\n.plain-btn:focus,\n.dropdown.open .user-dropdown.plain-btn,\n.open > .plain-btn,\n#global-actions .new:before,\n.module .list-link:hover,\n.module .list-link:focus,\n"),s.b(".stats a:hover,\n.stats a:hover strong,\n.stats a:focus,\n.stats a:focus strong,\n"),s.b(".find-friends-sources li:hover .source,\n\n"),s.b("\n"+i),s.b(".stream-item a:hover .fullname,\n.stream-item a:focus .fullname,\n"),s.b(".stream-item .view-all-supplements:hover,\n.stream-item .view-all-supplements:focus,\n"),s.b(".tweet .time a:hover,\n.tweet .time a:focus,\n.tweet .details.with-icn b,\n.tweet .details.with-icn .icon,\n"),s.b(".stream-item:hover .original-tweet .details b,\n.stream-item .original-tweet.focus .details b,\n.stream-item.open .original-tweet .details b,\n"),s.b(".client-and-actions a:hover,\n.client-and-actions a:focus,\n"),s.b(".dismiss-btn:hover b,\n"),s.b(".tweet .context .pretty-link:hover s,\n.tweet .context .pretty-link:hover b,\n.tweet .context .pretty-link:focus s,\n.tweet .context .pretty-link:focus b,\n"),s.b(".list .username a:hover,\n.list .username a:focus,\n.list-membership-container .create-a-list,\n.list-membership-container .create-a-list:hover,\n.new-tweets-bar,\n\n"),s.b(".card .list-details a:hover,\n.card .list-details a:focus,\n.card .card-body:hover .attribution,\n.card .card-body .attribution:focus {\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n}\n\n"),s.s(s.f("user_color",t,e,1),t,e,0,6174,12273,"{{ }}") (s.rs(t,e,function(t,e,s){s.s(s.f("logged_in",t,e,1),t,e,0,6191,6771,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" #global-actions > li > a {\n border-bottom-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n }\n\n #global-actions > li:hover > a,\n #global-actions > li > a:focus,\n #global-actions > li.active .text,\n .dashuserdropdown.dropdown-menu .nightmode-toggle .icon,\n .nav.right-actions > li > a:hover,\n .nav.right-actions > li > a:focus {\n color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n }\n\n"),i.s(i.f("web_notifications_badge_on",t,e,1),t,e,0,6597,6737,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(" #global-actions .people.new:before {\n content: none;\n }\n")}),t.pop())}),t.pop()),s.b("\n"+i),s.b(" .foundmediasearch--keyboard .foundmediasearch-focusable.is-focused {\n border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n"),s.b(" .photo-selector:hover .btn,\n .icon-btn:hover,\n .icon-btn:active,\n .icon-btn.active,\n .icon-btn.enabled {\n border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n border-color: "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n"),s.b(" .photo-selector:hover .btn,\n .icon-btn:hover {\n background-image: linear-gradient(rgba(255,255,255,0), "),s.b(s.v(s.f("rgba_user_color_lightest",t,e,0))),s.b(");\n }\n\n .icon-btn.disabled,\n .icon-btn.disabled:hover,\n .icon-btn[disabled],\n .icon-btn[aria-disabled=true] {\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n"),s.b("\n"+i),s.b(" .edgebutton--primary,\n .edgebutton--primary:focus {\n background-color: #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n border-color: transparent;\n }\n\n .edgebutton--primary:hover,\n .edgebutton--primary:active {\n background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n .edgebutton--primary:focus {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n }\n\n .edgebutton--primary:active {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n }\n\n"),s.b("\n"+i),s.b(" .edgebutton--secondary,\n .edgebutton--secondary:hover,\n .edgebutton--secondary:focus,\n .edgebutton--secondary:active {\n border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n .edgebutton--secondary:hover,\n .edgebutton--secondary:active {\n background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(";\n }\n\n .edgebutton--secondary:focus {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n 0 0 0 4px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n }\n\n .edgebutton--secondary:active {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n"),s.b("\n"+i),s.b(" .edgebutton--invertedprimary {\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n }\n\n .edgebutton--invertedprimary:focus {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n }\n\n .edgebutton--invertedprimary:active {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(";\n }\n\n"),s.b("\n"+i),s.b(" .edgebutton--invertedsecondary {\n background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n .edgebutton--invertedsecondary:hover {\n background-color: #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n }\n\n .edgebutton--invertedsecondary:focus {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n }\n\n .edgebutton--invertedsecondary:active {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n 0 0 0 4px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(";\n }\n\n"),s.b("\n"+i),s.b(" .btn:focus,\n .btn.focus,\n .button:focus,\n .emojipicker-item.is-focused,\n .emojipicker .emojicategoryicon:focus,\n .emojipicker-skintone:focus + .emojipicker-skintoneswatch,\n a:focus > img:first-child:last-child,\n button:focus {\n box-shadow:\n 0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n 0 0 2px 4px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n }\n\n .selected-stream-item:focus {\n box-shadow: 0 0 0 3px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n }\n\n"),s.b(' .js-navigable-stream.stream-table-view .selected-stream-item[tabindex="-1"]:focus {\n outline: 3px solid '),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(" !important;\n }\n\n"),s.b(" .js-navigable-stream.stream-table-view .selected-stream-item:focus {\n box-shadow: none;\n }\n\n"),s.b("\n"+i),s.b(" .global-dm-nav.new.with-count .dm-new .count-inner {\n background: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n .global-nav .people .count .count-inner {\n background: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n }\n\n .dropdown-menu li > a:hover,\n .dropdown-menu li > a:focus,\n .dropdown-menu .dropdown-link:hover,\n .dropdown-menu .dropdown-link:focus,\n .dropdown-menu .dropdown-link.is-focused,\n .dropdown-menu li:hover .dropdown-link,\n .dropdown-menu li:focus .dropdown-link,\n .dropdown-menu .selected a,\n .dropdown-menu .dropdown-link.selected {\n background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n }\n\n /* for items in typeahead dropdown menu on logged in pages */\n .dropdown-menu .typeahead-items li > a:focus,\n .dropdown-menu .typeahead-items li > a:hover,\n .dropdown-menu .typeahead-items .selected,\n .dropdown-menu .typeahead-items .selected a {\n background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(" !important;\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n }\n\n .typeahead a:hover,\n .typeahead a:hover strong,\n .typeahead a:hover .fullname,\n .typeahead .selected a,\n .typeahead .selected strong,\n .typeahead .selected .fullname,\n .typeahead .selected .icon--close {\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n }\n")}),t.pop()),s.b("\n"+i),s.b(".home-tweet-box,\n.livevideo-tweetbox,\n.retweetdialog-commentbox {\n background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(";\n}\n\n.top-timeline-tweetbox .timeline-tweet-box .tweet-form.condensed .tweet-box {\n color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n}\n"),s.b(".richeditor,\n.tweetboxattachments {\n border-color: #"),s.b(s.v(s.f("user_color_lighter",t,e,0))),s.b(';\n}\n\ninput:focus,\ntextarea:focus,\ndiv[contenteditable="true"]:focus,\ndiv[contenteditable="true"].fake-focus,\ndiv[contenteditable="plaintext-only"]:focus,\ndiv[contenteditable="plaintext-only"].fake-focus {\n border-color: #'),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n box-shadow: inset 0 0 0 1px "),s.b(s.v(s.f("rgba_user_color_medium",t,e,0))),s.b(';\n}\n\n.tweet-box textarea:focus,\n.tweet-box input[type=text],\n.currently-dragging .tweet-form.is-droppable .tweet-drag-help,\n.tweet-box[contenteditable="true"]:focus,\n.richeditor.is-fakefocus,\n.richeditor.is-fakefocus ~ .tweetboxattachments {\n border-color: #'),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n box-shadow: 0 0 0 1px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n}\n\n.momentcapsuleitem.selected-stream-item:focus {\n box-shadow: 0 0 0 3px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n}\n\n"),s.b("\n"+i),s.b("s,\n.pretty-link:hover s,\n.pretty-link:focus s,\n.stream-item-activity-notification .latest-tweet .tweet-row a:hover s,\n.stream-item-activity-notification .latest-tweet .tweet-row a:focus s {\n"),s.s(s.f("user_color",t,e,1),t,e,0,13752,13783,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color",t,e,1),t,e,1,0,0,"")||s.b(" color: #66b5d2;\n"),s.b("}\n\n"),s.b(".vellip,\n.vellip:before,\n.vellip:after,\n.conversation-module > li:after,\n.conversation-module > li:before,\n.threadedconversation--lonetweet:after,\n.threadedconversation-tweet:not(.is-hiddenancestor) ~ .threadedconversation-tweet:before,\n.threadedconversation-tweet:after,\n.threadedconversation-morereplies:before,\n.threadedconversation-viewother:before,\n.threadedconversation-unavailabletweet:before,\n.threadedconversation-unavailabletweet:after,\n.threadedconversation--permalinktweetwithancestors:before,\n.mini-avatar-with-thread:before,\n.permalink.self-thread-permalink-with-descendant .permalink-tweet-container:after,\n.permalink.self-thread-permalink-with-descendant .inline-reply-tweetbox-container:after {\n"),s.s(s.f("user_color_light",t,e,1),t,e,0,14681,14725,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color_light",t,e,1),t,e,1,0,0,"")||s.b(" border-color: #66b5d2;\n"),s.b("}\n\n"),s.b(".tweet .sm-reply,\n.tweet .sm-rt,\n.tweet .sm-fav,\n.tweet .sm-image,\n.tweet .sm-video,\n.tweet .sm-audio,\n.tweet .sm-geo,\n.tweet .sm-in,\n.tweet .sm-trash,\n.tweet .sm-more,\n.tweet .sm-page,\n.tweet .sm-embed,\n.tweet .sm-summary,\n.tweet .sm-chat,\n"),s.b(".timelines-navigation .active .profile-nav-icon,\n.timelines-navigation .profile-nav-icon:hover,\n.timelines-navigation .profile-nav-link:focus .profile-nav-icon,\n"),s.b(".sm-top-tweet {\n"),s.s(s.f("user_color",t,e,1),t,e,0,15472,15514,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color",t,e,1),t,e,1,0,0,"")||s.b(" background-color: #6684b4;\n"),s.b("}\n\n"),s.s(s.f("mini_profile_banner_url_for_web",t,e,1),t,e,0,15636,15757,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(".enhanced-mini-profile .mini-profile .profile-summary {\n background-image: url("),i.b(i.v(i.f("mini_profile_banner_url_for_web",t,e,0))),i.b(");\n}\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color",t,e,1),t,e,0,15810,16519,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" #global-tweet-dialog .modal-header,\n #tweetstorm-dialog .modal-header {\n border-bottom: solid 1px "),i.b(i.v(i.f("rgba_user_color_lighter",t,e,0))),i.b(";\n }\n\n #global-tweet-dialog .modal-tweet-form-container,\n #tweetstorm-dialog .modal-body {\n background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n background: "),i.b(i.v(i.f("rgba_user_color_lightest",t,e,0))),i.b(";\n }\n\n .tweetstormdialog-reply-context .tweet-box-avatar:after,\n .tweetstormdialog-reply-context .tweet-box-avatar:before,\n .tweetstormdialog-tweet-box .tweet-box-avatar:after,\n .tweetstormdialog-tweet-box .tweet-box-avatar:before {\n border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(";\n }\n\n .global-nav .search-input:focus,\n .global-nav .search-input.focus {\n border: 2px solid #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n }\n}\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lightest",t,e,1),t,e,0,16560,16640,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" .inline-reply-tweetbox {\n background-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(";\n }\n")}),t.pop()),s.b("\n"+i),s.b(" \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},ockb:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({locationpickeriframeselector:".locationpickerdialog-iframe",suggestedlocationselector:".locationpickerdialog-suggestedlocation",mainaddresslineselector:".locationpickerdialog-mainaddressline",secondaryaddresslineselector:".locationpickerdialog-secondaryaddressline",titleselector:".locationpickerdialog-title",submitbuttonselector:"#location-picker-submit-button",footerselector:".locationpickerdialog-footer",foursquarevendorinfoselector:".locationpickerdialog-foursquarevendorinfo",yelpvendorinfoselector:".locationpickerdialog-yelpvendorinfo",isshowingattributionclass:"is-showingattribution"}),this.opendialog=function(e,i){var s=t("html").attr("lang"),o="/i/locations/share?lang="+s;i=i||{},e=e||{};var a=i .src||o;this.attr.loggedin?(this.select("locationpickeriframeselector").attr("src",a),this.on(window,"message",this.proxyiframeevents),this.open(),this.$button=this.select("submitbuttonselector"),this.$button.addclass("disabled").prop("disabled",!0),this.state={type:"uilocationattachmentclicked"===e.type?"location_attachment":"location_picker"},"location_picker"===this.state.type?(this.state.qrid=i.qr_id,this.state.conversationid=i.conversation_id,this.$button.addclass("primary-btn").text(object(n.default)("send")),this.select("titleselector").text(object(n.default)("share location"))):(this.handlepickertextupdate(null,i),this.$button.removeclass("primary-btn").text(object(n.default)("view related tweets")),this.updatedialogtitle(i))):this.trigger(document,"uiopensignupdialog")},this.updatedialogtitle=function(t){var e=t.blackline,i=e||object(n.default)("shared location");this.select("titleselector").text(i)},this.resetdialog=function(t,e){this.off(window,"message",this.proxyiframeevents),this.select("locationpickeriframeselector").attr("src","about:blank"),this.select("titleselector").empty(),this.select("mainaddresslineselector").empty(),this.select("secondaryaddresslineselector").empty(),this.select("footerselector").removeclass(this.attr.isshowingattributionclass),this.select("foursquarevendorinfoselector").addclass("u-hidden"),this.select("yelpvendorinfoselector").addclass("u-hidden")},this.handlepickertextupdate=function(t,e){e=e||{};var i=this.select("suggestedlocationselector"),s=i.find(".locationpickerdialog-mainaddressline"),n=i.find(".locationpickerdialog-secondaryaddressline"),o=!e.blackline !e.grayline,a=o?"":e.blackline||e.grayline,r=!e.blackline||!e.grayline,c=r?"":e.grayline;s.toggleclass("u-hidden",o).text(a),n.toggleclass("u-hidden",r).text(c)},this.handlelocationupdate=function(t,e){this.state.locationdata=e||{},this.$button.removeclass("disabled").prop("disabled",!1),e.attribution .updateattribution(e.attribution)},this.updateattribution=function(t){var e=this.select("footerselector"),i=this.select("foursquarevendorinfoselector"),s=this.select("yelpvendorinfoselector"),n="foursquare"===t,o="yelp"===t,a=n||o;e.toggleclass(this.attr.isshowingattributionclass,a),i.toggleclass("u-hidden",!n),s.toggleclass("u-hidden",!o)},this.cansend=function(){return this.state.locationdata},this.handleclick=function(){"location_picker"===this.state.type?(this.sendlocation(),this.close()):this.viewrelatedtweets(),this.trigger("uiscribelocationdialogbuttonclick",this.state)},this.viewrelatedtweets=function(){var t=this.state.locationdata.bestplaceid||"",e="place:"+t,i="/search?"+u.a.encode({q:e});window.open(i,"_blank")},this.sendlocation=function(){var t=this.state.locationdata,e={conversation_id:this.state.conversationid,"quick_reply_response[location][id]":this.state.qrid};"coord"===t.type?l.default.push(e,{"location[shared_coordinate][lat]":t.lat,"location[shared_coordinate][lon]":t.lon}):l.default.push(e,{"location[shared_place][place][id]":t.placeid}),this.trigger("uidmsendmessage",e)},this.after("initialize",function(){this.on(document,"uilocationqrctaclicked uisharelocation uilocationattachmentclicked",this.opendialog),this.on("uidialogclosed",this.resetdialog),this.on("uib2clocationpickertextupdate",this.handlepickertextupdate),this.on("uib2clocationpickerupdateselectedlocation uib2clocationattachmentinit",this.handlelocationupdate),this.on("click",{submitbuttonselector:object(h.a)(this.handleclick,this.cansend)})})}var n=i("0d4m"),o=i("dbjh"),a=i("uhc7"),r=i("zvxx"),c=i("3odc"),l=i("yzit"),h=i("4oun"),d=i("tbnr"),u=i("tx0g"),p=object(o.default)(s,a.a,r.a,c.a,d.a);e.a=p}).call(e,i("4ksj"))},oh3l:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("is_translator",t,e,1),t,e,0,18,121,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' translator ')}),t.pop()),s.s(s.f("is_translation_moderator",t,e,1),t,e,0,175,288,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' translation moderator ')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},orcd:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' '),s.b(s.v(s.f("title",t,e,0))),s.b(" "),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},p3ed:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({top:90,closeonotherdialogopened:!0,timelineselectorselector:".timeline-selector",wasmemberselector:".timeline-item .was-member",wasnotmemberselector:".timeline-item .was-not-member",submitselector:".js-submit"}),this.opendialog=function(t,e){var i=l.a.render({});this.$node.html(i),this.$dialog=this.$dialogcontainer.find(this.attr.modalselector),this.tweetid=e.tweetid,this.impressionid=e.impressionid,this.trigger("uineedsfullcustomtimelines",{tweetid:e.tweetid}),this.scribe({component:"curate_dialog",action:"open"},e),this.open()},this.renderfulltimelineslist=function(t,e){this.select("timelineselectorselector").html(e.html)},this.submitchanges=function(){function e(e){return e.map(function(){return t(this).attr("data-timeline-id")}).get()}this.select("submitselector").prop("disabled",!0);var i=this.select("wasmemberselector").filter(":not(:checked)"),s=this.select("wasnotmemberselector").filter(":checked"),n={removed:e(i),added:e(s),tweetid:this.tweetid,impressionid:this.impressionid};this.trigger("uicuratetweets",n)},this.after("initialize",function(){this.on(document,"uiopencuratedialog",this.opendialog),this.on(document,"datagotfullcustomtimelines",this.renderfulltimelineslist),this.on(document,"datatweetscurated",this.close),this.on("click",{submitselector:this.submitchanges})})}var n=i("dbjh"),o=i("uhc7"),a=i("y4bj"),r=i("3odc"),c=i("zbkd"),l=i.n(c);e.a=object(n.default)(o.a,s,a.a,r.a)}).call(e,i("4ksj"))},p4ep:function(t,e,i){"use strict";function s(){this.defaultattrs({noshowerror:!0}),this.updatename=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_name",data:{id:e.conversation_id,name:e.name},success:r(t.target,["datadmconversationresult","dataupdateconversationnamesuccess"]),error:r(t.target,"dataupdateconversationnamefailure")})},this.after("initialize",function(){this.on("uiupdateconversationname",this.updatename)})}var n=i("dbjh"),o=i("vtwx"),a=i("ldny"),r=a.a.triggerfn;e.a=object(n.default)(s,o.a)},pafg:function(t,e,i){"use strict";(function(t){function s(e){this.attr={id:null,ttl_ms:216e5,limit:3,version:1,storagelist:"conciergelist",storageversion:"conciergeversion",prefetchlimit:3,localqueriesenabled:!1,remotequeriesenabled:!1,prefetchpath:"/i/search/typeahead.json",prefetchtype:"oneclick",remotepath:"/i/search/typeahead.json",remotetype:"oneclick",basepath:"/search?",scribemap:{images:"photos",videos:"video",news:"news",users:"people"},namemap:{"images near":object(a.default)("photos near you"),"images follow":object(a.default)("photos from people you follow"),"videos near":object(a.default)("videos near you"),"videos follow":object(a.default)("videos from people you follow"),"news near":object(a.default)("news near you"),"news follow":object(a.default)("news shared by people you follow"),"users near":object(a.default)("people near you")},modepathmap:{images:"mode=photos",videos:"mode=videos",news:"mode=news",users:"mode=users"},locationfilterpath:"near=me",followfilterpath:"f=follows",querysourcepath:"src=taoc",querysource:"typeahead_oneclick"},this.attr=o.default.merge(this.attr,e),this.after=t.noop,this.defaultattrs=t.noop,n.default.mixin(this,[c.a,l.a]),this.getstoragekeys=function(){return[this.attr.storageversion,this.attr.storagelist]},this.getprefetchcount=function(){return this.attr.prefetchlimit},this.ismetadataexpired=function(){return this.storage.getitem(this.attr.storageversion)!==this.attr.version},this.getdatafromlocalstorage=function(){this.conciergelist=this.storage.getitem(this.attr.storagelist)||this.conciergelist},this.processresults=function(t){if(!t||!t[this.attr.prefetchtype])return void this.usestaledata();t[this.attr.prefetchtype].foreach(function(t){var e=this.constructconciergesuggestion(t);e .conciergelist.push(e)},this),this.storage.setitem(this.attr.storagelist,this.conciergelist,this.attr.ttl_ms),this.storage.setitem(this.attr.storageversion,this.attr.version,this.attr.ttl_ms)},this.getlocalsuggestions=function(t,e){e(t ""!==t.query?[]:this.conciergelist.slice(0,this.attr.limit))},this.requiresremotesuggestions=function(t){return!(!t||""!==t.query) .attr.remotequeriesenabled},this.processremotesuggestions=function(t,e,i){var s=i[this.attr.id]||[];if(e[this.attr.remotetype])for(var n=e[this.attr.remotetype],o=0;o =this.attr.limit)break}}return i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructconciergesuggestion=function(t){var e=t.filter,i=!!t.location,s=!!t.follow,n=t.topic,o=this.constructname(e,i,s,n);return o?{topic:n,searchpath:this.constructsearchpath(e,i,s,n),name:o,querysource:this.attr.querysource,searchdetails:this.constructscribedetails(e,i,s,n)}:null},this.constructname=function(t,e,i,s){var n=e?" near":"",o=i?" follow":"";return s||this.attr.namemap[t+n+o]},this.constructsearchpath=function(t,e,i,s){var n=[this.attr.querysourcepath],o=t?this.attr.modepathmap[t]:"";return o .push(o),e .push(this.attr.locationfilterpath),i .push(this.attr.followfilterpath),s .push("q="+encodeuricomponent(s)),this.attr.basepath+n.join(" ")},this.constructscribedetails=function(t,e,i,s){var n={result_type:this.attr.scribemap[t]||"everything",social_filter:i?"following":"all"};return s (n.query=s),e (n.near="me"),n},this.initialize=function(){var t=object(r.a)({withexpiry:!0});this.storage=new t("typeahead"),this.conciergelist=[],this.attr.localqueriesenabled .loaddata(this.attr.prefetchpath,this.attr.prefetchtype)},this.initialize()}var n=i("q9/c"),o=i("yzit"),a=i("0d4m"),r=i("rwgq"),c=i("vtwx"),l=i("8xkx");e.a=s}).call(e,i("4ksj"))},pb0g:function(t,e,i){"use strict";(function(t){function s(){var e={},i={};this.defaultattrs({mediaselector:".js-adaptive-photo,.tweet-media-img-placeholder,.adaptivestreamgridimage,.profileavatar-container,.profilecardmini-avatar,.momentmediaitem-entity--image,.profilestreamgridimage",medianewscamerabadgeselector:".adaptivemedia-newscamerabadge",adaptivemediaselector:".adaptivemedia",galleryparentselector:".gallery",gallerymediaselector:".gallery-media",gallerytweetselector:".gallerytweet",gallerytweetfooterselector:".gallerytweet .stream-item-footer",gallerynewscamerabadgeselector:".gallerytweet-newscamerabadge",closeselector:".js-close, .gallery-closetarget",galleryselector:".gallery-content",imageselector:".media-image",navselector:".gallerynav",prevselector:".gallerynav--prev",nextselector:".gallerynav--next",itemtype:"tweet",tweetlessgalleryclass:"without-tweet",hasstickersclass:"is-stickers"}),this.clearcache=function(){e={},i={}},this.isopen=function(){return t("body").hasclass("gallery-enabled")},this.open=function(e,i){this.calculatescrollbarwidth(),!this.isopen() .length (e .timelineselector?this.$timeline=i.closest(e.timelineselector):this.$timeline=i.parent(),this.tweetfooterselector=this.attr.gallerytweetfooterselector,this.cleartweet(),this.setdominantcolorformedia(i),o.a.resetminsize(this.$gallery),this.render(i),t("body").addclass("gallery-enabled"),this.$gallery.addclass("show-controls"),this.on(this.$gallery,"mouseout",this.enabletweetfade),this.trigger("uigalleryopened",e))},this.opengallery=function(e,i){var s=t(e.target).closest(this.attr.mediaselector);this.open(i,s)},this.opencardimagegallery=function(e,i){var s=t(" ",{"data-resolved-url-large":i.imageurl,"data-status-id":i.tweetid});this.open(i,s)},this.handleclose=function(t){this.isopen() (t.stoppropagation(),this.closegallery())},this.closegallery=function(){t("body").hasclass("gallery-enabled") (t("body").removeclass("gallery-enabled"),this.setdominantcolorformedia(),this.select("gallerymediaselector").empty(),this.resetstickers(),this.hidenav(),this.enablenav(!1,!1),this.off(window,"resize",this.debouncedresize),this.disabletweetfade(),this.off(this.$gallery,"mouseout",this.enabletweetfade),delete this.$current,this.trigger("uigalleryclosed"),this.trigger("uidialogclosed"))},this.render=function(t){this.resetstickers(),this.$current=t,this.rendernav(),this.trigger(t,"uigallerymediaload"),this.rendermedia(t)},this.rendernav=function(){if(this.$current){var t=this.$timeline.find(this.attr.mediaselector),e=t.index(this.$current),i=t.slice(0,e),s=t.slice(e+1),n=s.length>0,o=i.length>0;this.enablenav(n,o),n||o?this.shownav():this.hidenav()}},this.cleartweet=function(){this.select("gallerytweetselector").empty()},this.flushtweet=function(i){var s=this.gettweetid(t(i.target));s e[s]},this.gettweet=function(t){if(t)if(e[t]){var i=e[t];this.rendertweet(t,i.tweethtml,i.tweetstickers)}else{this.$current .gettweetid(this.$current)===t .select("gallerymediaselector").find(".media-image,iframe").hide();var s={id:t,modal:"gallery",hasstickers:a.a.getdecidervalue("stickersexperience")};this.trigger("uigettweet",s)}},this.gottweet=function(t,s){"id"in s "tweet_html"in s "sourceeventdata"in s "gallery"===s.sourceeventdata.modal (e[s.id]={tweethtml:s.tweet_html,tweetstickers:s.tweet_stickers},s.sourceeventdata.promotedbadgehtml (i[s.id]=s.sourceeventdata.promotedbadgehtml),this.rendertweet(s.id,s.tweet_html,s.tweet_stickers))},this.movedropdowntoactionlist=function(t){var e=t.find(".profiletweet-action--more"),i=t.find(".stream-item-footer .profiletweet-actionlist");e.appendto(i)},this.rendertweet=function(e,s,n){if(this.$current .gettweetid(this.$current)===e.tostring()){var a=this.select("gallerytweetselector"),r=this.select("gallerymediaselector").find(".media-image,iframe");a.html(s);var c=i[e];if(c .find(".stream-item-footer").prepend(t(c)),this.movedropdowntoactionlist(a),r.length (r.show(),o.a.resizemedia(r,this.$gallery,!1,this.tweetfooterselector),this.applydominantcolortoborder()),n){var l=this.$timeline.find(this.attr.mediaselector),h=l.filter('[data-tweet-id="'+e+'"]');h.length||(h=l.not("[data-tweet-id]"));var d=h.index(this.$current);d>=0 [d] (this.$gallery.addclass(this.attr.hasstickersclass),this.replacemediawithimageandstickers(n[d]))}this.trigger("uineedupdateinjectedtweetstats")}},this.gettweetid=function(t){return t.attr("data-status-id")?t.attr("data-status-id"):t.closest("[data-tweet-id]").attr("data-tweet-id")},this.getallindir=function(e,i){var s=void 0,n="prev"===i?-1:1,o=this.$timeline.find(this.attr.mediaselector),a=o.index(e)+n;return a>-1 (s=o.slice(a)),s||t()},this.getindir=function(t,e){return this.getallindir(t,e).first()},this.rendermedia=function(t){t.attr("data-source-url")?this.loadvideo(t):this.loadimage(t)},this.medialoaded=function(t){if(this.isopen()){var e=this.gettweetid(t);this.setdominantcolorformedia(t),e?(this.gettweet(e),this.$gallery.closest(this.attr.galleryparentselector).removeclass(this.attr.tweetlessgalleryclass)):(this.cleartweet(),this.$gallery.closest(this.attr.galleryparentselector).addclass(this.attr.tweetlessgalleryclass));var i=t.closest(this.attr.adaptivemediaselector).find(this.attr.medianewscamerabadgeselector),s=this.$gallery.closest(this.attr.galleryparentselector).find(this.attr.gallerynewscamerabadgeselector);i.length?s.html(i.clone()):s.empty(),this.trigger("uigallerymedialoaded",{url:this.getlargemediaurl(t),id:t.attr("data-status-id")})}},this.mediafailed=function(t){this.trigger("uigallerymediafailed",{url:this.getlargemediaurl(t),id:t.attr("data-status-id")}),t.remove(),this.next()},this.loadimage=function(e){var i=this;this.$gallery.removeclass(["video","is-hittesting",this.attr.hasstickersclass].join(" "));var s=e.find("img").attr("alt"),n=t(" ",{alt:s,addclass:"media-image"});n.on("load",function(t){e.attr("loaded",!0),i.select("gallerymediaselector").html(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),o.a.resizemedia(n,i.$gallery,!1,i.tweetfooterselector,!0),i.$current=e,i.medialoaded(e)}),n.on("error",function(){return i.mediafailed(e)}),n.attr("src",this.getlargemediaurl(e))},this.fixsnappyurl=function(t){var e=t.attr("data-source-url"),i=/https:\/\/www.snappytv.com\/tc\/(\d+)\?autoplay=true =(\d+) =(\d+)/;if(i.test(e)){var s=2*t.attr("data-height"),n=2*t.attr("data-width");e=e.replace(i,"https://www.snappytv.com/tc/$1?autoplay=true ="+s+" ="+n),t.attr("data-source-url",e)}},this.loadvideo=function(e){var i=t(" ");this.fixsnappyurl(e),i.height(2*e.attr("data-height")).width(2*e.attr("data-width")).attr("data-height",2*e.attr("data-height")).attr("data-width",2*e.attr("data-width")).attr("src",e.attr("data-source-url")),e.attr("loaded",!0),this.select("gallerymediaselector").empty().append(i),this.$current=e,this.gettweet(e.attr("data-status-id")),this.$gallery.addclass("video").removeclass(this.attr.hasstickersclass)},this.prev=function(){this.gotomedia("prev"),this.trigger("uigallerynavigateprev")},this.next=function(){this.gotomedia("next"),this.trigger("uigallerynavigatenext")},this.gotomedia=function(t){if(this.$current){var e=this.getindir(this.$current,t);e.length .render(e)}},this.shownav=function(){this.select("navselector").show()},this.hidenav=function(){this.select("navselector").hide()},this.enabletweetfade=function(){this.select("gallerytweetselector").addclass("enable-fade")},this.disabletweetfade=function(){this.select("gallerytweetselector").removeclass("enable-fade")},this.enablenav=function(t,e){t?this.select("nextselector").addclass("enabled"):this.select("nextselector").removeclass("enabled"),e?this.select("prevselector").addclass("enabled"):this.select("prevselector").removeclass("enabled")},this.getlargemediaurl=function(t){var e=t.attr("data-image-url");return t.attr("data-resolved-url-large")||e +":large"},this.throttle=function(t,e,i){var s=!1;return function(){s||(t.apply(i,arguments),s=!0,settimeout(function(){return s=!1},e))}},this.hidecontrols=function(){this.$gallery.removeclass("show-controls")},this.after("initialize",function(){this.on("uireplytotweet","uiopenreplydialog"),this.on("mousemove",this.hidecontrols),this.on(document,"datadiddeletetweet",this.closegallery),this.on(document,"datagotmoremediatimelineitems",this.rendernav),this.on(document,"uiopengallery",this.opengallery),this.on(document,"uiopencardimagegallery",this.opencardimagegallery),this.on(document,"uioverlaynavigate uiclosegallery",this.closegallery),this.on(document,"uishortcutesc",this.handleclose),this.on(window,"popstate",this.closegallery),this.on(document,"uishortcutleft",this.throttle(this.prev,200,this)),this.on(document,"uishortcutright",this.throttle(this.next,200,this)),this.on(document,"datagottweet",this.gottweet),this.on(document,"datafailedtogettweet",this.cleartweet),this.on("click",{prevselector:this.prev,nextselector:this.next,closeselector:this.handleclose}),this.on(document,"uididretweet uididunretweet uididfavoritetweet uididunfavoritetweet",this.flushtweet),this.$gallery=this.select("galleryselector")})}var n=i("dbjh"),o=i("hotm"),a=i("iamj"),r=i("xgwv"),c=i("e+ft"),l=i("mrbi"),h=i("nnea"),d=i("mrdm"),u=i("hker"),p=object(n.default)(s,d.a,r.a,l.a,h.a,c.a,u.a);e.a=p}).call(e,i("4ksj"))},pmre:function(t,e,i){"use strict";(function(t){function s(){var e=void 0,i="onwebkitfullscreenchange"in document;this.getfullscreenelement=function(){return document.webkitfullscreenelement},this.getyoffset=function(){return o.a.getglobalyoffset()},this.supportsfullscreen=function(){return i},this.isenteringfullscreen=function(){return boolean(this.getfullscreenelement())},this.savefullscreenelement=function(){e=this.getfullscreenelement()},this.scrolltofullscreenelement=function(){if(e){var i=t(e).parents('[data-component-context="tweet"]');i "function"==typeof i.offset .offset() .scrollto(window.scrollx,i.offset().top-o.a.getglobalyoffset()),e=void 0}},this.changefullscreen=function(t,e){this.isenteringfullscreen()?this.savefullscreenelement():this.scrolltofullscreenelement()},this.after("initialize",function(){this.supportsfullscreen() .on(document,"webkitfullscreenchange",this.changefullscreen)})}var n=i("dbjh"),o=i("reqr"),a=object(n.default)(s);e.a=a}).call(e,i("4ksj"))},pnul:function(t,e,i){"use strict";e.a={gif:"gif",image:"image",video:"video"}},preb:function(t,e,i){"use strict";(function(t){function i(){this.defaultattrs({missingtweetslinkselector:"a.missing-tweets-link",missingtweetsbarselector:".missing-tweets-bar",focaltweetselector:".original-tweet",toplevelstreamitemselector:".stream-item:not(.conversation-tweet-item)",conversationtweetclass:"conversation-tweet",detachedconversationclass:"detached-conversation",expandingconversationclass:"expanding-conversation",selectedselector:".selected-stream-item",awaitingancestorsclass:".conversation-awaiting-ancestors"}),this.handleexpandconversationandloadmissingtweets=function(t){t.preventdefault();var e=this.streamitemfromevent(t),i=this.getfocalpoint(e),s=i.data("permalink-path"),n=i.data("conversation-id");s .trigger("uinavigate",{href:s,conversation_id:n})},this.streamitemfromevent=function(e){return t(e.target).closest(this.attr.toplevelstreamitemselector)},this.getfocalpoint=function(t){return t.find(this.attr.focaltweetselector)},this.gettweetid=function(e){return t(e).find(".tweet").attr("data-tweet-id")},this.notifyconversationmutated=function(e,i){var s=t(e.target),n=s.closest(this.attr.conversationmoduleselector);n.length .trigger(n,"uiconversationmoduleupdated")},this.after("initialize",function(){this.on("click",{missingtweetslinkselector:this.handleexpandconversationandloadmissingtweets}),this.on("uishortcutenter",{missingtweetsbarselector:this.handleexpandconversationandloadmissingtweets}),this.on("uitweetinserted uibeforetweetremoved",this.notifyconversationmutated)})}e.a=i}).call(e,i("4ksj"))},prwu:function(t,e,i){"use strict";(function(t){function i(){this.defaultattrs({condensable:!1,condensedclass:"condensed"}),this.iscondensed=function(){return this.attr.condensable .$node.hasclass(this.attr.condensedclass)},this.canbecondensed=function(){return this.attr.condensable !this.$node.hasclass(this.attr.condensedclass)},this.iswithincontainer=function(e){return t.contains(this.containerelement,e)},this.expand=function(t){var e=this;this.iscondensed() (this.$node.removeclass(this.attr.condensedclass),this.trigger("uitweetboxexpanded"),this.validateaddtweetbutton(),void 0!==this.cursorposition (function(){return e.setcursorposition(e.cursorposition)}),t .trigger("uicomposerresetandfocus"))},this.getcondensedtext=function(){return void 0===this.condensedtext (this.condensedtext=void 0!==this.attr.condensedtext?this.attr.condensedtext:this.$node.attr("data-condensed-text")||""),this.condensedtext},this.condense=function(){this.$node.addclass(this.attr.condensedclass),this.$text.blur(),this.resettweettext(),this.trigger("uitweetboxcondensed")},this.condenseifnotactive=function(){var t=this;settimeout(function(){t.canbecondensed() !t.iswithincontainer(document.activeelement) (t.detectupdatedtext(),t.trigger("uihideautocomplete"),t.isempty() .condense())},0)},this.condenseonmousedown=function(t){this.canbecondensed() (this.checkcondenseonmouseup=!0)},this.condenseonmouseup=function(){this.checkcondenseonmouseup (this.checkcondenseonmouseup=!1,this.condenseifnotactive())},this.condenseonfocusout=function(){this.checkcondenseonmouseup||this.condenseifnotactive()},this.expandonfocusin=function(){this.expand(!0)},this.around("resettweettext",function(t){this.iscondensed()?this.setvisibletext(this.getcondensedtext()):t()}),this.around("settweetboxoverrides",function(t,e,i){t(e,i),this.condensedtext=i?i.condensedtext:void 0,i .iscondensed() .setvisibletext(this.getcondensedtext())}),this.around("isempty",function(t){return this.iscondensed() .getvisibletext().trim()===this.getcondensedtext().trim()||t()}),this.after("clear",function(){this.canbecondensed() .condense()}),this.after("initialize",function(){if(this.containerelement=t(this.attr.condensecontainer||this.$node)[0],this.attr.condensable){this.on(this.$text,"focusin",this.ignoreduringfakefocus(this.expandonfocusin)),this.on(this.containerelement,"focusout",this.ignoreduringfakefocus(this.condenseonfocusout)),this.on(document,"mousedown",this.condenseonmousedown),this.on(document,"mouseup",this.condenseonmouseup);var e=this.hasfocus();if(e){var i=this.getvisibletext(),s=this.getcondensedtext();s !i.indexof(s) .setvisibletext(i.replace(s,this.defaulttext))}!e .isempty()||this.expand(!1)}})}e.a=i}).call(e,i("4ksj"))},pszh:function(t,e,i){"use strict";var s=i("+dwm"),n=i("p2na"),o=i("eyue"),a={getorientation:function(t){return new promise(function(e,i){return o.a.detectorientation(t,e)})},drawimagewithorientation:function(t,e,i,s,n){switch(t.save(),n){case o.a.top_right:t.scale(-1,1),t.drawimage(e,-i,0,i,s);break;case o.a.bottom_right:t.rotate(math.pi),t.drawimage(e,-i,-s,i,s);break;case o.a.bottom_left:t.scale(1,-1),t.drawimage(e,0,-s,i,s);break;case o.a.left_top:t.translate(i/2,s/2),t.rotate(math.pi/2),t.scale(1,-1),t.drawimage(e,-s/2,-i/2,s,i);break;case o.a.right_top:t.translate(i/2,s/2),t.rotate(math.pi/2),t.drawimage(e,-s/2,-i/2,s,i);break;case o.a.right_bottom:t.translate(i/2,s/2),t.rotate(math.pi/2),t.scale(-1,1),t.drawimage(e,-s/2,-i/2,s,i);break;case o.a.left_bottom:t.translate(i/2,s/2),t.rotate(-math.pi/2),t.drawimage(e,-s/2,-i/2,s,i);break;default:t.drawimage(e,0,0,i,s)}t.restore()},widthandheightfororientation:function(t,e){return e===o.a.left_top||e===o.a.right_top||e===o.a.right_bottom||e===o.a.left_bottom?{width:t.height,height:t.width}:{width:t.width,height:t.height}},progressiveresizeroughpass:function(t,e,i){for(var s=t,n=void 0;s.width/2>e||s.height/2>i;)n=document.createelement("canvas"),n.width=s.width/2,n.height=s.height/2,n.getcontext("2d").drawimage(s,0,0,s.width/2,s.height/2),s=n;return s},progressiveresize:function(t,e,i){var o=this.progressiveresizeroughpass(t,e,i),a=document.createelement("canvas");a.width=e,a.height=i,a.getcontext("2d").drawimage(o,0,0,e,i);var r=a.todataurl("image/jpeg"),c=e>n.a.max_dimension||i>n.a.max_dimension,l=s.a.getdatauriobjectsize(r)>s.a.max_upload_file_size,h=.8;return c||l?(c (h=e>i?n.a.max_dimension/e:n.a.max_dimension/i),this.progressiveresize(t,e*h,i*h)):s.a.getblobfromdatauri(r)},resize:function(t){var e=this;return new promise(function(i,s){n.a.hascanvas()?e.getorientation(t).then(e.resizeworker.bind(e,t)).then(i).catch(s):i(t)})},resizeworker:function(t,e){var i=this,a=new image,r=s.a.getobjecturl(t);return new promise(function(c,l){a.onload=function(r){var h=i.widthandheightfororientation(a,e),d=h.width,u=h.height;if(!d||!u)return l(r);if(!(t.size>s.a.max_upload_file_size||d>n.a.max_dimension||u>n.a.max_dimension||e!==o.a.top_left !==o.a.unknown))return c(t);var p=document.createelement("canvas");p.width=d,p.height=u;var f=p.getcontext("2d");i.drawimagewithorientation(f,a,d,u,e),c(i.progressiveresize(p,d,u))},a.onerror=l,a.src=r}).then(function(t){return s.a.revokeobjecturl(r),t}).catch(function(t){throw s.a.revokeobjecturl(r),t})}};e.a=a},"pul/":function(t,e,i){"use strict";function s(){o.default.mixin(this,[r.a]),this.caret=n.a,this.defaultattrs({textselector:"textarea.tweet-box",textfakefocusclass:"fake-focus"}),this.hasfakefocus=function(){return this.$text.hasclass(this.attr.textfakefocusclass)},this.togglefakefocus=function(t){this.$text.toggleclass(this.attr.textfakefocusclass,!!t)},this.ignoreduringfakefocus=function(t){var e=this;return function(){if(!e.$text.hasclass(e.attr.textfakefocusclass))return t.apply(this,arguments)}},this.hasfocus=function(){return document.activeelement===this.$text[0]||this.hasfakefocus()},this.getvisibletext=function(){return this.cleanedtext||""},this.setvisibletext=function(t){this.detectupdatedtext(!1,t)},this.addhiddentext=function(t){return t},this.cleantext=function(t){return t},this.detectupdatedtext=function(t,e){void 0===e?e=this.$text.val():this.$text.val(e);var i=n.a.getposition(this.$text[0]);(e!==this.prevtext||t) (this.prevtext=e,this.updatecleanedtextandposition(this.cleantext(e),i)),this.detectupdatedcursorposition(i)},this.updatecleanedtextandposition=function(t,e){this.cleanedtext=t,this.trigger("uitextchanged",{text:t,position:math.min(e,t.length)})},this.detectupdatedcursorposition=function(t){(t=math.min(t,(this.cleanedtext||"").length))!==this.prevposition (this.prevposition=t,this.trigger("uicursorpositionchanged",{position:t}))},this.setcursorposition=function(t){void 0===t (t=this.cursorposition),void 0===t (t=this.$text.val().length),n.a.setposition(this.$text.get(0),t),this.detectupdatedcursorposition(t)},this.changetextandposition=function(t,e){this.setvisibletext(e.text),this.setcursorposition(e.position)},this.focus=function(){this.hasfocus()||(document.body.focus(),this.$text.trigger("focusin"),this.$text.focus())},this.inittextnode=function(){this.$text=this.select("textselector"),this.detectupdatedtext()},this.inputpoll=function(){this.detectupdatedtext()},this.seteditability=function(t){this.$text.prop("disabled",!t)},this.after("initialize",function(){this.on("uichangetextandposition",this.changetextandposition),this.on("uiinputpoll",this.inputpoll),this.on("uienableediting",this.seteditability.bind(this,!0)),this.on("uidisableediting",this.seteditability.bind(this,!1)),this.attachchild(a.a,this.$text)})}var n=i("mj5m"),o=i("q9/c"),a=i("zwfe"),r=i("ajan");e.a=s},pvwj:function(t,e,i){"use strict";function s(){this.defaultattrs({safeorigins:["https://localhost.twitter.com","https://twitter.com"],iframeselector:"#bouncer-flow",contentselector:".bouncercontent",spinnerselector:".bouncerspinner",dismissbuttonselector:".js-close"}),this.openbouncerdialog=function(t,e){var i=e.bounce.bounce_location||"/account/access",s=document.documentelement.lang||"en";this.select("iframeselector").attr("src",a.a.addtourl(i,{lang:s})),this.open()},this.onbeforeiframeunload=function(){this.setiframeloading(!0),this.position()},this.oniframeload=function(){this.setiframeloading(!1),this.position()},this.setiframeloading=function(t){if(t)this.$bouncercontent.hide(),this.$dismissbutton.hide(),this.$spinner.show(),this.$bouncercontent.height(this.$spinner.height()),this.$iframe.height(this.$spinner.height());else{this.$spinner.hide(),this.$dismissbutton.show(),this.$bouncercontent.show();var e=this.$iframe.contents().find("body").height()+20;e>this.$iframe.height() (this.$bouncercontent.height(e),this.$iframe.height(e))}},this.oncancel=function(){this.trigger("uibouncercancelled"),this.close()},this.oncomplete=function(){this.trigger("uibouncercompleted"),this.close()},this.on2facomplete=function(){this.is2faenrollmentcomplete=!0},this.ondialogclosed=function(){this.is2faenrollmentcomplete?(this.is2faenrollmentcomplete=!1,this.trigger("uibouncer2facompleted")):this.trigger("uibouncercancelled")},this.aroundafterclose=function(t){t(),this.ondialogclosed(),this.reset()},this.reset=function(){this.setiframeloading(!0)},this.dispatchbouncermessage=function(t,e){var i=t.originalevent,s=i .data;if(-1!==this.attr.safeorigins.indexof(i.origin) .bouncer .event){var n=s.event;"beforeunload"===n?this.onbeforeiframeunload():"load"===n?this.oniframeload():"cancel"===n?this.oncancel():"complete"===n?this.oncomplete():"2fa_complete"===n .on2facomplete()}},this.after("initialize",function(){this.on(document,"datarequestbounced",this.openbouncerdialog),this.on(document,"uipreopenbouncerdialog",this.open),this.is2faenrollmentcomplete=!1,this.on(window,"message",this.dispatchbouncermessage),this.around("afterclose",this.aroundafterclose),this.$modalcontent=this.select("modalcontentselector"),this.$iframe=this.select("iframeselector"),this.$bouncercontent=this.select("contentselector"),this.$spinner=this.select("spinnerselector"),this.$dismissbutton=this.select("dismissbuttonselector"),this.reset()})}var n=i("dbjh"),o=i("uhc7"),a=i("sxxh"),r=object(n.default)(s,o.a);e.a=r},pkin:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({delayedprompts:[],tweetitemselector:'.js-stream-item[data-item-type="tweet"]:visible',originaltweetselector:".js-original-tweet",promotedtweetclass:"promoted-tweet",immediatetriggers:[]}),this.initpage=function(){this.trigger("uipromptbirdmanagerwantsprompts",{tweetids:this.gettweetids()})},this.renderimmediateprompts=function(t){t.filter(function(t){return this.shouldrenderpromptimmediately(t)},this).foreach(this.renderprompt,this)},this.renderprompt=function(t){this.trigger("uipromptbirdshouldrenderprompt",{prompt:t})},this.savedelayedprompts=function(t){var e=t.filter(function(t){return!this.shouldrenderpromptimmediately(t)},this);this.attr.delayedprompts=e},this.refreshprompts=function(t,e){e.prompts (this.renderimmediateprompts(e.prompts),this.savedelayedprompts(e.prompts))},this.shouldrenderpromptimmediately=function(t){return!t.trigger||this.attr.immediatetriggers.indexof(t.trigger)>-1},this.gettweetids=function(){var e=this;return this.select("tweetitemselector").filter(function(i,s){return!t(s).find(e.attr.originaltweetselector).hasclass(e.attr.promotedtweetclass)}).map(function(e,i){return t(i).data("item-id")}).toarray().join(",")},this.after("initialize",function(){this.on(document,"uiswiftloaded uipagechanged",this.initpage),this.on("datapromptbirdmanagerhasprompts",this.refreshprompts)})}var n=i("dbjh"),o=i("nwi8");e.a=object(n.default)(s,o.a)}).call(e,i("4ksj"))},"q+8d":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({querysourcelinkselector:"a[data-query-source]",querysourcedataattr:"data-query-source",storageexpiration:6e4}),this.savequerysource=function(t){this.storage.setitem("source",{source:{value:t,expire:date.now()+this.attr.storageexpiration}},this.attr.storageexpiration)},this.catchlinkclick=function(e,i){var s=t(i.el).attr(this.attr.querysourcedataattr);s .savequerysource(s)},this.savetypedquery=function(t,e){"search"===e.source .savequerysource("typed_query")},this.after("initialize",function(){var t=object(o.a)({withexpiry:!0});this.storage=new t("searchquerysource"),this.on("click",{querysourcelinkselector:this.catchlinkclick}),this.on("uisearchquery",this.savetypedquery)})}var n=i("dbjh"),o=i("rwgq");e.a=object(n.default)(s)}).call(e,i("4ksj"))},"q+ee":function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[r.a,l.default.withadvice,c.a]),this.defaultattrs({queryselector:".geosearch-queryinput",dropdowntriggerselector:".js-geo-search-trigger",dropdownselector:".geosearch-dropdownmenu",resultselector:".geosearch-result",resultclass:"geosearch-result",focusableselector:".geosearch-focusable:visible",firstfocusableselector:".geosearch-focusable:first",focusedselector:".geosearch-focusable.is-focused",focusedclass:"is-focused"}),this.getquery=function(){return this.select("queryselector").text()||""},this.applyariaattrstodropdown=function(){var t=this.select("dropdownselector");if(t.length){var e=object(a.a)(t[0]);this.select("queryselector").attr({"aria-owns":e,"aria-expanded":!0,"aria-autocomplete":"list"}),this.select("dropdownselector").attr("role","listbox"),this.ariaapplied=!0}},this.applyariaattrstoresultsandannouncenumresults=function(){if(this.ariaapplied){var e=this.select("resultselector").length;e (this.select("resultselector").each(function(e,i){t(i).attr("role","option"),object(a.a)(i)}),this.trigger("uigeoresultsshown",{numresults:e}))}},this.movefocus=function(t){var e=this.select("focusedselector"),i=this.select("focusableselector"),s=i.index(e)+t,n=i.length-1;s n (s=0);var o=i.eq(s);e.removeclass(this.attr.focusedclass),o.addclass(this.attr.focusedclass),this.ariaapplied (e.removeattr("aria-selected"),e.removeattr("tabindex"),o.attr({"aria-selected":!0,tabindex:"-1"}),this.select("queryselector").attr("aria-activedescendant",o.attr("id")))},this.querykeydown=function(t){switch(t.which){case o.a.up:return t.preventdefault(),void this.movefocus(-1);case o.a.down:return t.preventdefault(),void this.movefocus(1);case o.a.left:case o.a.right:return;case o.a.enter:t.preventdefault();var e=this.select("focusedselector");return e.length?(t.stoppropagation(),void e.trigger("uigeosearchselect")):void this.trigger("uigeosearchenter");case o.a.tab:return void this.trigger("uigeosearchtab")}this.trigger("uigeosearchautocomplete")},this.selectresult=function(e){var i=t(e.target),s=i.data("place-id"),n=i.text(),o=i.data("result-type"),a=i.data("result-type")?'[data-result-type="'+i.data("result-type")+'"]':this.attr.resultselector,r=this.$node.find(a).index(i);this.trigger("uigeosearchchangelocation",{placeid:s,placename:n,resulttype:o,placeoffset:r})},this.changequery=function(t){this.trigger("uigeosearchautocomplete")},this.setfocus=function(e){var i=t(e.target).closest(this.attr.focusableselector);this.select("focusedselector").not(i).removeclass(this.attr.focusedclass),i.addclass(this.attr.focusedclass)},this.clearfocus=function(e){t(e.target).removeclass(this.attr.focusedclass)},this.after("opendropdown",function(){this.applyariaattrstodropdown()}),this.after("closedropdown",function(){this.ariaapplied (this.select("focusedselector").removeattr("aria-selected").removeattr("tabindex"),this.select("queryselector").attr("aria-expanded",!1).removeattr("aria-activedescendant"))}),this.after("initialize",function(){this.on("click",{resultselector:this.selectresult}),this.on("uigeosearchselect",{resultselector:this.selectresult}),this.on("mouseover",{focusableselector:this.setfocus}),this.on("mouseout",{focusableselector:this.clearfocus}),this.on("change paste cut input",{queryselector:this.changequery}),this.on("keydown",{queryselector:this.querykeydown})})}var n=i("q9/c"),o=i("i3qs"),a=i("dsew"),r=i("1hky"),c=i("ohsy"),l=i("gugq");e.a=s}).call(e,i("4ksj"))},qgdp:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({newitemsbarselector:".js-new-tweets-bar",containerselector:".stream-container",newtweetsbarvisibleclass:"new-tweets-bar-visible",scrolltoponnewitemsclick:!0}),this.updatenewitemsbar=function(e,i){if(e.target.contains(this.node)){var s=t(i.html),n=this.select("newitemsbarselector");n.length?(n.replacewith(s),this.trigger("uinewitemsbarupdated")):(this.$node.html(s),this.$node.hide(),this.shownewitemsbar(),this.trigger("uinewitemsbarshown")),this.trigger("uinewitemsbarvisible")}},this.shownewitemsbar=function(){var e=this.$node.parent(),i=o.a.getcanvasyoffset(e),s=t(window).scrolltop();this.$node.addclass(this.attr.newtweetsbarvisibleclass),s>i?(this.$node.show(),t("html, body").scrolltop(s+this.$node.height())):this.$node.slidedown()},this.hidenewitemsbar=function(){this.trigger("uinewitemsbarhidden"),this.select("newitemsbarselector").remove(),this.$node.removeclass(this.attr.newtweetsbarvisibleclass)},this.handlenewitemsbarclick=function(e,i){var s=t(e.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrolltoponnewitemsclick (a.a)(0,"fast");var n=window.performance.now();this.caninjectitems?this.trigger("uiinjectnewitems",{fromclick:!0,starttimems:n}):this.trigger("uitimelineshouldrefresh",{injectimmediately:!0,frompolling:!1,getinitial:!0,starttimems:n});var o=t(e.target).attr("data-item-count"),r={unreadcount:number(o)};if(s)try{r.items=[json.parse(s)]}catch(e){}this.trigger("uinewitemsbarclick",r)},this.after("initialize",function(){var t=this;this.caninjectitems=!0,this.on(document,"uiupdatenewitemsbar",this.updatenewitemsbar),this.on(document,"uihidenewitemsbar",function(){t.caninjectitems=!0,t.hidenewitemsbar()}),this.on(document,"uitimelinecacheinvalidated",function(){t.caninjectitems=!1}),this.on("click",{newitemsbarselector:this.handlenewitemsbarclick})})}var n=i("dbjh"),o=i("reqr"),a=i("lv5l");e.a=object(n.default)(s)}).call(e,i("4ksj"))},qqqy:function(t,e,i){"use strict";(function(t){var i={},s={get:function(t){return i[t]},update:function(e){t.extend(i,e)},clear:function(){i={}}};e.a=s}).call(e,i("4ksj"))},qpek:function(t,e,i){"use strict";function s(t){var e=t.promptbirddata||{};if(e.promptbirdenabled){n.a.attachto(document),o.a.attachto(document),a.a.attachto(document,e),r.a.attachto(document,e),p.a.attachto(document,n.a),u.a.attachto(document,n.a),c.a.attachto("#above-timeline-prompt",e),l.a.attachto("#dashboard-profile-prompt",e),m.a.attachto("#promptbird-modal-prompt",e);var i=g.a.timelinepromptoptions(e.format),s=v({},e,i.promptoptions);f.a.attachto(i.timelineselector,s),h.a.attachto(i.timelineselector,v({},s,{actionselector:".promptbirdprompt--inline .js-promptaction",dismissselector:".promptbirdprompt--inline .js-promptdismiss"})),d.a.attachto(i.timelineselector,v({},s,{actionselector:".promptbirdprompt--inlinepointer .js-promptaction",dismissselector:".promptbirdprompt--inlinepointer .js-promptdismiss"}))}}e.a=s;var n=i("it+l"),o=i("ctjh"),a=i("pkin"),r=i("gggp"),c=i("dfh9"),l=i("gyvj"),h=i("hwhs"),d=i("ibme"),u=i("kpi8"),p=i("zr4x"),f=i("jhm3"),m=i("su7p"),g=i("gxxu"),v=object.assign||function(t){for(var e=1;e 0;e.a=h?s:t.noop}).call(e,i("4ksj"))},rs19:function(t,e,i){"use strict";(function(t){function s(){this.attributes({convosettingsselector:".dmconversationsettings",backbuttonselector:".dmconversationsettings .dmactivity-back",activitytitleselector:".dmconversationsettings .dmactivity-title",dropdownselector:".dmconversationsettings-dropdown",dropdowncontentselector:".dmconversationsettings-dropdown .dmpopover-content",subscriptionsselector:".dmconversationsettings-subscriptions",subscriptionsfootertextselector:".dmconversationsettings-subscriptionsfooter",notificationsfootertextselector:".dmconversationsettings-notificationsfooter",participantsselector:".dmconversationsettings-participants",reportconversationselector:".dmconversationsettings .js-actionreportconversation",deleteconversationselector:".dmconversationsettings .js-actiondeleteconversation",addparticipantsselector:".dmconversationsettings .js-actionaddparticipants",editgroupnameselector:".dmconversationsettings .js-actioneditgroupname",viewavatarselector:".dmconversationsettings .js-actionviewavatar",uploadavatarselector:".dmconversationsettings .js-actionchangeavatar",removeavatarselector:".dmconversationsettings .js-actionremoveavatar",convosettingsavatarupdateselector:".dmconversationsettings .dmupdateavatar",convosettingsnameupdateselector:".dmconversationsettings .dmupdatename",convosettingsmentionsselector:".dmconversationsettings-mentions",notificationcheckboxselector:'input[name="dm[toggle_notifications]"]',subscriptioncheckboxselector:'input[name="dm[toggle_subscriptions]"]',mentionscheckboxselector:'input[name="dm[toggle_mentions]"]',blockupdatesinterval:8e3}),this.initconvosettings=function(t,e){e=e||{},this.isgroup=!e.is_oto,this.conversationid=e.conversation_id,this.ismuted=void 0,this.reporteduserid=void 0,this.dropdownhtml=void 0,this.participantshash=void 0,this.mentionsdisabled=void 0,this.trigger("uineedsdmconversation",{conversation_id:this.conversationid});var i=e.from_inbox?"to-inbox":"to-convo";this.select("backbuttonselector").removeattr("to-convo to-inbox").attr(i,!0),this.select("activitytitleselector").text(e.is_oto?object(r.default)("conversation info"):object(r.default)("group info")),this.select("reportconversationselector").text(e.is_oto?object(r.default)("report account"):object(r.default)("report conversation")),this.select("deleteconversationselector").text(e.is_oto?object(r.default)("delete conversation"):object(r.default)("leave conversation")),this.select("dropdownselector").toggleclass("u-hidden",!this.isgroup),this.$notificationscheckbox.prop("checked",e.is_muted),this.$mentionscheckbox.prop("checked",e.mentions_disabled),this.select("notificationsfootertextselector").empty(),this.select("subscriptionsselector").addclass("u-hidden"),this.select("participantsselector").empty().toggleclass("u-hidden",!this.isgroup),this.blocknotificationsupdates=!1,this.updateconvosettings(null,e)},this.updateconvosettings=function(t){var e=arguments.length>1 0!==arguments[1]?arguments[1]:{},i=e.conversation;i=void 0===i?{}:i;var s=i.title,n=void 0===s?{name:e.name}:s,o=i.avatar,a=void 0===o?{is_custom:!1}:o,r=e.conversation_settings;r=void 0===r?{}:r;var c=r.notifications,l=r.reporteduserid,h=r.dropdownhtml,d=void 0===h?null:h,u=r.participantshash,p=r.dmsubscriptions;this.$convosettings.toggleclass("has-readonlyactions",!e.is_trusted),this.$convosettings.toggleclass("is-selfconversation",!!e.is_self),this.updateconvosettingsname(n),this.updateconvosettingsavatar(a),this.dropdownhtml!==d (this.dropdownhtml=d,this.select("dropdownselector").html(this.dropdownhtml)),void 0!==u .updateparticipantsview(u),void 0===c||this.blocknotificationsupdates||(this.updatenotifications(null,c),this.updatementions(null,c)),void 0!==p .updatesubscriptions(p),this.reporteduserid=l},this.updatenotifications=function(t,e){var i=this;if(this.ismuted!==e.is_muted){this.ismuted=e.is_muted;var s=e.show_mentions_toggle !this.ismuted;this.select("notificationsfootertextselector").toggleclass("u-hidden",s),this.select("notificationsfootertextselector").text(this.mknotificationstext(e)),this.$notificationscheckbox.prop("checked",this.ismuted),t (this.blocknotificationsupdates=!0,settimeout(function(){return i.blocknotificationsupdates=!1},this.attr.blockupdatesinterval))}},this.updatementions=function(t,e){var i=e.mentions_disabled,s=e.show_mentions_toggle;this.select("convosettingsmentionsselector").toggleclass("u-hidden",!s),s .mentionsdisabled!==i (this.mentionsdisabled=i,this.$mentionscheckbox.prop("checked",i))},this.mknotificationstext=function(e){return!this.ismuted .isgroup?object(r.default)("disable all notifications from this conversation. this will not remove you from the group."):this.ismuted||this.isgroup?e.mute_expiration_time?object(r.default)("muted until {{time}}.",{time:new date(e.mute_expiration_time).tolocalestring(t("html").attr("lang")||"en",e.is_short_interval?{hour:"2-digit",minute:"2-digit"}:{weekday:"long",month:"short",day:"2-digit"})}):object(r.default)("notifications are muted."):object(r.default)("disable all notifications from this conversation.")},this.updateparticipantsview=function(t){this.participantshash!==t (this.trigger("uineedsconversationparticipants",{conversation_id:this.conversationid}),this.participantshash=t)},this.handleaddparticipants=function(){this.trigger("uiaddparticipants",{conversation_id:this.conversationid})},this.handlereportconversation=function(){this.trigger("uidmlaunchconversationreportwebview",{reported_user_id:this.reporteduserid,conversation_id:this.conversationid})},this.handledeleteconversation=function(){this.trigger("uishowdmdeleteconversationconfirmation",{conversation_id:this.conversationid,is_group:this.isgroup})},this.handlenotificationstoggling=function(t){this.$notificationscheckbox.is(":checked")?this.trigger("uidmdialogmutenotifications",{conversation_id:this.conversationid}):(this.trigger("uitogglenotifications",{conversation_id:this.conversationid,enable_notifications:!0}),this.trigger("uidmupdatenotificationsstate",{is_muted:!1})),this.$notificationscheckbox.prop("checked",!1),t.preventdefault()},this.handlementionstoggling=function(t){var e=this.$mentionscheckbox.is(":checked");this.trigger("uitogglementions",{conversation_id:this.conversationid,disable_mentions:e}),t.preventdefault()},this.handlesubscriptionstoggling=function(e){var i=t(e.target);this.trigger("uitoggledmbroadcastsubscription",{user_id:i.attr("data-broadcaster-id"),enable_subscriptions:i.is(":checked")}),e.preventdefault()},this.renderparticipants=function(t,e){this.select("participantsselector").html(e.html)},this.triggeronconvosettingsavatar=function(t,e){this.$updateavatar.trigger(t,e)},this.updateconvosettingsavatar=function(t){var e=t.html?"uidmsetconversationavatar":"uidmresetconversationavatar",i=h({is_oto:!this.isgroup,conversation_id:this.conversationid},t);this.triggeronconvosettingsavatar(e,i)},this.triggeronconvosettingsname=function(t,e){this.$updatename.trigger(t,e)},this.updateconvosettingsname=function(t){var e=t.html?"uidmupdateconversationname":"uidminitconversationname",i=h({is_oto:!this.isgroup,conversation_id:this.conversationid},t);this.triggeronconvosettingsname(e,i)},this.processuserupdates=function(t,e){var i=this;if(!e.should_request_inbox !e.is_empty){var s=(e.conversations||[]).find(function(t){return t.conversation_id===i.conversationid});this.updateconvosettings(null,s)}},this.updatesubscriptions=function(t){this.select("subscriptionsselector").removeclass("u-hidden"),this.select("subscriptionsfootertextselector").text(t.subscription_text),this.select("subscriptioncheckboxselector").prop("checked",t.enabled),this.select("subscriptioncheckboxselector").attr("data-broadcaster-id",t.broadcaster_id)},this.isdataforcurrentconvo=function(t,e){return e.conversation_id===this.conversationid},this.after("initialize",function(){this.$convosettings=this.select("convosettingsselector"),this.$notificationscheckbox=this.select("notificationcheckboxselector"),this.$mentionscheckbox=this.select("mentionscheckboxselector"),this.$updateavatar=this.select("convosettingsavatarupdateselector"),this.$updatename=this.select("convosettingsnameupdateselector"),this.on("click",{reportconversationselector:this.handlereportconversation,deleteconversationselector:this.handledeleteconversation,addparticipantsselector:this.handleaddparticipants,editgroupnameselector:this.triggeronconvosettingsname.bind(this,"uieditconversationname"),viewavatarselector:this.triggeronconvosettingsavatar.bind(this,"uidmrequestviewconversationavatar"),uploadavatarselector:this.triggeronconvosettingsavatar.bind(this,"uidmrequestuploadconversationavatar"),removeavatarselector:this.triggeronconvosettingsavatar.bind(this,"uidmrequestremoveconversationavatar"),dropdowncontentselector:"uiclosedropdowns"}),this.on("change",{notificationcheckboxselector:this.handlenotificationstoggling,subscriptioncheckboxselector:this.handlesubscriptionstoggling,mentionscheckboxselector:this.handlementionstoggling}),this.on(document,"uiinitdmconversationsettings",this.initconvosettings),this.on(document,"datadmuserupdates",this.processuserupdates),this.on("datadmconversationresult",object(o.a)(this.updateconvosettings,this.isdataforcurrentconvo)),this.on(document,"uidmupdatenotificationsstate",this.updatenotifications),this.on("dataconversationparticipantsresult",object(o.a)(this.renderparticipants,this.isdataforcurrentconvo)),this.attachchild(c.a,this.select("convosettingsavatarupdateselector")),this.attachchild(l.a,this.select("convosettingsnameupdateselector"))})}var n=i("dbjh"),o=i("4oun"),a=i("ajan"),r=i("0d4m"),c=i("5e2z"),l=i("csbf"),h=object.assign||function(t){for(var e=1;e \n'),s.b(s.rp(" \n"),s.fl()},partials:{" '+(e%60?"":r.a.formatduration(e))+" "}this.$ticks.html(t)},this.calculatescale=function(){this.offset=-this.$selection.position().left,this.pixelspersecond=this.$innerselection.width()/this.videoduration,this.percentpersecond=100/this.videoduration,this.mintimeforscrolling=(this.offset-this.attr.scrollpixels)/this.pixelspersecond,this.maxtimeforscrolling=(this.offset+this.attr.scrollpixels+this.visiblewidth)/this.pixelspersecond},this.formattimeprogress=function(t){return r.a.formatduration(t)+" / "+r.a.formatduration(this.videoduration)},this.updatepositions=function(){if(this.$mid.toggle(!!this.videoduration),this.videoduration){this.calculatescale(),this.$mid.css({left:this.starttime*this.percentpersecond+"%",width:(this.endtime-this.starttime)*this.percentpersecond+"%"});var t=math.min(-1,((this.endtime-this.starttime)*this.pixelspersecond-this.attr.minwidthformidhandle)/2);this.$midhandlecursor.css({left:t,right:t});var e=this.isprogressvisible?math.max(100*(this.getvideocurrenttime()-this.starttime)/(this.endtime-this.starttime),0):0;this.$unplayedscrubber.css("left",e+"%"),this.$scrubber.css({left:this.starttime*this.percentpersecond+"%",right:100-this.endtime*this.percentpersecond+"%"}),this.$widesttime.text(this.formattimeprogress(this.videoduration)),this.$time.text(this.formattimeprogress(this.getvideocurrenttime())),this.select("timelineselector"),this.updatebubblepos()}},this.showselectionbubble=function(){var t=math.max(this.selectionduration(),this.attr.minselectionduration);this.setbubble(this.formattimeforselection(t),"mid")},this.setendbubblewhiledragging=function(){3===this.dragmode?this.setbubble(r.a.formatduration(this.endtime),"right"):this.setbubble(r.a.formatduration(this.starttime),"left")},this.selectionduration=function(){return this.endtime-this.starttime},this.ismaxselected=function(){return this.selectionduration()>=this.attr.maxselectionduration},this.isminselected=function(){return this.selectionduration() this.videoduration*this.timelinepixelspersecond-this.bubblewidth/2?(i=23-this.bubblewidth,t="right"):i=-this.bubblewidth/2;break;default:return}this.$timebubble.css({left:e+"%","margin-left":i}),t?this.$timebubble.attr("data-clip",t):this.$timebubble.removeattr("data-clip")},this.setselectionview=function(t,e){e?this.$selection.width(e+this.attr.widthforhandles):e=this.$innerselection.width(),this.$selection.css("left",-this.clamp(t,0,e-this.visiblewidth)),this.updatepositions()},this.zoomtodefault=function(){var t=this.defaultpixelspersecond*this.videoduration,e=(this.defaultpixelspersecond*(this.starttime+this.endtime)-this.visiblewidth)/2;e=this.clamp(e,0,t-this.visiblewidth),this.setselectionview(e,t)},this.playlastfewseconds=function(t){this.playvideo(t?math.max(this.endtime-3,this.starttime):this.starttime),this.updatepositions()},this.begindrag=function(t,e){if(this.$shroud.toggleclass("is-sideways",1===t||3===t),this.dragmode=t,this.dragstartx=e.clientx,this.dragdirty=!1,this.dragstartoffset=this.offset,this.draghandlesinview=[1===t||4===t,3===t||4===t],4===t){var i=(e.clientx-this.$timeline.offset().left)/this.timelinepixelspersecond;if(i this.endtime){var s=this.endtime-this.starttime;this.starttime=this.clamp(i,0,this.videoduration-s),this.endtime=this.starttime+s}this.$shroud.show(),this.zoomtodefault()}this.$mid.addclass("is-active"),this.isvideoplaying()||this.setdragpause(),this.updatepositions(),this.setendbubblewhiledragging()},this.drag=function(t){if(0!==this.dragmode){var e=window.getselection();e .removeallranges(),cleartimeout(this.dragtimeoutid);var i=!1;this.$shroud.show(),this.calculatescale(),2===this.dragmode (this.draghandlesinview=this.draghandlesinview.map(function(t,e){return t||0===this.scrollshiftforhandle(e)},this));var s=t.clientx-this.dragstartx,n=void 0;4===this.dragmode?n=this.timelinepixelspersecond:(n=this.pixelspersecond,s+=this.offset-this.dragstartoffset);var o=this.applydrag(s/n)*n;o?(this.dragdirty=!0,this.updatepositions(),this.dragstartx+=o,this.setdragpause(),this.setendbubblewhiledragging()):math.abs(s)>this.attr.pixelsbeforewarninglength (this.ismaxselected()||this.isminselected()) .showselectionbubble(),4===this.dragmode?this.zoomtodefault():this.draghandlesinview.foreach(function(t,e){if(t){var s=this.scrollshiftforhandle(e);s (this.setselectionview(this.offset+s),i=!0)}},this),i (this.dragtimeoutid=settimeout(this.drag.bind(this,t),this.attr.dragscrollrepeatinterval))}},this.enddrag=function(){var t=this;if(this.dragmode){this.$shroud.hide(),this.updatepositions();var e=3===this.dragmode;this.dragdirty .showselectionbubble(),this.isvideoplaying()?this.doubleclicktimeoutid||(this.doubleclicktimeoutid=settimeout(function(){t.doubleclicktimeoutid=null,t.playlastfewseconds(e)},300)):this.playlastfewseconds(e),this.$mid.removeclass("is-active"),this.dragmode=0,cleartimeout(this.dragtimeoutid),this.notifytrimrange()}},this.setdragpause=function(t){this.pausevideo(3===this.dragmode?this.endtime:this.starttime)},this.calculatedrag=function(t,e,i){return t=this.clamp(t+e,0,this.videoduration),1===this.dragmode?t=this.clamp(t,this.endtime-this.attr.maxselectionduration,this.endtime-this.attr.minselectionduration):3===this.dragmode (t=this.clamp(t,this.starttime+this.attr.minselectionduration,this.starttime+this.attr.maxselectionduration)),4!==this.dragmode .draghandlesinview[i] (t=this.clamp(t,this.mintimeforscrolling,this.maxtimeforscrolling)),t},this.applydragleft=function(t){var e=this.starttime;return this.starttime=this.calculatedrag(this.starttime,t,0),this.starttime-e},this.applydragright=function(t){var e=this.endtime;return this.endtime=this.calculatedrag(this.endtime,t,1),this.endtime-e},this.applydrag=function(t){return 1===this.dragmode?this.applydragleft(t):3===this.dragmode?this.applydragright(t):t this.videoduration-.01;this.trigger("uitrimrangechanged",{trimstart:this.starttime,trimend:this.endtime,trimrange:t?"":this.starttime.tofixed(3)+"-"+this.endtime.tofixed(3)})},this.clamp=function(t,e,i){return math.max(e,math.min(i,t))},this.after("initialize",function(){this.timespanformatter=new l.a.timespanformatter,this.dragmode=0,this.$timebubble=this.select("timebubbleselector"),this.$timeline=this.select("timelineselector"),this.$scrubber=this.select("scrubberselector"),this.$unplayedscrubber=this.select("unplayedscrubberselector"),this.$time=this.select("timeselector"),this.$widesttime=this.select("widesttimeselector"),this.$selection=this.select("selectionselector"),this.$ticks=this.select("ticksselector"),this.$innerselection=this.select("innerselectionselector"),this.$left=this.select("lefthandleselector"),this.$mid=this.select("midhandleselector"),this.$midhandlecursor=this.select("midhandlecursorselector"),this.$right=this.select("righthandleselector"),this.$shroud=this.select("shroudselector"),this.on("uiloadvideo",this.setinitialtrimrange),this.on("uivideoloaded uivideounloaded",this.initaftervideoloads),this.on("uivideostatechanged",this.updatepositions),this.on("mousedown",{lefthandleselector:this.begindrag.bind(this,1),righthandleselector:this.begindrag.bind(this,3),midhandlecursorselector:this.begindrag.bind(this,2),timelineselector:this.begindrag.bind(this,4)}),this.on(window,"mousemove",this.drag),this.on(window,"mouseup",this.enddrag),this.on(this.$midhandlecursor,"mouseenter mouseleave",this.hovermidhandle),this.on(this.$right.add(this.$left),"mouseenter mouseleave",this.hoversidehandle),this.on(this.select("timelinecursorselector").add(this.$mid),"mouseenter",this.hoverselectionbubble)})}var n=i("0d4m"),o=i("dbjh"),a=i("1nsd"),r=i("20ha"),c=i("zvsr"),l=i.n(c);e.a=object(o.default)(s,a.a)}).call(e,i("4ksj"))},taxt:function(t,e,i){"use strict";function s(){this.defaultattrs({videoinfoselector:".composervideoinfo"}),this.videoinfoheight=null,this.clearstatedata=function(t,e){this.videoinfoheight=null,this.select("videoinfoselector").addclass("u-hidden").html("")},this.renderadvancedvideoinfo=function(t){var e={has_cta:""!==t.ctatype,is_cta_visit_site:"visit_site"===t.ctatype,is_cta_watch_now:"watch_now"===t.ctatype,embeddable:t.embeddable,cta_url:t.ctaurl,title:t.title,description:t.description},i=r.a.render(e);this.select("videoinfoselector").removeclass("u-hidden").replacewith(i)},this.updatefromeditdialog=function(t,e){var i=o.a.get(e.fileid);if(i){var s=i.advanced;i.isvideo .renderadvancedvideoinfo(s)}},this.createmediadataforsending=function(){var t=this.gettweetboxid();return object(n.a)(t).reduce(function(t,e){var i=e.advanced,s=t.alttext||e.alttext,n=i?{advanced_title:i.title,advanced_description:i.description,advanced_cta_type:i.ctatype,advanced_cta_url:i.ctaurl,advanced_embeddable:!!i.embeddable}:{};return c({},t,n,s?{has_alt_text:!0}:{})},{})},this.around("createdataforsending",function(t){var e=t();return c({},e,this.createmediadataforsending())}),this.after("initialize",function(){this.on(document,"uimediaeditdialogdone",this.updatefromeditdialog),this.on("uitweetsent uitweetcancelled uipreviewthumbnailremoveall uipreviewthumbnailremoved",this.clearstatedata)})}var n=i("wkyg"),o=i("h6fk"),a=i("iq7t"),r=i.n(a),c=object.assign||function(t){for(var e=1;e =0?e.maxselecteditems:this.maxselecteditems;this.setmaxselecteditems(i)},this.resetcomposer=function(){this.resetselectedusers(),this.$input.val(""),this.trigger("uiupdatedselectedusers",{items:this.selectedusers}),this.trigger(this.$input,"uitextchanged",{text:this.$input.val(),position:n.a.getposition(this.$input[0])})},this.focusinputwithresultsshown=function(t,e){this.$input.focus(),this.forceshow(),this.trigger("uitypeaheadresultsshown")},this.focusinput=function(){this.select("controlsselector").addclass(this.attr.userbordercolorclass)},this.blurinput=function(){this.select("controlsselector").removeclass(this.attr.userbordercolorclass)},this.forceshow=function(){this.select("dropdownselector").show()},this.forcehide=function(){this.select("dropdownselector").hide(),this.trigger("uitypeaheadsetpreventdefault",{preventdefault:!1,key:9}),this.trigger("uitypeaheadresultshidden")},this.hideandmanageesc=function(t){t.preventdefault(),t.stoppropagation(),this.$input.blur(),this.forcehide()},this.possiblyhide=function(e){e.target===this.$node.get(0)||t.contains(this.$node.get(0),e.target)||this.forcehide()},this.after("initialize",function(){r.a.attachto(this.$node,{inputselector:this.attr.inputselector,eventdata:this.attr.eventdata});var t=[this.attr.datasourcefortagging,"selectedusers"];this.attr.includepreviouslyselectedusers .push("prefillusers");var e=[["selectedusers",t]];this.attr.additionaldatasourcerenderers .attr.additionaldatasourcerenderers.length .push.apply(e,this.attr.additionaldatasourcerenderers),this.setmaxselecteditems(this.attr.maxselection),a.a.attachto(this.$node,{alwaysopen:this.attr.alwaysopen,blocklinkactions:!0,typeaheadsrc:this.attr.typeaheadsrc,datasourcerenders:e,datasourceoptions:{requesttype:this.attr.requesttype},selecteditemtype:this.attr.selecteditemtype,deciders:this.attr.decidersfortypeahead,inputselector:this.attr.inputselector,eventdata:this.attr.eventdata}),this.on("uitypeaheadrenderresults uishowselectedusers",this.forceshow),this.on("uitypeaheaditemselected uiselectuser",this.selectuser),this.on("uiupdatemaxselecteditems",this.updatemaxselecteditems),this.on("uiresetselectedusers",this.resetselectedusers),this.on("uiresetselectedusercomposer",this.resetcomposer),this.on("uishortcutesc",this.hideandmanageesc),this.selectedusers=[],this.$input=this.select("inputselector"),this.on("uisetfocusinselecteduserinput",this.focusinputwithresultsshown),this.on(this.$input,"focusin",this.focusinput),this.on(this.$input,"focusout",this.blurinput),this.on(document,"mousedown : focusin",this.possiblyhide)})}var n=i("mj5m"),o=i("dbjh"),a=i("ccv7"),r=i("args"),c=object(o.default)(s);e.a=c}).call(e,i("4ksj"))},titt:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({ctalocationqrselector:".js-locationqr-cta",ctaweburlselector:".js-weburl-cta",ctaviewselector:".dmctaview",convocontentselector:".dmconversation-content"}),this.getjsondata=function(e){return t(e.target).closest(this.attr.ctaviewselector).data("cta-json")},this.handleweburlclick=function(t){this.scribe(r)},this.handlelocationqrclick=function(t){t.preventdefault();var e=this.getjsondata(t),i=this.select("convocontentselector").data("thread-id");e .id .trigger("uilocationqrctaclicked",{qr_id:e.id,conversation_id:i})},this.after("initialize",function(){this.on("click",{ctalocationqrselector:this.handlelocationqrclick,ctaweburlselector:this.handleweburlclick})})}var n=i("dbjh"),o=i("3odc"),a=object(n.default)(s,o.a),r={page:"messages",section:"thread",element:"cta_dm",action:"click"};e.a=a}).call(e,i("4ksj"))},tvrk:function(t,e,i){"use strict";function s(){this.getdynamicvideoadfromcache=function(t){return n.a.get(t)},this.updatedynamicvideoadcache=function(t){n.a.update(t)},this.cleardynamicvideoadcache=function(){n.a.clear()}}var n=i("qqqy");e.a=s},uano:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("primary",t,e,1),t,e,0,12,97,"{{ }}") (s.rs(t,e,function(t,e,i){i.s(i.f("count",t,e,1),t,e,1,0,0,"")||i.b(" inbox\n"),i.s(i.f("count",t,e,1),t,e,0,61,86,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(" inbox ("),i.b(i.v(i.f("count",t,e,0))),i.b(")\n")}),t.pop())}),t.pop()),s.s(s.f("primary",t,e,1),t,e,1,0,0,"")||(s.s(s.f("count",t,e,1),t,e,1,0,0,"")||s.b(" requests\n"),s.s(s.f("count",t,e,1),t,e,0,174,202,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" requests ("),i.b(i.v(i.f("count",t,e,0))),i.b(")\n")}),t.pop())),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},uymv:function(t,e,i){"use strict";function s(t){return t .__esmodule?t:{default:t}}object.defineproperty(e,"__esmodule",{value:!0});var n=i("gu7t"),o=s(n),a=i("zrlr"),r=s(a),c=i("wxaw"),l=s(c),h=function(){function t(e,i){(0,r.default)(this,t),this.progresscircle=e;var s="number"==typeof i?i:this.progresscircle.getattribute("r");this.circumference=2*math.pi*s,this.stateclasslist=[]}return(0,l.default)(t,[{key:"updateprogress",value:function(t){var e=this.progresscircle,i=(1-math.ceil(t)/100)*this.circumference;return e.style.strokedashoffset=i,e.style.strokedasharray=this.circumference,this}},{key:"updateclasslist",value:function(t){var e=this,i=this.progresscircle;if(array.isarray(t)){if(i.classlist){var s,n;(s=i.classlist).remove.apply(s,(0,o.default)(this.stateclasslist)),(n=i.classlist).add.apply(n,(0,o.default)(t))}else{var a=i.getattribute("class").split(" "),r=[].concat((0,o.default)(a.filter(function(t){return-1===e.stateclasslist.indexof(t)})),(0,o.default)(t));i.setattribute("class",r.join(" "))}this.stateclasslist=t}return this}}]),t}();e.default=h},v2wg:function(t,e,i){"use strict";function s(){this.scribedialogimpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"impression"},e)},this.scribecountrychange=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"mobile_country_code",action:"change"},e)},this.scribephonenumberinput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"phone_number",action:"change"},e)},this.scribesendpinclick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"activate_mobile",action:"click"},e)},this.scribeverifypinformimpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"impression"},e)},this.scribepincodeinput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"input"},e)},this.scribeverifybuttonclick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"click"},e)},this.scriberesendpincodebuttonclick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"resend_pin",action:"click"},e)},this.scribedialogcancelclick=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"cancel"},e)},this.scribeunlocksuccessimpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"success"},e)},this.after("initialize",function(){this.on("dataverifypinsuccess",this.scribeunlocksuccessimpression),this.on("uicancelsmsconfirmationdialog",this.scribedialogcancelclick),this.on("uineedssmsconfirmationdialog",this.scribedialogimpression),this.on("uiresendpinaction",this.scriberesendpincodebuttonclick),this.on("uisendpinaction",this.scribesendpinclick),this.on("uismsconfirmationcountrychange",this.scribecountrychange),this.on("uismsconfirmationphonenumberinput",this.scribephonenumberinput),this.on("uismsconfirmationpincodeinput",this.scribepincodeinput),this.on("uiverifypinaction",this.scribeverifybuttonclick),this.on("uiverifypinformimpression",this.scribeverifypinformimpression)})}var n=i("dbjh"),o=i("3odc");e.a=object(n.default)(s,o.a)},v9eu:function(t,e,i){"use strict";(function(t){var i=t("html").attr("lang");e.a={language:i}}).call(e,i("4ksj"))},vndl:function(t,e,i){"use strict";function s(){this.defaultattrs({acceptselector:".js-prompt-accept",dismissselector:".js-prompt-later",daystowaitondismiss:30,usenativepush:!1}),this.shoulddisplayrequest=function(){if(!("notification"in window))return!1;var t="default"===notification.permission,e=this.storage.getitem("last_dismissed_timestamp")||0,i=this.now()-e>24*this.attr.daystowaitondismiss*60*60*1e3;return t },this.now=function(){return date.now()},this.handleaccept=function(){this.attr.usenativepush .pushsupported?this.trigger("uipushsubscriptionchangerequested",{subscribe:!0}):this.trigger("uirequestnativenotificationpermission"),this.trigger("uidismissdmnotice"),this.scribeaction("success")},this.handledismiss=function(){this.storage.setitem("last_dismissed_timestamp",this.now()),this.trigger("uidismissdmnotice"),this.scribeaction("dismiss")},this.scribeaction=function(t){this.scribe({component:"dm_conversation_list_dialog",element:"native_notifications_permission_request",action:t})},this.shownotice=function(){this.trigger("uishowdmnotice")},this.updatepushsupport=function(t,e){e.supported (this.pushsupported=!0),e.subscribed .trigger("uidismissdmnotice")},this.after("initialize",function(){this.pushsupported=!1,this.storage=new r.a("dm_notifications"),this.shoulddisplayrequest() (this.on("click",{acceptselector:this.handleaccept,dismissselector:this.handledismiss}),this.on(document,"datapushsubscriptionstate",this.updatepushsupport),this.trigger("uiwantspushsubscriptionstate"),this.on(document,"uiswiftloaded",a.default.once(this.shownotice).bind(this)))})}var n=i("dbjh"),o=i("3odc"),a=i("yzit"),r=i("wodx"),c=object(n.default)(s,o.a);e.a=c},vdti:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b(" via \n"),s.s(s.f("image",t,e,1),t,e,0,26,91,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' \n')}),t.pop()),s.b(" "),s.b(s.v(s.f("name",t,e,0))),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},vfpm:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n remove location\n \n'),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},"vg/a":function(t,e,i){"use strict";(function(t){function s(){this.attributes({messageclass:"directmessage",sentmessageselector:".directmessage--sent",emojionlymessageselector:".directmessage--emoji",receivedmessageselector:".directmessage--received",newmessagespillselector:".dmconversation-newmessagespill",pagebackrange:1e3,openactivityclass:"dmactivity--open",dmcomposerselector:".dmcomposer",dmcomposersectionselector:".dmconversation-composer",viewconversation:".dmconversation",conversationcontentselector:".dmconversation-content",conversationscrollcontainer:".dmconversation-scrollcontainer",conversationreadonlyclass:"is-readonly",spinnerselector:".dmconversation-spinner",quickreplyoptionpanelselector:".dmconversation-quickreply",conversationtypeselector:"[data-is-oto]",deleteconversationselector:".dmconversation .js-actiondeleteconversation",reportconversationselector:".dmconversation .js-actionreportconversation",reportuseridselector:".dmconversationactions [data-other-participant-id]",conversationavatarupdateselector:".dmconversation .dmupdateavatar",conversationnameupdateselector:".dmconversation .dmupdatename",sendingstateselector:".dmconversation-sendingstateindicator",openconvosettingsselector:".dmconversation-convosettings",maxcharacters:1e4}),this.prepareconversationview=function(t,e){e=e||{};var i="uiopennewconversationview"===t.type,s=i .screen_names ===e.screen_names.length;this.trigger("uidmdialogclearactions"),this.trigger("uiupdateconversationstate",{is_readonly:e.is_readonly});var n=e.is_oto||s,o={is_oto:n,conversation_id:e.conversation_id};this.triggeronconversationavatar("uidmresetconversationavatar",o),this.triggeronconversationname("uidminitconversationname",o({name:e.name},o)),this.$content.empty().removeattr("data-thread-id").attr("data-thread-id",e.conversation_id),this.$viewconversation.removeattr("data-thread-id").attr("data-thread-id",e.conversation_id),this.hidenewmessagespill(),this.trigger("uiremovequickreply"),i?(this.hidespinner(),this.hideconversationsettings()):(this.showspinner(),this.loadconversationdata(e),this.initconversationsettings(e)),this.trigger("uidmconversationupdated",e)},this.currentconversationid=function(){return this.$content.attr("data-thread-id")},this.isgroupconversation=function(){return!this.select("conversationtypeselector").data("is-oto")},this.getreporteduserid=function(){return this.select("reportuseridselector").attr("data-other-participant-id")},this.isexistingconversation=function(){return!!this.currentconversationid()},this.isdataforcurrentconversation=function(t){return!this.isexistingconversation()||t.conversation_id===this.currentconversationid()},this.processconversationresult=function(t,e){if(t .preventdefault(),e .isdataforcurrentconversation(e)){this.isexistingconversation()||(this.initializedmcomposer(null,e),this.$viewconversation.hasclass(this.attr.openactivityclass) .initconversationsettings(e)),this.$content.attr("data-thread-id",e.conversation_id),this.$viewconversation.attr("data-thread-id",e.conversation_id);var i=e .conversation .conversation.title||{};this.triggeronconversationname("uidmupdateconversationname",o({is_oto:e.is_oto,conversation_id:e.conversation_id},i));var s=e .conversation .conversation.avatar||{};this.triggeronconversationavatar("uidmsetconversationavatar",o({is_oto:e.is_oto,conversation_id:e.conversation_id},s)),this.trigger("uiupdateconversationstate",{is_readonly:e.is_readonly});var n=this.$content.children(),o=n.first().attr("data-message-id"),a=n.last().attr("data-message-id");this.ispagevisible() .$content.is(":visible") .conversation .conversation.is_unread .trigger("datamarkdmsasread",{last_message_id:e.sort_event_id||-1,recipient_id:e.conversation_id}),this.trigger("uidmupdatetrustrequest",e),this.updateconversationhtml(e,o,a),!1===e.has_more .hidespinner(),this.trigger("uidmconversationupdated",e)}},this.processuserupdatesresult=function(e,i){if(!i.should_request_inbox !i.is_empty){var s=this.$content.attr("data-thread-id");(i.conversations||[]).foreach(function(t){t.conversation_id===s .processconversationresult(null,t)},this),(i.update_events||[]).filter(function(_){return _.conversation_id===s}).foreach(function(e){switch(e.type){case"conversation_delete":this.trigger("uiclosedmconversation");break;case"message_delete":this.$content.find('[data-message-id="'+e.message_id+'"]').remove(),0===this.$content.children().length .trigger("uiclosedmconversation"),this.updateqr(),this.trigger("uidmmesagedeleted",{dmid:e.message_id});break;case"mark_spam":case"unmark_spam":e.messages.foreach(function(e){var i=t(e.html);this.$content.find('[data-message-id="'+e.message_id+'"]').replacewith(i)},this)}},this),this.updaterapidfire()}},this.ispagevisible=function(){return"visible"===document.visibilitystate},this.removeanimationclass=function(e,i){t(e.target).closest(this.attr.emojionlymessageselector).removeclass("is-animating")},this.updateconversationstate=function(t,e){this.$viewconversation.toggleclass(this.attr.conversationreadonlyclass,!!e.is_readonly)},this.generateconversationhtml=function(t,e,i){var s=t.items,o=object.keys(s);o.sort(n.a.compare);var a=!(e ),r="",c="";return o.foreach(function(t){a||n.a.compare(t,e) 0 (c+=s[t])}),{prepend:r,append:c}},this.applynewhtml=function(t,e,i,s){var n=this.$container[0].scrollheight-this.$container.scrolltop();this.$content.prepend(e.prepend);var o=this.$container[0].scrollheight-n;this.$container.scrolltop(o),this.$content.append(e.append),this.updaterapidfire(s),this.addanimation(s),this.updatescrollposition(t,s),this.updateqr(s)},this.updateconversationhtml=function(t,e,i){var s=this.generateconversationhtml(t,e,i);(s.append||s.prepend) .applynewhtml(t,s,e,i)},this.updaterapidfire=function(e){if(e){var i=this.attr.messageclass;this.$content.find('[data-message-id="'+e+'"]').nextall().addback().each(function(e,s){var n=t(this),o=n.next(),a=n.hasclass(i);if(a .hasclass(i)){var r=n.find("[data-user-id]").attr("data-user-id"),c=n.find("[data-time]").attr("data-time"),l=n.find("[data-custom-profile-id]").attr("data-custom-profile-id"),h=o.find("[data-user-id]").attr("data-user-id"),d=o.find("[data-time]").attr("data-time"),u=o.find("[data-custom-profile-id]").attr("data-custom-profile-id");n.css("height"),r===h \n\n.stickersmediaimage.media-image {\n background-image: url('"),s.b(s.v(s.f("image",t,e,0))),s.b("');\n\n width: "),s.b(s.v(s.f("bgwidth",t,e,0))),s.b("px;\n height: "),s.b(s.v(s.f("bgheight",t,e,0))),s.b("px;\n}\n\n.stickersmediaimage-blackbar {\n width: "),s.b(s.v(s.f("blackbarwidth",t,e,0))),s.b("px;\n height: "),s.b(s.v(s.f("bgheight",t,e,0))),s.b("px;\n}\n\n"),s.s(s.f("stickers",t,e,1),t,e,0,238,1859,"{{ }}") (s.rs(t,e,function(t,e,i){i.b("@-webkit-keyframes stickeranimation-"),i.b(i.v(i.f("animationrefindex",t,e,0))),i.b("-a {\n 0% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 13% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 53% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n 100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickeranimation-"),i.b(i.v(i.f("animationrefindex",t,e,0))),i.b("-a {\n 0% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 13% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 53% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n 100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@-webkit-keyframes stickeranimation-"),i.b(i.v(i.f("animationrefindex",t,e,0))),i.b("-b {\n 0% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 13% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 53% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n 100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickeranimation-"),i.b(i.v(i.f("animationrefindex",t,e,0))),i.b("-b {\n 0% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 13% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n 53% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n 100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n")}),t.pop()),s.b("\n"+i),s.b(' \n\n \n "),s.b(s.v(s.f( \n\n'),s.s(s.f("stickers",t,e,1),t,e,0,2015,2702,"{{ }}") (s.rs(t,e,function(t,e,s){s.s(s.f("link",t,e,1),t,e,0,2029,2106,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(' "),i.b(i.v(i.f( \n')}),t.pop()),s.b("\n"+i),s.b(' \n \n\n'),s.s(s.f("link",t,e,1),t,e,0,2674,2690,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(" \n")}),t.pop())}),t.pop()),s.b(" \n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},w3ke:function(t,e,i){"use strict";function s(){this.defaultattrs({keepbadgestoragekey:"keep_badge_until",keepbadgeinterval:1e3}),this.processnewnotifications=function(t,e){e .b "ok"===e.b.status .b.response .possiblyupdatebadgeandhighlighting(e.b.response)},this.possiblyupdatebadgeandhighlighting=function(t){t.show_badge_highlighting .count>=0 (this.trigger("uiupdateconnectbadge",t),t.timestamp>=0 (t.count>0||this.paststoragetime()) .trigger("uiupdateactivityhighlighting",t.timestamp),this.updatestoragetime())},this.paststoragetime=function(){var t=(new date).gettime();return(this.storage.getitem(this.attr.keepbadgestoragekey)||{until:0}).until =0) !!(s .length>0);if(!n||!e)return n;for(var o=0;o i (this.state.current=this.state.current+1),this.state.previousinflight=i,this.state.isvisible=i>0},this.updateconversationid=function(t,e){this.state={isvisible:!1,total:0,conversationid:e.conversation_id,current:0,previousinflight:0},this.trigger("uidmconversationneedsinflightstate")},this.after("updatecount",this.render),this.after("updateconversationid",this.render),this.after("initialize",function(){this.on(document,"datadmmessagesinflight",this.updatecount),this.on(document,"uirenderconversationview",this.updateconversationid)})}var n=i("dbjh"),o=i("kaxq"),a=i.n(o);e.a=object(n.default)(s)},wpvw:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(' \n \n \n \n '),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},wq5j:function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b(" "),s.b(s.v(s.f("localized_number",t,e,0))),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},wvpq:function(t,e,i){"use strict";function s(){this.iframe_timeout=12e4,this.defaultattrs({includepagecontext:!0,livevideoeventid:void 0}),this.sendtweet=function(t,e){var i=e.tweetboxid,s=function(t){t.tweetboxid=i,t.tweetdata=e.tweetdata,this.trigger("datatweetsuccess",t),this.trigger("datagotprofilestats",{stats:t.profile_stats}),t.tweet_stats .trigger("datagottweetstats",{stats:t.tweet_stats})},o=function(t){var e=void 0;try{e={message:t.message,spamchallenge:t.challengename}}catch(t){e={error:object(n.default)("sorry! we did something wrong.")}}e.tweetboxid=i,this.trigger("datatweeterror",e)},a=this.attr.livevideoeventid?{livevideoeventid:this.attr.livevideoeventid}:{},r=c.default.merge(e.tweetdata,a);this.post({url:"/i/tweet/create",ismutation:!1,data:r,success:s.bind(this),error:o.bind(this),retryifunavailable:!0})},this.sendtweetwithmedia=function(t,e){var i=this,s=e.tweetboxid,n=e.tweetdata,o=object(a.a)(s),r=function(e){n.media_ids=e.join(","),i.sendtweet(t,{tweetboxid:s,tweetdata:n})},c=function(t){return i.trigger(t.cancelled?"datatweetcancel":"datatweeterror",{message:t.message,tweetboxid:s})};return this.collectmediaitems(o).then(r,c)},this.normalizeerror=function(t){throw t="object"===(void 0===t?"undefined":m(t))?t:{message:t}},this.collectmediaitems=function(t){var e=this;return promise.all(t.map(function(t){return e.mediasrufinalize(t).then(function(i){return e.uploadmetadata(i,t).then(void 0,e.normalizeerror)},e.normalizeerror)}))},this.sendtweetwithcard=function(t,e){var i=this,s=void 0;if(void 0===e.carddata)return this.trigger("datatweeterror",{tweetboxid:s,message:e.clienterrormsg}),promise.reject();s=e.tweetboxid;var n=function(n){var o=e.tweetdata;o.card_uri=n,i.sendtweet(t,{tweetboxid:s,tweetdata:o})},o=function(){return i.trigger("datatweeterror",{tweetboxid:s,message:e.servererrormsg})};return this.createcard(e.carddata).then(n,o)},this.senddirectmessage=function(t,e){this.trigger("datadirectmessagesuccess",e)},this.after("initialize",function(){this.attachchild(r.a,document),this.on("uisendtweet",this.sendtweet),this.on("uisendtweetwithmedia",this.sendtweetwithmedia),this.on("uisendtweetwithcard",this.sendtweetwithcard),this.on("uisenddirectmessage",this.senddirectmessage)})}var n=i("0d4m"),o=i("dbjh"),a=i("wkyg"),r=i("3cjl"),c=i("yzit"),l=i("9np9"),h=i("ibie"),d=i("vtwx"),u=i("jzgn"),p=i("x+k1"),f=i("ajan"),m="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t},g=object(o.default)(s,l.a,d.a,p.a,f.a,h.a,u.a);e.a=g},ww42:function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({itemselector:".tweet[data-dynamic-preroll=true]",maxadrequest:10,tweetidattr:"data-tweet-id",impressionidattr:"data-impression-id",includelongvideos:!1}),this.initialadfetch=function(t,e){var i=this.gettweetinfo(this.select("itemselector"));this.fetchadsandcache(i)},this.timelineadfetch=function(e,i){var s=this.gettweetinfo(t(i.items_html).find(this.attr.itemselector));this.fetchadsandcache(s)},this.gettweetinfo=function(e){var i=this;return e.map(function(e,s){var n=t(s);return{id:n.attr(i.attr.tweetidattr),promoted_id:n.attr(i.attr.impressionidattr)}}).get()},this.ismarketplacetweet=function(t){return!t.promoted_id},this.fetchadsandcache=function(t){var e=this;this.tweetrefreshcache=this.tweetrefreshcache.concat(t.filter(this.ismarketplacetweet)),t.foreach(function(t){e.ismarketplacetweet(t)||(e.amplifytweets[e.adcachekey(t)]=t)}),this.fetchads(t)},this.fetchads=function(t,e){var i=this;if(t !==t.length){var s=void 0;for(s=0;s 0 (function(){return i.updatedynamicvideoadcache(i.amplifytweets)},0),this.fetchads(this.tweetrefreshcache,e.triggerad)},this.after("initialize",function(){this.tweetrefreshcache=[],this.amplifytweets={},this.requestsinflight={},this.on(document,"uirefreshvideoadcache",this.refreshcache),this.on(document,"datagotmoretimelineitems",this.timelineadfetch),this.initialadfetch()})}var n=i("dbjh"),o=i("vtwx"),a=i("3odc"),r=i("rmeb"),c=i("tvrk"),l=object.assign||function(t){for(var e=1;e 0){var s=e.length,n={is_reply_user_count_1:1===s,is_reply_user_count_2:2===s,is_reply_user_count_3:3===s,is_reply_user_count_more_than_3:s>3,reply_user_count_minus_2:s-2,first_reply_user:e[0],second_reply_user:e[1],third_reply_user:e[2]};n["reply_user_count_minus_2_"+a.a.pluralrules.rule_for(n.reply_user_count_minus_2)]=!0,t=c.a.render(n)}}this.select("replyusersselector").html(t)},this.removetooltips=function(){this.$node.attr("data-original-title") .$node.attr("data-original-title","").tooltip("hide"),this.select("replyusersselector").find(this.attr.visibletooltipselector).tooltip("hide")},this.after("settweetboxoverrides",function(){this.canbeselfthreaded=this.overrides.canbeselfthreaded,this.canbeselfthreaded?(this.$node.find(this.attr.replybuttontextselector).text(object(n.default)("tweet")),this.$node.find(this.attr.tweetboxselector).attr("data-placeholder-reply",object(n.default)("add another tweet"))):(this.$node.find(this.attr.replybuttontextselector).text(object(n.default)("reply")),this.$node.find(this.attr.tweetboxselector).attr("data-placeholder-reply",object(n.default)("tweet your reply"))),this.isautopopulatereply=!!this.overrides.id,this.isautopopulatereply .$node.find(this.attr.addtweetbuttonselector).toggleclass("hidden",!this.canbeselfthreaded),this.originalreplyusers=this.overrides.replytousers||[],this.$node.toggleclass("is-reply",this.isautopopulatereply);var t=this.overrides.retweetid||this.overrides.id;t .$node.attr("data-previous-status-id-in-thread",t),this.resetreplyusers()}),this.replyprefixtooltip=function(e,i){var s=this;if(this.screennamesinconversationhash){var o=[],a=i.text.match(h);a [0].replace(d,function(t,e){s.screennamesinconversationhash[e.tolowercase()] .push("@"+e)});var r=o.length?object(n.default)("the reply already includes {{duplicated_mentions}}",{duplicated_mentions:o.join(" ")}):"";r!==this.lastreplytiptext (this.lastreplytiptext=r,t(this.select("replyusersbuttonselector")[0]||this.node).attr("data-original-title",r).toggleclass(this.attr.tooltipclass,!!r).tooltip(r?"show":"hide"))}},this.openreplyusersdialog=function(){this.iseditreplyusersdialogopen=!0,this.trigger("uirequestactivitypopup",{component:"reply_users_popup",contentid:this.overrides.retweetid||this.overrides.id,htmltitle:object(n.default)("replying to"),excludereplyuserids:this.excludereplyuserids})},this.editreplyusersdialogclosed=function(){this.focus(),this.iseditreplyusersdialogopen=!1},this.editreplyusersdialogsave=function(t,e){this.excludereplyuserids=e.excludereplyuserids,this.renderreplyusers()},this.resetreplyusers=function(){this.excludereplyuserids=[],this.lastreplytiptext=null,this.renderreplyusers()},this.after("reset",function(){this.iseditreplyusersdialogopen=!1,this.resetreplyusers()}),this.around("isempty",function(t){return t() !this.iseditreplyusersdialogopen !(this.excludereplyuserids .excludereplyuserids.length)}),this.after("initialize",function(){this.iseditreplyusersdialogopen=!1,this.on("click",{replyusersbuttonselector:this.openreplyusersdialog}),this.on("uitextchanged",this.replyprefixtooltip),this.on("uiactivitypopupclosed",this.editreplyusersdialogclosed),this.on("uiactivitypopupsave",this.editreplyusersdialogsave)})}var n=i("0d4m"),o=i("zvsr"),a=i.n(o),r=i("ihyl"),c=i.n(r),l=object.assign||function(t){for(var e=1;e \n recent \n \n')}),t.pop()),s.s(s.f("suggestions",t,e,1),t,e,0,123,274,"{{ }}") (s.rs(t,e,function(t,e,i){i.s(i.f("is_group",t,e,1),t,e,0,139,184,"{{ }}") (i.rs(t,e,function(t,e,i){i.b(i.rp(" 0},this.itemisblockable=function(t){return t.find(this.attr.actionabletweetselector).length>0||t.is(this.attr.actionabletweetselector)}}var n=i("uxvi");e.a=s},xgwv:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[a.a,o.a]),this.defaultattrs({pagecontainer:"#doc",nestedcontainerselector:".js-stream-item .in-reply-to",showwithscreennameselector:".twitter-atreply",showwithidselector:".show-popup-with-id, .js-user-profile-link",searchtagselector:".twitter-hashtag, .twitter-cashtag",cashtagselector:".twitter-cashtag",geopivotselector:".js-geo-pivot-link",highlightedlabelselector:".highlighteduserlabel-link",itemlinkselector:".twitter-timeline-link,.js-adaptive-photo",mediaforwardselector:".js-adaptive-photo",cardexternallinkselector:".js-card2-external-link",viewmoreitemselector:".view-more-container",insnapbackexperiment:!1,snapbackskipprofilepopup:!1,dismissedtweetselector:".js-dismissed-tweet",dismissedtweetclass:"js-dismissed-tweet",dismissiblecontainerselector:".dismissible-container",threadedconversationtweetselector:".threadedconversation-tweet",newscamerabadgeselector:".adaptivemedia-newscamerabadge"}),this.showprofilepopupwithscreenname=function(e,i){var s=t(e.target).closest(this.attr.showwithscreennameselector).text();"@"===s[0] (s=s.substring(1));var n={screenname:s},o=this.getcarddatafromcontainer(t(e.target));i=r({},this.interactiondata(e,n),o),this.showprofile(e,i)},this.showprofilepopupwithid=function(e,i){var s=this.getcarddatafromcontainer(t(e.target));i=r({},this.interactiondatawithcard(e),s),this.showprofile(e,i)},this.showprofile=function(e,i){"mouseover"===e.type?(e.preventdefault(),e.stopimmediatepropagation(),this.trigger(e.target,"uishowprofilehover",i)):(i.user_id=t(e.target).closest(".twitter-atreply").attr("data-mentioned-user-id")||i.userid,this.trigger(e.target,"uishowprofilenewwindow",i))},this.hidehover=function(e,i){var s=this.getcarddatafromcontainer(t(e.target));i=r({},this.interactiondata(e),s),this.trigger("uihideprofilehover",i)},this.searchtagclick=function(e,i){var s=t(e.target),n=s.closest(this.attr.searchtagselector),o=n.is(this.attr.cashtagselector)?"uicashtagclick":"uihashtagclick",a={query:n.text()};this.trigger(o,this.interactiondata(e,a))},this.iscardurl=function(t){return/^(https?:\/\/)?cards(-staging|-beta)?.twitter.com/.test(t)},this.geopivotclick=function(e,i){var s={placeid:t(i.el).data("place-id")};this.trigger("uigeopivotclick",this.interactiondata(e,s))},this.itemlinkclick=function(e,i){var s=t(e.target),n=s.closest(this.attr.itemlinkselector),o=n.closest(".tweet").data("permalink-path"),a=!!s.parents(".permalink").length,c=void 0,l=n.is(this.attr.mediaforwardselector)?o:"",h=r({url:n.attr("data-expanded-url")||n.attr("href")||l,tcourl:n.attr("href")||l,text:n.text()},this.getcarddatafromcontainer(s));if(("promotion"===h.cardname||"promotions"===h.cardtype) .iscardurl(h.url) !a){e.preventdefault(),c=n.parents(".stream-item").find(".tweet");var d=c.data("permalink-path"),u=c.data("conversation-id");d (document).trigger("uinavigate",r({},i,{href:d,conversation_id:u}))}this.trigger("uiitemlinkclick",this.interactiondata(e,h))},this.cardlinkclick=function(e,i,s){var n=this.getcarddatafromcontainer(t(i.target));this.trigger(e,this.interactiondatawithcard(i,n))},this.getuseridfromelement=function(t){return t.length?t.data("user-id"):null},this.itemselected=function(e,i){var s=this.getcarddatafromcontainer(t(e.target));i.organicexpansion .trigger("uiitemselected",r({},this.interactiondata(e),s))},this.isnested=function(){return this.$node.closest(this.attr.nestedcontainerselector).length},this.modifierkey=function(t){if(t.shiftkey||t.ctrlkey||t.metakey||t.which>1)return!0},this.removetweetsfromuser=function(e,i){var s=this,n=this.$node.find("[data-user-id="+i.userid+"].js-stream-tweet"),o=this;t.each(n,function(e,i){var n=t(i),a=n.attr("data-tweet-id"),r=n.closest(s.attr.threadedconversationtweetselector);r.length||(r=n.parent()),o.removeengagementsontweet(a),r.remove()}),this.trigger("uiremovedsometweets")},this.navigatetoviewmoreurl=function(e){var i=t(e.target),s=void 0;i.find(this.attr.viewmoreitemselector).length (s=i.find(".view-more-link"),this.trigger(s,"uinavigate",{href:s.attr("href")}))},this.removeengagementsontweet=function(t){this.$node.find("[data-item-id="+t+"]").remove()},this.dismisstweet=function(e,i){var s=t(e.target),n=s.closest(this.attr.tweetcontainerselector),o=n.closest(this.attr.dismissiblecontainerselector);n.addclass(this.attr.dismissedtweetclass).fadeout(200,function(){n.remove(),o .remove()}),this.trigger("uitweetdismissed",i)},this.removealldismissedtweets=function(){this.select("dismissedtweetselector").stop().remove()},this.highlightedlabelclick=function(){this.trigger("uihighlightedlabelclick")},this.handlenewscamerabadgeclick=function(e,i){var s=t(i.el).closest("[data-tweet-id]"),n={tweet_id:s.attr("data-tweet-id"),moment_id:s.attr("data-camera-moment-id")};this.trigger("uinewscamerabadgeclick",this.interactiondata(e,n))},this.after("initialize",function(){this.isnested()||(this.on("click",{showwithscreennameselector:this.showprofilepopupwithscreenname,showwithidselector:this.showprofilepopupwithid,searchtagselector:this.searchtagclick,geopivotselector:this.geopivotclick,itemlinkselector:this.itemlinkclick,cardexternallinkselector:this.cardlinkclick.bind(this,"uicardexternallinkclick"),highlightedlabelselector:this.highlightedlabelclick,newscamerabadgeselector:this.handlenewscamerabadgeclick}),this.on("uiitemlinkclick",{itemlinkselector:this.itemlinkclick}),this.on("mouseover",{showwithscreennameselector:this.showprofilepopupwithscreenname,showwithidselector:this.showprofilepopupwithid}),this.on("mouseout",{showwithscreennameselector:this.hidehover,showwithidselector:this.hidehover}),this.on("uihasclickedtweet",this.itemselected),this.on("uiremovetweetsfromuser",this.removetweetsfromuser),this.on("uishortcutenter",this.navigatetoviewmoreurl),this.on("uidismisstweet",this.dismisstweet),this.on(document,"uibeforepagechanged",this.removealldismissedtweets))})}var n=i("q9/c"),o=i("vuuo"),a=i("alsu"),r=object.assign||function(t){for(var e=1;e =0 .scribe({component:"tweet",element:"quick_promote",action:t})},this.adjustiframeheight=function(t){var e={iframeselector:this.attr.quickpromoteiframeselector,isqualified:function(t){return t.height}};this.fitiframeheight(t,e)},this.setupmessagelistener=function(){this.on(window,"message",this.postmessagehandler)},this.after("initialize",function(){this.on("click",{cancelbuttonselector:this.close}),this.on("uidialogopened",this.setupmessagelistener),this.on(document,"uiopenquickpromotedialog",this.opendialog),this.on("uidialogclosed",this.closedialog),this.on(window,"message",this.postmessagehandler)})}var n=i("dbjh"),o=i("uhc7"),a=i("ipyt"),r=i("zvxx"),c=i("3odc"),l=object(n.default)(s,o.a,r.a,a.a,c.a);e.a=l}).call(e,i("4ksj"))},"xq8/":function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[o.a]),this.defaultattrs({hovercontentselector:".hovercard",hovercontainerclasses:"hovercard",showdelay:600,hidedelay:100}),this.preparehover=function(t){this.currentkey!==t .forcehide(!1),this.opentimer=settimeout(this.timersaysok.bind(this),this.attr.showdelay)},this.timersaysok=function(){this.oktoopen=!0,this.queuedopen .queuedopen()},this.showhtml=function(e,i,s,n){var o=this;if(n=n||{},n.id=e,this.currentkey===e .timeout)return cleartimeout(this.timeout),void(this.timeout=null);if(!this.oktoopen)return void(this.queuedopen=function(){this.showhtml(e,i,s,n)});this.queuedopen=null,this.forcehide(),this.currentkey=e,this.$hovercontent=t(i),this.$hovercontent.addclass(this.attr.hovercontainerclasses),this.$node.html(this.$hovercontent),this.pos=this.adjacent(this.$node,t(s),{gravity:"vertical"}),this.$hovercontent.addclass("gravity-"+this.pos.gravity),this.$hovercontent.addclass("weight-"+this.pos.weight),"south"===this.pos.gravity (this.pos.top-=10),this.$node.css({top:this.pos.top,left:this.pos.left});var a=function(){var t=o.pos.top,e=o.pos.top+("north"===o.pos.gravity?20:-20);o.$node.css({top:e,opacity:0}),o.$node.show(),o.$node.animate({top:t,opacity:1},150,"easeoutquad"),o.trigger("uihovershown",n)},r=this.$hovercontent.find("img.banner");r.length>0?r.on("load",a):a()},this.forcehide=function(t){var e=this;(null!==this.currentkey||t) (this.timeout (cleartimeout(this.timeout),this.timeout=null),this.opentimer (cleartimeout(this.opentimer),this.opentimer=null),this.currentkey=null,this.$hovercontent .$node.fadeout({duration:100,complete:function(){e.$hovercontent (e.$hovercontent.remove(),e.$hovercontent=null)},easing:"easeoutquad"}))},this.hide=function(){this.oktoopen=!1,this.queuedopen=null,cleartimeout(this.opentimer),this.opentimer=null,this.timeout (this.timeout),this.timeout=settimeout(this.forcehide.bind(this,!1),this.attr.hidedelay)},this.mouseovercontent=function(){if(this.timeout)return cleartimeout(this.timeout),void(this.timeout=null)},this.after("initialize",function(){this.on(document,"uioverlaynavigate uibeforepagechanged uishortcutesc",this.forcehide.bind(this,!0)),this.on(document,"mouseover",{hovercontentselector:this.mouseovercontent}),this.on(document,"mouseout",{hovercontentselector:this.hide}),t.extend(t.easing,{def:"easeoutquad",easeoutquad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i}})})}var n=i("q9/c"),o=i("zvxx");e.a=s}).call(e,i("4ksj"))},xxli:function(t,e,i){"use strict";function s(){this.attributes({conversation:".dmconversationcontainer",groupavatars:!1,maxcharacters:1e4}),this.openconversation=function(t,e){var i="uirendernewconversationview"===t.type?"uiopennewconversationview":"uiopenconversationview";this.select("conversation").trigger(i,e)},this.after("initialize",function(){this.attachchild(c.a,this.attr.conversation),this.attachchild(a.a,this.attr.conversation),this.attachchild(r.a,this.attr.conversation,{groupavatars:this.attr.groupavatars,maxcharacters:this.attr.maxcharacters}),this.attachchild(l.a,this.attr.conversation),this.on("uirenderconversationview uirendernewconversationview",this.openconversation)})}var n=i("dbjh"),o=i("ajan"),a=i("ufzu"),r=i("vg/a"),c=i("rs19"),l=i("m24/");e.a=object(n.default)(s,o.a)},"y/m3":function(t,e,i){"use strict";(function(t){function s(){this.defaultattrs({top:80,closeonotherdialogopened:!0,topmargin:60,bottommargin:60,containerselector:".momentcapsulesummarylistdialog-listcontainer",itemsselector:".momentcapsulesummarylistdialog-items",capsuleselector:".momentcapsulesummary",createmomentselector:".momentcapsulesummarylistdialog-button--newmoment",spinnerselector:".spinner"}),this.around("open",function(t,e,i){this.tweetid=i.tweet_id,0===this.$items.children().length .trigger("uimomentsgetdialogusermoments"),t()}),this.renderdialogcontents=function(t,e){this.select("spinnerselector").hide(),this.$items.append(e.html),this.$items.trigger("uimomentshasinjectednewitems"),this.trigger("uitriggerellipsis"),this.updatepaginationvalues(e),this.resizedialog()},this.getoldermoments=function(){this.hasmoreitems (this.select("spinnerselector").show(),this.trigger("uimomentsgetdialogusermoments",{before:this.oldestmomentid}))},this.updatepaginationvalues=function(t){this.oldestmomentid=t.oldest_moment_id,this.hasmoreitems=t.has_more_items},this.windowheight=function(){return t(window).height()},this.resizedialog=function(){var t=this.$dialog.height()+this.attr.topmargin+this.attr.bottommargin-this.windowheight();this.$container.css("max-height",this.$container.height()-t)},this.handlecapsuleclick=function(e,i){e.preventdefault(),e.stoppropagation();var s=t(e.target).closest(this.attr.capsuleselector).attr("data-moment-id");this.trigger("uimomentmakeraddtweet",{moment_id:s,tweet_id:this.tweetid,scribecontext:{component:"add_to_moment_dialog"}}),this.close()},this.handlecreatemoment=function(t,e){this.trigger("uimomentmakercreatemoment",{tweet_id:this.tweetid,scribecontext:{component:"add_to_moment_dialog"}}),this.close()},this.after("initialize",function(){this.tweetid=void 0,this.$container=this.select("containerselector"),this.$items=this.select("itemsselector"),this.attachchild(o.a,this.attr.containerselector),this.attachchild(a.a,this.select("containerselector"),{contentselector:this.attr.itemsselector}),this.on(document,"uiopenaddtomomentdialog",this.open),this.on(document,"datamomentsgetdialogusermomentssuccess",this.renderdialogcontents),this.on("click",{capsuleselector:this.handlecapsuleclick,createmomentselector:this.handlecreatemoment}),this.on("uinearthebottom",this.getoldermoments)})}var n=i("dbjh"),o=i("8xx6"),a=i("kjck"),r=i("uhc7"),c=i("ajan");e.a=object(n.default)(r.a,c.a,s)}).call(e,i("4ksj"))},"yg/k":function(t,e,i){(function(e){t.exports=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,51,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" like")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,97,123,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" likes")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jtwp"))},ymkx:function(t,e,i){"use strict";function s(t,e,i){function s(s,n,o){var a=s-p,r=a+n;if(a>=0 >7)*(2 \\]/g,""),t.remote=i.xdm_e.replace(/["' \\]/g,""),t.acl !r(t.acl,t.remote))throw new error("access denied for "+t.remote);return e=[new f.stack.postmessagetransport(t)],e.push(new f.stack.queuebehavior(!0)),e}function d(t){var e,i,s=t.length,n={incoming:function(t,e){this.up.incoming(t,e)},outgoing:function(t,e){this.down.outgoing(t,e)},callback:function(t){this.up.callback(t)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(i=0;i 0 [o-1]instanceof function?(o>1 [o-2]instanceof function?(s={success:arguments[o-2],error:arguments[o-1]},a.params=i.call(arguments,0,o-2)):(s={success:arguments[o-1]},a.params=i.call(arguments,0,o-1)),l[""+ ++c]=s,a.id=c):a.params=i.call(arguments,0),t.namedparams ===a.params.length (a.params=a.params[0]),n(a)}}function a(t,e,o,a){if(!o)return void(e ({id:e,error:{code:-32601,message:"procedure not found."}}));var r,c;e?(r=function(t){r=w,n({id:e,result:t})},c=function(t,i){c=w;var s={id:e,error:{code:-32099,message:t}};i (s.error.data=i),n(s)}):r=c=w,i(a)||(a=[a]);try{var l=o.method.apply(o.scope,a.concat([r,c]));s(l)||r(l)}catch(t){c(t.message)}}var r,c=0,l={};return r={incoming:function(t,i){var s,o=json.parse(t);o.method?e.handle?e.handle(o,n):a(o.method,o.id,e.local[o.method],o.params):(s=l[o.id],o.error .error?s.error(o.error):s.success .success(o.result),delete l[o.id])},init:function(){if(e.remote)for(var i in e.remote)e.remote.hasownproperty(i) (t[i]=o(e.remote[i],i));r.down.init()},destroy:function(){for(var i in e.remote)e.remote.hasownproperty(i) .hasownproperty(i) t[i];r.down.destroy()}}},t.exports=f}}(window)},z8pp:function(t,e,i){"use strict";(function(t){function s(e){this.attr={id:null,ttl_ms:216e5,limit:4,version:4,storageadjacencylist:"topicsadjacencylist",storagehash:"topicshash",storageversion:"topicsversion",prefetchlimit:500,localqueriesenabled:!1,remotequeriesenabled:!1,remotepath:"/i/search/typeahead.json",remotetype:"topics",prefetchpath:"/i/search/typeahead.json",prefetchtype:"topics",basepath:"/search?",modepathmap:{images:"f=images",videos:"f=videos",news:"f=news"},querysourcepathtypeahead:"src=tyah"},this.attr=r.default.merge(this.attr,e),this.after=t.noop,this.defaultattrs=t.noop,a.default.mixin(this,[o.a,c.a]),this.getlocalsuggestions=function(t,e){e([])},this.gettopicobjectsfromstrings=function(t){var e=[];return t.foreach(function(t){var i=this.topicshash[t];i .push(i)},this),e},this.requiresremotesuggestions=function(t){var e=n.a.getfirstchar(t.query),i=t.topicsmuststartwithhashtag ===l.indexof(e);return!(!t||!t.query||i) .attr.remotequeriesenabled},this.processremotesuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.foreach(function(t){var e=t.topic||t.hashtag;n[e.tolowercase()]=!0},this),e[this.attr.remotetype] [this.attr.remotetype].foreach(function(t){var e=t.topic||t.hashtag;t.searchpath=this.constructsearchpath(e,t.filter),n[e.tolowercase()]||s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructsearchpath=function(t,e){var i=["q="+encodeuricomponent(t)],s=e?this.attr.modepathmap[e]:"";return s .push(s),i.push(this.attr.querysourcepathtypeahead),this.attr.basepath+i.join(" ")},this.initialize=function(){},this.initialize()}var n=i("pfsh"),o=i("vtwx"),a=i("q9/c"),r=i("yzit"),c=i("8xkx"),l=["$","#",""];e.a=s}).call(e,i("4ksj"))},zape:function(t,e,i){"use strict";function s(){this.defaultattrs({dropdownid:"swift_autocomplete_dropdown_goto_user",inputselector:"input.username-input",usernameformselector:"form.goto-user-form"}),this.focus=function(){this.select("inputselector").focus()},this.gotouser=function(t,e){if(!e||!e.dropdownid||e.dropdownid===this.attr.dropdownid){if(t.preventdefault(),e .item)return this.select("inputselector").val(e.item.screen_name),void this.trigger("uinavigate",{href:e.href});var i=this.select("inputselector").val().trim();"@"===i.substr(0,1) (i=i.substr(1)),this.trigger("uinavigate",{href:"/"+i})}},this.reset=function(){this.select("inputselector").val(""),this.select("inputselector").blur(),this.trigger(this.select("inputselector"),"uihideautocomplete")},this.after("initialize",function(){this.on(document,"uishortcutshowgotouser",this.open),this.on("uidialogopened",this.focus),this.on("uidialogclosed",this.reset),this.on(this.select("usernameformselector"),"submit",this.gotouser),this.on("uitypeaheaditemselected uitypeaheadsubmitquery",this.gotouser),a.a.attachto(this.$node,{inputselector:this.attr.inputselector}),o.a.attachto(this.$node,{inputselector:this.attr.inputselector,autocompleteaccounts:!1,datasourcerenders:[["accounts",["accounts"]]],deciders:this.attr.typeaheaddata,eventdata:{scribecontext:{component:"goto_user_dialog"}}})})}var n=i("dbjh"),o=i("ccv7"),a=i("args"),r=i("uhc7"),c=object(n.default)(s,r.a);e.a=c},zibt:function(t,e,i){"use strict";function s(){this.defaultattrs({countrycodedisplayselector:"#country_code_display",countrycodeselector:"#country_code",countrynameselector:"#device_country_code",phonenumberselector:"#phone_number",pincodeselector:"#numeric_pin",pincodeselectorraw:"#numeric_pin_raw",submitregisterbuttonselector:"#send_verification_pin",submitverifybuttonselector:"#device_verify"}),this.updatecountrycode=function(t,e){var i=e.value;this.select("countrycodedisplayselector").html("+"+i),this.select("countrycodeselector").val(i),""!==this.select("phonenumberselector").val() .callbackifvalidphonenumber(this.clearinvalidphonemessage)},this.callbackifvalidphonenumber=function(t){var e=this.select("countrycodeselector").val(),i=this.select("phonenumberselector").val();this.validatephonenumber(e,i)?t.call(this):this.showinvalidphonemessage(e)},this.showinvalidphonemessage=function(t){var e=object(n.default)("us and canadian phone numbers must have 11 digits."),i=object(n.default)("this appears to be an invalid phone number."),s="1"===t?e:i;s+=object(n.default)(" please enter a valid phone number."),this.trigger("uialertbanner",{message:s})},this.clearinvalidphonemessage=function(){this.trigger("uialertbannerclose")},this.validatephonenumber=function(t,e){var i=/\(*\)*\+*-*#* */g,s=e.replace(i,""),n=/^\d{11}$/;return"1"!==t (n=/^\d{10,15}$/),n.test(t+s)},this.enableifvalue=function(t){return function(e,i){var s=e.target||e.srcelement;this.select(t).prop("disabled",""===s.value)}},this.strippin=function(t){return t.replace(/[^a-za-z0-9]/g,"")},this.after("initialize",function(){o.a.attachto(this.attr.countrynameselector),this.on(this.attr.countrynameselector,"uiitemselect",this.updatecountrycode),this.on("input",{phonenumberselector:this.enableifvalue("submitregisterbuttonselector"),pincodeselectorraw:this.enableifvalue("submitverifybuttonselector")})})}var n=i("0d4m"),o=i("lbzy");e.a=s},zlk3:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("opvs").default,o={emojified_name:i("nsfj")},a=n(o),r=new e.template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("reply to "),s.s(s.f("in_reply_to_user",t,e,1),t,e,0,30,49,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" \n'),s.s(s.f("is_above_timeline",t,e,1),t,e,0,224,272,"{{ }}") (s.rs(t,e,function(t,e,i){i.b(i.rp(" "),s.fl()},partials:{" \n \n'),s.b(s.rp(" \n add tweet to collection \n \n \n \n \n \n'),s.b(s.rp(" cancel \n save changes \n \n \n \n'),s.fl()},partials:{" =n.a.getwindow().scrolltop()+this.topbarheight(),o=e.pos.top+e.attachbox.height+e.overlaybox.height e.winbox.width?"right":"left":e.pos.left+e.attachbox.width-e.overlaybox.width math.max(e.winbox.height,e.bodybox.height)?i.weight="top":i.weight="center"),i.weight=i.weight||e.weight;var n=e.pos.left+e.attachbox.width+e.overlaybox.width =0;return i.validfit=o||n,"horizontal"===e.gravity (i.gravity=e.pos.left+e.attachbox.width/2>e.winbox.width/2?"east":"west"),i.gravity=i.gravity||e.gravity,"relative"===e.position (i.top=0),"center"===i.weight?i.top=e.pos.top+e.attachbox.height/2-e.overlaybox.height/2:"bottom"===i.weight (i.top=e.pos.top-e.overlaybox.height+e.attachbox.height),i.left="west"===i.gravity?e.pos.left+e.attachbox.width:e.pos.left-e.overlaybox.width,i},this.getbody=function(){return t("body")},this.topbarheight=function(){var e=t(".topbar, .streamstopbar").outerheight()||0;return this.attr.additionaltopbarpositionselector (e+=t(this.attr.additionaltopbarpositionselector).outerheight()||0),e}}var n=i("v3w7");e.a=s}).call(e,i("4ksj"))},zwio:function(t,e,i){"use strict";function s(t,e,i){return e in t?object.defineproperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){this.attributes({threads:{name:"threads",keypath:"threadid",indexes:[{name:"timestamp",keypath:"timestamp",unique:!0}]},version:2202,nameprefix:"self_thread_tweets_db",localstoragenameprefix:"self_thread_mark_deletion",localstoragekey:"marked_deletion_thread_ids",updatedebounceinterval:800}),this.todbtweets=function(){var t=[u({},h.a.threaddata,{threadid:this.threadid,timestamp:date.now()})];return s({},this.attr.threads.name,t)},this.fromdbtweets=function(){return{tweets:((arguments.length>0 0!==arguments[0]?arguments[0]:{}).thread||[]).map(function(t){return{tweettext:t.tweetdata .tweetdata.status||""}})}},this.createthread=function(t,e){var i=this,s="object"===(void 0===e?"undefined":d(e)) .previousstatusidinthread;if(void 0===this.threadid !s)return this.threadid=date.now(),this.dbopenpromise().then(function(t){return t.add(i.todbtweets()).then(function(){return t.close()},function(){return t.close()})})},this.updatethread=function(){var t=this;return this.dbopenpromise().then(function(e){return e.put(t.todbtweets()).then(function(){return e.close()},function(){return e.close()})})},this.deletethread=function(){var t=this;if(void 0!==this.threadid)return this.dbopenpromise().then(function(e){return e.destroy(t.attr.threads.name,t.threadid).then(function(){return e.close()},function(){return e.close()})}).then(function(){return delete t.threadid})},this.cleardatabase=function(){return this.dbopenpromise().then(function(t){return t.clear().then(function(){return t.close()},function(){return t.close()})})},this.readinitialdata=function(t){var e=this,i=l.a.keyrange.upperbound(date.now());return t.getall(this.attr.threads.name,"timestamp",i).then(function(t){(t||[]).length>0 .trigger(document,"uitweetstormdbdata",e.fromdbtweets(t.pop()))})},this.markthreaddeletion=function(){if(void 0!==this.threadid){var t=new c.a(this.storagename),e=t.getitem(this.attr.localstoragekey)||[];e.push(this.threadid),t.setitem(this.attr.localstoragekey,e)}},this.deletemarkedthreads=function(t){var e=this,i=new c.a(this.storagename),s=i.getitem(this.attr.localstoragekey)||[],n=s.map(function(i){return t.destroy(e.attr.threads.name,i)});return i.removeitem(this.attr.localstoragekey),promise.all(n)},this.initialsetup=function(){var t=this;return this.dbopenpromise().then(function(e){t.deletemarkedthreads(e).then(function(){return t.readinitialdata(e)}).then(function(){return e.close()},function(){return e.close()}),t.on(document,"uitweetstorminit uitweetstormrestore",t.createthread),t.on(document,"uitweetstormcleardb",t.cleardatabase),t.on(document,"uitweetstormremovedbthread",t.deletethread),t.on(document,"uitweetstormdbupdate",r.default.debounce(t.updatethread,t.attr.updatedebounceinterval)),t.on(window,"beforeunload uibeforeunload",t.markthreaddeletion)}).catch(function(){})},this.dbopenpromise=function(){return l.a.open(this.dbname,this.attr.version,[this.attr.threads])},this.after("initialize",function(){this.dbname=this.attr.nameprefix+"_"+a.a.user.id,this.storagename=this.attr.localstoragenameprefix+"_"+a.a.user.id,this.on(document,"uiswiftloaded",this.initialsetup)})}var o=i("dbjh"),a=i("iamj"),r=i("yzit"),c=i("wodx"),l=i("b6cp"),h=i("a0ja"),d="function"==typeof symbol "symbol"==typeof symbol.iterator?function(t){return typeof t}:function(t){return t "function"==typeof symbol .constructor===symbol !==symbol.prototype?"symbol":typeof t},u=object.assign||function(t){for(var e=1;e 