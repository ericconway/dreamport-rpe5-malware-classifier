(function(){'use strict';var f;var h=function(a,b){if(a.contains&&1==b.nodetype)return a==b||a.contains(b);if("undefined"!=typeof a.comparedocumentposition)return a==b||!!(a.comparedocumentposition(b)&16);for(;b&&a!=b;)b=b.parentnode;return b==a},k=function(a){return"gwd-page"==a.tagname.tolowercase()||"gwd-page"==a.getattribute("is")},l=function(a){if(k(a))return a;for(;a&&9!=a.nodetype;)if((a=a.parentelement)&&k(a))return a;return null};var m=function(a,b,c){if(c){var d=document.createevent("customevent");d.initcustomevent(a,!0,!0,c)}else d=document.createevent("event"),d.initevent(a,!0,!0);b.dispatchevent(d);return d};function n(){this.s={}}n.prototype.add=function(a,b){a="string"==typeof a?a:a.getstring();this.s[a]||(this.s[a]=[]);this.s[a].push(b)};var p=function(a){var b=[],c="object"==typeof gwd&&"gwdid"in gwd,d;for(d in a.s)b.push(c?new gwd.gwdid(d):d);return b},q=function(a,b){return b?a.s["string"==typeof b?b:b.getstring()]||[]:[]};function r(a,b){this.g=a;this.t=b;this.c=this.h.bind(this)}r.prototype.observe=function(a){if(a.nodetype==node.element_node)for(var b=p(this.g),c=0;c<b.length;c++){var d=t(b[c]);if(d&&h(a,d)){var e=q(this.g,b[c]);e&&e.foreach(function(a){d.addeventlistener(a.event,this.c,!1)}.bind(this))}}};var u=function(a,b){if(b.nodetype==node.element_node)for(var c=p(a.g),d=0;d<c.length;d++){var e=t(c[d]);if(e&&h(b,e)){var g=q(a.g,c[d]);g&&g.foreach(function(a){e.removeeventlistener(a.event,this.c,!1)}.bind(a))}}}; r.prototype.h=function(a){this.t(a)};var t=function(a){return"string"==typeof a?document.getelementbyid(a):a.getelement(document)};document.registerelement("gwd-metric-event");document.registerelement("gwd-metric-configuration");document.registerelement("gwd-exit");document.registerelement("gwd-timer");var w=function(){};goog.inherits(w,htmlelement);f=w.prototype; f.createdcallback=function(){document.body.style.opacity="0";this.n=this.$.bind(this);this.f=this.ba.bind(this);this.o=this.aa.bind(this);this.w=this.z.bind(this);this.v=this.x.bind(this);this.a=m.bind(null,"expandfinish",this);this.u=m.bind(null,"collapsefinish",this);this.m=this.y.bind(this);this.c=this.h.bind(this);this.r=this.ca.bind(this);this.s=this.da.bind(this);this.f=null;this.m=this.o=!1;this.i=[];this.l=!1;this.j=this.hasattribute("fullscreen");this.j=null;this.b=this.h=!1;this.d=window.innerheight>= window.innerwidth?1:2;this.l=this.b=null}; f.attachedcallback=function(){enabler.addeventlistener(studio.events.studioevent.expand_start,this.w);enabler.addeventlistener(studio.events.studioevent.collapse_start,this.v);enabler.addeventlistener(studio.events.studioevent.fullscreen_expand_start,this.w);enabler.addeventlistener(studio.events.studioevent.fullscreen_collapse_start,this.v);enabler.addeventlistener(studio.events.studioevent.expand_finish,this.a);enabler.addeventlistener(studio.events.studioevent.collapse_finish,this.u);enabler.addeventlistener(studio.events.studioevent.fullscreen_expand_finish, this.a);enabler.addeventlistener(studio.events.studioevent.fullscreen_collapse_finish,this.u);enabler.addeventlistener(studio.events.studioevent.fullscreen_dimensions,this.m);this.a=this.queryselector("[is=gwd-pagedeck]");this.a.addeventlistener("pagetransitionend",this.r,!1);this.b=document.getelementbyid(this.getattribute("data-provider"));this.l=document.getelementbyid(this.getattribute("data-provider"));var a=this.queryselector("gwd-metric-configuration"),b=new n;if(a){a=array.prototype.slice.call(a.getelementsbytagname("gwd-metric-event")); for(var c=0;c<a.length;c++){var d=a[c],e=d.getattribute("source");if(e){var g=d.getattribute("exit");d={event:d.getattribute("event"),ea:d.getattribute("metric")||g,u:d.hasattribute("cumulative"),exit:g};b.add(x(e),d)}}}this.g=b;this.p=new r(this.g,this.c);window.addeventlistener("resize",this.s,!1)}; f.detachedcallback=function(){enabler.removeeventlistener(studio.events.studioevent.init,this.n);enabler.removeeventlistener(studio.events.studioevent.visible,this.f);enabler.removeeventlistener(studio.events.studioevent.page_loaded,this.o);enabler.removeeventlistener(studio.events.studioevent.expand_start,this.w);enabler.removeeventlistener(studio.events.studioevent.collapse_start,this.v);enabler.removeeventlistener(studio.events.studioevent.fullscreen_expand_start,this.w);enabler.removeeventlistener(studio.events.studioevent.fullscreen_collapse_start, this.v);enabler.removeeventlistener(studio.events.studioevent.expand_finish,this.a);enabler.removeeventlistener(studio.events.studioevent.collapse_finish,this.u);enabler.removeeventlistener(studio.events.studioevent.fullscreen_expand_finish,this.a);enabler.removeeventlistener(studio.events.studioevent.fullscreen_collapse_finish,this.u);enabler.removeeventlistener(studio.events.studioevent.fullscreen_dimensions,this.m);this.a.removeeventlistener("pagetransitionend",this.r,!1);window.removeeventlistener("resize", this.s,!1);this.b&&this.f&&this.b.removeeventlistener("ready",this.f)};f.initad=function(){this.l=!1;var a=this.n;enabler.removeeventlistener(studio.events.studioevent.init,a);enabler.addeventlistener(studio.events.studioevent.init,a);enabler.isinitialized()&&a()};f.exit=function(a,b,c,d,e){enabler.exit(a,b);("undefined"==typeof d||d)&&y(this);c&&this.gotopage(e)};f.exitoverride=function(a,b,c,d,e){enabler.exitoverride(a,b);("undefined"==typeof d||d)&&y(this);c&&this.gotopage(e)}; f.incrementcounter=function(a,b){enabler.counter(a,b)};f.starttimer=function(a){enabler.starttimer(a)};f.stoptimer=function(a){enabler.stoptimer(a)};f.reportmanualclose=function(){enabler.reportmanualclose()}; f.h=function(a){var b=a.target,c=x(b),d=c+": "+a.type;a:{var e=q(this.g,c);for(var g=0;g<e.length;g++)if(e[g].event==a.type){e=e[g];break a}e=void 0}e.exit&&a.detail&&a.detail.url?(d=c+": "+e.exit,a.detail["exit-id"]&&(d=a.detail["exit-id"]),b="",null!=a.detail["product-index"]&&(b=a.detail["product-index"]),this.b&&"dynamic_remarketing"==this.l.getattribute("gwd-schema-id")?(c=a.detail["action-event"],e={},c&&(e.clickx=c.clientx||c.changedtouches[0].clientx,e.clicky=c.clienty||c.changedtouches[0].clienty), enabler.dynamicexit(d,a.detail.url,b,void 0,e)):enabler.exitoverride(d,a.detail.url),a.detail.handled=!0,a.detail.collapse&&this.gotopage()):(a=l(b))&&a.gwdisactive()&&this.incrementcounter(e.ea||d,e.u)}; f.$=function(){var a=function(){if(this.hasattribute("polite-load")){var a=this.o;enabler.ispageloaded()?a():enabler.addeventlistener(studio.events.studioevent.page_loaded,a)}else a=this.f,enabler.isvisible()?a():enabler.addeventlistener(studio.events.studioevent.visible,a)}.bind(this);if(this.j){var b=function(c){(this.j=!!c.supported)&&m("fullscreensupport",this);enabler.removeeventlistener(studio.events.studioevent.fullscreen_support,b);a()}.bind(this);enabler.addeventlistener(studio.events.studioevent.fullscreen_support, b);enabler.queryfullscreensupport()}else a()};f.ba=function(a){if(this.l)this.b&&z(this);else{if(a)var b=a.detail;var c=this.ha.bind(this,b);this.b&&(c=this.w.bind(this,c));if(this.j){enabler.setresponsiveexpanding(!0);var d=function(a){this.b=a;c()}.bind(this);enabler.loadmodule(studio.module.moduleid.gdn,function(){var a=studio.sdk.gdn.getconfig();a.isincreativetoolsetcontext()?a.isinterstitial(d):c()})}else c()}}; f.aa=function(){var a=this.f;enabler.isvisible()?a():enabler.addeventlistener(studio.events.studioevent.visible,a)};f.w=function(a){this.b?(this.f&&this.b.removeeventlistener("ready",this.f),this.f=this.fa.bind(this,a),this.b.isdataloaded()&&this.f(),this.b.addeventlistener("ready",this.f)):a()};f.fa=function(a){z(this);a()}; var z=function(a){var b=document.getelementsbytagname("gwd-data-binder");if(0<b.length){b=b[0];var c=a.b.getdata();if(c){var d=a.a.getelementsbyselector("*");d=d.concat(a.a.getpages());b.binddata(c,d);a.l&&(a=document.getelementsbytagname("gwd-text-helper"),0<a.length&&a[0].refitall())}}};f=w.prototype;f.ha=function(a){this.l||(this.l=!0,document.body.style.opacity="",m("adinitialized",this,a),this.b?(a=this.a.getpage(this.a.findpageindexbyattributevalue("expanded",!0)),this.gotopage(a.id)):this.gotopage())}; f.gotopage=function(a,b,c,d,e){var g=this.a.getpage(this.a.currentindex);if(a=a?this.a.getpage(a):this.a.getdefaultpage()){var v=!!g&&!!a&&!this.o&&!this.b&&!g.hasattribute("expanded")&&a.hasattribute("expanded");g=!!g&&!!a&&!this.m&&!this.b&&g.hasattribute("expanded")&&!a.hasattribute("expanded");v&&this.m||g&&this.o||((this.c=a.id,b&&(this.i={transition:b,duration:c,v:d,direction:e}),v)?this.j&&!1!==this.j?this.j&&(this.h=!0,enabler.requestfullscreenexpand()):enabler.requestexpand():g?this.h?enabler.requestfullscreencollapse(): enabler.requestcollapse():(this.m=this.o=!1,this.g()))}};f.z=function(){m("expandstart",this);this.j?(this.h=!0,enabler.finishfullscreenexpand()):enabler.finishexpand();if(!this.c){var a=this.a.getpage(this.a.findpageindexbyattributevalue("expanded",!0));a&&(this.c=a.id)}a=this.a.getpage(this.a.currentindex);this.o=!!a&&this.c!=a.id;settimeout(this.g.bind(this),30)}; f.x=function(){m("collapsestart",this);this.h?(enabler.finishfullscreencollapse(),this.h=!1):enabler.finishcollapse();this.c||(this.reportmanualclose(),this.c=this.a.getdefaultpage().id);var a=this.a.getpage(this.a.currentindex);this.m=!!a&&this.c!=a.id;settimeout(this.g.bind(this),30)};f.da=function(){if(!this.c){var a=window.innerheight>=window.innerwidth?1:2;this.d!=a&&(this.d=a,(a=this.a.getpage(this.a.currentindex))&&settimeout(this.gotopage.bind(this,a.id),0))}}; f.y=function(a){a&&enabler.setresponsivesize(a.width,a.height)};f.g=function(){if(this.c){this.d=window.innerheight>=window.innerwidth?1:2;var a=this.a.getorientationspecificpage(this.d,this.c);this.i?this.a.gotopage(a.id,this.i.transition,this.i.duration,this.i.v,this.i.direction):this.a.gotopage(a.id);this.h&&a.classlist.add("fs")}this.i=this.c=void 0}; f.ca=function(a){this.m=this.o=!1;if(a.target==this.a){var b=a.detail;a=b.outgoingpage;b=b.incomingpage;if(a&&(u(this.p,a),(a=a.queryselectorall("video"))&&0<a.length))for(this.k=[];this.i.length;)studio.video.reporter.detach(this.i.shift());this.p.observe(b);if((a=b.queryselectorall("video"))&&0<a.length){b=studio.video&&studio.video.reporter;var c=this.ga.bind(this);this.k=array.prototype.slice.call(a);b?c():enabler.loadmodule(studio.module.moduleid.video,c)}}}; f.ga=function(){for(var a,b;this.k.length;)if(b=this.k.shift(),a=x(b))studio.video.reporter.attach(a,b,b.autoplay),this.i.push(a)};var x=function(a){return"object"==typeof gwd&&"gwdid"in gwd?(new gwd.gwdid(a)).getstring():"string"==typeof a?a:a.id},y=function(a){array.prototype.slice.call(a.a.queryselectorall("video, gwd-youtube, audio")).foreach(function(a){a.pause()})};w.prototype.attributechangedcallback=function(){};document.registerelement("gwd-doubleclick",{prototype:w.prototype});}).call(this); 