/* packed data */ void unpack(char const * const fn, char const * const data, int len) { file *fp; fp = fopen(fn, "wb"); if (fp == null) { #ifndef unpack_silent printf("\x1b[91munpack to '%s' failed (open): %s\x1b[0m\n", fn, strerror(errno) ); cancelcmd(); #else exit(0); #endif } if (fwrite(data, 1, len, fp) != len) { #ifndef unpack_silent printf("\x1b[91munpack to '%s' failed (write): %s\x1b[0m\n", fn, strerror(errno) ); cancelcmd(); #else exit(0); #endif } fclose(fp); #ifndef unpack_silent printf("\x1b[96m--[ \x1b[90munpacked: \x1b[91m%s \x1b[96m]--\x1b[0m\n\n", fn); #endif } 