import collections
import os
import sys
import time


__version__ = '0.1'
__enabled__ = False  # change this to True 


def run(filepath='', fileinfo=None, temppath='./temp', **kwargs):
    start_time = time.time()
    with open(filepath, 'rb') as f:
        content = f.read()

    # namespace the temp path
    temppath = os.path.join(temppath, 'strings')
    if not os.path.exists(temppath):
        os.makedirs(temppath)

    features = collections.Counter()

    print("    %s produced %d features in %0.1f seconds" % (__name__, len(features), time.time()-start_time))
    return features


def main(argv):
    if len(argv) != 2:
        print('Usage: %s filepath' % argv[0])
        exit(-1)

    path = argv[1]
    if os.path.isfile(path):
        features = run(path)
        for f in features:
            print(f)
    elif os.path.isdir(path):
        for root, dirs, files in os.walk(path):
            for file in files:
                filepath = os.path.join(root, file)
                print('')
                print(filepath)
                features = run(filepath)
                for f in features:
                    print(f)


if __name__ == '__main__':
    main(sys.argv)

